<html>
<head>
<title>uri.all.js.map</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<style type="text/css">
.s0 { color: #a9b7c6;}
.s1 { color: #6a8759;}
.s2 { color: #6897bb; font-style: italic;}
.s3 { color: #cc7832; font-style: italic;}
</style>
</head>
<body bgcolor="#2b2b2b">
<table CELLSPACING=0 CELLPADDING=5 COLS=1 WIDTH="100%" BGCOLOR="#606060" >
<tr><td><center>
<font face="Arial, Helvetica" color="#000000">
uri.all.js.map</font>
</center></td></tr></table>
<pre><span class="s0">{</span><span class="s1">&quot;version&quot;</span><span class="s0">:</span><span class="s2">3</span><span class="s0">,</span><span class="s1">&quot;file&quot;</span><span class="s0">:</span><span class="s1">&quot;uri.all.js&quot;</span><span class="s0">,</span><span class="s1">&quot;sources&quot;</span><span class="s0">:[</span><span class="s1">&quot;../../src/index.ts&quot;</span><span class="s0">,</span><span class="s1">&quot;../../src/schemes/urn-uuid.ts&quot;</span><span class="s0">,</span><span class="s1">&quot;../../src/schemes/urn.ts&quot;</span><span class="s0">,</span><span class="s1">&quot;../../src/schemes/mailto.ts&quot;</span><span class="s0">,</span><span class="s1">&quot;../../src/schemes/wss.ts&quot;</span><span class="s0">,</span><span class="s1">&quot;../../src/schemes/ws.ts&quot;</span><span class="s0">,</span><span class="s1">&quot;../../src/schemes/https.ts&quot;</span><span class="s0">,</span><span class="s1">&quot;../../src/schemes/http.ts&quot;</span><span class="s0">,</span><span class="s1">&quot;../../src/uri.ts&quot;</span><span class="s0">,</span><span class="s1">&quot;../../node_modules/punycode/punycode.es6.js&quot;</span><span class="s0">,</span><span class="s1">&quot;../../src/regexps-iri.ts&quot;</span><span class="s0">,</span><span class="s1">&quot;../../src/regexps-uri.ts&quot;</span><span class="s0">,</span><span class="s1">&quot;../../src/util.ts&quot;</span><span class="s0">],</span><span class="s1">&quot;sourcesContent&quot;</span><span class="s0">:[</span><span class="s1">&quot;import { SCHEMES } from </span><span class="s3">\&quot;</span><span class="s1">./uri</span><span class="s3">\&quot;</span><span class="s1">;</span><span class="s3">\n\n</span><span class="s1">import http from </span><span class="s3">\&quot;</span><span class="s1">./schemes/http</span><span class="s3">\&quot;</span><span class="s1">;</span><span class="s3">\n</span><span class="s1">SCHEMES[http.scheme] = http;</span><span class="s3">\n\n</span><span class="s1">import https from </span><span class="s3">\&quot;</span><span class="s1">./schemes/https</span><span class="s3">\&quot;</span><span class="s1">;</span><span class="s3">\n</span><span class="s1">SCHEMES[https.scheme] = https;</span><span class="s3">\n\n</span><span class="s1">import ws from </span><span class="s3">\&quot;</span><span class="s1">./schemes/ws</span><span class="s3">\&quot;</span><span class="s1">;</span><span class="s3">\n</span><span class="s1">SCHEMES[ws.scheme] = ws;</span><span class="s3">\n\n</span><span class="s1">import wss from </span><span class="s3">\&quot;</span><span class="s1">./schemes/wss</span><span class="s3">\&quot;</span><span class="s1">;</span><span class="s3">\n</span><span class="s1">SCHEMES[wss.scheme] = wss;</span><span class="s3">\n\n</span><span class="s1">import mailto from </span><span class="s3">\&quot;</span><span class="s1">./schemes/mailto</span><span class="s3">\&quot;</span><span class="s1">;</span><span class="s3">\n</span><span class="s1">SCHEMES[mailto.scheme] = mailto;</span><span class="s3">\n\n</span><span class="s1">import urn from </span><span class="s3">\&quot;</span><span class="s1">./schemes/urn</span><span class="s3">\&quot;</span><span class="s1">;</span><span class="s3">\n</span><span class="s1">SCHEMES[urn.scheme] = urn;</span><span class="s3">\n\n</span><span class="s1">import uuid from </span><span class="s3">\&quot;</span><span class="s1">./schemes/urn-uuid</span><span class="s3">\&quot;</span><span class="s1">;</span><span class="s3">\n</span><span class="s1">SCHEMES[uuid.scheme] = uuid;</span><span class="s3">\n\n</span><span class="s1">export * from </span><span class="s3">\&quot;</span><span class="s1">./uri</span><span class="s3">\&quot;</span><span class="s1">;</span><span class="s3">\n</span><span class="s1">&quot;</span><span class="s0">,</span><span class="s1">&quot;import { URISchemeHandler, URIComponents, URIOptions } from </span><span class="s3">\&quot;</span><span class="s1">../uri</span><span class="s3">\&quot;</span><span class="s1">;</span><span class="s3">\n</span><span class="s1">import { URNComponents } from </span><span class="s3">\&quot;</span><span class="s1">./urn</span><span class="s3">\&quot;</span><span class="s1">;</span><span class="s3">\n</span><span class="s1">import { SCHEMES } from </span><span class="s3">\&quot;</span><span class="s1">../uri</span><span class="s3">\&quot;</span><span class="s1">;</span><span class="s3">\n\n</span><span class="s1">export interface UUIDComponents extends URNComponents {</span><span class="s3">\n\t</span><span class="s1">uuid?: string;</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">const UUID = /^[0-9A-Fa-f]{8}(?:</span><span class="s3">\\</span><span class="s1">-[0-9A-Fa-f]{4}){3}</span><span class="s3">\\</span><span class="s1">-[0-9A-Fa-f]{12}$/;</span><span class="s3">\n</span><span class="s1">const UUID_PARSE = /^[0-9A-Fa-f</span><span class="s3">\\</span><span class="s1">-]{36}/;</span><span class="s3">\n\n</span><span class="s1">//RFC 4122</span><span class="s3">\n</span><span class="s1">const handler:URISchemeHandler&lt;UUIDComponents, URIOptions, URNComponents&gt; = {</span><span class="s3">\n\t</span><span class="s1">scheme : </span><span class="s3">\&quot;</span><span class="s1">urn:uuid</span><span class="s3">\&quot;</span><span class="s1">,</span><span class="s3">\n\n\t</span><span class="s1">parse : function (urnComponents:URNComponents, options:URIOptions):UUIDComponents {</span><span class="s3">\n\t\t</span><span class="s1">const uuidComponents = urnComponents as UUIDComponents;</span><span class="s3">\n\t\t</span><span class="s1">uuidComponents.uuid = uuidComponents.nss;</span><span class="s3">\n\t\t</span><span class="s1">uuidComponents.nss = undefined;</span><span class="s3">\n\n\t\t</span><span class="s1">if (!options.tolerant &amp;&amp; (!uuidComponents.uuid || !uuidComponents.uuid.match(UUID))) {</span><span class="s3">\n\t\t\t</span><span class="s1">uuidComponents.error = uuidComponents.error || </span><span class="s3">\&quot;</span><span class="s1">UUID is not valid.</span><span class="s3">\&quot;</span><span class="s1">;</span><span class="s3">\n\t\t</span><span class="s1">}</span><span class="s3">\n\n\t\t</span><span class="s1">return uuidComponents;</span><span class="s3">\n\t</span><span class="s1">},</span><span class="s3">\n\n\t</span><span class="s1">serialize : function (uuidComponents:UUIDComponents, options:URIOptions):URNComponents {</span><span class="s3">\n\t\t</span><span class="s1">const urnComponents = uuidComponents as URNComponents;</span><span class="s3">\n\t\t</span><span class="s1">//normalize UUID</span><span class="s3">\n\t\t</span><span class="s1">urnComponents.nss = (uuidComponents.uuid || </span><span class="s3">\&quot;\&quot;</span><span class="s1">).toLowerCase();</span><span class="s3">\n\t\t</span><span class="s1">return urnComponents;</span><span class="s3">\n\t</span><span class="s1">},</span><span class="s3">\n</span><span class="s1">};</span><span class="s3">\n\n</span><span class="s1">export default handler;&quot;</span><span class="s0">,</span><span class="s1">&quot;import { URISchemeHandler, URIComponents, URIOptions } from </span><span class="s3">\&quot;</span><span class="s1">../uri</span><span class="s3">\&quot;</span><span class="s1">;</span><span class="s3">\n</span><span class="s1">import { pctEncChar, SCHEMES } from </span><span class="s3">\&quot;</span><span class="s1">../uri</span><span class="s3">\&quot;</span><span class="s1">;</span><span class="s3">\n\n</span><span class="s1">export interface URNComponents extends URIComponents {</span><span class="s3">\n\t</span><span class="s1">nid?:string;</span><span class="s3">\n\t</span><span class="s1">nss?:string;</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">export interface URNOptions extends URIOptions {</span><span class="s3">\n\t</span><span class="s1">nid?:string;</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">const NID$ = </span><span class="s3">\&quot;</span><span class="s1">(?:[0-9A-Za-z][0-9A-Za-z</span><span class="s3">\\\\</span><span class="s1">-]{1,31})</span><span class="s3">\&quot;</span><span class="s1">;</span><span class="s3">\n</span><span class="s1">const PCT_ENCODED$ = </span><span class="s3">\&quot;</span><span class="s1">(?:</span><span class="s3">\\\\</span><span class="s1">%[0-9A-Fa-f]{2})</span><span class="s3">\&quot;</span><span class="s1">;</span><span class="s3">\n</span><span class="s1">const TRANS$$ = </span><span class="s3">\&quot;</span><span class="s1">[0-9A-Za-z</span><span class="s3">\\\\</span><span class="s1">(</span><span class="s3">\\\\</span><span class="s1">)</span><span class="s3">\\\\</span><span class="s1">+</span><span class="s3">\\\\</span><span class="s1">,</span><span class="s3">\\\\</span><span class="s1">-</span><span class="s3">\\\\</span><span class="s1">.</span><span class="s3">\\\\</span><span class="s1">:</span><span class="s3">\\\\</span><span class="s1">=</span><span class="s3">\\\\</span><span class="s1">@</span><span class="s3">\\\\</span><span class="s1">;</span><span class="s3">\\\\</span><span class="s1">$</span><span class="s3">\\\\</span><span class="s1">_</span><span class="s3">\\\\</span><span class="s1">!</span><span class="s3">\\\\</span><span class="s1">*</span><span class="s3">\\\\</span><span class="s1">'</span><span class="s3">\\\\</span><span class="s1">/</span><span class="s3">\\\\</span><span class="s1">?</span><span class="s3">\\\\</span><span class="s1">#]</span><span class="s3">\&quot;</span><span class="s1">;</span><span class="s3">\n</span><span class="s1">const NSS$ = </span><span class="s3">\&quot;</span><span class="s1">(?:(?:</span><span class="s3">\&quot; </span><span class="s1">+ PCT_ENCODED$ + </span><span class="s3">\&quot;</span><span class="s1">|</span><span class="s3">\&quot; </span><span class="s1">+ TRANS$$ + </span><span class="s3">\&quot;</span><span class="s1">)+)</span><span class="s3">\&quot;</span><span class="s1">;</span><span class="s3">\n</span><span class="s1">const URN_SCHEME = new RegExp(</span><span class="s3">\&quot;</span><span class="s1">^urn</span><span class="s3">\\\\</span><span class="s1">:(</span><span class="s3">\&quot; </span><span class="s1">+ NID$ + </span><span class="s3">\&quot;</span><span class="s1">)$</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n</span><span class="s1">const URN_PATH = new RegExp(</span><span class="s3">\&quot;</span><span class="s1">^(</span><span class="s3">\&quot; </span><span class="s1">+ NID$ + </span><span class="s3">\&quot;</span><span class="s1">)</span><span class="s3">\\\\</span><span class="s1">:(</span><span class="s3">\&quot; </span><span class="s1">+ NSS$ + </span><span class="s3">\&quot;</span><span class="s1">)$</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n</span><span class="s1">const URN_PARSE = /^([^</span><span class="s3">\\</span><span class="s1">:]+)</span><span class="s3">\\</span><span class="s1">:(.*)/;</span><span class="s3">\n</span><span class="s1">const URN_EXCLUDED = /[</span><span class="s3">\\</span><span class="s1">x00-</span><span class="s3">\\</span><span class="s1">x20</span><span class="s3">\\\\\\\&quot;\\</span><span class="s1">&amp;</span><span class="s3">\\</span><span class="s1">&lt;</span><span class="s3">\\</span><span class="s1">&gt;</span><span class="s3">\\</span><span class="s1">[</span><span class="s3">\\</span><span class="s1">]</span><span class="s3">\\</span><span class="s1">^</span><span class="s3">\\</span><span class="s1">`</span><span class="s3">\\</span><span class="s1">{</span><span class="s3">\\</span><span class="s1">|</span><span class="s3">\\</span><span class="s1">}</span><span class="s3">\\</span><span class="s1">~</span><span class="s3">\\</span><span class="s1">x7F-</span><span class="s3">\\</span><span class="s1">xFF]/g;</span><span class="s3">\n\n</span><span class="s1">//RFC 2141</span><span class="s3">\n</span><span class="s1">const handler:URISchemeHandler&lt;URNComponents,URNOptions&gt; = {</span><span class="s3">\n\t</span><span class="s1">scheme : </span><span class="s3">\&quot;</span><span class="s1">urn</span><span class="s3">\&quot;</span><span class="s1">,</span><span class="s3">\n\n\t</span><span class="s1">parse : function (components:URIComponents, options:URNOptions):URNComponents {</span><span class="s3">\n\t\t</span><span class="s1">const matches = components.path &amp;&amp; components.path.match(URN_PARSE);</span><span class="s3">\n\t\t</span><span class="s1">let urnComponents = components as URNComponents;</span><span class="s3">\n\n\t\t</span><span class="s1">if (matches) {</span><span class="s3">\n\t\t\t</span><span class="s1">const scheme = options.scheme || urnComponents.scheme || </span><span class="s3">\&quot;</span><span class="s1">urn</span><span class="s3">\&quot;</span><span class="s1">;</span><span class="s3">\n\t\t\t</span><span class="s1">const nid = matches[1].toLowerCase();</span><span class="s3">\n\t\t\t</span><span class="s1">const nss = matches[2];</span><span class="s3">\n\t\t\t</span><span class="s1">const urnScheme = `${scheme}:${options.nid || nid}`;</span><span class="s3">\n\t\t\t</span><span class="s1">const schemeHandler = SCHEMES[urnScheme];</span><span class="s3">\n\n\t\t\t</span><span class="s1">urnComponents.nid = nid;</span><span class="s3">\n\t\t\t</span><span class="s1">urnComponents.nss = nss;</span><span class="s3">\n\t\t\t</span><span class="s1">urnComponents.path = undefined;</span><span class="s3">\n\n\t\t\t</span><span class="s1">if (schemeHandler) {</span><span class="s3">\n\t\t\t\t</span><span class="s1">urnComponents = schemeHandler.parse(urnComponents, options) as URNComponents;</span><span class="s3">\n\t\t\t</span><span class="s1">}</span><span class="s3">\n\t\t</span><span class="s1">} else {</span><span class="s3">\n\t\t\t</span><span class="s1">urnComponents.error = urnComponents.error || </span><span class="s3">\&quot;</span><span class="s1">URN can not be parsed.</span><span class="s3">\&quot;</span><span class="s1">;</span><span class="s3">\n\t\t</span><span class="s1">}</span><span class="s3">\n\n\t\t</span><span class="s1">return urnComponents;</span><span class="s3">\n\t</span><span class="s1">},</span><span class="s3">\n\n\t</span><span class="s1">serialize : function (urnComponents:URNComponents, options:URNOptions):URIComponents {</span><span class="s3">\n\t\t</span><span class="s1">const scheme = options.scheme || urnComponents.scheme || </span><span class="s3">\&quot;</span><span class="s1">urn</span><span class="s3">\&quot;</span><span class="s1">;</span><span class="s3">\n\t\t</span><span class="s1">const nid = urnComponents.nid;</span><span class="s3">\n\t\t</span><span class="s1">const urnScheme = `${scheme}:${options.nid || nid}`;</span><span class="s3">\n\t\t</span><span class="s1">const schemeHandler = SCHEMES[urnScheme];</span><span class="s3">\n\n\t\t</span><span class="s1">if (schemeHandler) {</span><span class="s3">\n\t\t\t</span><span class="s1">urnComponents = schemeHandler.serialize(urnComponents, options) as URNComponents;</span><span class="s3">\n\t\t</span><span class="s1">}</span><span class="s3">\n\n\t\t</span><span class="s1">const uriComponents = urnComponents as URIComponents;</span><span class="s3">\n\t\t</span><span class="s1">const nss = urnComponents.nss;</span><span class="s3">\n\t\t</span><span class="s1">uriComponents.path = `${nid || options.nid}:${nss}`;</span><span class="s3">\n\n\t\t</span><span class="s1">return uriComponents;</span><span class="s3">\n\t</span><span class="s1">},</span><span class="s3">\n</span><span class="s1">};</span><span class="s3">\n\n</span><span class="s1">export default handler;&quot;</span><span class="s0">,</span><span class="s1">&quot;import { URISchemeHandler, URIComponents, URIOptions } from </span><span class="s3">\&quot;</span><span class="s1">../uri</span><span class="s3">\&quot;</span><span class="s1">;</span><span class="s3">\n</span><span class="s1">import { pctEncChar, pctDecChars, unescapeComponent } from </span><span class="s3">\&quot;</span><span class="s1">../uri</span><span class="s3">\&quot;</span><span class="s1">;</span><span class="s3">\n</span><span class="s1">import punycode from </span><span class="s3">\&quot;</span><span class="s1">punycode</span><span class="s3">\&quot;</span><span class="s1">;</span><span class="s3">\n</span><span class="s1">import { merge, subexp, toUpperCase, toArray } from </span><span class="s3">\&quot;</span><span class="s1">../util</span><span class="s3">\&quot;</span><span class="s1">;</span><span class="s3">\n\n</span><span class="s1">export interface MailtoHeaders {</span><span class="s3">\n\t</span><span class="s1">[hfname:string]:string</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">export interface MailtoComponents extends URIComponents {</span><span class="s3">\n\t</span><span class="s1">to:Array&lt;string&gt;,</span><span class="s3">\n\t</span><span class="s1">headers?:MailtoHeaders,</span><span class="s3">\n\t</span><span class="s1">subject?:string,</span><span class="s3">\n\t</span><span class="s1">body?:string</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">const O:MailtoHeaders = {};</span><span class="s3">\n</span><span class="s1">const isIRI = true;</span><span class="s3">\n\n</span><span class="s1">//RFC 3986</span><span class="s3">\n</span><span class="s1">const UNRESERVED$$ = </span><span class="s3">\&quot;</span><span class="s1">[A-Za-z0-9</span><span class="s3">\\\\</span><span class="s1">-</span><span class="s3">\\\\</span><span class="s1">.</span><span class="s3">\\\\</span><span class="s1">_</span><span class="s3">\\\\</span><span class="s1">~</span><span class="s3">\&quot; </span><span class="s1">+ (isIRI ? </span><span class="s3">\&quot;\\\\</span><span class="s1">xA0-</span><span class="s3">\\\\</span><span class="s1">u200D</span><span class="s3">\\\\</span><span class="s1">u2010-</span><span class="s3">\\\\</span><span class="s1">u2029</span><span class="s3">\\\\</span><span class="s1">u202F-</span><span class="s3">\\\\</span><span class="s1">uD7FF</span><span class="s3">\\\\</span><span class="s1">uF900-</span><span class="s3">\\\\</span><span class="s1">uFDCF</span><span class="s3">\\\\</span><span class="s1">uFDF0-</span><span class="s3">\\\\</span><span class="s1">uFFEF</span><span class="s3">\&quot; </span><span class="s1">: </span><span class="s3">\&quot;\&quot;</span><span class="s1">) + </span><span class="s3">\&quot;</span><span class="s1">]</span><span class="s3">\&quot;</span><span class="s1">;</span><span class="s3">\n</span><span class="s1">const HEXDIG$$ = </span><span class="s3">\&quot;</span><span class="s1">[0-9A-Fa-f]</span><span class="s3">\&quot;</span><span class="s1">;  //case-insensitive</span><span class="s3">\n</span><span class="s1">const PCT_ENCODED$ = subexp(subexp(</span><span class="s3">\&quot;</span><span class="s1">%[EFef]</span><span class="s3">\&quot; </span><span class="s1">+ HEXDIG$$ + </span><span class="s3">\&quot;</span><span class="s1">%</span><span class="s3">\&quot; </span><span class="s1">+ HEXDIG$$ + HEXDIG$$ + </span><span class="s3">\&quot;</span><span class="s1">%</span><span class="s3">\&quot; </span><span class="s1">+ HEXDIG$$ + HEXDIG$$) + </span><span class="s3">\&quot;</span><span class="s1">|</span><span class="s3">\&quot; </span><span class="s1">+ subexp(</span><span class="s3">\&quot;</span><span class="s1">%[89A-Fa-f]</span><span class="s3">\&quot; </span><span class="s1">+ HEXDIG$$ + </span><span class="s3">\&quot;</span><span class="s1">%</span><span class="s3">\&quot; </span><span class="s1">+ HEXDIG$$ + HEXDIG$$) + </span><span class="s3">\&quot;</span><span class="s1">|</span><span class="s3">\&quot; </span><span class="s1">+ subexp(</span><span class="s3">\&quot;</span><span class="s1">%</span><span class="s3">\&quot; </span><span class="s1">+ HEXDIG$$ + HEXDIG$$));  //expanded</span><span class="s3">\n\n</span><span class="s1">//RFC 5322, except these symbols as per RFC 6068: @ : / ? # [ ] &amp; ; =</span><span class="s3">\n</span><span class="s1">//const ATEXT$$ = </span><span class="s3">\&quot;</span><span class="s1">[A-Za-z0-9</span><span class="s3">\\\\</span><span class="s1">!</span><span class="s3">\\\\</span><span class="s1">#</span><span class="s3">\\\\</span><span class="s1">$</span><span class="s3">\\\\</span><span class="s1">%</span><span class="s3">\\\\</span><span class="s1">&amp;</span><span class="s3">\\\\</span><span class="s1">'</span><span class="s3">\\\\</span><span class="s1">*</span><span class="s3">\\\\</span><span class="s1">+</span><span class="s3">\\\\</span><span class="s1">-</span><span class="s3">\\\\</span><span class="s1">/</span><span class="s3">\\\\</span><span class="s1">=</span><span class="s3">\\\\</span><span class="s1">?</span><span class="s3">\\\\</span><span class="s1">^</span><span class="s3">\\\\</span><span class="s1">_</span><span class="s3">\\\\</span><span class="s1">`</span><span class="s3">\\\\</span><span class="s1">{</span><span class="s3">\\\\</span><span class="s1">|</span><span class="s3">\\\\</span><span class="s1">}</span><span class="s3">\\\\</span><span class="s1">~]</span><span class="s3">\&quot;</span><span class="s1">;</span><span class="s3">\n</span><span class="s1">//const WSP$$ = </span><span class="s3">\&quot;</span><span class="s1">[</span><span class="s3">\\\\</span><span class="s1">x20</span><span class="s3">\\\\</span><span class="s1">x09]</span><span class="s3">\&quot;</span><span class="s1">;</span><span class="s3">\n</span><span class="s1">//const OBS_QTEXT$$ = </span><span class="s3">\&quot;</span><span class="s1">[</span><span class="s3">\\\\</span><span class="s1">x01-</span><span class="s3">\\\\</span><span class="s1">x08</span><span class="s3">\\\\</span><span class="s1">x0B</span><span class="s3">\\\\</span><span class="s1">x0C</span><span class="s3">\\\\</span><span class="s1">x0E-</span><span class="s3">\\\\</span><span class="s1">x1F</span><span class="s3">\\\\</span><span class="s1">x7F]</span><span class="s3">\&quot;</span><span class="s1">;  //(%d1-8 / %d11-12 / %d14-31 / %d127)</span><span class="s3">\n</span><span class="s1">//const QTEXT$$ = merge(</span><span class="s3">\&quot;</span><span class="s1">[</span><span class="s3">\\\\</span><span class="s1">x21</span><span class="s3">\\\\</span><span class="s1">x23-</span><span class="s3">\\\\</span><span class="s1">x5B</span><span class="s3">\\\\</span><span class="s1">x5D-</span><span class="s3">\\\\</span><span class="s1">x7E]</span><span class="s3">\&quot;</span><span class="s1">, OBS_QTEXT$$);  //%d33 / %d35-91 / %d93-126 / obs-qtext</span><span class="s3">\n</span><span class="s1">//const VCHAR$$ = </span><span class="s3">\&quot;</span><span class="s1">[</span><span class="s3">\\\\</span><span class="s1">x21-</span><span class="s3">\\\\</span><span class="s1">x7E]</span><span class="s3">\&quot;</span><span class="s1">;</span><span class="s3">\n</span><span class="s1">//const WSP$$ = </span><span class="s3">\&quot;</span><span class="s1">[</span><span class="s3">\\\\</span><span class="s1">x20</span><span class="s3">\\\\</span><span class="s1">x09]</span><span class="s3">\&quot;</span><span class="s1">;</span><span class="s3">\n</span><span class="s1">//const OBS_QP$ = subexp(</span><span class="s3">\&quot;\\\\\\\\\&quot; </span><span class="s1">+ merge(</span><span class="s3">\&quot;</span><span class="s1">[</span><span class="s3">\\\\</span><span class="s1">x00</span><span class="s3">\\\\</span><span class="s1">x0D</span><span class="s3">\\\\</span><span class="s1">x0A]</span><span class="s3">\&quot;</span><span class="s1">, OBS_QTEXT$$));  //%d0 / CR / LF / obs-qtext</span><span class="s3">\n</span><span class="s1">//const FWS$ = subexp(subexp(WSP$$ + </span><span class="s3">\&quot;</span><span class="s1">*</span><span class="s3">\&quot; </span><span class="s1">+ </span><span class="s3">\&quot;\\\\</span><span class="s1">x0D</span><span class="s3">\\\\</span><span class="s1">x0A</span><span class="s3">\&quot;</span><span class="s1">) + </span><span class="s3">\&quot;</span><span class="s1">?</span><span class="s3">\&quot; </span><span class="s1">+ WSP$$ + </span><span class="s3">\&quot;</span><span class="s1">+</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n</span><span class="s1">//const QUOTED_PAIR$ = subexp(subexp(</span><span class="s3">\&quot;\\\\\\\\\&quot; </span><span class="s1">+ subexp(VCHAR$$ + </span><span class="s3">\&quot;</span><span class="s1">|</span><span class="s3">\&quot; </span><span class="s1">+ WSP$$)) + </span><span class="s3">\&quot;</span><span class="s1">|</span><span class="s3">\&quot; </span><span class="s1">+ OBS_QP$);</span><span class="s3">\n</span><span class="s1">//const QUOTED_STRING$ = subexp('</span><span class="s3">\\\\\&quot;</span><span class="s1">' + subexp(FWS$ + </span><span class="s3">\&quot;</span><span class="s1">?</span><span class="s3">\&quot; </span><span class="s1">+ QCONTENT$) + </span><span class="s3">\&quot;</span><span class="s1">*</span><span class="s3">\&quot; </span><span class="s1">+ FWS$ + </span><span class="s3">\&quot;</span><span class="s1">?</span><span class="s3">\&quot; </span><span class="s1">+ '</span><span class="s3">\\\\\&quot;</span><span class="s1">');</span><span class="s3">\n</span><span class="s1">const ATEXT$$ = </span><span class="s3">\&quot;</span><span class="s1">[A-Za-z0-9</span><span class="s3">\\\\</span><span class="s1">!</span><span class="s3">\\\\</span><span class="s1">$</span><span class="s3">\\\\</span><span class="s1">%</span><span class="s3">\\\\</span><span class="s1">'</span><span class="s3">\\\\</span><span class="s1">*</span><span class="s3">\\\\</span><span class="s1">+</span><span class="s3">\\\\</span><span class="s1">-</span><span class="s3">\\\\</span><span class="s1">^</span><span class="s3">\\\\</span><span class="s1">_</span><span class="s3">\\\\</span><span class="s1">`</span><span class="s3">\\\\</span><span class="s1">{</span><span class="s3">\\\\</span><span class="s1">|</span><span class="s3">\\\\</span><span class="s1">}</span><span class="s3">\\\\</span><span class="s1">~]</span><span class="s3">\&quot;</span><span class="s1">;</span><span class="s3">\n</span><span class="s1">const QTEXT$$ = </span><span class="s3">\&quot;</span><span class="s1">[</span><span class="s3">\\\\</span><span class="s1">!</span><span class="s3">\\\\</span><span class="s1">$</span><span class="s3">\\\\</span><span class="s1">%</span><span class="s3">\\\\</span><span class="s1">'</span><span class="s3">\\\\</span><span class="s1">(</span><span class="s3">\\\\</span><span class="s1">)</span><span class="s3">\\\\</span><span class="s1">*</span><span class="s3">\\\\</span><span class="s1">+</span><span class="s3">\\\\</span><span class="s1">,</span><span class="s3">\\\\</span><span class="s1">-</span><span class="s3">\\\\</span><span class="s1">.0-9</span><span class="s3">\\\\</span><span class="s1">&lt;</span><span class="s3">\\\\</span><span class="s1">&gt;A-Z</span><span class="s3">\\\\</span><span class="s1">x5E-</span><span class="s3">\\\\</span><span class="s1">x7E]</span><span class="s3">\&quot;</span><span class="s1">;</span><span class="s3">\n</span><span class="s1">const VCHAR$$ = merge(QTEXT$$, </span><span class="s3">\&quot;</span><span class="s1">[</span><span class="s3">\\\\\\\&quot;\\\\\\\\</span><span class="s1">]</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n</span><span class="s1">const DOT_ATOM_TEXT$ = subexp(ATEXT$$ + </span><span class="s3">\&quot;</span><span class="s1">+</span><span class="s3">\&quot; </span><span class="s1">+ subexp(</span><span class="s3">\&quot;\\\\</span><span class="s1">.</span><span class="s3">\&quot; </span><span class="s1">+ ATEXT$$ + </span><span class="s3">\&quot;</span><span class="s1">+</span><span class="s3">\&quot;</span><span class="s1">) + </span><span class="s3">\&quot;</span><span class="s1">*</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n</span><span class="s1">const QUOTED_PAIR$ = subexp(</span><span class="s3">\&quot;\\\\\\\\\&quot; </span><span class="s1">+ VCHAR$$);</span><span class="s3">\n</span><span class="s1">const QCONTENT$ = subexp(QTEXT$$ + </span><span class="s3">\&quot;</span><span class="s1">|</span><span class="s3">\&quot; </span><span class="s1">+ QUOTED_PAIR$);</span><span class="s3">\n</span><span class="s1">const QUOTED_STRING$ = subexp('</span><span class="s3">\\\\\&quot;</span><span class="s1">' + QCONTENT$ + </span><span class="s3">\&quot;</span><span class="s1">*</span><span class="s3">\&quot; </span><span class="s1">+ '</span><span class="s3">\\\\\&quot;</span><span class="s1">');</span><span class="s3">\n\n</span><span class="s1">//RFC 6068</span><span class="s3">\n</span><span class="s1">const DTEXT_NO_OBS$$ = </span><span class="s3">\&quot;</span><span class="s1">[</span><span class="s3">\\\\</span><span class="s1">x21-</span><span class="s3">\\\\</span><span class="s1">x5A</span><span class="s3">\\\\</span><span class="s1">x5E-</span><span class="s3">\\\\</span><span class="s1">x7E]</span><span class="s3">\&quot;</span><span class="s1">;  //%d33-90 / %d94-126</span><span class="s3">\n</span><span class="s1">const SOME_DELIMS$$ = </span><span class="s3">\&quot;</span><span class="s1">[</span><span class="s3">\\\\</span><span class="s1">!</span><span class="s3">\\\\</span><span class="s1">$</span><span class="s3">\\\\</span><span class="s1">'</span><span class="s3">\\\\</span><span class="s1">(</span><span class="s3">\\\\</span><span class="s1">)</span><span class="s3">\\\\</span><span class="s1">*</span><span class="s3">\\\\</span><span class="s1">+</span><span class="s3">\\\\</span><span class="s1">,</span><span class="s3">\\\\</span><span class="s1">;</span><span class="s3">\\\\</span><span class="s1">:</span><span class="s3">\\\\</span><span class="s1">@]</span><span class="s3">\&quot;</span><span class="s1">;</span><span class="s3">\n</span><span class="s1">const QCHAR$ = subexp(UNRESERVED$$ + </span><span class="s3">\&quot;</span><span class="s1">|</span><span class="s3">\&quot; </span><span class="s1">+ PCT_ENCODED$ + </span><span class="s3">\&quot;</span><span class="s1">|</span><span class="s3">\&quot; </span><span class="s1">+ SOME_DELIMS$$);</span><span class="s3">\n</span><span class="s1">const DOMAIN$ = subexp(DOT_ATOM_TEXT$ + </span><span class="s3">\&quot;</span><span class="s1">|</span><span class="s3">\&quot; </span><span class="s1">+ </span><span class="s3">\&quot;\\\\</span><span class="s1">[</span><span class="s3">\&quot; </span><span class="s1">+ DTEXT_NO_OBS$$ + </span><span class="s3">\&quot;</span><span class="s1">*</span><span class="s3">\&quot; </span><span class="s1">+ </span><span class="s3">\&quot;\\\\</span><span class="s1">]</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n</span><span class="s1">const LOCAL_PART$ = subexp(DOT_ATOM_TEXT$ + </span><span class="s3">\&quot;</span><span class="s1">|</span><span class="s3">\&quot; </span><span class="s1">+ QUOTED_STRING$);</span><span class="s3">\n</span><span class="s1">const ADDR_SPEC$ = subexp(LOCAL_PART$ + </span><span class="s3">\&quot;\\\\</span><span class="s1">@</span><span class="s3">\&quot; </span><span class="s1">+ DOMAIN$);</span><span class="s3">\n</span><span class="s1">const TO$ = subexp(ADDR_SPEC$ + subexp(</span><span class="s3">\&quot;\\\\</span><span class="s1">,</span><span class="s3">\&quot; </span><span class="s1">+ ADDR_SPEC$) + </span><span class="s3">\&quot;</span><span class="s1">*</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n</span><span class="s1">const HFNAME$ = subexp(QCHAR$ + </span><span class="s3">\&quot;</span><span class="s1">*</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n</span><span class="s1">const HFVALUE$ = HFNAME$;</span><span class="s3">\n</span><span class="s1">const HFIELD$ = subexp(HFNAME$ + </span><span class="s3">\&quot;\\\\</span><span class="s1">=</span><span class="s3">\&quot; </span><span class="s1">+ HFVALUE$);</span><span class="s3">\n</span><span class="s1">const HFIELDS2$ = subexp(HFIELD$ + subexp(</span><span class="s3">\&quot;\\\\</span><span class="s1">&amp;</span><span class="s3">\&quot; </span><span class="s1">+ HFIELD$) + </span><span class="s3">\&quot;</span><span class="s1">*</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n</span><span class="s1">const HFIELDS$ = subexp(</span><span class="s3">\&quot;\\\\</span><span class="s1">?</span><span class="s3">\&quot; </span><span class="s1">+ HFIELDS2$);</span><span class="s3">\n</span><span class="s1">const MAILTO_URI = new RegExp(</span><span class="s3">\&quot;</span><span class="s1">^mailto</span><span class="s3">\\\\</span><span class="s1">:</span><span class="s3">\&quot; </span><span class="s1">+ TO$ + </span><span class="s3">\&quot;</span><span class="s1">?</span><span class="s3">\&quot; </span><span class="s1">+ HFIELDS$ + </span><span class="s3">\&quot;</span><span class="s1">?$</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n\n</span><span class="s1">const UNRESERVED = new RegExp(UNRESERVED$$, </span><span class="s3">\&quot;</span><span class="s1">g</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n</span><span class="s1">const PCT_ENCODED = new RegExp(PCT_ENCODED$, </span><span class="s3">\&quot;</span><span class="s1">g</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n</span><span class="s1">const NOT_LOCAL_PART = new RegExp(merge(</span><span class="s3">\&quot;</span><span class="s1">[^]</span><span class="s3">\&quot;</span><span class="s1">, ATEXT$$, </span><span class="s3">\&quot;</span><span class="s1">[</span><span class="s3">\\\\</span><span class="s1">.]</span><span class="s3">\&quot;</span><span class="s1">, '[</span><span class="s3">\\\\\&quot;</span><span class="s1">]', VCHAR$$), </span><span class="s3">\&quot;</span><span class="s1">g</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n</span><span class="s1">const NOT_DOMAIN = new RegExp(merge(</span><span class="s3">\&quot;</span><span class="s1">[^]</span><span class="s3">\&quot;</span><span class="s1">, ATEXT$$, </span><span class="s3">\&quot;</span><span class="s1">[</span><span class="s3">\\\\</span><span class="s1">.]</span><span class="s3">\&quot;</span><span class="s1">, </span><span class="s3">\&quot;</span><span class="s1">[</span><span class="s3">\\\\</span><span class="s1">[]</span><span class="s3">\&quot;</span><span class="s1">, DTEXT_NO_OBS$$, </span><span class="s3">\&quot;</span><span class="s1">[</span><span class="s3">\\\\</span><span class="s1">]]</span><span class="s3">\&quot;</span><span class="s1">), </span><span class="s3">\&quot;</span><span class="s1">g</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n</span><span class="s1">const NOT_HFNAME = new RegExp(merge(</span><span class="s3">\&quot;</span><span class="s1">[^]</span><span class="s3">\&quot;</span><span class="s1">, UNRESERVED$$, SOME_DELIMS$$), </span><span class="s3">\&quot;</span><span class="s1">g</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n</span><span class="s1">const NOT_HFVALUE = NOT_HFNAME;</span><span class="s3">\n</span><span class="s1">const TO = new RegExp(</span><span class="s3">\&quot;</span><span class="s1">^</span><span class="s3">\&quot; </span><span class="s1">+ TO$ + </span><span class="s3">\&quot;</span><span class="s1">$</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n</span><span class="s1">const HFIELDS = new RegExp(</span><span class="s3">\&quot;</span><span class="s1">^</span><span class="s3">\&quot; </span><span class="s1">+ HFIELDS2$ + </span><span class="s3">\&quot;</span><span class="s1">$</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n\n</span><span class="s1">function decodeUnreserved(str:string):string {</span><span class="s3">\n\t</span><span class="s1">const decStr = pctDecChars(str);</span><span class="s3">\n\t</span><span class="s1">return (!decStr.match(UNRESERVED) ? str : decStr);</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">const handler:URISchemeHandler&lt;MailtoComponents&gt; =  {</span><span class="s3">\n\t</span><span class="s1">scheme : </span><span class="s3">\&quot;</span><span class="s1">mailto</span><span class="s3">\&quot;</span><span class="s1">,</span><span class="s3">\n\n\t</span><span class="s1">parse : function (components:URIComponents, options:URIOptions):MailtoComponents {</span><span class="s3">\n\t\t</span><span class="s1">const mailtoComponents = components as MailtoComponents;</span><span class="s3">\n\t\t</span><span class="s1">const to = mailtoComponents.to = (mailtoComponents.path ? mailtoComponents.path.split(</span><span class="s3">\&quot;</span><span class="s1">,</span><span class="s3">\&quot;</span><span class="s1">) : []);</span><span class="s3">\n\t\t</span><span class="s1">mailtoComponents.path = undefined;</span><span class="s3">\n\n\t\t</span><span class="s1">if (mailtoComponents.query) {</span><span class="s3">\n\t\t\t</span><span class="s1">let unknownHeaders = false</span><span class="s3">\n\t\t\t</span><span class="s1">const headers:MailtoHeaders = {};</span><span class="s3">\n\t\t\t</span><span class="s1">const hfields = mailtoComponents.query.split(</span><span class="s3">\&quot;</span><span class="s1">&amp;</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n\n\t\t\t</span><span class="s1">for (let x = 0, xl = hfields.length; x &lt; xl; ++x) {</span><span class="s3">\n\t\t\t\t</span><span class="s1">const hfield = hfields[x].split(</span><span class="s3">\&quot;</span><span class="s1">=</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n\n\t\t\t\t</span><span class="s1">switch (hfield[0]) {</span><span class="s3">\n\t\t\t\t\t</span><span class="s1">case </span><span class="s3">\&quot;</span><span class="s1">to</span><span class="s3">\&quot;</span><span class="s1">:</span><span class="s3">\n\t\t\t\t\t\t</span><span class="s1">const toAddrs = hfield[1].split(</span><span class="s3">\&quot;</span><span class="s1">,</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n\t\t\t\t\t\t</span><span class="s1">for (let x = 0, xl = toAddrs.length; x &lt; xl; ++x) {</span><span class="s3">\n\t\t\t\t\t\t\t</span><span class="s1">to.push(toAddrs[x]);</span><span class="s3">\n\t\t\t\t\t\t</span><span class="s1">}</span><span class="s3">\n\t\t\t\t\t\t</span><span class="s1">break;</span><span class="s3">\n\t\t\t\t\t</span><span class="s1">case </span><span class="s3">\&quot;</span><span class="s1">subject</span><span class="s3">\&quot;</span><span class="s1">:</span><span class="s3">\n\t\t\t\t\t\t</span><span class="s1">mailtoComponents.subject = unescapeComponent(hfield[1], options);</span><span class="s3">\n\t\t\t\t\t\t</span><span class="s1">break;</span><span class="s3">\n\t\t\t\t\t</span><span class="s1">case </span><span class="s3">\&quot;</span><span class="s1">body</span><span class="s3">\&quot;</span><span class="s1">:</span><span class="s3">\n\t\t\t\t\t\t</span><span class="s1">mailtoComponents.body = unescapeComponent(hfield[1], options);</span><span class="s3">\n\t\t\t\t\t\t</span><span class="s1">break;</span><span class="s3">\n\t\t\t\t\t</span><span class="s1">default:</span><span class="s3">\n\t\t\t\t\t\t</span><span class="s1">unknownHeaders = true;</span><span class="s3">\n\t\t\t\t\t\t</span><span class="s1">headers[unescapeComponent(hfield[0], options)] = unescapeComponent(hfield[1], options);</span><span class="s3">\n\t\t\t\t\t\t</span><span class="s1">break;</span><span class="s3">\n\t\t\t\t</span><span class="s1">}</span><span class="s3">\n\t\t\t</span><span class="s1">}</span><span class="s3">\n\n\t\t\t</span><span class="s1">if (unknownHeaders) mailtoComponents.headers = headers;</span><span class="s3">\n\t\t</span><span class="s1">}</span><span class="s3">\n\n\t\t</span><span class="s1">mailtoComponents.query = undefined;</span><span class="s3">\n\n\t\t</span><span class="s1">for (let x = 0, xl = to.length; x &lt; xl; ++x) {</span><span class="s3">\n\t\t\t</span><span class="s1">const addr = to[x].split(</span><span class="s3">\&quot;</span><span class="s1">@</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n\n\t\t\t</span><span class="s1">addr[0] = unescapeComponent(addr[0]);</span><span class="s3">\n\n\t\t\t</span><span class="s1">if (!options.unicodeSupport) {</span><span class="s3">\n\t\t\t\t</span><span class="s1">//convert Unicode IDN -&gt; ASCII IDN</span><span class="s3">\n\t\t\t\t</span><span class="s1">try {</span><span class="s3">\n\t\t\t\t\t</span><span class="s1">addr[1] = punycode.toASCII(unescapeComponent(addr[1], options).toLowerCase());</span><span class="s3">\n\t\t\t\t</span><span class="s1">} catch (e) {</span><span class="s3">\n\t\t\t\t\t</span><span class="s1">mailtoComponents.error = mailtoComponents.error || </span><span class="s3">\&quot;</span><span class="s1">Email address's domain name can not be converted to ASCII via punycode: </span><span class="s3">\&quot; </span><span class="s1">+ e;</span><span class="s3">\n\t\t\t\t</span><span class="s1">}</span><span class="s3">\n\t\t\t</span><span class="s1">} else {</span><span class="s3">\n\t\t\t\t</span><span class="s1">addr[1] = unescapeComponent(addr[1], options).toLowerCase();</span><span class="s3">\n\t\t\t</span><span class="s1">}</span><span class="s3">\n\n\t\t\t</span><span class="s1">to[x] = addr.join(</span><span class="s3">\&quot;</span><span class="s1">@</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n\t\t</span><span class="s1">}</span><span class="s3">\n\n\t\t</span><span class="s1">return mailtoComponents;</span><span class="s3">\n\t</span><span class="s1">},</span><span class="s3">\n\n\t</span><span class="s1">serialize : function (mailtoComponents:MailtoComponents, options:URIOptions):URIComponents {</span><span class="s3">\n\t\t</span><span class="s1">const components = mailtoComponents as URIComponents;</span><span class="s3">\n\t\t</span><span class="s1">const to = toArray(mailtoComponents.to);</span><span class="s3">\n\t\t</span><span class="s1">if (to) {</span><span class="s3">\n\t\t\t</span><span class="s1">for (let x = 0, xl = to.length; x &lt; xl; ++x) {</span><span class="s3">\n\t\t\t\t</span><span class="s1">const toAddr = String(to[x]);</span><span class="s3">\n\t\t\t\t</span><span class="s1">const atIdx = toAddr.lastIndexOf(</span><span class="s3">\&quot;</span><span class="s1">@</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n\t\t\t\t</span><span class="s1">const localPart = (toAddr.slice(0, atIdx)).replace(PCT_ENCODED, decodeUnreserved).replace(PCT_ENCODED, toUpperCase).replace(NOT_LOCAL_PART, pctEncChar);</span><span class="s3">\n\t\t\t\t</span><span class="s1">let domain = toAddr.slice(atIdx + 1);</span><span class="s3">\n\n\t\t\t\t</span><span class="s1">//convert IDN via punycode</span><span class="s3">\n\t\t\t\t</span><span class="s1">try {</span><span class="s3">\n\t\t\t\t\t</span><span class="s1">domain = (!options.iri ? punycode.toASCII(unescapeComponent(domain, options).toLowerCase()) : punycode.toUnicode(domain));</span><span class="s3">\n\t\t\t\t</span><span class="s1">} catch (e) {</span><span class="s3">\n\t\t\t\t\t</span><span class="s1">components.error = components.error || </span><span class="s3">\&quot;</span><span class="s1">Email address's domain name can not be converted to </span><span class="s3">\&quot; </span><span class="s1">+ (!options.iri ? </span><span class="s3">\&quot;</span><span class="s1">ASCII</span><span class="s3">\&quot; </span><span class="s1">: </span><span class="s3">\&quot;</span><span class="s1">Unicode</span><span class="s3">\&quot;</span><span class="s1">) + </span><span class="s3">\&quot; </span><span class="s1">via punycode: </span><span class="s3">\&quot; </span><span class="s1">+ e;</span><span class="s3">\n\t\t\t\t</span><span class="s1">}</span><span class="s3">\n\n\t\t\t\t</span><span class="s1">to[x] = localPart + </span><span class="s3">\&quot;</span><span class="s1">@</span><span class="s3">\&quot; </span><span class="s1">+ domain;</span><span class="s3">\n\t\t\t</span><span class="s1">}</span><span class="s3">\n\n\t\t\t</span><span class="s1">components.path = to.join(</span><span class="s3">\&quot;</span><span class="s1">,</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n\t\t</span><span class="s1">}</span><span class="s3">\n\n\t\t</span><span class="s1">const headers = mailtoComponents.headers = mailtoComponents.headers || {};</span><span class="s3">\n\n\t\t</span><span class="s1">if (mailtoComponents.subject) headers[</span><span class="s3">\&quot;</span><span class="s1">subject</span><span class="s3">\&quot;</span><span class="s1">] = mailtoComponents.subject;</span><span class="s3">\n\t\t</span><span class="s1">if (mailtoComponents.body) headers[</span><span class="s3">\&quot;</span><span class="s1">body</span><span class="s3">\&quot;</span><span class="s1">] = mailtoComponents.body;</span><span class="s3">\n\n\t\t</span><span class="s1">const fields = [];</span><span class="s3">\n\t\t</span><span class="s1">for (const name in headers) {</span><span class="s3">\n\t\t\t</span><span class="s1">if (headers[name] !== O[name]) {</span><span class="s3">\n\t\t\t\t</span><span class="s1">fields.push(</span><span class="s3">\n\t\t\t\t\t</span><span class="s1">name.replace(PCT_ENCODED, decodeUnreserved).replace(PCT_ENCODED, toUpperCase).replace(NOT_HFNAME, pctEncChar) +</span><span class="s3">\n\t\t\t\t\t\&quot;</span><span class="s1">=</span><span class="s3">\&quot; </span><span class="s1">+</span><span class="s3">\n\t\t\t\t\t</span><span class="s1">headers[name].replace(PCT_ENCODED, decodeUnreserved).replace(PCT_ENCODED, toUpperCase).replace(NOT_HFVALUE, pctEncChar)</span><span class="s3">\n\t\t\t\t</span><span class="s1">);</span><span class="s3">\n\t\t\t</span><span class="s1">}</span><span class="s3">\n\t\t</span><span class="s1">}</span><span class="s3">\n\t\t</span><span class="s1">if (fields.length) {</span><span class="s3">\n\t\t\t</span><span class="s1">components.query = fields.join(</span><span class="s3">\&quot;</span><span class="s1">&amp;</span><span class="s3">\&quot;</span><span class="s1">);</span><span class="s3">\n\t\t</span><span class="s1">}</span><span class="s3">\n\n\t\t</span><span class="s1">return components;</span><span class="s3">\n\t</span><span class="s1">}</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">export default handler;&quot;</span><span class="s0">,</span><span class="s1">&quot;import { URISchemeHandler, URIComponents, URIOptions } from </span><span class="s3">\&quot;</span><span class="s1">../uri</span><span class="s3">\&quot;</span><span class="s1">;</span><span class="s3">\n</span><span class="s1">import ws from </span><span class="s3">\&quot;</span><span class="s1">./ws</span><span class="s3">\&quot;</span><span class="s1">;</span><span class="s3">\n\n</span><span class="s1">const handler:URISchemeHandler = {</span><span class="s3">\n\t</span><span class="s1">scheme : </span><span class="s3">\&quot;</span><span class="s1">wss</span><span class="s3">\&quot;</span><span class="s1">,</span><span class="s3">\n\t</span><span class="s1">domainHost : ws.domainHost,</span><span class="s3">\n\t</span><span class="s1">parse : ws.parse,</span><span class="s3">\n\t</span><span class="s1">serialize : ws.serialize</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">export default handler;&quot;</span><span class="s0">,</span><span class="s1">&quot;import { URISchemeHandler, URIComponents, URIOptions } from </span><span class="s3">\&quot;</span><span class="s1">../uri</span><span class="s3">\&quot;</span><span class="s1">;</span><span class="s3">\n\n</span><span class="s1">export interface WSComponents extends URIComponents {</span><span class="s3">\n\t</span><span class="s1">resourceName?: string;</span><span class="s3">\n\t</span><span class="s1">secure?: boolean;</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">function isSecure(wsComponents:WSComponents):boolean {</span><span class="s3">\n\t</span><span class="s1">return typeof wsComponents.secure === 'boolean' ? wsComponents.secure : String(wsComponents.scheme).toLowerCase() === </span><span class="s3">\&quot;</span><span class="s1">wss</span><span class="s3">\&quot;</span><span class="s1">;</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">//RFC 6455</span><span class="s3">\n</span><span class="s1">const handler:URISchemeHandler = {</span><span class="s3">\n\t</span><span class="s1">scheme : </span><span class="s3">\&quot;</span><span class="s1">ws</span><span class="s3">\&quot;</span><span class="s1">,</span><span class="s3">\n\n\t</span><span class="s1">domainHost : true,</span><span class="s3">\n\n\t</span><span class="s1">parse : function (components:URIComponents, options:URIOptions):WSComponents {</span><span class="s3">\n\t\t</span><span class="s1">const wsComponents = components as WSComponents;</span><span class="s3">\n\n\t\t</span><span class="s1">//indicate if the secure flag is set</span><span class="s3">\n\t\t</span><span class="s1">wsComponents.secure = isSecure(wsComponents);</span><span class="s3">\n\n\t\t</span><span class="s1">//construct resouce name</span><span class="s3">\n\t\t</span><span class="s1">wsComponents.resourceName = (wsComponents.path || '/') + (wsComponents.query ? '?' + wsComponents.query : '');</span><span class="s3">\n\t\t</span><span class="s1">wsComponents.path = undefined;</span><span class="s3">\n\t\t</span><span class="s1">wsComponents.query = undefined;</span><span class="s3">\n\n\t\t</span><span class="s1">return wsComponents;</span><span class="s3">\n\t</span><span class="s1">},</span><span class="s3">\n\n\t</span><span class="s1">serialize : function (wsComponents:WSComponents, options:URIOptions):URIComponents {</span><span class="s3">\n\t\t</span><span class="s1">//normalize the default port</span><span class="s3">\n\t\t</span><span class="s1">if (wsComponents.port === (isSecure(wsComponents) ? 443 : 80) || wsComponents.port === </span><span class="s3">\&quot;\&quot;</span><span class="s1">) {</span><span class="s3">\n\t\t\t</span><span class="s1">wsComponents.port = undefined;</span><span class="s3">\n\t\t</span><span class="s1">}</span><span class="s3">\n\n\t\t</span><span class="s1">//ensure scheme matches secure flag</span><span class="s3">\n\t\t</span><span class="s1">if (typeof wsComponents.secure === 'boolean') {</span><span class="s3">\n\t\t\t</span><span class="s1">wsComponents.scheme = (wsComponents.secure ? 'wss' : 'ws');</span><span class="s3">\n\t\t\t</span><span class="s1">wsComponents.secure = undefined;</span><span class="s3">\n\t\t</span><span class="s1">}</span><span class="s3">\n\n\t\t</span><span class="s1">//reconstruct path from resource name</span><span class="s3">\n\t\t</span><span class="s1">if (wsComponents.resourceName) {</span><span class="s3">\n\t\t\t</span><span class="s1">const [path, query] = wsComponents.resourceName.split('?');</span><span class="s3">\n\t\t\t</span><span class="s1">wsComponents.path = (path &amp;&amp; path !== '/' ? path : undefined);</span><span class="s3">\n\t\t\t</span><span class="s1">wsComponents.query = query;</span><span class="s3">\n\t\t\t</span><span class="s1">wsComponents.resourceName = undefined;</span><span class="s3">\n\t\t</span><span class="s1">}</span><span class="s3">\n\n\t\t</span><span class="s1">//forbid fragment component</span><span class="s3">\n\t\t</span><span class="s1">wsComponents.fragment = undefined;</span><span class="s3">\n\n\t\t</span><span class="s1">return wsComponents;</span><span class="s3">\n\t</span><span class="s1">}</span><span class="s3">\n</span><span class="s1">};</span><span class="s3">\n\n</span><span class="s1">export default handler;&quot;</span><span class="s0">,</span><span class="s1">&quot;import { URISchemeHandler, URIComponents, URIOptions } from </span><span class="s3">\&quot;</span><span class="s1">../uri</span><span class="s3">\&quot;</span><span class="s1">;</span><span class="s3">\n</span><span class="s1">import http from </span><span class="s3">\&quot;</span><span class="s1">./http</span><span class="s3">\&quot;</span><span class="s1">;</span><span class="s3">\n\n</span><span class="s1">const handler:URISchemeHandler = {</span><span class="s3">\n\t</span><span class="s1">scheme : </span><span class="s3">\&quot;</span><span class="s1">https</span><span class="s3">\&quot;</span><span class="s1">,</span><span class="s3">\n\t</span><span class="s1">domainHost : http.domainHost,</span><span class="s3">\n\t</span><span class="s1">parse : http.parse,</span><span class="s3">\n\t</span><span class="s1">serialize : http.serialize</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">export default handler;&quot;</span><span class="s0">,</span><span class="s1">&quot;import { URISchemeHandler, URIComponents, URIOptions } from </span><span class="s3">\&quot;</span><span class="s1">../uri</span><span class="s3">\&quot;</span><span class="s1">;</span><span class="s3">\n\n</span><span class="s1">const handler:URISchemeHandler = {</span><span class="s3">\n\t</span><span class="s1">scheme : </span><span class="s3">\&quot;</span><span class="s1">http</span><span class="s3">\&quot;</span><span class="s1">,</span><span class="s3">\n\n\t</span><span class="s1">domainHost : true,</span><span class="s3">\n\n\t</span><span class="s1">parse : function (components:URIComponents, options:URIOptions):URIComponents {</span><span class="s3">\n\t\t</span><span class="s1">//report missing host</span><span class="s3">\n\t\t</span><span class="s1">if (!components.host) {</span><span class="s3">\n\t\t\t</span><span class="s1">components.error = components.error || </span><span class="s3">\&quot;</span><span class="s1">HTTP URIs must have a host.</span><span class="s3">\&quot;</span><span class="s1">;</span><span class="s3">\n\t\t</span><span class="s1">}</span><span class="s3">\n\n\t\t</span><span class="s1">return components;</span><span class="s3">\n\t</span><span class="s1">},</span><span class="s3">\n\n\t</span><span class="s1">serialize : function (components:URIComponents, options:URIOptions):URIComponents {</span><span class="s3">\n\t\t</span><span class="s1">const secure = String(components.scheme).toLowerCase() === </span><span class="s3">\&quot;</span><span class="s1">https</span><span class="s3">\&quot;</span><span class="s1">;</span><span class="s3">\n\n\t\t</span><span class="s1">//normalize the default port</span><span class="s3">\n\t\t</span><span class="s1">if (components.port === (secure ? 443 : 80) || components.port === </span><span class="s3">\&quot;\&quot;</span><span class="s1">) {</span><span class="s3">\n\t\t\t</span><span class="s1">components.port = undefined;</span><span class="s3">\n\t\t</span><span class="s1">}</span><span class="s3">\n\t\t\n\t\t</span><span class="s1">//normalize the empty path</span><span class="s3">\n\t\t</span><span class="s1">if (!components.path) {</span><span class="s3">\n\t\t\t</span><span class="s1">components.path = </span><span class="s3">\&quot;</span><span class="s1">/</span><span class="s3">\&quot;</span><span class="s1">;</span><span class="s3">\n\t\t</span><span class="s1">}</span><span class="s3">\n\n\t\t</span><span class="s1">//NOTE: We do not parse query strings for HTTP URIs</span><span class="s3">\n\t\t</span><span class="s1">//as WWW Form Url Encoded query strings are part of the HTML4+ spec,</span><span class="s3">\n\t\t</span><span class="s1">//and not the HTTP spec.</span><span class="s3">\n\n\t\t</span><span class="s1">return components;</span><span class="s3">\n\t</span><span class="s1">}</span><span class="s3">\n</span><span class="s1">};</span><span class="s3">\n\n</span><span class="s1">export default handler;&quot;</span><span class="s0">,</span><span class="s1">&quot;/**</span><span class="s3">\n </span><span class="s1">* URI.js</span><span class="s3">\n </span><span class="s1">*</span><span class="s3">\n </span><span class="s1">* @fileoverview An RFC 3986 compliant, scheme extendable URI parsing/validating/resolving library for JavaScript.</span><span class="s3">\n </span><span class="s1">* @author &lt;a href=</span><span class="s3">\&quot;</span><span class="s1">mailto:gary.court@gmail.com</span><span class="s3">\&quot;</span><span class="s1">&gt;Gary Court&lt;/a&gt;</span><span class="s3">\n </span><span class="s1">* @see http://github.com/garycourt/uri-js</span><span class="s3">\n </span><span class="s1">*/</span><span class="s3">\n\n</span><span class="s1">/**</span><span class="s3">\n </span><span class="s1">* Copyright 2011 Gary Court. All rights reserved.</span><span class="s3">\n </span><span class="s1">*</span><span class="s3">\n </span><span class="s1">* Redistribution and use in source and binary forms, with or without modification, are</span><span class="s3">\n </span><span class="s1">* permitted provided that the following conditions are met:</span><span class="s3">\n </span><span class="s1">*</span><span class="s3">\n </span><span class="s1">*    1. Redistributions of source code must retain the above copyright notice, this list of</span><span class="s3">\n </span><span class="s1">*       conditions and the following disclaimer.</span><span class="s3">\n </span><span class="s1">*</span><span class="s3">\n </span><span class="s1">*    2. Redistributions in binary form must reproduce the above copyright notice, this list</span><span class="s3">\n </span><span class="s1">*       of conditions and the following disclaimer in the documentation and/or other materials</span><span class="s3">\n </span><span class="s1">*       provided with the distribution.</span><span class="s3">\n </span><span class="s1">*</span><span class="s3">\n </span><span class="s1">* THIS SOFTWARE IS PROVIDED BY GARY COURT ``AS IS'' AND ANY EXPRESS OR IMPLIED</span><span class="s3">\n </span><span class="s1">* WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND</span><span class="s3">\n </span><span class="s1">* FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL GARY COURT OR</span><span class="s3">\n </span><span class="s1">* CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR</span><span class="s3">\n </span><span class="s1">* CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR</span><span class="s3">\n </span><span class="s1">* SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON</span><span class="s3">\n </span><span class="s1">* ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING</span><span class="s3">\n </span><span class="s1">* NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF</span><span class="s3">\n </span><span class="s1">* ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.</span><span class="s3">\n </span><span class="s1">*</span><span class="s3">\n </span><span class="s1">* The views and conclusions contained in the software and documentation are those of the</span><span class="s3">\n </span><span class="s1">* authors and should not be interpreted as representing official policies, either expressed</span><span class="s3">\n </span><span class="s1">* or implied, of Gary Court.</span><span class="s3">\n </span><span class="s1">*/</span><span class="s3">\n\n</span><span class="s1">import URI_PROTOCOL from </span><span class="s3">\&quot;</span><span class="s1">./regexps-uri</span><span class="s3">\&quot;</span><span class="s1">;</span><span class="s3">\n</span><span class="s1">import IRI_PROTOCOL from </span><span class="s3">\&quot;</span><span class="s1">./regexps-iri</span><span class="s3">\&quot;</span><span class="s1">;</span><span class="s3">\n</span><span class="s1">import punycode from </span><span class="s3">\&quot;</span><span class="s1">punycode</span><span class="s3">\&quot;</span><span class="s1">;</span><span class="s3">\n</span><span class="s1">import { toUpperCase, typeOf, assign } from </span><span class="s3">\&quot;</span><span class="s1">./util</span><span class="s3">\&quot;</span><span class="s1">;</span><span class="s3">\n\n</span><span class="s1">export interface URIComponents {</span><span class="s3">\n\t</span><span class="s1">scheme?:string;</span><span class="s3">\n\t</span><span class="s1">userinfo?:string;</span><span class="s3">\n\t</span><span class="s1">host?:string;</span><span class="s3">\n\t</span><span class="s1">port?:number|string;</span><span class="s3">\n\t</span><span class="s1">path?:string;</span><span class="s3">\n\t</span><span class="s1">query?:string;</span><span class="s3">\n\t</span><span class="s1">fragment?:string;</span><span class="s3">\n\t</span><span class="s1">reference?:string;</span><span class="s3">\n\t</span><span class="s1">error?:string;</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">export interface URIOptions {</span><span class="s3">\n\t</span><span class="s1">scheme?:string;</span><span class="s3">\n\t</span><span class="s1">reference?:string;</span><span class="s3">\n\t</span><span class="s1">tolerant?:boolean;</span><span class="s3">\n\t</span><span class="s1">absolutePath?:boolean;</span><span class="s3">\n\t</span><span class="s1">iri?:boolean;</span><span class="s3">\n\t</span><span class="s1">unicodeSupport?:boolean;</span><span class="s3">\n\t</span><span class="s1">domainHost?:boolean;</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">export interface URISchemeHandler&lt;Components extends URIComponents = URIComponents, Options extends URIOptions = URIOptions, ParentComponents extends URIComponents = URIComponents&gt; {</span><span class="s3">\n\t</span><span class="s1">scheme:string;</span><span class="s3">\n\t</span><span class="s1">parse(components:ParentComponents, options:Options):Components;</span><span class="s3">\n\t</span><span class="s1">serialize(components:Components, options:Options):ParentComponents;</span><span class="s3">\n\t</span><span class="s1">unicodeSupport?:boolean;</span><span class="s3">\n\t</span><span class="s1">domainHost?:boolean;</span><span class="s3">\n\t</span><span class="s1">absolutePath?:boolean;</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">export interface URIRegExps {</span><span class="s3">\n\t</span><span class="s1">NOT_SCHEME : RegExp,</span><span class="s3">\n\t</span><span class="s1">NOT_USERINFO : RegExp,</span><span class="s3">\n\t</span><span class="s1">NOT_HOST : RegExp,</span><span class="s3">\n\t</span><span class="s1">NOT_PATH : RegExp,</span><span class="s3">\n\t</span><span class="s1">NOT_PATH_NOSCHEME : RegExp,</span><span class="s3">\n\t</span><span class="s1">NOT_QUERY : RegExp,</span><span class="s3">\n\t</span><span class="s1">NOT_FRAGMENT : RegExp,</span><span class="s3">\n\t</span><span class="s1">ESCAPE : RegExp,</span><span class="s3">\n\t</span><span class="s1">UNRESERVED : RegExp,</span><span class="s3">\n\t</span><span class="s1">OTHER_CHARS : RegExp,</span><span class="s3">\n\t</span><span class="s1">PCT_ENCODED : RegExp,</span><span class="s3">\n\t</span><span class="s1">IPV4ADDRESS : RegExp,</span><span class="s3">\n\t</span><span class="s1">IPV6ADDRESS : RegExp,</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">export const SCHEMES:{[scheme:string]:URISchemeHandler} = {};</span><span class="s3">\n\n</span><span class="s1">export function pctEncChar(chr:string):string {</span><span class="s3">\n\t</span><span class="s1">const c = chr.charCodeAt(0);</span><span class="s3">\n\t</span><span class="s1">let e:string;</span><span class="s3">\n\n\t</span><span class="s1">if (c &lt; 16) e = </span><span class="s3">\&quot;</span><span class="s1">%0</span><span class="s3">\&quot; </span><span class="s1">+ c.toString(16).toUpperCase();</span><span class="s3">\n\t</span><span class="s1">else if (c &lt; 128) e = </span><span class="s3">\&quot;</span><span class="s1">%</span><span class="s3">\&quot; </span><span class="s1">+ c.toString(16).toUpperCase();</span><span class="s3">\n\t</span><span class="s1">else if (c &lt; 2048) e = </span><span class="s3">\&quot;</span><span class="s1">%</span><span class="s3">\&quot; </span><span class="s1">+ ((c &gt;&gt; 6) | 192).toString(16).toUpperCase() + </span><span class="s3">\&quot;</span><span class="s1">%</span><span class="s3">\&quot; </span><span class="s1">+ ((c &amp; 63) | 128).toString(16).toUpperCase();\n\telse e = \&quot;%\&quot; + ((c &gt;&gt; 12) | 224).toString(16).toUpperCase() + \&quot;%\&quot; + (((c &gt;&gt; 6) &amp; 63) | 128).toString(16).toUpperCase() + \&quot;%\&quot; + ((c &amp; 63) | 128).toString(16).toUpperCase();\n\n\treturn e;\n}\n\nexport function pctDecChars(str:string):string {\n\tlet newStr = \&quot;\&quot;;\n\tlet i = 0;\n\tconst il = str.length;\n\n\twhile (i &lt; il) {\n\t\tconst c = parseInt(str.substr(i + 1, 2), 16);\n\n\t\tif (c &lt; 128) {\n\t\t\tnewStr += String.fromCharCode(c);\n\t\t\ti += 3;\n\t\t}\n\t\telse if (c &gt;= 194 &amp;&amp; c &lt; 224) {\n\t\t\tif ((il - i) &gt;= 6) {\n\t\t\t\tconst c2 = parseInt(str.substr(i + 4, 2), 16);\n\t\t\t\tnewStr += String.fromCharCode(((c &amp; 31) &lt;&lt; 6) | (c2 &amp; 63));\n\t\t\t} else {\n\t\t\t\tnewStr += str.substr(i, 6);\n\t\t\t}\n\t\t\ti += 6;\n\t\t}\n\t\telse if (c &gt;= 224) {\n\t\t\tif ((il - i) &gt;= 9) {\n\t\t\t\tconst c2 = parseInt(str.substr(i + 4, 2), 16);\n\t\t\t\tconst c3 = parseInt(str.substr(i + 7, 2), 16);\n\t\t\t\tnewStr += String.fromCharCode(((c &amp; 15) &lt;&lt; 12) | ((c2 &amp; 63) &lt;&lt; 6) | (c3 &amp; 63));\n\t\t\t} else {\n\t\t\t\tnewStr += str.substr(i, 9);\n\t\t\t}\n\t\t\ti += 9;\n\t\t}\n\t\telse {\n\t\t\tnewStr += str.substr(i, 3);\n\t\t\ti += 3;\n\t\t}\n\t}\n\n\treturn newStr;\n}\n\nfunction _normalizeComponentEncoding(components:URIComponents, protocol:URIRegExps) {\n\tfunction decodeUnreserved(str:string):string {\n\t\tconst decStr = pctDecChars(str);\n\t\treturn (!decStr.match(protocol.UNRESERVED) ? str : decStr);\n\t}\n\n\tif (components.scheme) components.scheme = String(components.scheme).replace(protocol.PCT_ENCODED, decodeUnreserved).toLowerCase().replace(protocol.NOT_SCHEME, \&quot;\&quot;);\n\tif (components.userinfo !== undefined) components.userinfo = String(components.userinfo).replace(protocol.PCT_ENCODED, decodeUnreserved).replace(protocol.NOT_USERINFO, pctEncChar).replace(protocol.PCT_ENCODED, toUpperCase);\n\tif (components.host !== undefined) components.host = String(components.host).replace(protocol.PCT_ENCODED, decodeUnreserved).toLowerCase().replace(protocol.NOT_HOST, pctEncChar).replace(protocol.PCT_ENCODED, toUpperCase);\n\tif (components.path !== undefined) components.path = String(components.path).replace(protocol.PCT_ENCODED, decodeUnreserved).replace((components.scheme ? protocol.NOT_PATH : protocol.NOT_PATH_NOSCHEME), pctEncChar).replace(protocol.PCT_ENCODED, toUpperCase);\n\tif (components.query !== undefined) components.query = String(components.query).replace(protocol.PCT_ENCODED, decodeUnreserved).replace(protocol.NOT_QUERY, pctEncChar).replace(protocol.PCT_ENCODED, toUpperCase);\n\tif (components.fragment !== undefined) components.fragment = String(components.fragment).replace(protocol.PCT_ENCODED, decodeUnreserved).replace(protocol.NOT_FRAGMENT, pctEncChar).replace(protocol.PCT_ENCODED, toUpperCase);\n\n\treturn components;\n};\n\nfunction _stripLeadingZeros(str:string):string {\n\treturn str.replace(/^0*(.*)/, \&quot;$1\&quot;) || \&quot;0\&quot;;\n}\n\nfunction _normalizeIPv4(host:string, protocol:URIRegExps):string {\n\tconst matches = host.match(protocol.IPV4ADDRESS) || [];\n\tconst [, address] = matches;\n\t\n\tif (address) {\n\t\treturn address.split(\&quot;.\&quot;).map(_stripLeadingZeros).join(\&quot;.\&quot;);\n\t} else {\n\t\treturn host;\n\t}\n}\n\nfunction _normalizeIPv6(host:string, protocol:URIRegExps):string {\n\tconst matches = host.match(protocol.IPV6ADDRESS) || [];\n\tconst [, address, zone] = matches;\n\n\tif (address) {\n\t\tconst [last, first] = address.toLowerCase().split('::').reverse();\n\t\tconst firstFields = first ? first.split(\&quot;:\&quot;).map(_stripLeadingZeros) : [];\n\t\tconst lastFields = last.split(\&quot;:\&quot;).map(_stripLeadingZeros);\n\t\tconst isLastFieldIPv4Address = protocol.IPV4ADDRESS.test(lastFields[lastFields.length - 1]);\n\t\tconst fieldCount = isLastFieldIPv4Address ? 7 : 8;\n\t\tconst lastFieldsStart = lastFields.length - fieldCount;\n\t\tconst fields = Array&lt;string&gt;(fieldCount);\n\n\t\tfor (let x = 0; x &lt; fieldCount; ++x) {\n\t\t\tfields[x] = firstFields[x] || lastFields[lastFieldsStart + x] || '';\n\t\t}\n\n\t\tif (isLastFieldIPv4Address) {\n\t\t\tfields[fieldCount - 1] = _normalizeIPv4(fields[fieldCount - 1], protocol);\n\t\t}\n\n\t\tconst allZeroFields = fields.reduce&lt;Array&lt;{index:number,length:number}&gt;&gt;((acc, field, index) =&gt; {\n\t\t\tif (!field || field === \&quot;0\&quot;) {\n\t\t\t\tconst lastLongest = acc[acc.length - 1];\n\t\t\t\tif (lastLongest &amp;&amp; lastLongest.index + lastLongest.length === index) {\n\t\t\t\t\tlastLongest.length++;\n\t\t\t\t} else {\n\t\t\t\t\tacc.push({ index, length : 1 });\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn acc;\n\t\t}, []);\n\n\t\tconst longestZeroFields = allZeroFields.sort((a, b) =&gt; b.length - a.length)[0];\n\n\t\tlet newHost:string;\n\t\tif (longestZeroFields &amp;&amp; longestZeroFields.length &gt; 1) {\n\t\t\tconst newFirst = fields.slice(0, longestZeroFields.index) ;\n\t\t\tconst newLast = fields.slice(longestZeroFields.index + longestZeroFields.length);\n\t\t\tnewHost = newFirst.join(\&quot;:\&quot;) + \&quot;::\&quot; + newLast.join(\&quot;:\&quot;);\n\t\t} else {\n\t\t\tnewHost = fields.join(\&quot;:\&quot;);\n\t\t}\n\n\t\tif (zone) {\n\t\t\tnewHost += \&quot;%\&quot; + zone;\n\t\t}\n\n\t\treturn newHost;\n\t} else {\n\t\treturn host;\n\t}\n}\n\nconst URI_PARSE = /^(?:([^:\\/?#]+):)?(?:\\/\\/((?:([^\\/?#@]*)@)?(\\[[^\\/?#\\]]+\\]|[^\\/?#:]*)(?:\\:(\\d*))?))?([^?#]*)(?:\\?([^#]*))?(?:#((?:.|\\n|\\r)*))?/i;\nconst NO_MATCH_IS_UNDEFINED = (&lt;RegExpMatchArray&gt;(\&quot;\&quot;).match(/(){0}/))[1] === undefined;\n\nexport function parse(uriString:string, options:URIOptions = {}):URIComponents {\n\tconst components:URIComponents = {};\n\tconst protocol = (options.iri !== false ? IRI_PROTOCOL : URI_PROTOCOL);\n\n\tif (options.reference === \&quot;suffix\&quot;) uriString = (options.scheme ? options.scheme + \&quot;:\&quot; : \&quot;\&quot;) + \&quot;//\&quot; + uriString;\n\n\tconst matches = uriString.match(URI_PARSE);\n\n\tif (matches) {\n\t\tif (NO_MATCH_IS_UNDEFINED) {\n\t\t\t//store each component\n\t\t\tcomponents.scheme = matches[1];\n\t\t\tcomponents.userinfo = matches[3];\n\t\t\tcomponents.host = matches[4];\n\t\t\tcomponents.port = parseInt(matches[5], 10);\n\t\t\tcomponents.path = matches[6] || \&quot;\&quot;;\n\t\t\tcomponents.query = matches[7];\n\t\t\tcomponents.fragment = matches[8];\n\n\t\t\t//fix port number\n\t\t\tif (isNaN(components.port)) {\n\t\t\t\tcomponents.port = matches[5];\n\t\t\t}\n\t\t} else {  //IE FIX for improper RegExp matching\n\t\t\t//store each component\n\t\t\tcomponents.scheme = matches[1] || undefined;\n\t\t\tcomponents.userinfo = (uriString.indexOf(\&quot;@\&quot;) !== -1 ? matches[3] : undefined);\n\t\t\tcomponents.host = (uriString.indexOf(\&quot;//\&quot;) !== -1 ? matches[4] : undefined);\n\t\t\tcomponents.port = parseInt(matches[5], 10);\n\t\t\tcomponents.path = matches[6] || \&quot;\&quot;;\n\t\t\tcomponents.query = (uriString.indexOf(\&quot;?\&quot;) !== -1 ? matches[7] : undefined);\n\t\t\tcomponents.fragment = (uriString.indexOf(\&quot;#\&quot;) !== -1 ? matches[8] : undefined);\n\n\t\t\t//fix port number\n\t\t\tif (isNaN(components.port)) {\n\t\t\t\tcomponents.port = (uriString.match(/\\/\\/(?:.|\\n)*\\:(?:\\/|\\?|\\#|$)/) ? matches[4] : undefined);\n\t\t\t}\n\t\t}\n\n\t\tif (components.host) {\n\t\t\t//normalize IP hosts\n\t\t\tcomponents.host = _normalizeIPv6(_normalizeIPv4(components.host, protocol), protocol);\n\t\t}\n\n\t\t//determine reference type\n\t\tif (components.scheme === undefined &amp;&amp; components.userinfo === undefined &amp;&amp; components.host === undefined &amp;&amp; components.port === undefined &amp;&amp; !components.path &amp;&amp; components.query === undefined) {\n\t\t\tcomponents.reference = \&quot;same-document\&quot;;\n\t\t} else if (components.scheme === undefined) {\n\t\t\tcomponents.reference = \&quot;relative\&quot;;\n\t\t} else if (components.fragment === undefined) {\n\t\t\tcomponents.reference = \&quot;absolute\&quot;;\n\t\t} else {\n\t\t\tcomponents.reference = \&quot;uri\&quot;;\n\t\t}\n\n\t\t//check for reference errors\n\t\tif (options.reference &amp;&amp; options.reference !== \&quot;suffix\&quot; &amp;&amp; options.reference !== components.reference) {\n\t\t\tcomponents.error = components.error || \&quot;URI is not a \&quot; + options.reference + \&quot; reference.\&quot;;\n\t\t}\n\n\t\t//find scheme handler\n\t\tconst schemeHandler = SCHEMES[(options.scheme || components.scheme || \&quot;\&quot;).toLowerCase()];\n\n\t\t//check if scheme can't handle IRIs\n\t\tif (!options.unicodeSupport &amp;&amp; (!schemeHandler || !schemeHandler.unicodeSupport)) {\n\t\t\t//if host component is a domain name\n\t\t\tif (components.host &amp;&amp; (options.domainHost || (schemeHandler &amp;&amp; schemeHandler.domainHost))) {\n\t\t\t\t//convert Unicode IDN -&gt; ASCII IDN\n\t\t\t\ttry {\n\t\t\t\t\tcomponents.host = punycode.toASCII(components.host.replace(protocol.PCT_ENCODED, pctDecChars).toLowerCase());\n\t\t\t\t} catch (e) {\n\t\t\t\t\tcomponents.error = components.error || \&quot;Host's domain name can not be converted to ASCII via punycode: \&quot; + e;\n\t\t\t\t}\n\t\t\t}\n\t\t\t//convert IRI -&gt; URI\n\t\t\t_normalizeComponentEncoding(components, URI_PROTOCOL);\n\t\t} else {\n\t\t\t//normalize encodings\n\t\t\t_normalizeComponentEncoding(components, protocol);\n\t\t}\n\n\t\t//perform scheme specific parsing\n\t\tif (schemeHandler &amp;&amp; schemeHandler.parse) {\n\t\t\tschemeHandler.parse(components, options);\n\t\t}\n\t} else {\n\t\tcomponents.error = components.error || \&quot;URI can not be parsed.\&quot;;\n\t}\n\n\treturn components;\n};\n\nfunction _recomposeAuthority(components:URIComponents, options:URIOptions):string|undefined {\n\tconst protocol = (options.iri !== false ? IRI_PROTOCOL : URI_PROTOCOL);\n\tconst uriTokens:Array&lt;string&gt; = [];\n\n\tif (components.userinfo !== undefined) {\n\t\turiTokens.push(components.userinfo);\n\t\turiTokens.push(\&quot;@\&quot;);\n\t}\n\n\tif (components.host !== undefined) {\n\t\t//normalize IP hosts, add brackets and escape zone separator for IPv6\n\t\turiTokens.push(_normalizeIPv6(_normalizeIPv4(String(components.host), protocol), protocol).replace(protocol.IPV6ADDRESS, (_, $1, $2) =&gt; \&quot;[\&quot; + $1 + ($2 ? \&quot;%25\&quot; + $2 : \&quot;\&quot;) + \&quot;]\&quot;));\n\t}\n\n\tif (typeof components.port === \&quot;number\&quot; || typeof components.port === \&quot;string\&quot;) {\n\t\turiTokens.push(\&quot;:\&quot;);\n\t\turiTokens.push(String(components.port));\n\t}\n\n\treturn uriTokens.length ? uriTokens.join(\&quot;\&quot;) : undefined;\n};\n\nconst RDS1 = /^\\.\\.?\\//;\nconst RDS2 = /^\\/\\.(\\/|$)/;\nconst RDS3 = /^\\/\\.\\.(\\/|$)/;\nconst RDS4 = /^\\.\\.?$/;\nconst RDS5 = /^\\/?(?:.|\\n)*?(?=\\/|$)/;\n\nexport function removeDotSegments(input:string):string {\n\tconst output:Array&lt;string&gt; = [];\n\n\twhile (input.length) {\n\t\tif (input.match(RDS1)) {\n\t\t\tinput = input.replace(RDS1, \&quot;\&quot;);\n\t\t} else if (input.match(RDS2)) {\n\t\t\tinput = input.replace(RDS2, \&quot;/\&quot;);\n\t\t} else if (input.match(RDS3)) {\n\t\t\tinput = input.replace(RDS3, \&quot;/\&quot;);\n\t\t\toutput.pop();\n\t\t} else if (input === \&quot;.\&quot; || input === \&quot;..\&quot;) {\n\t\t\tinput = \&quot;\&quot;;\n\t\t} else {\n\t\t\tconst im = input.match(RDS5);\n\t\t\tif (im) {\n\t\t\t\tconst s = im[0];\n\t\t\t\tinput = input.slice(s.length);\n\t\t\t\toutput.push(s);\n\t\t\t} else {\n\t\t\t\tthrow new Error(\&quot;Unexpected dot segment condition\&quot;);\n\t\t\t}\n\t\t}\n\t}\n\n\treturn output.join(\&quot;\&quot;);\n};\n\nexport function serialize(components:URIComponents, options:URIOptions = {}):string {\n\tconst protocol = (options.iri ? IRI_PROTOCOL : URI_PROTOCOL);\n\tconst uriTokens:Array&lt;string&gt; = [];\n\n\t//find scheme handler\n\tconst schemeHandler = SCHEMES[(options.scheme || components.scheme || \&quot;\&quot;).toLowerCase()];\n\n\t//perform scheme specific serialization\n\tif (schemeHandler &amp;&amp; schemeHandler.serialize) schemeHandler.serialize(components, options);\n\n\tif (components.host) {\n\t\t//if host component is an IPv6 address\n\t\tif (protocol.IPV6ADDRESS.test(components.host)) {\n\t\t\t//TODO: normalize IPv6 address as per RFC 5952\n\t\t}\n\n\t\t//if host component is a domain name\n\t\telse if (options.domainHost || (schemeHandler &amp;&amp; schemeHandler.domainHost)) {\n\t\t\t//convert IDN via punycode\n\t\t\ttry {\n\t\t\t\tcomponents.host = (!options.iri ? punycode.toASCII(components.host.replace(protocol.PCT_ENCODED, pctDecChars).toLowerCase()) : punycode.toUnicode(components.host));\n\t\t\t} catch (e) {\n\t\t\t\tcomponents.error = components.error || \&quot;Host's domain name can not be converted to \&quot; + (!options.iri ? \&quot;ASCII\&quot; : \&quot;Unicode\&quot;) + \&quot; via punycode: \&quot; + e;\n\t\t\t}\n\t\t}\n\t}\n\n\t//normalize encoding\n\t_normalizeComponentEncoding(components, protocol);\n\n\tif (options.reference !== \&quot;suffix\&quot; &amp;&amp; components.scheme) {\n\t\turiTokens.push(components.scheme);\n\t\turiTokens.push(\&quot;:\&quot;);\n\t}\n\n\tconst authority = _recomposeAuthority(components, options);\n\tif (authority !== undefined) {\n\t\tif (options.reference !== \&quot;suffix\&quot;) {\n\t\t\turiTokens.push(\&quot;//\&quot;);\n\t\t}\n\n\t\turiTokens.push(authority);\n\n\t\tif (components.path &amp;&amp; components.path.charAt(0) !== \&quot;/\&quot;) {\n\t\t\turiTokens.push(\&quot;/\&quot;);\n\t\t}\n\t}\n\n\tif (components.path !== undefined) {\n\t\tlet s = components.path;\n\n\t\tif (!options.absolutePath &amp;&amp; (!schemeHandler || !schemeHandler.absolutePath)) {\n\t\t\ts = removeDotSegments(s);\n\t\t}\n\n\t\tif (authority === undefined) {\n\t\t\ts = s.replace(/^\\/\\//, \&quot;/%2F\&quot;);  //don't allow the path to start with \&quot;//\&quot;\n\t\t}\n\n\t\turiTokens.push(s);\n\t}\n\n\tif (components.query !== undefined) {\n\t\turiTokens.push(\&quot;?\&quot;);\n\t\turiTokens.push(components.query);\n\t}\n\n\tif (components.fragment !== undefined) {\n\t\turiTokens.push(\&quot;#\&quot;);\n\t\turiTokens.push(components.fragment);\n\t}\n\n\treturn uriTokens.join(\&quot;\&quot;);  //merge tokens into a string\n};\n\nexport function resolveComponents(base:URIComponents, relative:URIComponents, options:URIOptions = {}, skipNormalization?:boolean):URIComponents {\n\tconst target:URIComponents = {};\n\n\tif (!skipNormalization) {\n\t\tbase = parse(serialize(base, options), options);  //normalize base components\n\t\trelative = parse(serialize(relative, options), options);  //normalize relative components\n\t}\n\toptions = options || {};\n\n\tif (!options.tolerant &amp;&amp; relative.scheme) {\n\t\ttarget.scheme = relative.scheme;\n\t\t//target.authority = relative.authority;\n\t\ttarget.userinfo = relative.userinfo;\n\t\ttarget.host = relative.host;\n\t\ttarget.port = relative.port;\n\t\ttarget.path = removeDotSegments(relative.path || \&quot;\&quot;);\n\t\ttarget.query = relative.query;\n\t} else {\n\t\tif (relative.userinfo !== undefined || relative.host !== undefined || relative.port !== undefined) {\n\t\t\t//target.authority = relative.authority;\n\t\t\ttarget.userinfo = relative.userinfo;\n\t\t\ttarget.host = relative.host;\n\t\t\ttarget.port = relative.port;\n\t\t\ttarget.path = removeDotSegments(relative.path || \&quot;\&quot;);\n\t\t\ttarget.query = relative.query;\n\t\t} else {\n\t\t\tif (!relative.path) {\n\t\t\t\ttarget.path = base.path;\n\t\t\t\tif (relative.query !== undefined) {\n\t\t\t\t\ttarget.query = relative.query;\n\t\t\t\t} else {\n\t\t\t\t\ttarget.query = base.query;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tif (relative.path.charAt(0) === \&quot;/\&quot;) {\n\t\t\t\t\ttarget.path = removeDotSegments(relative.path);\n\t\t\t\t} else {\n\t\t\t\t\tif ((base.userinfo !== undefined || base.host !== undefined || base.port !== undefined) &amp;&amp; !base.path) {\n\t\t\t\t\t\ttarget.path = \&quot;/\&quot; + relative.path;\n\t\t\t\t\t} else if (!base.path) {\n\t\t\t\t\t\ttarget.path = relative.path;\n\t\t\t\t\t} else {\n\t\t\t\t\t\ttarget.path = base.path.slice(0, base.path.lastIndexOf(\&quot;/\&quot;) + 1) + relative.path;\n\t\t\t\t\t}\n\t\t\t\t\ttarget.path = removeDotSegments(target.path);\n\t\t\t\t}\n\t\t\t\ttarget.query = relative.query;\n\t\t\t}\n\t\t\t//target.authority = base.authority;\n\t\t\ttarget.userinfo = base.userinfo;\n\t\t\ttarget.host = base.host;\n\t\t\ttarget.port = base.port;\n\t\t}\n\t\ttarget.scheme = base.scheme;\n\t}\n\n\ttarget.fragment = relative.fragment;\n\n\treturn target;\n};\n\nexport function resolve(baseURI:string, relativeURI:string, options?:URIOptions):string {\n\tconst schemelessOptions = assign({ scheme : 'null' }, options);\n\treturn serialize(resolveComponents(parse(baseURI, schemelessOptions), parse(relativeURI, schemelessOptions), schemelessOptions, true), schemelessOptions);\n};\n\nexport function normalize(uri:string, options?:URIOptions):string;\nexport function normalize(uri:URIComponents, options?:URIOptions):URIComponents;\nexport function normalize(uri:any, options?:URIOptions):any {\n\tif (typeof uri === \&quot;string\&quot;) {\n\t\turi = serialize(parse(uri, options), options);\n\t} else if (typeOf(uri) === \&quot;object\&quot;) {\n\t\turi = parse(serialize(&lt;URIComponents&gt;uri, options), options);\n\t}\n\n\treturn uri;\n};\n\nexport function equal(uriA:string, uriB:string, options?: URIOptions):boolean;\nexport function equal(uriA:URIComponents, uriB:URIComponents, options?:URIOptions):boolean;\nexport function equal(uriA:any, uriB:any, options?:URIOptions):boolean {\n\tif (typeof uriA === \&quot;string\&quot;) {\n\t\turiA = serialize(parse(uriA, options), options);\n\t} else if (typeOf(uriA) === \&quot;object\&quot;) {\n\t\turiA = serialize(&lt;URIComponents&gt;uriA, options);\n\t}\n\n\tif (typeof uriB === \&quot;string\&quot;) {\n\t\turiB = serialize(parse(uriB, options), options);\n\t} else if (typeOf(uriB) === \&quot;object\&quot;) {\n\t\turiB = serialize(&lt;URIComponents&gt;uriB, options);\n\t}\n\n\treturn uriA === uriB;\n};\n\nexport function escapeComponent(str:string, options?:URIOptions):string {\n\treturn str &amp;&amp; str.toString().replace((!options || !options.iri ? URI_PROTOCOL.ESCAPE : IRI_PROTOCOL.ESCAPE), pctEncChar);\n};\n\nexport function unescapeComponent(str:string, options?:URIOptions):string {\n\treturn str &amp;&amp; str.toString().replace((!options || !options.iri ? URI_PROTOCOL.PCT_ENCODED : IRI_PROTOCOL.PCT_ENCODED), pctDecChars);\n};\n&quot;,&quot;'use strict';\n\n/** Highest positive signed 32-bit float value */\nconst maxInt = 2147483647; // aka. 0x7FFFFFFF or 2^31-1\n\n/** Bootstring parameters */\nconst base = 36;\nconst tMin = 1;\nconst tMax = 26;\nconst skew = 38;\nconst damp = 700;\nconst initialBias = 72;\nconst initialN = 128; // 0x80\nconst delimiter = '-'; // '\\x2D'\n\n/** Regular expressions */\nconst regexPunycode = /^xn--/;\nconst regexNonASCII = /[^\\0-\\x7E]/; // non-ASCII chars\nconst regexSeparators = /[\\x2E\\u3002\\uFF0E\\uFF61]/g; // RFC 3490 separators\n\n/** Error messages */\nconst errors = {\n\t'overflow': 'Overflow: input needs wider integers to process',\n\t'not-basic': 'Illegal input &gt;= 0x80 (not a basic code point)',\n\t'invalid-input': 'Invalid input'\n};\n\n/** Convenience shortcuts */\nconst baseMinusTMin = base - tMin;\nconst floor = Math.floor;\nconst stringFromCharCode = String.fromCharCode;\n\n/*--------------------------------------------------------------------------*/\n\n/**\n * A generic error utility function.\n * @private\n * @param {String} type The error type.\n * @returns {Error} Throws a `RangeError` with the applicable error message.\n */\nfunction error(type) {\n\tthrow new RangeError(errors[type]);\n}\n\n/**\n * A generic `Array#map` utility function.\n * @private\n * @param {Array} array The array to iterate over.\n * @param {Function} callback The function that gets called for every array\n * item.\n * @returns {Array} A new array of values returned by the callback function.\n */\nfunction map(array, fn) {\n\tconst result = [];\n\tlet length = array.length;\n\twhile (length--) {\n\t\tresult[length] = fn(array[length]);\n\t}\n\treturn result;\n}\n\n/**\n * A simple `Array#map`-like wrapper to work with domain name strings or email\n * addresses.\n * @private\n * @param {String} domain The domain name or email address.\n * @param {Function} callback The function that gets called for every\n * character.\n * @returns {Array} A new string of characters returned by the callback\n * function.\n */\nfunction mapDomain(string, fn) {\n\tconst parts = string.split('@');\n\tlet result = '';\n\tif (parts.length &gt; 1) {\n\t\t// In email addresses, only the domain name should be punycoded. Leave\n\t\t// the local part (i.e. everything up to `@`) intact.\n\t\tresult = parts[0] + '@';\n\t\tstring = parts[1];\n\t}\n\t// Avoid `split(regex)` for IE8 compatibility. See #17.\n\tstring = string.replace(regexSeparators, '\\x2E');\n\tconst labels = string.split('.');\n\tconst encoded = map(labels, fn).join('.');\n\treturn result + encoded;\n}\n\n/**\n * Creates an array containing the numeric code points of each Unicode\n * character in the string. While JavaScript uses UCS-2 internally,\n * this function will convert a pair of surrogate halves (each of which\n * UCS-2 exposes as separate characters) into a single code point,\n * matching UTF-16.\n * @see `punycode.ucs2.encode`\n * @see &lt;https://mathiasbynens.be/notes/javascript-encoding&gt;\n * @memberOf punycode.ucs2\n * @name decode\n * @param {String} string The Unicode input string (UCS-2).\n * @returns {Array} The new array of code points.\n */\nfunction ucs2decode(string) {\n\tconst output = [];\n\tlet counter = 0;\n\tconst length = string.length;\n\twhile (counter &lt; length) {\n\t\tconst value = string.charCodeAt(counter++);\n\t\tif (value &gt;= 0xD800 &amp;&amp; value &lt;= 0xDBFF &amp;&amp; counter &lt; length) {\n\t\t\t// It's a high surrogate, and there is a next character.\n\t\t\tconst extra = string.charCodeAt(counter++);\n\t\t\tif ((extra &amp; 0xFC00) == 0xDC00) { // Low surrogate.\n\t\t\t\toutput.push(((value &amp; 0x3FF) &lt;&lt; 10) + (extra &amp; 0x3FF) + 0x10000);\n\t\t\t} else {\n\t\t\t\t// It's an unmatched surrogate; only append this code unit, in case the\n\t\t\t\t// next code unit is the high surrogate of a surrogate pair.\n\t\t\t\toutput.push(value);\n\t\t\t\tcounter--;\n\t\t\t}\n\t\t} else {\n\t\t\toutput.push(value);\n\t\t}\n\t}\n\treturn output;\n}\n\n/**\n * Creates a string based on an array of numeric code points.\n * @see `punycode.ucs2.decode`\n * @memberOf punycode.ucs2\n * @name encode\n * @param {Array} codePoints The array of numeric code points.\n * @returns {String} The new Unicode string (UCS-2).\n */\nconst ucs2encode = array =&gt; String.fromCodePoint(...array);\n\n/**\n * Converts a basic code point into a digit/integer.\n * @see `digitToBasic()`\n * @private\n * @param {Number} codePoint The basic numeric code point value.\n * @returns {Number} The numeric value of a basic code point (for use in\n * representing integers) in the range `0` to `base - 1`, or `base` if\n * the code point does not represent a value.\n */\nconst basicToDigit = function(codePoint) {\n\tif (codePoint - 0x30 &lt; 0x0A) {\n\t\treturn codePoint - 0x16;\n\t}\n\tif (codePoint - 0x41 &lt; 0x1A) {\n\t\treturn codePoint - 0x41;\n\t}\n\tif (codePoint - 0x61 &lt; 0x1A) {\n\t\treturn codePoint - 0x61;\n\t}\n\treturn base;\n};\n\n/**\n * Converts a digit/integer into a basic code point.\n * @see `basicToDigit()`\n * @private\n * @param {Number} digit The numeric value of a basic code point.\n * @returns {Number} The basic code point whose value (when used for\n * representing integers) is `digit`, which needs to be in the range\n * `0` to `base - 1`. If `flag` is non-zero, the uppercase form is\n * used; else, the lowercase form is used. The behavior is undefined\n * if `flag` is non-zero and `digit` has no uppercase form.\n */\nconst digitToBasic = function(digit, flag) {\n\t//  0..25 map to ASCII a..z or A..Z\n\t// 26..35 map to ASCII 0..9\n\treturn digit + 22 + 75 * (digit &lt; 26) - ((flag != 0) &lt;&lt; 5);\n};\n\n/**\n * Bias adaptation function as per section 3.4 of RFC 3492.\n * https://tools.ietf.org/html/rfc3492#section-3.4\n * @private\n */\nconst adapt = function(delta, numPoints, firstTime) {\n\tlet k = 0;\n\tdelta = firstTime ? floor(delta / damp) : delta &gt;&gt; 1;\n\tdelta += floor(delta / numPoints);\n\tfor (/* no initialization */; delta &gt; baseMinusTMin * tMax &gt;&gt; 1; k += base) {\n\t\tdelta = floor(delta / baseMinusTMin);\n\t}\n\treturn floor(k + (baseMinusTMin + 1) * delta / (delta + skew));\n};\n\n/**\n * Converts a Punycode string of ASCII-only symbols to a string of Unicode\n * symbols.\n * @memberOf punycode\n * @param {String} input The Punycode string of ASCII-only symbols.\n * @returns {String} The resulting string of Unicode symbols.\n */\nconst decode = function(input) {\n\t// Don't use UCS-2.\n\tconst output = [];\n\tconst inputLength = input.length;\n\tlet i = 0;\n\tlet n = initialN;\n\tlet bias = initialBias;\n\n\t// Handle the basic code points: let `basic` be the number of input code\n\t// points before the last delimiter, or `0` if there is none, then copy\n\t// the first basic code points to the output.\n\n\tlet basic = input.lastIndexOf(delimiter);\n\tif (basic &lt; 0) {\n\t\tbasic = 0;\n\t}\n\n\tfor (let j = 0; j &lt; basic; ++j) {\n\t\t// if it's not a basic code point\n\t\tif (input.charCodeAt(j) &gt;= 0x80) {\n\t\t\terror('not-basic');\n\t\t}\n\t\toutput.push(input.charCodeAt(j));\n\t}\n\n\t// Main decoding loop: start just after the last delimiter if any basic code\n\t// points were copied; start at the beginning otherwise.\n\n\tfor (let index = basic &gt; 0 ? basic + 1 : 0; index &lt; inputLength; /* no final expression */) {\n\n\t\t// `index` is the index of the next character to be consumed.\n\t\t// Decode a generalized variable-length integer into `delta`,\n\t\t// which gets added to `i`. The overflow checking is easier\n\t\t// if we increase `i` as we go, then subtract off its starting\n\t\t// value at the end to obtain `delta`.\n\t\tlet oldi = i;\n\t\tfor (let w = 1, k = base; /* no condition */; k += base) {\n\n\t\t\tif (index &gt;= inputLength) {\n\t\t\t\terror('invalid-input');\n\t\t\t}\n\n\t\t\tconst digit = basicToDigit(input.charCodeAt(index++));\n\n\t\t\tif (digit &gt;= base || digit &gt; floor((maxInt - i) / w)) {\n\t\t\t\terror('overflow');\n\t\t\t}\n\n\t\t\ti += digit * w;\n\t\t\tconst t = k &lt;= bias ? tMin : (k &gt;= bias + tMax ? tMax : k - bias);\n\n\t\t\tif (digit &lt; t) {\n\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\tconst baseMinusT = base - t;\n\t\t\tif (w &gt; floor(maxInt / baseMinusT)) {\n\t\t\t\terror('overflow');\n\t\t\t}\n\n\t\t\tw *= baseMinusT;\n\n\t\t}\n\n\t\tconst out = output.length + 1;\n\t\tbias = adapt(i - oldi, out, oldi == 0);\n\n\t\t// `i` was supposed to wrap around from `out` to `0`,\n\t\t// incrementing `n` each time, so we'll fix that now:\n\t\tif (floor(i / out) &gt; maxInt - n) {\n\t\t\terror('overflow');\n\t\t}\n\n\t\tn += floor(i / out);\n\t\ti %= out;\n\n\t\t// Insert `n` at position `i` of the output.\n\t\toutput.splice(i++, 0, n);\n\n\t}\n\n\treturn String.fromCodePoint(...output);\n};\n\n/**\n * Converts a string of Unicode symbols (e.g. a domain name label) to a\n * Punycode string of ASCII-only symbols.\n * @memberOf punycode\n * @param {String} input The string of Unicode symbols.\n * @returns {String} The resulting Punycode string of ASCII-only symbols.\n */\nconst encode = function(input) {\n\tconst output = [];\n\n\t// Convert the input in UCS-2 to an array of Unicode code points.\n\tinput = ucs2decode(input);\n\n\t// Cache the length.\n\tlet inputLength = input.length;\n\n\t// Initialize the state.\n\tlet n = initialN;\n\tlet delta = 0;\n\tlet bias = initialBias;\n\n\t// Handle the basic code points.\n\tfor (const currentValue of input) {\n\t\tif (currentValue &lt; 0x80) {\n\t\t\toutput.push(stringFromCharCode(currentValue));\n\t\t}\n\t}\n\n\tlet basicLength = output.length;\n\tlet handledCPCount = basicLength;\n\n\t// `handledCPCount` is the number of code points that have been handled;\n\t// `basicLength` is the number of basic code points.\n\n\t// Finish the basic string with a delimiter unless it's empty.\n\tif (basicLength) {\n\t\toutput.push(delimiter);\n\t}\n\n\t// Main encoding loop:\n\twhile (handledCPCount &lt; inputLength) {\n\n\t\t// All non-basic code points &lt; n have been handled already. Find the next\n\t\t// larger one:\n\t\tlet m = maxInt;\n\t\tfor (const currentValue of input) {\n\t\t\tif (currentValue &gt;= n &amp;&amp; currentValue &lt; m) {\n\t\t\t\tm = currentValue;\n\t\t\t}\n\t\t}\n\n\t\t// Increase `delta` enough to advance the decoder's &lt;n,i&gt; state to &lt;m,0&gt;,\n\t\t// but guard against overflow.\n\t\tconst handledCPCountPlusOne = handledCPCount + 1;\n\t\tif (m - n &gt; floor((maxInt - delta) / handledCPCountPlusOne)) {\n\t\t\terror('overflow');\n\t\t}\n\n\t\tdelta += (m - n) * handledCPCountPlusOne;\n\t\tn = m;\n\n\t\tfor (const currentValue of input) {\n\t\t\tif (currentValue &lt; n &amp;&amp; ++delta &gt; maxInt) {\n\t\t\t\terror('overflow');\n\t\t\t}\n\t\t\tif (currentValue == n) {\n\t\t\t\t// Represent delta as a generalized variable-length integer.\n\t\t\t\tlet q = delta;\n\t\t\t\tfor (let k = base; /* no condition */; k += base) {\n\t\t\t\t\tconst t = k &lt;= bias ? tMin : (k &gt;= bias + tMax ? tMax : k - bias);\n\t\t\t\t\tif (q &lt; t) {\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t\tconst qMinusT = q - t;\n\t\t\t\t\tconst baseMinusT = base - t;\n\t\t\t\t\toutput.push(\n\t\t\t\t\t\tstringFromCharCode(digitToBasic(t + qMinusT % baseMinusT, 0))\n\t\t\t\t\t);\n\t\t\t\t\tq = floor(qMinusT / baseMinusT);\n\t\t\t\t}\n\n\t\t\t\toutput.push(stringFromCharCode(digitToBasic(q, 0)));\n\t\t\t\tbias = adapt(delta, handledCPCountPlusOne, handledCPCount == basicLength);\n\t\t\t\tdelta = 0;\n\t\t\t\t++handledCPCount;\n\t\t\t}\n\t\t}\n\n\t\t++delta;\n\t\t++n;\n\n\t}\n\treturn output.join('');\n};\n\n/**\n * Converts a Punycode string representing a domain name or an email address\n * to Unicode. Only the Punycoded parts of the input will be converted, i.e.\n * it doesn't matter if you call it on a string that has already been\n * converted to Unicode.\n * @memberOf punycode\n * @param {String} input The Punycoded domain name or email address to\n * convert to Unicode.\n * @returns {String} The Unicode representation of the given Punycode\n * string.\n */\nconst toUnicode = function(input) {\n\treturn mapDomain(input, function(string) {\n\t\treturn regexPunycode.test(string)\n\t\t\t? decode(string.slice(4).toLowerCase())\n\t\t\t: string;\n\t});\n};\n\n/**\n * Converts a Unicode string representing a domain name or an email address to\n * Punycode. Only the non-ASCII parts of the domain name will be converted,\n * i.e. it doesn't matter if you call it with a domain that's already in\n * ASCII.\n * @memberOf punycode\n * @param {String} input The domain name or email address to convert, as a\n * Unicode string.\n * @returns {String} The Punycode representation of the given domain name or\n * email address.\n */\nconst toASCII = function(input) {\n\treturn mapDomain(input, function(string) {\n\t\treturn regexNonASCII.test(string)\n\t\t\t? 'xn--' + encode(string)\n\t\t\t: string;\n\t});\n};\n\n/*--------------------------------------------------------------------------*/\n\n/** Define the public API */\nconst punycode = {\n\t/**\n\t * A string representing the current Punycode.js version number.\n\t * @memberOf punycode\n\t * @type String\n\t */\n\t'version': '2.1.0',\n\t/**\n\t * An object of methods to convert from JavaScript's internal character\n\t * representation (UCS-2) to Unicode code points, and back.\n\t * @see &lt;https://mathiasbynens.be/notes/javascript-encoding&gt;\n\t * @memberOf punycode\n\t * @type Object\n\t */\n\t'ucs2': {\n\t\t'decode': ucs2decode,\n\t\t'encode': ucs2encode\n\t},\n\t'decode': decode,\n\t'encode': encode,\n\t'toASCII': toASCII,\n\t'toUnicode': toUnicode\n};\n\nexport default punycode;\n&quot;,&quot;import { URIRegExps } from \&quot;./uri\&quot;;\nimport { buildExps } from \&quot;./regexps-uri\&quot;;\n\nexport default buildExps(true);\n&quot;,&quot;import { URIRegExps } from \&quot;./uri\&quot;;\nimport { merge, subexp } from \&quot;./util\&quot;;\n\nexport function buildExps(isIRI:boolean):URIRegExps {\n\tconst\n\t\tALPHA$$ = \&quot;[A-Za-z]\&quot;,\n\t\tCR$ = \&quot;[\\\\x0D]\&quot;,\n\t\tDIGIT$$ = \&quot;[0-9]\&quot;,\n\t\tDQUOTE$$ = \&quot;[\\\\x22]\&quot;,\n\t\tHEXDIG$$ = merge(DIGIT$$, \&quot;[A-Fa-f]\&quot;),  //case-insensitive\n\t\tLF$$ = \&quot;[\\\\x0A]\&quot;,\n\t\tSP$$ = \&quot;[\\\\x20]\&quot;,\n\t\tPCT_ENCODED$ = subexp(subexp(\&quot;%[EFef]\&quot; + HEXDIG$$ + \&quot;%\&quot; + HEXDIG$$ + HEXDIG$$ + \&quot;%\&quot; + HEXDIG$$ + HEXDIG$$) + \&quot;|\&quot; + subexp(\&quot;%[89A-Fa-f]\&quot; + HEXDIG$$ + \&quot;%\&quot; + HEXDIG$$ + HEXDIG$$) + \&quot;|\&quot; + subexp(\&quot;%\&quot; + HEXDIG$$ + HEXDIG$$)),  //expanded\n\t\tGEN_DELIMS$$ = \&quot;[\\\\:\\\\/\\\\?\\\\#\\\\[\\\\]\\\\@]\&quot;,\n\t\tSUB_DELIMS$$ = \&quot;[\\\\!\\\\$\\\\&amp;\\\\'\\\\(\\\\)\\\\*\\\\+\\\\,\\\\;\\\\=]\&quot;,\n\t\tRESERVED$$ = merge(GEN_DELIMS$$, SUB_DELIMS$$),\n\t\tUCSCHAR$$ = isIRI ? \&quot;[\\\\xA0-\\\\u200D\\\\u2010-\\\\u2029\\\\u202F-\\\\uD7FF\\\\uF900-\\\\uFDCF\\\\uFDF0-\\\\uFFEF]\&quot; : \&quot;[]\&quot;,  //subset, excludes bidi control characters\n\t\tIPRIVATE$$ = isIRI ? \&quot;[\\\\uE000-\\\\uF8FF]\&quot; : \&quot;[]\&quot;,  //subset\n\t\tUNRESERVED$$ = merge(ALPHA$$, DIGIT$$, \&quot;[\\\\-\\\\.\\\\_\\\\~]\&quot;, UCSCHAR$$),\n\t\tSCHEME$ = subexp(ALPHA$$ + merge(ALPHA$$, DIGIT$$, \&quot;[\\\\+\\\\-\\\\.]\&quot;) + \&quot;*\&quot;),\n\t\tUSERINFO$ = subexp(subexp(PCT_ENCODED$ + \&quot;|\&quot; + merge(UNRESERVED$$, SUB_DELIMS$$, \&quot;[\\\\:]\&quot;)) + \&quot;*\&quot;),\n\t\tDEC_OCTET$ = subexp(subexp(\&quot;25[0-5]\&quot;) + \&quot;|\&quot; + subexp(\&quot;2[0-4]\&quot; + DIGIT$$) + \&quot;|\&quot; + subexp(\&quot;1\&quot; + DIGIT$$ + DIGIT$$) + \&quot;|\&quot; + subexp(\&quot;[1-9]\&quot; + DIGIT$$) + \&quot;|\&quot; + DIGIT$$),\n\t\tDEC_OCTET_RELAXED$ = subexp(subexp(\&quot;25[0-5]\&quot;) + \&quot;|\&quot; + subexp(\&quot;2[0-4]\&quot; + DIGIT$$) + \&quot;|\&quot; + subexp(\&quot;1\&quot; + DIGIT$$ + DIGIT$$) + \&quot;|\&quot; + subexp(\&quot;0?[1-9]\&quot; + DIGIT$$) + \&quot;|0?0?\&quot; + DIGIT$$),  //relaxed parsing rules\n\t\tIPV4ADDRESS$ = subexp(DEC_OCTET_RELAXED$ + \&quot;\\\\.\&quot; + DEC_OCTET_RELAXED$ + \&quot;\\\\.\&quot; + DEC_OCTET_RELAXED$ + \&quot;\\\\.\&quot; + DEC_OCTET_RELAXED$),\n\t\tH16$ = subexp(HEXDIG$$ + \&quot;{1,4}\&quot;),\n\t\tLS32$ = subexp(subexp(H16$ + \&quot;\\\\:\&quot; + H16$) + \&quot;|\&quot; + IPV4ADDRESS$),\n\t\tIPV6ADDRESS1$ = subexp(                                                            subexp(H16$ + \&quot;\\\\:\&quot;) + \&quot;{6}\&quot; + LS32$), //                           6( h16 \&quot;:\&quot; ) ls32\n\t\tIPV6ADDRESS2$ = subexp(                                                 \&quot;\\\\:\\\\:\&quot; + subexp(H16$ + \&quot;\\\\:\&quot;) + \&quot;{5}\&quot; + LS32$), //                      \&quot;::\&quot; 5( h16 \&quot;:\&quot; ) ls32\n\t\tIPV6ADDRESS3$ = subexp(subexp(                                 H16$) + \&quot;?\\\\:\\\\:\&quot; + subexp(H16$ + \&quot;\\\\:\&quot;) + \&quot;{4}\&quot; + LS32$), //[               h16 ] \&quot;::\&quot; 4( h16 \&quot;:\&quot; ) ls32\n\t\tIPV6ADDRESS4$ = subexp(subexp(subexp(H16$ + \&quot;\\\\:\&quot;) + \&quot;{0,1}\&quot; + H16$) + \&quot;?\\\\:\\\\:\&quot; + subexp(H16$ + \&quot;\\\\:\&quot;) + \&quot;{3}\&quot; + LS32$), //[ *1( h16 \&quot;:\&quot; ) h16 ] \&quot;::\&quot; 3( h16 \&quot;:\&quot; ) ls32\n\t\tIPV6ADDRESS5$ = subexp(subexp(subexp(H16$ + \&quot;\\\\:\&quot;) + \&quot;{0,2}\&quot; + H16$) + \&quot;?\\\\:\\\\:\&quot; + subexp(H16$ + \&quot;\\\\:\&quot;) + \&quot;{2}\&quot; + LS32$), //[ *2( h16 \&quot;:\&quot; ) h16 ] \&quot;::\&quot; 2( h16 \&quot;:\&quot; ) ls32\n\t\tIPV6ADDRESS6$ = subexp(subexp(subexp(H16$ + \&quot;\\\\:\&quot;) + \&quot;{0,3}\&quot; + H16$) + \&quot;?\\\\:\\\\:\&quot; +        H16$ + \&quot;\\\\:\&quot;          + LS32$), //[ *3( h16 \&quot;:\&quot; ) h16 ] \&quot;::\&quot;    h16 \&quot;:\&quot;   ls32\n\t\tIPV6ADDRESS7$ = subexp(subexp(subexp(H16$ + \&quot;\\\\:\&quot;) + \&quot;{0,4}\&quot; + H16$) + \&quot;?\\\\:\\\\:\&quot;                                + LS32$), //[ *4( h16 \&quot;:\&quot; ) h16 ] \&quot;::\&quot;              ls32\n\t\tIPV6ADDRESS8$ = subexp(subexp(subexp(H16$ + \&quot;\\\\:\&quot;) + \&quot;{0,5}\&quot; + H16$) + \&quot;?\\\\:\\\\:\&quot;                                + H16$ ), //[ *5( h16 \&quot;:\&quot; ) h16 ] \&quot;::\&quot;              h16\n\t\tIPV6ADDRESS9$ = subexp(subexp(subexp(H16$ + \&quot;\\\\:\&quot;) + \&quot;{0,6}\&quot; + H16$) + \&quot;?\\\\:\\\\:\&quot;                                       ), //[ *6( h16 \&quot;:\&quot; ) h16 ] \&quot;::\&quot;\n\t\tIPV6ADDRESS$ = subexp([IPV6ADDRESS1$, IPV6ADDRESS2$, IPV6ADDRESS3$, IPV6ADDRESS4$, IPV6ADDRESS5$, IPV6ADDRESS6$, IPV6ADDRESS7$, IPV6ADDRESS8$, IPV6ADDRESS9$].join(\&quot;|\&quot;)),\n\t\tZONEID$ = subexp(subexp(UNRESERVED$$ + \&quot;|\&quot; + PCT_ENCODED$) + \&quot;+\&quot;),  //RFC 6874\n\t\tIPV6ADDRZ$ = subexp(IPV6ADDRESS$ + \&quot;\\\\%25\&quot; + ZONEID$),  //RFC 6874\n\t\tIPV6ADDRZ_RELAXED$ = subexp(IPV6ADDRESS$ + subexp(\&quot;\\\\%25|\\\\%(?!\&quot; + HEXDIG$$ + \&quot;{2})\&quot;) + ZONEID$),  //RFC 6874, with relaxed parsing rules\n\t\tIPVFUTURE$ = subexp(\&quot;[vV]\&quot; + HEXDIG$$ + \&quot;+\\\\.\&quot; + merge(UNRESERVED$$, SUB_DELIMS$$, \&quot;[\\\\:]\&quot;) + \&quot;+\&quot;),\n\t\tIP_LITERAL$ = subexp(\&quot;\\\\[\&quot; + subexp(IPV6ADDRZ_RELAXED$ + \&quot;|\&quot; + IPV6ADDRESS$ + \&quot;|\&quot; + IPVFUTURE$) + \&quot;\\\\]\&quot;),  //RFC 6874\n\t\tREG_NAME$ = subexp(subexp(PCT_ENCODED$ + \&quot;|\&quot; + merge(UNRESERVED$$, SUB_DELIMS$$)) + \&quot;*\&quot;),\n\t\tHOST$ = subexp(IP_LITERAL$ + \&quot;|\&quot; + IPV4ADDRESS$ + \&quot;(?!\&quot; + REG_NAME$ + \&quot;)\&quot; + \&quot;|\&quot; + REG_NAME$),\n\t\tPORT$ = subexp(DIGIT$$ + \&quot;*\&quot;),\n\t\tAUTHORITY$ = subexp(subexp(USERINFO$ + \&quot;@\&quot;) + \&quot;?\&quot; + HOST$ + subexp(\&quot;\\\\:\&quot; + PORT$) + \&quot;?\&quot;),\n\t\tPCHAR$ = subexp(PCT_ENCODED$ + \&quot;|\&quot; + merge(UNRESERVED$$, SUB_DELIMS$$, \&quot;[\\\\:\\\\@]\&quot;)),\n\t\tSEGMENT$ = subexp(PCHAR$ + \&quot;*\&quot;),\n\t\tSEGMENT_NZ$ = subexp(PCHAR$ + \&quot;+\&quot;),\n\t\tSEGMENT_NZ_NC$ = subexp(subexp(PCT_ENCODED$ + \&quot;|\&quot; + merge(UNRESERVED$$, SUB_DELIMS$$, \&quot;[\\\\@]\&quot;)) + \&quot;+\&quot;),\n\t\tPATH_ABEMPTY$ = subexp(subexp(\&quot;\\\\/\&quot; + SEGMENT$) + \&quot;*\&quot;),\n\t\tPATH_ABSOLUTE$ = subexp(\&quot;\\\\/\&quot; + subexp(SEGMENT_NZ$ + PATH_ABEMPTY$) + \&quot;?\&quot;),  //simplified\n\t\tPATH_NOSCHEME$ = subexp(SEGMENT_NZ_NC$ + PATH_ABEMPTY$),  //simplified\n\t\tPATH_ROOTLESS$ = subexp(SEGMENT_NZ$ + PATH_ABEMPTY$),  //simplified\n\t\tPATH_EMPTY$ = \&quot;(?!\&quot; + PCHAR$ + \&quot;)\&quot;,\n\t\tPATH$ = subexp(PATH_ABEMPTY$ + \&quot;|\&quot; + PATH_ABSOLUTE$ + \&quot;|\&quot; + PATH_NOSCHEME$ + \&quot;|\&quot; + PATH_ROOTLESS$ + \&quot;|\&quot; + PATH_EMPTY$),\n\t\tQUERY$ = subexp(subexp(PCHAR$ + \&quot;|\&quot; + merge(\&quot;[\\\\/\\\\?]\&quot;, IPRIVATE$$)) + \&quot;*\&quot;),\n\t\tFRAGMENT$ = subexp(subexp(PCHAR$ + \&quot;|[\\\\/\\\\?]\&quot;) + \&quot;*\&quot;),\n\t\tHIER_PART$ = subexp(subexp(\&quot;\\\\/\\\\/\&quot; + AUTHORITY$ + PATH_ABEMPTY$) + \&quot;|\&quot; + PATH_ABSOLUTE$ + \&quot;|\&quot; + PATH_ROOTLESS$ + \&quot;|\&quot; + PATH_EMPTY$),\n\t\tURI$ = subexp(SCHEME$ + \&quot;\\\\:\&quot; + HIER_PART$ + subexp(\&quot;\\\\?\&quot; + QUERY$) + \&quot;?\&quot; + subexp(\&quot;\\\\#\&quot; + FRAGMENT$) + \&quot;?\&quot;),\n\t\tRELATIVE_PART$ = subexp(subexp(\&quot;\\\\/\\\\/\&quot; + AUTHORITY$ + PATH_ABEMPTY$) + \&quot;|\&quot; + PATH_ABSOLUTE$ + \&quot;|\&quot; + PATH_NOSCHEME$ + \&quot;|\&quot; + PATH_EMPTY$),\n\t\tRELATIVE$ = subexp(RELATIVE_PART$ + subexp(\&quot;\\\\?\&quot; + QUERY$) + \&quot;?\&quot; + subexp(\&quot;\\\\#\&quot; + FRAGMENT$) + \&quot;?\&quot;),\n\t\tURI_REFERENCE$ = subexp(URI$ + \&quot;|\&quot; + RELATIVE$),\n\t\tABSOLUTE_URI$ = subexp(SCHEME$ + \&quot;\\\\:\&quot; + HIER_PART$ + subexp(\&quot;\\\\?\&quot; + QUERY$) + \&quot;?\&quot;),\n\n\t\tGENERIC_REF$ = \&quot;^(\&quot; + SCHEME$ + \&quot;)\\\\:\&quot; + subexp(subexp(\&quot;\\\\/\\\\/(\&quot; + subexp(\&quot;(\&quot; + USERINFO$ + \&quot;)@\&quot;) + \&quot;?(\&quot; + HOST$ + \&quot;)\&quot; + subexp(\&quot;\\\\:(\&quot; + PORT$ + \&quot;)\&quot;) + \&quot;?)\&quot;) + \&quot;?(\&quot; + PATH_ABEMPTY$ + \&quot;|\&quot; + PATH_ABSOLUTE$ + \&quot;|\&quot; + PATH_ROOTLESS$ + \&quot;|\&quot; + PATH_EMPTY$ + \&quot;)\&quot;) + subexp(\&quot;\\\\?(\&quot; + QUERY$ + \&quot;)\&quot;) + \&quot;?\&quot; + subexp(\&quot;\\\\#(\&quot; + FRAGMENT$ + \&quot;)\&quot;) + \&quot;?$\&quot;,\n\t\tRELATIVE_REF$ = \&quot;^(){0}\&quot; + subexp(subexp(\&quot;\\\\/\\\\/(\&quot; + subexp(\&quot;(\&quot; + USERINFO$ + \&quot;)@\&quot;) + \&quot;?(\&quot; + HOST$ + \&quot;)\&quot; + subexp(\&quot;\\\\:(\&quot; + PORT$ + \&quot;)\&quot;) + \&quot;?)\&quot;) + \&quot;?(\&quot; + PATH_ABEMPTY$ + \&quot;|\&quot; + PATH_ABSOLUTE$ + \&quot;|\&quot; + PATH_NOSCHEME$ + \&quot;|\&quot; + PATH_EMPTY$ + \&quot;)\&quot;) + subexp(\&quot;\\\\?(\&quot; + QUERY$ + \&quot;)\&quot;) + \&quot;?\&quot; + subexp(\&quot;\\\\#(\&quot; + FRAGMENT$ + \&quot;)\&quot;) + \&quot;?$\&quot;,\n\t\tABSOLUTE_REF$ = \&quot;^(\&quot; + SCHEME$ + \&quot;)\\\\:\&quot; + subexp(subexp(\&quot;\\\\/\\\\/(\&quot; + subexp(\&quot;(\&quot; + USERINFO$ + \&quot;)@\&quot;) + \&quot;?(\&quot; + HOST$ + \&quot;)\&quot; + subexp(\&quot;\\\\:(\&quot; + PORT$ + \&quot;)\&quot;) + \&quot;?)\&quot;) + \&quot;?(\&quot; + PATH_ABEMPTY$ + \&quot;|\&quot; + PATH_ABSOLUTE$ + \&quot;|\&quot; + PATH_ROOTLESS$ + \&quot;|\&quot; + PATH_EMPTY$ + \&quot;)\&quot;) + subexp(\&quot;\\\\?(\&quot; + QUERY$ + \&quot;)\&quot;) + \&quot;?$\&quot;,\n\t\tSAMEDOC_REF$ = \&quot;^\&quot; + subexp(\&quot;\\\\#(\&quot; + FRAGMENT$ + \&quot;)\&quot;) + \&quot;?$\&quot;,\n\t\tAUTHORITY_REF$ = \&quot;^\&quot; + subexp(\&quot;(\&quot; + USERINFO$ + \&quot;)@\&quot;) + \&quot;?(\&quot; + HOST$ + \&quot;)\&quot; + subexp(\&quot;\\\\:(\&quot; + PORT$ + \&quot;)\&quot;) + \&quot;?$\&quot;\n\t;\n\n\treturn {\n\t\tNOT_SCHEME : new RegExp(merge(\&quot;[^]\&quot;, ALPHA$$, DIGIT$$, \&quot;[\\\\+\\\\-\\\\.]\&quot;), \&quot;g\&quot;),\n\t\tNOT_USERINFO : new RegExp(merge(\&quot;[^\\\\%\\\\:]\&quot;, UNRESERVED$$, SUB_DELIMS$$), \&quot;g\&quot;),\n\t\tNOT_HOST : new RegExp(merge(\&quot;[^\\\\%\\\\[\\\\]\\\\:]\&quot;, UNRESERVED$$, SUB_DELIMS$$), \&quot;g\&quot;),\n\t\tNOT_PATH : new RegExp(merge(\&quot;[^\\\\%\\\\/\\\\:\\\\@]\&quot;, UNRESERVED$$, SUB_DELIMS$$), \&quot;g\&quot;),\n\t\tNOT_PATH_NOSCHEME : new RegExp(merge(\&quot;[^\\\\%\\\\/\\\\@]\&quot;, UNRESERVED$$, SUB_DELIMS$$), \&quot;g\&quot;),\n\t\tNOT_QUERY : new RegExp(merge(\&quot;[^\\\\%]\&quot;, UNRESERVED$$, SUB_DELIMS$$, \&quot;[\\\\:\\\\@\\\\/\\\\?]\&quot;, IPRIVATE$$), \&quot;g\&quot;),\n\t\tNOT_FRAGMENT : new RegExp(merge(\&quot;[^\\\\%]\&quot;, UNRESERVED$$, SUB_DELIMS$$, \&quot;[\\\\:\\\\@\\\\/\\\\?]\&quot;), \&quot;g\&quot;),\n\t\tESCAPE : new RegExp(merge(\&quot;[^]\&quot;, UNRESERVED$$, SUB_DELIMS$$), \&quot;g\&quot;),\n\t\tUNRESERVED : new RegExp(UNRESERVED$$, \&quot;g\&quot;),\n\t\tOTHER_CHARS : new RegExp(merge(\&quot;[^\\\\%]\&quot;, UNRESERVED$$, RESERVED$$), \&quot;g\&quot;),\n\t\tPCT_ENCODED : new RegExp(PCT_ENCODED$, \&quot;g\&quot;),\n\t\tIPV4ADDRESS : new RegExp(\&quot;^(\&quot; + IPV4ADDRESS$ + \&quot;)$\&quot;),\n\t\tIPV6ADDRESS : new RegExp(\&quot;^\\\\[?(\&quot; + IPV6ADDRESS$ + \&quot;)\&quot; + subexp(subexp(\&quot;\\\\%25|\\\\%(?!\&quot; + HEXDIG$$ + \&quot;{2})\&quot;) + \&quot;(\&quot; + ZONEID$ + \&quot;)\&quot;) + \&quot;?\\\\]?$\&quot;)  //RFC 6874, with relaxed parsing rules\n\t};\n}\n\nexport default buildExps(false);\n&quot;,&quot;export function merge(...sets:Array&lt;string&gt;):string {\n\tif (sets.length &gt; 1) {\n\t\tsets[0] = sets[0].slice(0, -1);\n\t\tconst xl = sets.length - 1;\n\t\tfor (let x = 1; x &lt; xl; ++x) {\n\t\t\tsets[x] = sets[x].slice(1, -1);\n\t\t}\n\t\tsets[xl] = sets[xl].slice(1);\n\t\treturn sets.join('');\n\t} else {\n\t\treturn sets[0];\n\t}\n}\n\nexport function subexp(str:string):string {\n\treturn \&quot;(?:\&quot; + str + \&quot;)\&quot;;\n}\n\nexport function typeOf(o:any):string {\n\treturn o === undefined ? \&quot;undefined\&quot; : (o === null ? \&quot;null\&quot; : Object.prototype.toString.call(o).split(\&quot; \&quot;).pop().split(\&quot;]\&quot;).shift().toLowerCase());\n}\n\nexport function toUpperCase(str:string):string {\n\treturn str.toUpperCase();\n}\n\nexport function toArray(obj:any):Array&lt;any&gt; {\n\treturn obj !== undefined &amp;&amp; obj !== null ? (obj instanceof Array ? obj : (typeof obj.length !== \&quot;number\&quot; || obj.split || obj.setInterval || obj.call ? [obj] : Array.prototype.slice.call(obj))) : [];\n}\n\n\nexport function assign(target: object, source: any): any {\n\tconst obj = target as any;\n\tif (source) {\n\t\tfor (const key in source) {\n\t\t\tobj[key] = source[key];\n\t\t}\n\t}\n\treturn obj;\n}&quot;],&quot;names&quot;:[&quot;SCHEMES&quot;,&quot;uuid&quot;,&quot;scheme&quot;,&quot;urn&quot;,&quot;mailto&quot;,&quot;wss&quot;,&quot;ws&quot;,&quot;https&quot;,&quot;http&quot;,&quot;urnComponents&quot;,&quot;nss&quot;,&quot;uuidComponents&quot;,&quot;toLowerCase&quot;,&quot;options&quot;,&quot;error&quot;,&quot;tolerant&quot;,&quot;match&quot;,&quot;UUID&quot;,&quot;undefined&quot;,&quot;handler&quot;,&quot;uriComponents&quot;,&quot;path&quot;,&quot;nid&quot;,&quot;schemeHandler&quot;,&quot;serialize&quot;,&quot;urnScheme&quot;,&quot;parse&quot;,&quot;matches&quot;,&quot;components&quot;,&quot;URN_PARSE&quot;,&quot;query&quot;,&quot;fields&quot;,&quot;join&quot;,&quot;length&quot;,&quot;push&quot;,&quot;name&quot;,&quot;replace&quot;,&quot;PCT_ENCODED&quot;,&quot;decodeUnreserved&quot;,&quot;toUpperCase&quot;,&quot;NOT_HFNAME&quot;,&quot;pctEncChar&quot;,&quot;headers&quot;,&quot;NOT_HFVALUE&quot;,&quot;O&quot;,&quot;mailtoComponents&quot;,&quot;body&quot;,&quot;subject&quot;,&quot;to&quot;,&quot;x&quot;,&quot;localPart&quot;,&quot;domain&quot;,&quot;iri&quot;,&quot;e&quot;,&quot;punycode&quot;,&quot;toASCII&quot;,&quot;unescapeComponent&quot;,&quot;toUnicode&quot;,&quot;toAddr&quot;,&quot;slice&quot;,&quot;atIdx&quot;,&quot;NOT_LOCAL_PART&quot;,&quot;lastIndexOf&quot;,&quot;String&quot;,&quot;xl&quot;,&quot;toArray&quot;,&quot;addr&quot;,&quot;unicodeSupport&quot;,&quot;split&quot;,&quot;unknownHeaders&quot;,&quot;hfield&quot;,&quot;toAddrs&quot;,&quot;hfields&quot;,&quot;decStr&quot;,&quot;UNRESERVED&quot;,&quot;str&quot;,&quot;pctDecChars&quot;,&quot;RegExp&quot;,&quot;merge&quot;,&quot;UNRESERVED$$&quot;,&quot;SOME_DELIMS$$&quot;,&quot;ATEXT$$&quot;,&quot;VCHAR$$&quot;,&quot;PCT_ENCODED$&quot;,&quot;QTEXT$$&quot;,&quot;subexp&quot;,&quot;HEXDIG$$&quot;,&quot;isIRI&quot;,&quot;domainHost&quot;,&quot;wsComponents&quot;,&quot;fragment&quot;,&quot;resourceName&quot;,&quot;secure&quot;,&quot;port&quot;,&quot;isSecure&quot;,&quot;host&quot;,&quot;toString&quot;,&quot;URI_PROTOCOL&quot;,&quot;IRI_PROTOCOL&quot;,&quot;ESCAPE&quot;,&quot;escapeComponent&quot;,&quot;uriA&quot;,&quot;uriB&quot;,&quot;typeOf&quot;,&quot;equal&quot;,&quot;uri&quot;,&quot;normalize&quot;,&quot;resolveComponents&quot;,&quot;baseURI&quot;,&quot;schemelessOptions&quot;,&quot;relativeURI&quot;,&quot;assign&quot;,&quot;resolve&quot;,&quot;target&quot;,&quot;relative&quot;,&quot;base&quot;,&quot;userinfo&quot;,&quot;removeDotSegments&quot;,&quot;charAt&quot;,&quot;skipNormalization&quot;,&quot;uriTokens&quot;,&quot;s&quot;,&quot;authority&quot;,&quot;absolutePath&quot;,&quot;reference&quot;,&quot;_recomposeAuthority&quot;,&quot;protocol&quot;,&quot;IPV6ADDRESS&quot;,&quot;test&quot;,&quot;output&quot;,&quot;Error&quot;,&quot;input&quot;,&quot;im&quot;,&quot;RDS5&quot;,&quot;pop&quot;,&quot;RDS3&quot;,&quot;RDS2&quot;,&quot;RDS1&quot;,&quot;$1&quot;,&quot;$2&quot;,&quot;_normalizeIPv6&quot;,&quot;_normalizeIPv4&quot;,&quot;_&quot;,&quot;uriString&quot;,&quot;isNaN&quot;,&quot;indexOf&quot;,&quot;parseInt&quot;,&quot;NO_MATCH_IS_UNDEFINED&quot;,&quot;URI_PARSE&quot;,&quot;newHost&quot;,&quot;zone&quot;,&quot;newFirst&quot;,&quot;newLast&quot;,&quot;longestZeroFields&quot;,&quot;index&quot;,&quot;b&quot;,&quot;a&quot;,&quot;allZeroFields&quot;,&quot;sort&quot;,&quot;acc&quot;,&quot;lastLongest&quot;,&quot;field&quot;,&quot;reduce&quot;,&quot;fieldCount&quot;,&quot;isLastFieldIPv4Address&quot;,&quot;firstFields&quot;,&quot;lastFields&quot;,&quot;lastFieldsStart&quot;,&quot;Array&quot;,&quot;IPV4ADDRESS&quot;,&quot;last&quot;,&quot;map&quot;,&quot;_stripLeadingZeros&quot;,&quot;first&quot;,&quot;address&quot;,&quot;reverse&quot;,&quot;NOT_FRAGMENT&quot;,&quot;NOT_QUERY&quot;,&quot;NOT_PATH&quot;,&quot;NOT_PATH_NOSCHEME&quot;,&quot;NOT_HOST&quot;,&quot;NOT_USERINFO&quot;,&quot;NOT_SCHEME&quot;,&quot;_normalizeComponentEncoding&quot;,&quot;newStr&quot;,&quot;substr&quot;,&quot;i&quot;,&quot;fromCharCode&quot;,&quot;c&quot;,&quot;c2&quot;,&quot;c3&quot;,&quot;il&quot;,&quot;chr&quot;,&quot;charCodeAt&quot;,&quot;encode&quot;,&quot;decode&quot;,&quot;ucs2encode&quot;,&quot;ucs2decode&quot;,&quot;regexNonASCII&quot;,&quot;string&quot;,&quot;mapDomain&quot;,&quot;regexPunycode&quot;,&quot;n&quot;,&quot;delta&quot;,&quot;handledCPCount&quot;,&quot;adapt&quot;,&quot;handledCPCountPlusOne&quot;,&quot;basicLength&quot;,&quot;stringFromCharCode&quot;,&quot;digitToBasic&quot;,&quot;q&quot;,&quot;floor&quot;,&quot;qMinusT&quot;,&quot;baseMinusT&quot;,&quot;t&quot;,&quot;k&quot;,&quot;bias&quot;,&quot;tMin&quot;,&quot;tMax&quot;,&quot;currentValue&quot;,&quot;maxInt&quot;,&quot;m&quot;,&quot;inputLength&quot;,&quot;delimiter&quot;,&quot;initialBias&quot;,&quot;initialN&quot;,&quot;fromCodePoint&quot;,&quot;splice&quot;,&quot;out&quot;,&quot;oldi&quot;,&quot;w&quot;,&quot;digit&quot;,&quot;basicToDigit&quot;,&quot;basic&quot;,&quot;j&quot;,&quot;baseMinusTMin&quot;,&quot;skew&quot;,&quot;numPoints&quot;,&quot;firstTime&quot;,&quot;damp&quot;,&quot;flag&quot;,&quot;codePoint&quot;,&quot;array&quot;,&quot;value&quot;,&quot;extra&quot;,&quot;counter&quot;,&quot;result&quot;,&quot;encoded&quot;,&quot;labels&quot;,&quot;fn&quot;,&quot;regexSeparators&quot;,&quot;parts&quot;,&quot;RangeError&quot;,&quot;errors&quot;,&quot;type&quot;,&quot;Math&quot;,&quot;buildExps&quot;,&quot;IPV6ADDRESS$&quot;,&quot;ZONEID$&quot;,&quot;IPV4ADDRESS$&quot;,&quot;RESERVED$$&quot;,&quot;SUB_DELIMS$$&quot;,&quot;IPRIVATE$$&quot;,&quot;ALPHA$$&quot;,&quot;DIGIT$$&quot;,&quot;AUTHORITY_REF$&quot;,&quot;USERINFO$&quot;,&quot;HOST$&quot;,&quot;PORT$&quot;,&quot;SAMEDOC_REF$&quot;,&quot;FRAGMENT$&quot;,&quot;ABSOLUTE_REF$&quot;,&quot;SCHEME$&quot;,&quot;PATH_ABEMPTY$&quot;,&quot;PATH_ABSOLUTE$&quot;,&quot;PATH_ROOTLESS$&quot;,&quot;PATH_EMPTY$&quot;,&quot;QUERY$&quot;,&quot;RELATIVE_REF$&quot;,&quot;PATH_NOSCHEME$&quot;,&quot;GENERIC_REF$&quot;,&quot;ABSOLUTE_URI$&quot;,&quot;HIER_PART$&quot;,&quot;URI_REFERENCE$&quot;,&quot;URI$&quot;,&quot;RELATIVE$&quot;,&quot;RELATIVE_PART$&quot;,&quot;AUTHORITY$&quot;,&quot;PCHAR$&quot;,&quot;PATH$&quot;,&quot;SEGMENT_NZ$&quot;,&quot;SEGMENT_NZ_NC$&quot;,&quot;SEGMENT$&quot;,&quot;IP_LITERAL$&quot;,&quot;REG_NAME$&quot;,&quot;IPV6ADDRZ_RELAXED$&quot;,&quot;IPVFUTURE$&quot;,&quot;IPV6ADDRESS1$&quot;,&quot;IPV6ADDRESS2$&quot;,&quot;IPV6ADDRESS3$&quot;,&quot;IPV6ADDRESS4$&quot;,&quot;IPV6ADDRESS5$&quot;,&quot;IPV6ADDRESS6$&quot;,&quot;IPV6ADDRESS7$&quot;,&quot;IPV6ADDRESS8$&quot;,&quot;IPV6ADDRESS9$&quot;,&quot;H16$&quot;,&quot;LS32$&quot;,&quot;DEC_OCTET_RELAXED$&quot;,&quot;DEC_OCTET$&quot;,&quot;UCSCHAR$$&quot;,&quot;GEN_DELIMS$$&quot;,&quot;SP$$&quot;,&quot;DQUOTE$$&quot;,&quot;CR$&quot;,&quot;obj&quot;,&quot;key&quot;,&quot;source&quot;,&quot;setInterval&quot;,&quot;call&quot;,&quot;prototype&quot;,&quot;o&quot;,&quot;Object&quot;,&quot;shift&quot;,&quot;sets&quot;],&quot;mappings&quot;:&quot;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&quot;}</span></pre>
</body>
</html>