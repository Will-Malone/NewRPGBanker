<html>
<head>
<title>eslintrc-universal.cjs</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<style type="text/css">
.s0 { color: #6a8759;}
.s1 { color: #a9b7c6;}
.s2 { color: #a9b7c6;}
.s3 { color: #ffc66d;}
.s4 { color: #9876aa; font-style: italic;}
.s5 { color: #cc7832;}
.s6 { color: #808080;}
.s7 { color: #6897bb; font-style: italic;}
.s8 { color: #cc7832; font-style: italic;}
</style>
</head>
<body bgcolor="#2b2b2b">
<table CELLSPACING=0 CELLPADDING=5 COLS=1 WIDTH="100%" BGCOLOR="#606060" >
<tr><td><center>
<font face="Arial, Helvetica" color="#000000">
eslintrc-universal.cjs</font>
</center></td></tr></table>
<pre><span class="s0">'use strict'</span><span class="s1">;</span>

<span class="s2">Object</span><span class="s1">.</span><span class="s3">defineProperty</span><span class="s1">(</span><span class="s2">exports</span><span class="s1">, </span><span class="s0">'__esModule'</span><span class="s1">, { value: </span><span class="s4">true </span><span class="s1">});</span>

<span class="s5">var </span><span class="s1">util </span><span class="s5">= </span><span class="s3">require</span><span class="s1">(</span><span class="s0">'util'</span><span class="s1">);</span>
<span class="s5">var </span><span class="s1">path </span><span class="s5">= </span><span class="s3">require</span><span class="s1">(</span><span class="s0">'path'</span><span class="s1">);</span>
<span class="s5">var </span><span class="s1">Ajv </span><span class="s5">= </span><span class="s3">require</span><span class="s1">(</span><span class="s0">'ajv'</span><span class="s1">);</span>
<span class="s5">var </span><span class="s1">globals </span><span class="s5">= </span><span class="s3">require</span><span class="s1">(</span><span class="s0">'globals'</span><span class="s1">);</span>

<span class="s5">function </span><span class="s1">_interopDefaultLegacy (</span><span class="s2">e</span><span class="s1">) { </span><span class="s5">return </span><span class="s2">e </span><span class="s5">&amp;&amp; typeof </span><span class="s2">e </span><span class="s5">=== </span><span class="s0">'object' </span><span class="s5">&amp;&amp; </span><span class="s0">'default' </span><span class="s5">in </span><span class="s2">e </span><span class="s5">? </span><span class="s2">e </span><span class="s5">: </span><span class="s1">{ </span><span class="s0">'default'</span><span class="s1">: </span><span class="s2">e </span><span class="s1">}; }</span>

<span class="s5">var </span><span class="s1">util__default </span><span class="s5">= </span><span class="s6">/*#__PURE__*/</span><span class="s3">_interopDefaultLegacy</span><span class="s1">(</span><span class="s2">util</span><span class="s1">);</span>
<span class="s5">var </span><span class="s1">path__default </span><span class="s5">= </span><span class="s6">/*#__PURE__*/</span><span class="s3">_interopDefaultLegacy</span><span class="s1">(</span><span class="s2">path</span><span class="s1">);</span>
<span class="s5">var </span><span class="s1">Ajv__default </span><span class="s5">= </span><span class="s6">/*#__PURE__*/</span><span class="s3">_interopDefaultLegacy</span><span class="s1">(</span><span class="s2">Ajv</span><span class="s1">);</span>
<span class="s5">var </span><span class="s1">globals__default </span><span class="s5">= </span><span class="s6">/*#__PURE__*/</span><span class="s3">_interopDefaultLegacy</span><span class="s1">(</span><span class="s2">globals</span><span class="s1">);</span>

<span class="s6">/**</span>
 <span class="s6">* </span><span class="s5">@fileoverview </span><span class="s6">Config file operations. This file must be usable in the browser, 
 * so no Node-specific code can be here. 
 * </span><span class="s5">@author </span><span class="s2">Nicholas C. Zakas 
 </span><span class="s6">*/</span>

<span class="s6">//------------------------------------------------------------------------------</span>
<span class="s6">// Private</span>
<span class="s6">//------------------------------------------------------------------------------</span>

<span class="s5">const </span><span class="s1">RULE_SEVERITY_STRINGS </span><span class="s5">= </span><span class="s1">[</span><span class="s0">&quot;off&quot;</span><span class="s1">, </span><span class="s0">&quot;warn&quot;</span><span class="s1">, </span><span class="s0">&quot;error&quot;</span><span class="s1">],</span>
    <span class="s1">RULE_SEVERITY </span><span class="s5">= </span><span class="s2">RULE_SEVERITY_STRINGS</span><span class="s1">.</span><span class="s3">reduce</span><span class="s1">((</span><span class="s2">map</span><span class="s1">, </span><span class="s2">value</span><span class="s1">, </span><span class="s2">index</span><span class="s1">) </span><span class="s5">=&gt; </span><span class="s1">{</span>
        <span class="s2">map</span><span class="s1">[</span><span class="s2">value</span><span class="s1">] </span><span class="s5">= </span><span class="s2">index</span><span class="s1">;</span>
        <span class="s5">return </span><span class="s2">map</span><span class="s1">;</span>
    <span class="s1">}, {}),</span>
    <span class="s1">VALID_SEVERITIES </span><span class="s5">= </span><span class="s1">[</span><span class="s7">0</span><span class="s1">, </span><span class="s7">1</span><span class="s1">, </span><span class="s7">2</span><span class="s1">, </span><span class="s0">&quot;off&quot;</span><span class="s1">, </span><span class="s0">&quot;warn&quot;</span><span class="s1">, </span><span class="s0">&quot;error&quot;</span><span class="s1">];</span>

<span class="s6">//------------------------------------------------------------------------------</span>
<span class="s6">// Public Interface</span>
<span class="s6">//------------------------------------------------------------------------------</span>

<span class="s6">/**</span>
 <span class="s6">* Normalizes the severity value of a rule's configuration to a number 
 * </span><span class="s5">@param </span><span class="s2">{(number|string|[number, ...*]|[string, ...*])} ruleConfig </span><span class="s6">A rule's configuration value, generally 
 * received from the user. A valid config value is either 0, 1, 2, the string &quot;off&quot; (treated the same as 0), 
 * the string &quot;warn&quot; (treated the same as 1), the string &quot;error&quot; (treated the same as 2), or an array 
 * whose first element is one of the above values. Strings are matched case-insensitively. 
 * </span><span class="s5">@returns </span><span class="s2">{(0|1|2)} </span><span class="s6">The numeric severity value if the config value was valid, otherwise 0. 
 */</span>
<span class="s5">function </span><span class="s1">getRuleSeverity(</span><span class="s2">ruleConfig</span><span class="s1">) {</span>
    <span class="s5">const </span><span class="s1">severityValue </span><span class="s5">= </span><span class="s2">Array</span><span class="s1">.</span><span class="s3">isArray</span><span class="s1">(</span><span class="s2">ruleConfig</span><span class="s1">) </span><span class="s5">? </span><span class="s2">ruleConfig</span><span class="s1">[</span><span class="s7">0</span><span class="s1">] </span><span class="s5">: </span><span class="s2">ruleConfig</span><span class="s1">;</span>

    <span class="s5">if </span><span class="s1">(</span><span class="s2">severityValue </span><span class="s5">=== </span><span class="s7">0 </span><span class="s5">|| </span><span class="s2">severityValue </span><span class="s5">=== </span><span class="s7">1 </span><span class="s5">|| </span><span class="s2">severityValue </span><span class="s5">=== </span><span class="s7">2</span><span class="s1">) {</span>
        <span class="s5">return </span><span class="s2">severityValue</span><span class="s1">;</span>
    <span class="s1">}</span>

    <span class="s5">if </span><span class="s1">(</span><span class="s5">typeof </span><span class="s2">severityValue </span><span class="s5">=== </span><span class="s0">&quot;string&quot;</span><span class="s1">) {</span>
        <span class="s5">return </span><span class="s2">RULE_SEVERITY</span><span class="s1">[</span><span class="s2">severityValue</span><span class="s1">.</span><span class="s3">toLowerCase</span><span class="s1">()] </span><span class="s5">|| </span><span class="s7">0</span><span class="s1">;</span>
    <span class="s1">}</span>

    <span class="s5">return </span><span class="s7">0</span><span class="s1">;</span>
<span class="s1">}</span>

<span class="s6">/**</span>
 <span class="s6">* Converts old-style severity settings (0, 1, 2) into new-style 
 * severity settings (off, warn, error) for all rules. Assumption is that severity 
 * values have already been validated as correct. 
 * </span><span class="s5">@param </span><span class="s2">{Object} config </span><span class="s6">The config object to normalize. 
 * </span><span class="s5">@returns </span><span class="s2">{void}</span>
 <span class="s6">*/ 
function normalizeToStrings(config) { 
</span>
    <span class="s6">if (config.rules) { 
        Object.keys(config.rules).forEach(ruleId =&gt; { 
            const ruleConfig = config.rules[ruleId]; 
</span>
            <span class="s6">if (typeof ruleConfig === &quot;number&quot;) { 
                config.rules[ruleId] = RULE_SEVERITY_STRINGS[ruleConfig] || RULE_SEVERITY_STRINGS[0]; 
            } else if (Array.isArray(ruleConfig) &amp;&amp; typeof ruleConfig[0] === &quot;number&quot;) { 
                ruleConfig[0] = RULE_SEVERITY_STRINGS[ruleConfig[0]] || RULE_SEVERITY_STRINGS[0]; 
            } 
        }); 
    } 
} 
</span>
<span class="s6">/** 
 * Determines if the severity for the given rule configuration represents an error. 
 * </span><span class="s5">@param </span><span class="s2">{int|string|Array} ruleConfig </span><span class="s6">The configuration for an individual rule. 
 * </span><span class="s5">@returns </span><span class="s2">{boolean} </span><span class="s6">True if the rule represents an error, false if not. 
 */</span>
<span class="s5">function </span><span class="s1">isErrorSeverity(</span><span class="s2">ruleConfig</span><span class="s1">) {</span>
    <span class="s5">return </span><span class="s3">getRuleSeverity</span><span class="s1">(</span><span class="s2">ruleConfig</span><span class="s1">) </span><span class="s5">=== </span><span class="s7">2</span><span class="s1">;</span>
<span class="s1">}</span>

<span class="s6">/**</span>
 <span class="s6">* Checks whether a given config has valid severity or not. 
 * </span><span class="s5">@param </span><span class="s2">{number|string|Array} ruleConfig </span><span class="s6">The configuration for an individual rule. 
 * </span><span class="s5">@returns </span><span class="s2">{boolean} </span><span class="s6">`true` if the configuration has valid severity. 
 */</span>
<span class="s5">function </span><span class="s1">isValidSeverity(</span><span class="s2">ruleConfig</span><span class="s1">) {</span>
    <span class="s5">let </span><span class="s1">severity </span><span class="s5">= </span><span class="s2">Array</span><span class="s1">.</span><span class="s3">isArray</span><span class="s1">(</span><span class="s2">ruleConfig</span><span class="s1">) </span><span class="s5">? </span><span class="s2">ruleConfig</span><span class="s1">[</span><span class="s7">0</span><span class="s1">] </span><span class="s5">: </span><span class="s2">ruleConfig</span><span class="s1">;</span>

    <span class="s5">if </span><span class="s1">(</span><span class="s5">typeof </span><span class="s2">severity </span><span class="s5">=== </span><span class="s0">&quot;string&quot;</span><span class="s1">) {</span>
        <span class="s2">severity </span><span class="s5">= </span><span class="s2">severity</span><span class="s1">.</span><span class="s3">toLowerCase</span><span class="s1">();</span>
    <span class="s1">}</span>
    <span class="s5">return </span><span class="s2">VALID_SEVERITIES</span><span class="s1">.</span><span class="s3">indexOf</span><span class="s1">(</span><span class="s2">severity</span><span class="s1">) </span><span class="s5">!== -</span><span class="s7">1</span><span class="s1">;</span>
<span class="s1">}</span>

<span class="s6">/**</span>
 <span class="s6">* Checks whether every rule of a given config has valid severity or not. 
 * </span><span class="s5">@param </span><span class="s2">{Object} config </span><span class="s6">The configuration for rules. 
 * </span><span class="s5">@returns </span><span class="s2">{boolean} </span><span class="s6">`true` if the configuration has valid severity. 
 */</span>
<span class="s5">function </span><span class="s1">isEverySeverityValid(</span><span class="s2">config</span><span class="s1">) {</span>
    <span class="s5">return </span><span class="s2">Object</span><span class="s1">.</span><span class="s3">keys</span><span class="s1">(</span><span class="s2">config</span><span class="s1">).</span><span class="s3">every</span><span class="s1">(</span><span class="s2">ruleId </span><span class="s5">=&gt; </span><span class="s3">isValidSeverity</span><span class="s1">(</span><span class="s2">config</span><span class="s1">[</span><span class="s2">ruleId</span><span class="s1">]));</span>
<span class="s1">}</span>

<span class="s6">/**</span>
 <span class="s6">* Normalizes a value for a global in a config 
 * </span><span class="s5">@param </span><span class="s2">{(boolean|string|null)} configuredValue </span><span class="s6">The value given for a global in configuration or in 
 * a global directive comment 
 * </span><span class="s5">@returns </span><span class="s2">{(&quot;readable&quot;|&quot;writeable&quot;|&quot;off&quot;)} </span><span class="s6">The value normalized as a string 
 * </span><span class="s5">@throws </span><span class="s6">Error if global value is invalid 
 */</span>
<span class="s5">function </span><span class="s1">normalizeConfigGlobal(</span><span class="s2">configuredValue</span><span class="s1">) {</span>
    <span class="s5">switch </span><span class="s1">(</span><span class="s2">configuredValue</span><span class="s1">) {</span>
        <span class="s5">case </span><span class="s0">&quot;off&quot;</span><span class="s1">:</span>
            <span class="s5">return </span><span class="s0">&quot;off&quot;</span><span class="s1">;</span>

        <span class="s5">case </span><span class="s4">true</span><span class="s1">:</span>
        <span class="s5">case </span><span class="s0">&quot;true&quot;</span><span class="s1">:</span>
        <span class="s5">case </span><span class="s0">&quot;writeable&quot;</span><span class="s1">:</span>
        <span class="s5">case </span><span class="s0">&quot;writable&quot;</span><span class="s1">:</span>
            <span class="s5">return </span><span class="s0">&quot;writable&quot;</span><span class="s1">;</span>

        <span class="s5">case </span><span class="s4">null</span><span class="s1">:</span>
        <span class="s5">case </span><span class="s4">false</span><span class="s1">:</span>
        <span class="s5">case </span><span class="s0">&quot;false&quot;</span><span class="s1">:</span>
        <span class="s5">case </span><span class="s0">&quot;readable&quot;</span><span class="s1">:</span>
        <span class="s5">case </span><span class="s0">&quot;readonly&quot;</span><span class="s1">:</span>
            <span class="s5">return </span><span class="s0">&quot;readonly&quot;</span><span class="s1">;</span>

        <span class="s5">default</span><span class="s1">:</span>
            <span class="s5">throw new </span><span class="s3">Error</span><span class="s1">(</span><span class="s0">`'${</span><span class="s2">configuredValue</span><span class="s0">}' is not a valid configuration for a global (use 'readonly', 'writable', or 'off')`</span><span class="s1">);</span>
    <span class="s1">}</span>
<span class="s1">}</span>

<span class="s5">var </span><span class="s1">ConfigOps </span><span class="s5">= </span><span class="s1">{</span>
    <span class="s1">__proto__: </span><span class="s4">null</span><span class="s1">,</span>
    <span class="s1">getRuleSeverity: </span><span class="s2">getRuleSeverity</span><span class="s1">,</span>
    <span class="s1">normalizeToStrings: </span><span class="s2">normalizeToStrings</span><span class="s1">,</span>
    <span class="s1">isErrorSeverity: </span><span class="s2">isErrorSeverity</span><span class="s1">,</span>
    <span class="s1">isValidSeverity: </span><span class="s2">isValidSeverity</span><span class="s1">,</span>
    <span class="s1">isEverySeverityValid: </span><span class="s2">isEverySeverityValid</span><span class="s1">,</span>
    <span class="s1">normalizeConfigGlobal: </span><span class="s2">normalizeConfigGlobal</span>
<span class="s1">};</span>

<span class="s6">/**</span>
 <span class="s6">* </span><span class="s5">@fileoverview </span><span class="s6">Provide the function that emits deprecation warnings. 
 * </span><span class="s5">@author </span><span class="s2">Toru Nagashima </span><span class="s6">&lt;</span><span class="s4">http://github.com/mysticatea</span><span class="s6">&gt;</span>
 <span class="s6">*/</span>

<span class="s6">//------------------------------------------------------------------------------</span>
<span class="s6">// Private</span>
<span class="s6">//------------------------------------------------------------------------------</span>

<span class="s6">// Defitions for deprecation warnings.</span>
<span class="s5">const </span><span class="s1">deprecationWarningMessages </span><span class="s5">= </span><span class="s1">{</span>
    <span class="s1">ESLINT_LEGACY_ECMAFEATURES:</span>
        <span class="s0">&quot;The 'ecmaFeatures' config file property is deprecated and has no effect.&quot;</span><span class="s1">,</span>
    <span class="s1">ESLINT_PERSONAL_CONFIG_LOAD:</span>
        <span class="s0">&quot;'~/.eslintrc.*' config files have been deprecated. &quot; </span><span class="s5">+</span>
        <span class="s0">&quot;Please use a config file per project or the '--config' option.&quot;</span><span class="s1">,</span>
    <span class="s1">ESLINT_PERSONAL_CONFIG_SUPPRESS:</span>
        <span class="s0">&quot;'~/.eslintrc.*' config files have been deprecated. &quot; </span><span class="s5">+</span>
        <span class="s0">&quot;Please remove it or add 'root:true' to the config files in your &quot; </span><span class="s5">+</span>
        <span class="s0">&quot;projects in order to avoid loading '~/.eslintrc.*' accidentally.&quot;</span>
<span class="s1">};</span>

<span class="s5">const </span><span class="s1">sourceFileErrorCache </span><span class="s5">= new </span><span class="s3">Set</span><span class="s1">();</span>

<span class="s6">/**</span>
 <span class="s6">* Emits a deprecation warning containing a given filepath. A new deprecation warning is emitted 
 * for each unique file path, but repeated invocations with the same file path have no effect. 
 * No warnings are emitted if the `--no-deprecation` or `--no-warnings` Node runtime flags are active. 
 * </span><span class="s5">@param </span><span class="s2">{string} source </span><span class="s6">The name of the configuration source to report the warning for. 
 * </span><span class="s5">@param </span><span class="s2">{string} errorCode </span><span class="s6">The warning message to show. 
 * </span><span class="s5">@returns </span><span class="s2">{void}</span>
 <span class="s6">*/ 
function emitDeprecationWarning(source, errorCode) { 
    const cacheKey = JSON.stringify({ source, errorCode }); 
</span>
    <span class="s6">if (sourceFileErrorCache.has(cacheKey)) { 
        return; 
    } 
    sourceFileErrorCache.add(cacheKey); 
</span>
    <span class="s6">const rel = path__default[&quot;default&quot;].relative(process.cwd(), source); 
    const message = deprecationWarningMessages[errorCode]; 
</span>
    <span class="s6">process.emitWarning( 
        `${message} (found in &quot;${rel}&quot;)`, 
        &quot;DeprecationWarning&quot;, 
        errorCode 
    ); 
} 
</span>
<span class="s6">/** 
 * </span><span class="s5">@fileoverview </span><span class="s6">The instance of Ajv validator. 
 * </span><span class="s5">@author </span><span class="s2">Evgeny Poberezkin 
 </span><span class="s6">*/</span>

<span class="s6">//-----------------------------------------------------------------------------</span>
<span class="s6">// Helpers</span>
<span class="s6">//-----------------------------------------------------------------------------</span>

<span class="s6">/*</span>
 <span class="s6">* Copied from ajv/lib/refs/json-schema-draft-04.json 
 * The MIT License (MIT) 
 * Copyright (c) 2015-2017 Evgeny Poberezkin 
 */</span>
<span class="s5">const </span><span class="s1">metaSchema </span><span class="s5">= </span><span class="s1">{</span>
    <span class="s1">id: </span><span class="s0">&quot;http://json-schema.org/draft-04/schema#&quot;</span><span class="s1">,</span>
    <span class="s1">$schema: </span><span class="s0">&quot;http://json-schema.org/draft-04/schema#&quot;</span><span class="s1">,</span>
    <span class="s1">description: </span><span class="s0">&quot;Core schema meta-schema&quot;</span><span class="s1">,</span>
    <span class="s1">definitions: {</span>
        <span class="s1">schemaArray: {</span>
            <span class="s1">type: </span><span class="s0">&quot;array&quot;</span><span class="s1">,</span>
            <span class="s1">minItems: </span><span class="s7">1</span><span class="s1">,</span>
            <span class="s1">items: { $ref: </span><span class="s0">&quot;#&quot; </span><span class="s1">}</span>
        <span class="s1">},</span>
        <span class="s1">positiveInteger: {</span>
            <span class="s1">type: </span><span class="s0">&quot;integer&quot;</span><span class="s1">,</span>
            <span class="s1">minimum: </span><span class="s7">0</span>
        <span class="s1">},</span>
        <span class="s1">positiveIntegerDefault0: {</span>
            <span class="s1">allOf: [{ $ref: </span><span class="s0">&quot;#/definitions/positiveInteger&quot; </span><span class="s1">}, { default: </span><span class="s7">0 </span><span class="s1">}]</span>
        <span class="s1">},</span>
        <span class="s1">simpleTypes: {</span>
            <span class="s1">enum: [</span><span class="s0">&quot;array&quot;</span><span class="s1">, </span><span class="s0">&quot;boolean&quot;</span><span class="s1">, </span><span class="s0">&quot;integer&quot;</span><span class="s1">, </span><span class="s0">&quot;null&quot;</span><span class="s1">, </span><span class="s0">&quot;number&quot;</span><span class="s1">, </span><span class="s0">&quot;object&quot;</span><span class="s1">, </span><span class="s0">&quot;string&quot;</span><span class="s1">]</span>
        <span class="s1">},</span>
        <span class="s1">stringArray: {</span>
            <span class="s1">type: </span><span class="s0">&quot;array&quot;</span><span class="s1">,</span>
            <span class="s1">items: { type: </span><span class="s0">&quot;string&quot; </span><span class="s1">},</span>
            <span class="s1">minItems: </span><span class="s7">1</span><span class="s1">,</span>
            <span class="s1">uniqueItems: </span><span class="s4">true</span>
        <span class="s1">}</span>
    <span class="s1">},</span>
    <span class="s1">type: </span><span class="s0">&quot;object&quot;</span><span class="s1">,</span>
    <span class="s1">properties: {</span>
        <span class="s1">id: {</span>
            <span class="s1">type: </span><span class="s0">&quot;string&quot;</span>
        <span class="s1">},</span>
        <span class="s1">$schema: {</span>
            <span class="s1">type: </span><span class="s0">&quot;string&quot;</span>
        <span class="s1">},</span>
        <span class="s1">title: {</span>
            <span class="s1">type: </span><span class="s0">&quot;string&quot;</span>
        <span class="s1">},</span>
        <span class="s1">description: {</span>
            <span class="s1">type: </span><span class="s0">&quot;string&quot;</span>
        <span class="s1">},</span>
        <span class="s1">default: { },</span>
        <span class="s1">multipleOf: {</span>
            <span class="s1">type: </span><span class="s0">&quot;number&quot;</span><span class="s1">,</span>
            <span class="s1">minimum: </span><span class="s7">0</span><span class="s1">,</span>
            <span class="s1">exclusiveMinimum: </span><span class="s4">true</span>
        <span class="s1">},</span>
        <span class="s1">maximum: {</span>
            <span class="s1">type: </span><span class="s0">&quot;number&quot;</span>
        <span class="s1">},</span>
        <span class="s1">exclusiveMaximum: {</span>
            <span class="s1">type: </span><span class="s0">&quot;boolean&quot;</span><span class="s1">,</span>
            <span class="s1">default: </span><span class="s4">false</span>
        <span class="s1">},</span>
        <span class="s1">minimum: {</span>
            <span class="s1">type: </span><span class="s0">&quot;number&quot;</span>
        <span class="s1">},</span>
        <span class="s1">exclusiveMinimum: {</span>
            <span class="s1">type: </span><span class="s0">&quot;boolean&quot;</span><span class="s1">,</span>
            <span class="s1">default: </span><span class="s4">false</span>
        <span class="s1">},</span>
        <span class="s1">maxLength: { $ref: </span><span class="s0">&quot;#/definitions/positiveInteger&quot; </span><span class="s1">},</span>
        <span class="s1">minLength: { $ref: </span><span class="s0">&quot;#/definitions/positiveIntegerDefault0&quot; </span><span class="s1">},</span>
        <span class="s1">pattern: {</span>
            <span class="s1">type: </span><span class="s0">&quot;string&quot;</span><span class="s1">,</span>
            <span class="s1">format: </span><span class="s0">&quot;regex&quot;</span>
        <span class="s1">},</span>
        <span class="s1">additionalItems: {</span>
            <span class="s1">anyOf: [</span>
                <span class="s1">{ type: </span><span class="s0">&quot;boolean&quot; </span><span class="s1">},</span>
                <span class="s1">{ $ref: </span><span class="s0">&quot;#&quot; </span><span class="s1">}</span>
            <span class="s1">],</span>
            <span class="s1">default: { }</span>
        <span class="s1">},</span>
        <span class="s1">items: {</span>
            <span class="s1">anyOf: [</span>
                <span class="s1">{ $ref: </span><span class="s0">&quot;#&quot; </span><span class="s1">},</span>
                <span class="s1">{ $ref: </span><span class="s0">&quot;#/definitions/schemaArray&quot; </span><span class="s1">}</span>
            <span class="s1">],</span>
            <span class="s1">default: { }</span>
        <span class="s1">},</span>
        <span class="s1">maxItems: { $ref: </span><span class="s0">&quot;#/definitions/positiveInteger&quot; </span><span class="s1">},</span>
        <span class="s1">minItems: { $ref: </span><span class="s0">&quot;#/definitions/positiveIntegerDefault0&quot; </span><span class="s1">},</span>
        <span class="s1">uniqueItems: {</span>
            <span class="s1">type: </span><span class="s0">&quot;boolean&quot;</span><span class="s1">,</span>
            <span class="s1">default: </span><span class="s4">false</span>
        <span class="s1">},</span>
        <span class="s1">maxProperties: { $ref: </span><span class="s0">&quot;#/definitions/positiveInteger&quot; </span><span class="s1">},</span>
        <span class="s1">minProperties: { $ref: </span><span class="s0">&quot;#/definitions/positiveIntegerDefault0&quot; </span><span class="s1">},</span>
        <span class="s1">required: { $ref: </span><span class="s0">&quot;#/definitions/stringArray&quot; </span><span class="s1">},</span>
        <span class="s1">additionalProperties: {</span>
            <span class="s1">anyOf: [</span>
                <span class="s1">{ type: </span><span class="s0">&quot;boolean&quot; </span><span class="s1">},</span>
                <span class="s1">{ $ref: </span><span class="s0">&quot;#&quot; </span><span class="s1">}</span>
            <span class="s1">],</span>
            <span class="s1">default: { }</span>
        <span class="s1">},</span>
        <span class="s1">definitions: {</span>
            <span class="s1">type: </span><span class="s0">&quot;object&quot;</span><span class="s1">,</span>
            <span class="s1">additionalProperties: { $ref: </span><span class="s0">&quot;#&quot; </span><span class="s1">},</span>
            <span class="s1">default: { }</span>
        <span class="s1">},</span>
        <span class="s1">properties: {</span>
            <span class="s1">type: </span><span class="s0">&quot;object&quot;</span><span class="s1">,</span>
            <span class="s1">additionalProperties: { $ref: </span><span class="s0">&quot;#&quot; </span><span class="s1">},</span>
            <span class="s1">default: { }</span>
        <span class="s1">},</span>
        <span class="s1">patternProperties: {</span>
            <span class="s1">type: </span><span class="s0">&quot;object&quot;</span><span class="s1">,</span>
            <span class="s1">additionalProperties: { $ref: </span><span class="s0">&quot;#&quot; </span><span class="s1">},</span>
            <span class="s1">default: { }</span>
        <span class="s1">},</span>
        <span class="s1">dependencies: {</span>
            <span class="s1">type: </span><span class="s0">&quot;object&quot;</span><span class="s1">,</span>
            <span class="s1">additionalProperties: {</span>
                <span class="s1">anyOf: [</span>
                    <span class="s1">{ $ref: </span><span class="s0">&quot;#&quot; </span><span class="s1">},</span>
                    <span class="s1">{ $ref: </span><span class="s0">&quot;#/definitions/stringArray&quot; </span><span class="s1">}</span>
                <span class="s1">]</span>
            <span class="s1">}</span>
        <span class="s1">},</span>
        <span class="s1">enum: {</span>
            <span class="s1">type: </span><span class="s0">&quot;array&quot;</span><span class="s1">,</span>
            <span class="s1">minItems: </span><span class="s7">1</span><span class="s1">,</span>
            <span class="s1">uniqueItems: </span><span class="s4">true</span>
        <span class="s1">},</span>
        <span class="s1">type: {</span>
            <span class="s1">anyOf: [</span>
                <span class="s1">{ $ref: </span><span class="s0">&quot;#/definitions/simpleTypes&quot; </span><span class="s1">},</span>
                <span class="s1">{</span>
                    <span class="s1">type: </span><span class="s0">&quot;array&quot;</span><span class="s1">,</span>
                    <span class="s1">items: { $ref: </span><span class="s0">&quot;#/definitions/simpleTypes&quot; </span><span class="s1">},</span>
                    <span class="s1">minItems: </span><span class="s7">1</span><span class="s1">,</span>
                    <span class="s1">uniqueItems: </span><span class="s4">true</span>
                <span class="s1">}</span>
            <span class="s1">]</span>
        <span class="s1">},</span>
        <span class="s1">format: { type: </span><span class="s0">&quot;string&quot; </span><span class="s1">},</span>
        <span class="s1">allOf: { $ref: </span><span class="s0">&quot;#/definitions/schemaArray&quot; </span><span class="s1">},</span>
        <span class="s1">anyOf: { $ref: </span><span class="s0">&quot;#/definitions/schemaArray&quot; </span><span class="s1">},</span>
        <span class="s1">oneOf: { $ref: </span><span class="s0">&quot;#/definitions/schemaArray&quot; </span><span class="s1">},</span>
        <span class="s1">not: { $ref: </span><span class="s0">&quot;#&quot; </span><span class="s1">}</span>
    <span class="s1">},</span>
    <span class="s1">dependencies: {</span>
        <span class="s1">exclusiveMaximum: [</span><span class="s0">&quot;maximum&quot;</span><span class="s1">],</span>
        <span class="s1">exclusiveMinimum: [</span><span class="s0">&quot;minimum&quot;</span><span class="s1">]</span>
    <span class="s1">},</span>
    <span class="s1">default: { }</span>
<span class="s1">};</span>

<span class="s6">//------------------------------------------------------------------------------</span>
<span class="s6">// Public Interface</span>
<span class="s6">//------------------------------------------------------------------------------</span>

<span class="s5">var </span><span class="s1">ajvOrig </span><span class="s5">= </span><span class="s1">(</span><span class="s2">additionalOptions </span><span class="s5">= </span><span class="s1">{}) </span><span class="s5">=&gt; </span><span class="s1">{</span>
    <span class="s5">const </span><span class="s1">ajv </span><span class="s5">= new </span><span class="s2">Ajv__default</span><span class="s1">[</span><span class="s0">&quot;default&quot;</span><span class="s1">]({</span>
        <span class="s1">meta: </span><span class="s4">false</span><span class="s1">,</span>
        <span class="s1">useDefaults: </span><span class="s4">true</span><span class="s1">,</span>
        <span class="s1">validateSchema: </span><span class="s4">false</span><span class="s1">,</span>
        <span class="s1">missingRefs: </span><span class="s0">&quot;ignore&quot;</span><span class="s1">,</span>
        <span class="s1">verbose: </span><span class="s4">true</span><span class="s1">,</span>
        <span class="s1">schemaId: </span><span class="s0">&quot;auto&quot;</span><span class="s1">,</span>
        <span class="s5">...</span><span class="s2">additionalOptions</span>
    <span class="s1">});</span>

    <span class="s2">ajv</span><span class="s1">.</span><span class="s3">addMetaSchema</span><span class="s1">(</span><span class="s2">metaSchema</span><span class="s1">);</span>
    <span class="s6">// eslint-disable-next-line no-underscore-dangle</span>
    <span class="s2">ajv</span><span class="s1">.</span><span class="s2">_opts</span><span class="s1">.</span><span class="s2">defaultMeta </span><span class="s5">= </span><span class="s2">metaSchema</span><span class="s1">.</span><span class="s2">id</span><span class="s1">;</span>

    <span class="s5">return </span><span class="s2">ajv</span><span class="s1">;</span>
<span class="s1">};</span>

<span class="s6">/**</span>
 <span class="s6">* </span><span class="s5">@fileoverview </span><span class="s6">Defines a schema for configs. 
 * </span><span class="s5">@author </span><span class="s2">Sylvan Mably 
 </span><span class="s6">*/</span>

<span class="s5">const </span><span class="s1">baseConfigProperties </span><span class="s5">= </span><span class="s1">{</span>
    <span class="s1">$schema: { type: </span><span class="s0">&quot;string&quot; </span><span class="s1">},</span>
    <span class="s1">env: { type: </span><span class="s0">&quot;object&quot; </span><span class="s1">},</span>
    <span class="s1">extends: { $ref: </span><span class="s0">&quot;#/definitions/stringOrStrings&quot; </span><span class="s1">},</span>
    <span class="s1">globals: { type: </span><span class="s0">&quot;object&quot; </span><span class="s1">},</span>
    <span class="s1">overrides: {</span>
        <span class="s1">type: </span><span class="s0">&quot;array&quot;</span><span class="s1">,</span>
        <span class="s1">items: { $ref: </span><span class="s0">&quot;#/definitions/overrideConfig&quot; </span><span class="s1">},</span>
        <span class="s1">additionalItems: </span><span class="s4">false</span>
    <span class="s1">},</span>
    <span class="s1">parser: { type: [</span><span class="s0">&quot;string&quot;</span><span class="s1">, </span><span class="s0">&quot;null&quot;</span><span class="s1">] },</span>
    <span class="s1">parserOptions: { type: </span><span class="s0">&quot;object&quot; </span><span class="s1">},</span>
    <span class="s1">plugins: { type: </span><span class="s0">&quot;array&quot; </span><span class="s1">},</span>
    <span class="s1">processor: { type: </span><span class="s0">&quot;string&quot; </span><span class="s1">},</span>
    <span class="s1">rules: { type: </span><span class="s0">&quot;object&quot; </span><span class="s1">},</span>
    <span class="s1">settings: { type: </span><span class="s0">&quot;object&quot; </span><span class="s1">},</span>
    <span class="s1">noInlineConfig: { type: </span><span class="s0">&quot;boolean&quot; </span><span class="s1">},</span>
    <span class="s1">reportUnusedDisableDirectives: { type: </span><span class="s0">&quot;boolean&quot; </span><span class="s1">},</span>

    <span class="s1">ecmaFeatures: { type: </span><span class="s0">&quot;object&quot; </span><span class="s1">} </span><span class="s6">// deprecated; logs a warning when used</span>
<span class="s1">};</span>

<span class="s5">const </span><span class="s1">configSchema </span><span class="s5">= </span><span class="s1">{</span>
    <span class="s1">definitions: {</span>
        <span class="s1">stringOrStrings: {</span>
            <span class="s1">oneOf: [</span>
                <span class="s1">{ type: </span><span class="s0">&quot;string&quot; </span><span class="s1">},</span>
                <span class="s1">{</span>
                    <span class="s1">type: </span><span class="s0">&quot;array&quot;</span><span class="s1">,</span>
                    <span class="s1">items: { type: </span><span class="s0">&quot;string&quot; </span><span class="s1">},</span>
                    <span class="s1">additionalItems: </span><span class="s4">false</span>
                <span class="s1">}</span>
            <span class="s1">]</span>
        <span class="s1">},</span>
        <span class="s1">stringOrStringsRequired: {</span>
            <span class="s1">oneOf: [</span>
                <span class="s1">{ type: </span><span class="s0">&quot;string&quot; </span><span class="s1">},</span>
                <span class="s1">{</span>
                    <span class="s1">type: </span><span class="s0">&quot;array&quot;</span><span class="s1">,</span>
                    <span class="s1">items: { type: </span><span class="s0">&quot;string&quot; </span><span class="s1">},</span>
                    <span class="s1">additionalItems: </span><span class="s4">false</span><span class="s1">,</span>
                    <span class="s1">minItems: </span><span class="s7">1</span>
                <span class="s1">}</span>
            <span class="s1">]</span>
        <span class="s1">},</span>

        <span class="s6">// Config at top-level.</span>
        <span class="s1">objectConfig: {</span>
            <span class="s1">type: </span><span class="s0">&quot;object&quot;</span><span class="s1">,</span>
            <span class="s1">properties: {</span>
                <span class="s1">root: { type: </span><span class="s0">&quot;boolean&quot; </span><span class="s1">},</span>
                <span class="s1">ignorePatterns: { $ref: </span><span class="s0">&quot;#/definitions/stringOrStrings&quot; </span><span class="s1">},</span>
                <span class="s5">...</span><span class="s2">baseConfigProperties</span>
            <span class="s1">},</span>
            <span class="s1">additionalProperties: </span><span class="s4">false</span>
        <span class="s1">},</span>

        <span class="s6">// Config in `overrides`.</span>
        <span class="s1">overrideConfig: {</span>
            <span class="s1">type: </span><span class="s0">&quot;object&quot;</span><span class="s1">,</span>
            <span class="s1">properties: {</span>
                <span class="s1">excludedFiles: { $ref: </span><span class="s0">&quot;#/definitions/stringOrStrings&quot; </span><span class="s1">},</span>
                <span class="s1">files: { $ref: </span><span class="s0">&quot;#/definitions/stringOrStringsRequired&quot; </span><span class="s1">},</span>
                <span class="s5">...</span><span class="s2">baseConfigProperties</span>
            <span class="s1">},</span>
            <span class="s1">required: [</span><span class="s0">&quot;files&quot;</span><span class="s1">],</span>
            <span class="s1">additionalProperties: </span><span class="s4">false</span>
        <span class="s1">}</span>
    <span class="s1">},</span>

    <span class="s1">$ref: </span><span class="s0">&quot;#/definitions/objectConfig&quot;</span>
<span class="s1">};</span>

<span class="s6">/**</span>
 <span class="s6">* </span><span class="s5">@fileoverview </span><span class="s6">Defines environment settings and globals. 
 * </span><span class="s5">@author </span><span class="s2">Elan Shanker 
 </span><span class="s6">*/</span>

<span class="s6">//------------------------------------------------------------------------------</span>
<span class="s6">// Helpers</span>
<span class="s6">//------------------------------------------------------------------------------</span>

<span class="s6">/**</span>
 <span class="s6">* Get the object that has difference. 
 * </span><span class="s5">@param </span><span class="s2">{Record&lt;string,boolean&gt;} current </span><span class="s6">The newer object. 
 * </span><span class="s5">@param </span><span class="s2">{Record&lt;string,boolean&gt;} prev </span><span class="s6">The older object. 
 * </span><span class="s5">@returns </span><span class="s2">{Record&lt;string,boolean&gt;} </span><span class="s6">The difference object. 
 */</span>
<span class="s5">function </span><span class="s1">getDiff(</span><span class="s2">current</span><span class="s1">, </span><span class="s2">prev</span><span class="s1">) {</span>
    <span class="s5">const </span><span class="s1">retv </span><span class="s5">= </span><span class="s1">{};</span>

    <span class="s5">for </span><span class="s1">(</span><span class="s5">const </span><span class="s1">[key, value] </span><span class="s5">of </span><span class="s2">Object</span><span class="s1">.</span><span class="s3">entries</span><span class="s1">(</span><span class="s2">current</span><span class="s1">)) {</span>
        <span class="s5">if </span><span class="s1">(</span><span class="s5">!</span><span class="s2">Object</span><span class="s1">.</span><span class="s2">hasOwnProperty</span><span class="s1">.</span><span class="s3">call</span><span class="s1">(</span><span class="s2">prev</span><span class="s1">, </span><span class="s2">key</span><span class="s1">)) {</span>
            <span class="s2">retv</span><span class="s1">[</span><span class="s2">key</span><span class="s1">] </span><span class="s5">= </span><span class="s2">value</span><span class="s1">;</span>
        <span class="s1">}</span>
    <span class="s1">}</span>

    <span class="s5">return </span><span class="s2">retv</span><span class="s1">;</span>
<span class="s1">}</span>

<span class="s5">const </span><span class="s1">newGlobals2015 </span><span class="s5">= </span><span class="s3">getDiff</span><span class="s1">(</span><span class="s2">globals__default</span><span class="s1">[</span><span class="s0">&quot;default&quot;</span><span class="s1">].</span><span class="s2">es2015</span><span class="s1">, </span><span class="s2">globals__default</span><span class="s1">[</span><span class="s0">&quot;default&quot;</span><span class="s1">].</span><span class="s2">es5</span><span class="s1">); </span><span class="s6">// 19 variables such as Promise, Map, ...</span>
<span class="s5">const </span><span class="s1">newGlobals2017 </span><span class="s5">= </span><span class="s1">{</span>
    <span class="s1">Atomics: </span><span class="s4">false</span><span class="s1">,</span>
    <span class="s1">SharedArrayBuffer: </span><span class="s4">false</span>
<span class="s1">};</span>
<span class="s5">const </span><span class="s1">newGlobals2020 </span><span class="s5">= </span><span class="s1">{</span>
    <span class="s1">BigInt: </span><span class="s4">false</span><span class="s1">,</span>
    <span class="s1">BigInt64Array: </span><span class="s4">false</span><span class="s1">,</span>
    <span class="s1">BigUint64Array: </span><span class="s4">false</span><span class="s1">,</span>
    <span class="s1">globalThis: </span><span class="s4">false</span>
<span class="s1">};</span>

<span class="s5">const </span><span class="s1">newGlobals2021 </span><span class="s5">= </span><span class="s1">{</span>
    <span class="s1">AggregateError: </span><span class="s4">false</span><span class="s1">,</span>
    <span class="s1">FinalizationRegistry: </span><span class="s4">false</span><span class="s1">,</span>
    <span class="s1">WeakRef: </span><span class="s4">false</span>
<span class="s1">};</span>

<span class="s6">//------------------------------------------------------------------------------</span>
<span class="s6">// Public Interface</span>
<span class="s6">//------------------------------------------------------------------------------</span>

<span class="s6">/** </span><span class="s5">@type </span><span class="s2">{Map&lt;string, import(&quot;../lib/shared/types&quot;).Environment&gt;} </span><span class="s6">*/</span>
<span class="s5">var </span><span class="s1">environments </span><span class="s5">= new </span><span class="s3">Map</span><span class="s1">(</span><span class="s2">Object</span><span class="s1">.</span><span class="s3">entries</span><span class="s1">({</span>

    <span class="s6">// Language</span>
    <span class="s1">builtin: {</span>
        <span class="s1">globals: </span><span class="s2">globals__default</span><span class="s1">[</span><span class="s0">&quot;default&quot;</span><span class="s1">].</span><span class="s2">es5</span>
    <span class="s1">},</span>
    <span class="s1">es6: {</span>
        <span class="s1">globals: </span><span class="s2">newGlobals2015</span><span class="s1">,</span>
        <span class="s1">parserOptions: {</span>
            <span class="s1">ecmaVersion: </span><span class="s7">6</span>
        <span class="s1">}</span>
    <span class="s1">},</span>
    <span class="s1">es2015: {</span>
        <span class="s1">globals: </span><span class="s2">newGlobals2015</span><span class="s1">,</span>
        <span class="s1">parserOptions: {</span>
            <span class="s1">ecmaVersion: </span><span class="s7">6</span>
        <span class="s1">}</span>
    <span class="s1">},</span>
    <span class="s1">es2016: {</span>
        <span class="s1">globals: </span><span class="s2">newGlobals2015</span><span class="s1">,</span>
        <span class="s1">parserOptions: {</span>
            <span class="s1">ecmaVersion: </span><span class="s7">7</span>
        <span class="s1">}</span>
    <span class="s1">},</span>
    <span class="s1">es2017: {</span>
        <span class="s1">globals: { </span><span class="s5">...</span><span class="s2">newGlobals2015</span><span class="s1">, </span><span class="s5">...</span><span class="s2">newGlobals2017 </span><span class="s1">},</span>
        <span class="s1">parserOptions: {</span>
            <span class="s1">ecmaVersion: </span><span class="s7">8</span>
        <span class="s1">}</span>
    <span class="s1">},</span>
    <span class="s1">es2018: {</span>
        <span class="s1">globals: { </span><span class="s5">...</span><span class="s2">newGlobals2015</span><span class="s1">, </span><span class="s5">...</span><span class="s2">newGlobals2017 </span><span class="s1">},</span>
        <span class="s1">parserOptions: {</span>
            <span class="s1">ecmaVersion: </span><span class="s7">9</span>
        <span class="s1">}</span>
    <span class="s1">},</span>
    <span class="s1">es2019: {</span>
        <span class="s1">globals: { </span><span class="s5">...</span><span class="s2">newGlobals2015</span><span class="s1">, </span><span class="s5">...</span><span class="s2">newGlobals2017 </span><span class="s1">},</span>
        <span class="s1">parserOptions: {</span>
            <span class="s1">ecmaVersion: </span><span class="s7">10</span>
        <span class="s1">}</span>
    <span class="s1">},</span>
    <span class="s1">es2020: {</span>
        <span class="s1">globals: { </span><span class="s5">...</span><span class="s2">newGlobals2015</span><span class="s1">, </span><span class="s5">...</span><span class="s2">newGlobals2017</span><span class="s1">, </span><span class="s5">...</span><span class="s2">newGlobals2020 </span><span class="s1">},</span>
        <span class="s1">parserOptions: {</span>
            <span class="s1">ecmaVersion: </span><span class="s7">11</span>
        <span class="s1">}</span>
    <span class="s1">},</span>
    <span class="s1">es2021: {</span>
        <span class="s1">globals: { </span><span class="s5">...</span><span class="s2">newGlobals2015</span><span class="s1">, </span><span class="s5">...</span><span class="s2">newGlobals2017</span><span class="s1">, </span><span class="s5">...</span><span class="s2">newGlobals2020</span><span class="s1">, </span><span class="s5">...</span><span class="s2">newGlobals2021 </span><span class="s1">},</span>
        <span class="s1">parserOptions: {</span>
            <span class="s1">ecmaVersion: </span><span class="s7">12</span>
        <span class="s1">}</span>
    <span class="s1">},</span>
    <span class="s1">es2022: {</span>
        <span class="s1">globals: { </span><span class="s5">...</span><span class="s2">newGlobals2015</span><span class="s1">, </span><span class="s5">...</span><span class="s2">newGlobals2017</span><span class="s1">, </span><span class="s5">...</span><span class="s2">newGlobals2020</span><span class="s1">, </span><span class="s5">...</span><span class="s2">newGlobals2021 </span><span class="s1">},</span>
        <span class="s1">parserOptions: {</span>
            <span class="s1">ecmaVersion: </span><span class="s7">13</span>
        <span class="s1">}</span>
    <span class="s1">},</span>
    <span class="s1">es2023: {</span>
        <span class="s1">globals: { </span><span class="s5">...</span><span class="s2">newGlobals2015</span><span class="s1">, </span><span class="s5">...</span><span class="s2">newGlobals2017</span><span class="s1">, </span><span class="s5">...</span><span class="s2">newGlobals2020</span><span class="s1">, </span><span class="s5">...</span><span class="s2">newGlobals2021 </span><span class="s1">},</span>
        <span class="s1">parserOptions: {</span>
            <span class="s1">ecmaVersion: </span><span class="s7">14</span>
        <span class="s1">}</span>
    <span class="s1">},</span>
    <span class="s1">es2024: {</span>
        <span class="s1">globals: { </span><span class="s5">...</span><span class="s2">newGlobals2015</span><span class="s1">, </span><span class="s5">...</span><span class="s2">newGlobals2017</span><span class="s1">, </span><span class="s5">...</span><span class="s2">newGlobals2020</span><span class="s1">, </span><span class="s5">...</span><span class="s2">newGlobals2021 </span><span class="s1">},</span>
        <span class="s1">parserOptions: {</span>
            <span class="s1">ecmaVersion: </span><span class="s7">15</span>
        <span class="s1">}</span>
    <span class="s1">},</span>

    <span class="s6">// Platforms</span>
    <span class="s1">browser: {</span>
        <span class="s1">globals: </span><span class="s2">globals__default</span><span class="s1">[</span><span class="s0">&quot;default&quot;</span><span class="s1">].</span><span class="s2">browser</span>
    <span class="s1">},</span>
    <span class="s1">node: {</span>
        <span class="s1">globals: </span><span class="s2">globals__default</span><span class="s1">[</span><span class="s0">&quot;default&quot;</span><span class="s1">].</span><span class="s2">node</span><span class="s1">,</span>
        <span class="s1">parserOptions: {</span>
            <span class="s1">ecmaFeatures: {</span>
                <span class="s1">globalReturn: </span><span class="s4">true</span>
            <span class="s1">}</span>
        <span class="s1">}</span>
    <span class="s1">},</span>
    <span class="s0">&quot;shared-node-browser&quot;</span><span class="s1">: {</span>
        <span class="s1">globals: </span><span class="s2">globals__default</span><span class="s1">[</span><span class="s0">&quot;default&quot;</span><span class="s1">][</span><span class="s0">&quot;shared-node-browser&quot;</span><span class="s1">]</span>
    <span class="s1">},</span>
    <span class="s1">worker: {</span>
        <span class="s1">globals: </span><span class="s2">globals__default</span><span class="s1">[</span><span class="s0">&quot;default&quot;</span><span class="s1">].</span><span class="s2">worker</span>
    <span class="s1">},</span>
    <span class="s1">serviceworker: {</span>
        <span class="s1">globals: </span><span class="s2">globals__default</span><span class="s1">[</span><span class="s0">&quot;default&quot;</span><span class="s1">].</span><span class="s2">serviceworker</span>
    <span class="s1">},</span>

    <span class="s6">// Frameworks</span>
    <span class="s1">commonjs: {</span>
        <span class="s1">globals: </span><span class="s2">globals__default</span><span class="s1">[</span><span class="s0">&quot;default&quot;</span><span class="s1">].</span><span class="s2">commonjs</span><span class="s1">,</span>
        <span class="s1">parserOptions: {</span>
            <span class="s1">ecmaFeatures: {</span>
                <span class="s1">globalReturn: </span><span class="s4">true</span>
            <span class="s1">}</span>
        <span class="s1">}</span>
    <span class="s1">},</span>
    <span class="s1">amd: {</span>
        <span class="s1">globals: </span><span class="s2">globals__default</span><span class="s1">[</span><span class="s0">&quot;default&quot;</span><span class="s1">].</span><span class="s2">amd</span>
    <span class="s1">},</span>
    <span class="s1">mocha: {</span>
        <span class="s1">globals: </span><span class="s2">globals__default</span><span class="s1">[</span><span class="s0">&quot;default&quot;</span><span class="s1">].</span><span class="s2">mocha</span>
    <span class="s1">},</span>
    <span class="s1">jasmine: {</span>
        <span class="s1">globals: </span><span class="s2">globals__default</span><span class="s1">[</span><span class="s0">&quot;default&quot;</span><span class="s1">].</span><span class="s2">jasmine</span>
    <span class="s1">},</span>
    <span class="s1">jest: {</span>
        <span class="s1">globals: </span><span class="s2">globals__default</span><span class="s1">[</span><span class="s0">&quot;default&quot;</span><span class="s1">].</span><span class="s2">jest</span>
    <span class="s1">},</span>
    <span class="s1">phantomjs: {</span>
        <span class="s1">globals: </span><span class="s2">globals__default</span><span class="s1">[</span><span class="s0">&quot;default&quot;</span><span class="s1">].</span><span class="s2">phantomjs</span>
    <span class="s1">},</span>
    <span class="s1">jquery: {</span>
        <span class="s1">globals: </span><span class="s2">globals__default</span><span class="s1">[</span><span class="s0">&quot;default&quot;</span><span class="s1">].</span><span class="s2">jquery</span>
    <span class="s1">},</span>
    <span class="s1">qunit: {</span>
        <span class="s1">globals: </span><span class="s2">globals__default</span><span class="s1">[</span><span class="s0">&quot;default&quot;</span><span class="s1">].</span><span class="s2">qunit</span>
    <span class="s1">},</span>
    <span class="s1">prototypejs: {</span>
        <span class="s1">globals: </span><span class="s2">globals__default</span><span class="s1">[</span><span class="s0">&quot;default&quot;</span><span class="s1">].</span><span class="s2">prototypejs</span>
    <span class="s1">},</span>
    <span class="s1">shelljs: {</span>
        <span class="s1">globals: </span><span class="s2">globals__default</span><span class="s1">[</span><span class="s0">&quot;default&quot;</span><span class="s1">].</span><span class="s2">shelljs</span>
    <span class="s1">},</span>
    <span class="s1">meteor: {</span>
        <span class="s1">globals: </span><span class="s2">globals__default</span><span class="s1">[</span><span class="s0">&quot;default&quot;</span><span class="s1">].</span><span class="s2">meteor</span>
    <span class="s1">},</span>
    <span class="s1">mongo: {</span>
        <span class="s1">globals: </span><span class="s2">globals__default</span><span class="s1">[</span><span class="s0">&quot;default&quot;</span><span class="s1">].</span><span class="s2">mongo</span>
    <span class="s1">},</span>
    <span class="s1">protractor: {</span>
        <span class="s1">globals: </span><span class="s2">globals__default</span><span class="s1">[</span><span class="s0">&quot;default&quot;</span><span class="s1">].</span><span class="s2">protractor</span>
    <span class="s1">},</span>
    <span class="s1">applescript: {</span>
        <span class="s1">globals: </span><span class="s2">globals__default</span><span class="s1">[</span><span class="s0">&quot;default&quot;</span><span class="s1">].</span><span class="s2">applescript</span>
    <span class="s1">},</span>
    <span class="s1">nashorn: {</span>
        <span class="s1">globals: </span><span class="s2">globals__default</span><span class="s1">[</span><span class="s0">&quot;default&quot;</span><span class="s1">].</span><span class="s2">nashorn</span>
    <span class="s1">},</span>
    <span class="s1">atomtest: {</span>
        <span class="s1">globals: </span><span class="s2">globals__default</span><span class="s1">[</span><span class="s0">&quot;default&quot;</span><span class="s1">].</span><span class="s2">atomtest</span>
    <span class="s1">},</span>
    <span class="s1">embertest: {</span>
        <span class="s1">globals: </span><span class="s2">globals__default</span><span class="s1">[</span><span class="s0">&quot;default&quot;</span><span class="s1">].</span><span class="s2">embertest</span>
    <span class="s1">},</span>
    <span class="s1">webextensions: {</span>
        <span class="s1">globals: </span><span class="s2">globals__default</span><span class="s1">[</span><span class="s0">&quot;default&quot;</span><span class="s1">].</span><span class="s2">webextensions</span>
    <span class="s1">},</span>
    <span class="s1">greasemonkey: {</span>
        <span class="s1">globals: </span><span class="s2">globals__default</span><span class="s1">[</span><span class="s0">&quot;default&quot;</span><span class="s1">].</span><span class="s2">greasemonkey</span>
    <span class="s1">}</span>
<span class="s1">}));</span>

<span class="s6">/**</span>
 <span class="s6">* </span><span class="s5">@fileoverview </span><span class="s6">Validates configs. 
 * </span><span class="s5">@author </span><span class="s2">Brandon Mills 
 </span><span class="s6">*/</span>

<span class="s5">const </span><span class="s1">ajv </span><span class="s5">= </span><span class="s3">ajvOrig</span><span class="s1">();</span>

<span class="s5">const </span><span class="s1">ruleValidators </span><span class="s5">= new </span><span class="s3">WeakMap</span><span class="s1">();</span>
<span class="s5">const </span><span class="s1">noop </span><span class="s5">= </span><span class="s1">Function.prototype;</span>

<span class="s6">//------------------------------------------------------------------------------</span>
<span class="s6">// Private</span>
<span class="s6">//------------------------------------------------------------------------------</span>
<span class="s5">let </span><span class="s1">validateSchema;</span>
<span class="s5">const </span><span class="s1">severityMap </span><span class="s5">= </span><span class="s1">{</span>
    <span class="s1">error: </span><span class="s7">2</span><span class="s1">,</span>
    <span class="s1">warn: </span><span class="s7">1</span><span class="s1">,</span>
    <span class="s1">off: </span><span class="s7">0</span>
<span class="s1">};</span>

<span class="s5">const </span><span class="s1">validated </span><span class="s5">= new </span><span class="s3">WeakSet</span><span class="s1">();</span>

<span class="s6">//-----------------------------------------------------------------------------</span>
<span class="s6">// Exports</span>
<span class="s6">//-----------------------------------------------------------------------------</span>

<span class="s5">class </span><span class="s2">ConfigValidator </span><span class="s1">{</span>
    <span class="s5">constructor</span><span class="s1">({ </span><span class="s2">builtInRules </span><span class="s5">= new </span><span class="s3">Map</span><span class="s1">() } </span><span class="s5">= </span><span class="s1">{}) {</span>
        <span class="s2">this</span><span class="s1">.</span><span class="s2">builtInRules </span><span class="s5">= </span><span class="s2">builtInRules</span><span class="s1">;</span>
    <span class="s1">}</span>

    <span class="s6">/**</span>
     <span class="s6">* Gets a complete options schema for a rule. 
     * </span><span class="s5">@param </span><span class="s2">{{create: Function, schema: (Array|null)}} rule </span><span class="s6">A new-style rule object 
     * </span><span class="s5">@returns </span><span class="s2">{Object} </span><span class="s6">JSON Schema for the rule's options. 
     */</span>
    <span class="s1">getRuleOptionsSchema(</span><span class="s2">rule</span><span class="s1">) {</span>
        <span class="s5">if </span><span class="s1">(</span><span class="s5">!</span><span class="s2">rule</span><span class="s1">) {</span>
            <span class="s5">return </span><span class="s4">null</span><span class="s1">;</span>
        <span class="s1">}</span>

        <span class="s5">const </span><span class="s1">schema </span><span class="s5">= </span><span class="s2">rule</span><span class="s1">.</span><span class="s2">schema </span><span class="s5">|| </span><span class="s2">rule</span><span class="s1">.</span><span class="s2">meta </span><span class="s5">&amp;&amp; </span><span class="s2">rule</span><span class="s1">.</span><span class="s2">meta</span><span class="s1">.</span><span class="s2">schema</span><span class="s1">;</span>

        <span class="s6">// Given a tuple of schemas, insert warning level at the beginning</span>
        <span class="s5">if </span><span class="s1">(</span><span class="s2">Array</span><span class="s1">.</span><span class="s3">isArray</span><span class="s1">(</span><span class="s2">schema</span><span class="s1">)) {</span>
            <span class="s5">if </span><span class="s1">(</span><span class="s2">schema</span><span class="s1">.length) {</span>
                <span class="s5">return </span><span class="s1">{</span>
                    <span class="s1">type: </span><span class="s0">&quot;array&quot;</span><span class="s1">,</span>
                    <span class="s1">items: </span><span class="s2">schema</span><span class="s1">,</span>
                    <span class="s1">minItems: </span><span class="s7">0</span><span class="s1">,</span>
                    <span class="s1">maxItems: </span><span class="s2">schema</span><span class="s1">.length</span>
                <span class="s1">};</span>
            <span class="s1">}</span>
            <span class="s5">return </span><span class="s1">{</span>
                <span class="s1">type: </span><span class="s0">&quot;array&quot;</span><span class="s1">,</span>
                <span class="s1">minItems: </span><span class="s7">0</span><span class="s1">,</span>
                <span class="s1">maxItems: </span><span class="s7">0</span>
            <span class="s1">};</span>

        <span class="s1">}</span>

        <span class="s6">// Given a full schema, leave it alone</span>
        <span class="s5">return </span><span class="s2">schema </span><span class="s5">|| </span><span class="s4">null</span><span class="s1">;</span>
    <span class="s1">}</span>

    <span class="s6">/**</span>
     <span class="s6">* Validates a rule's severity and returns the severity value. Throws an error if the severity is invalid. 
     * </span><span class="s5">@param </span><span class="s2">{options} options </span><span class="s6">The given options for the rule. 
     * </span><span class="s5">@returns </span><span class="s2">{number|string} </span><span class="s6">The rule's severity value 
     */</span>
    <span class="s1">validateRuleSeverity(</span><span class="s2">options</span><span class="s1">) {</span>
        <span class="s5">const </span><span class="s1">severity </span><span class="s5">= </span><span class="s2">Array</span><span class="s1">.</span><span class="s3">isArray</span><span class="s1">(</span><span class="s2">options</span><span class="s1">) </span><span class="s5">? </span><span class="s2">options</span><span class="s1">[</span><span class="s7">0</span><span class="s1">] </span><span class="s5">: </span><span class="s2">options</span><span class="s1">;</span>
        <span class="s5">const </span><span class="s1">normSeverity </span><span class="s5">= typeof </span><span class="s2">severity </span><span class="s5">=== </span><span class="s0">&quot;string&quot; </span><span class="s5">? </span><span class="s2">severityMap</span><span class="s1">[</span><span class="s2">severity</span><span class="s1">.</span><span class="s3">toLowerCase</span><span class="s1">()] </span><span class="s5">: </span><span class="s2">severity</span><span class="s1">;</span>

        <span class="s5">if </span><span class="s1">(</span><span class="s2">normSeverity </span><span class="s5">=== </span><span class="s7">0 </span><span class="s5">|| </span><span class="s2">normSeverity </span><span class="s5">=== </span><span class="s7">1 </span><span class="s5">|| </span><span class="s2">normSeverity </span><span class="s5">=== </span><span class="s7">2</span><span class="s1">) {</span>
            <span class="s5">return </span><span class="s2">normSeverity</span><span class="s1">;</span>
        <span class="s1">}</span>

        <span class="s5">throw new </span><span class="s3">Error</span><span class="s1">(</span><span class="s0">`</span><span class="s8">\t</span><span class="s0">Severity should be one of the following: 0 = off, 1 = warn, 2 = error (you passed '${</span><span class="s2">util__default</span><span class="s0">[&quot;default&quot;].</span><span class="s3">inspect</span><span class="s0">(</span><span class="s2">severity</span><span class="s0">).</span><span class="s3">replace</span><span class="s0">(/'/</span><span class="s5">gu</span><span class="s0">, &quot;</span><span class="s8">\&quot;</span><span class="s0">&quot;).</span><span class="s3">replace</span><span class="s0">(/</span><span class="s4">\n</span><span class="s0">/</span><span class="s5">gu</span><span class="s0">, &quot;&quot;)}').</span><span class="s8">\n</span><span class="s0">`</span><span class="s1">);</span>

    <span class="s1">}</span>

    <span class="s6">/**</span>
     <span class="s6">* Validates the non-severity options passed to a rule, based on its schema. 
     * </span><span class="s5">@param </span><span class="s2">{{create: Function}} rule </span><span class="s6">The rule to validate 
     * </span><span class="s5">@param </span><span class="s2">{Array} localOptions </span><span class="s6">The options for the rule, excluding severity 
     * </span><span class="s5">@returns </span><span class="s2">{void}</span>
     <span class="s6">*/ 
    validateRuleSchema(rule, localOptions) { 
        if (!ruleValidators.has(rule)) { 
            const schema = this.getRuleOptionsSchema(rule); 
</span>
            <span class="s6">if (schema) { 
                ruleValidators.set(rule, ajv.compile(schema)); 
            } 
        } 
</span>
        <span class="s6">const validateRule = ruleValidators.get(rule); 
</span>
        <span class="s6">if (validateRule) { 
            validateRule(localOptions); 
            if (validateRule.errors) { 
                throw new Error(validateRule.errors.map( 
                    error =&gt; `\tValue ${JSON.stringify(error.data)} ${error.message}.\n` 
                ).join(&quot;&quot;)); 
            } 
        } 
    } 
</span>
    <span class="s6">/** 
     * Validates a rule's options against its schema. 
     * </span><span class="s5">@param </span><span class="s2">{{create: Function}|null} rule </span><span class="s6">The rule that the config is being validated for 
     * </span><span class="s5">@param </span><span class="s2">{string} ruleId </span><span class="s6">The rule's unique name. 
     * </span><span class="s5">@param </span><span class="s2">{Array|number} options </span><span class="s6">The given options for the rule. 
     * </span><span class="s5">@param </span><span class="s2">{string|null} source </span><span class="s6">The name of the configuration source to report in any errors. If null or undefined, 
     * no source is prepended to the message. 
     * </span><span class="s5">@returns </span><span class="s2">{void}</span>
     <span class="s6">*/ 
    validateRuleOptions(rule, ruleId, options, source = null) { 
        try { 
            const severity = this.validateRuleSeverity(options); 
</span>
            <span class="s6">if (severity !== 0) { 
                this.validateRuleSchema(rule, Array.isArray(options) ? options.slice(1) : []); 
            } 
        } catch (err) { 
            const enhancedMessage = `Configuration for rule &quot;${ruleId}&quot; is invalid:\n${err.message}`; 
</span>
            <span class="s6">if (typeof source === &quot;string&quot;) { 
                throw new Error(`${source}:\n\t${enhancedMessage}`); 
            } else { 
                throw new Error(enhancedMessage); 
            } 
        } 
    } 
</span>
    <span class="s6">/** 
     * Validates an environment object 
     * </span><span class="s5">@param </span><span class="s2">{Object} environment </span><span class="s6">The environment config object to validate. 
     * </span><span class="s5">@param </span><span class="s2">{string} source </span><span class="s6">The name of the configuration source to report in any errors. 
     * </span><span class="s5">@param </span><span class="s2">{function(envId:string): Object} [getAdditionalEnv] </span><span class="s6">A map from strings to loaded environments. 
     * </span><span class="s5">@returns </span><span class="s2">{void}</span>
     <span class="s6">*/ 
    validateEnvironment( 
        environment, 
        source, 
        getAdditionalEnv = noop 
    ) { 
</span>
        <span class="s6">// not having an environment is ok 
        if (!environment) { 
            return; 
        } 
</span>
        <span class="s6">Object.keys(environment).forEach(id =&gt; { 
            const env = getAdditionalEnv(id) || environments.get(id) || null; 
</span>
            <span class="s6">if (!env) { 
                const message = `${source}:\n\tEnvironment key &quot;${id}&quot; is unknown\n`; 
</span>
                <span class="s6">throw new Error(message); 
            } 
        }); 
    } 
</span>
    <span class="s6">/** 
     * Validates a rules config object 
     * </span><span class="s5">@param </span><span class="s2">{Object} rulesConfig </span><span class="s6">The rules config object to validate. 
     * </span><span class="s5">@param </span><span class="s2">{string} source </span><span class="s6">The name of the configuration source to report in any errors. 
     * </span><span class="s5">@param </span><span class="s2">{function(ruleId:string): Object} getAdditionalRule </span><span class="s6">A map from strings to loaded rules 
     * </span><span class="s5">@returns </span><span class="s2">{void}</span>
     <span class="s6">*/ 
    validateRules( 
        rulesConfig, 
        source, 
        getAdditionalRule = noop 
    ) { 
        if (!rulesConfig) { 
            return; 
        } 
</span>
        <span class="s6">Object.keys(rulesConfig).forEach(id =&gt; { 
            const rule = getAdditionalRule(id) || this.builtInRules.get(id) || null; 
</span>
            <span class="s6">this.validateRuleOptions(rule, id, rulesConfig[id], source); 
        }); 
    } 
</span>
    <span class="s6">/** 
     * Validates a `globals` section of a config file 
     * </span><span class="s5">@param </span><span class="s2">{Object} globalsConfig </span><span class="s6">The `globals` section 
     * </span><span class="s5">@param </span><span class="s2">{string|null} source </span><span class="s6">The name of the configuration source to report in the event of an error. 
     * </span><span class="s5">@returns </span><span class="s2">{void}</span>
     <span class="s6">*/ 
    validateGlobals(globalsConfig, source = null) { 
        if (!globalsConfig) { 
            return; 
        } 
</span>
        <span class="s6">Object.entries(globalsConfig) 
            .forEach(([configuredGlobal, configuredValue]) =&gt; { 
                try { 
                    normalizeConfigGlobal(configuredValue); 
                } catch (err) { 
                    throw new Error(`ESLint configuration of global '${configuredGlobal}' in ${source} is invalid:\n${err.message}`); 
                } 
            }); 
    } 
</span>
    <span class="s6">/** 
     * Validate `processor` configuration. 
     * </span><span class="s5">@param </span><span class="s2">{string|undefined} processorName </span><span class="s6">The processor name. 
     * </span><span class="s5">@param </span><span class="s2">{string} source </span><span class="s6">The name of config file. 
     * </span><span class="s5">@param </span><span class="s2">{function(id:string): Processor} getProcessor </span><span class="s6">The getter of defined processors. 
     * </span><span class="s5">@returns </span><span class="s2">{void}</span>
     <span class="s6">*/ 
    validateProcessor(processorName, source, getProcessor) { 
        if (processorName &amp;&amp; !getProcessor(processorName)) { 
            throw new Error(`ESLint configuration of processor in '${source}' is invalid: '${processorName}' was not found.`); 
        } 
    } 
</span>
    <span class="s6">/** 
     * Formats an array of schema validation errors. 
     * </span><span class="s5">@param </span><span class="s2">{Array} errors </span><span class="s6">An array of error messages to format. 
     * </span><span class="s5">@returns </span><span class="s2">{string} </span><span class="s6">Formatted error message 
     */</span>
    <span class="s1">formatErrors(</span><span class="s2">errors</span><span class="s1">) {</span>
        <span class="s5">return </span><span class="s2">errors</span><span class="s1">.</span><span class="s3">map</span><span class="s1">(</span><span class="s2">error </span><span class="s5">=&gt; </span><span class="s1">{</span>
            <span class="s5">if </span><span class="s1">(</span><span class="s2">error</span><span class="s1">.</span><span class="s2">keyword </span><span class="s5">=== </span><span class="s0">&quot;additionalProperties&quot;</span><span class="s1">) {</span>
                <span class="s5">const </span><span class="s1">formattedPropertyPath </span><span class="s5">= </span><span class="s2">error</span><span class="s1">.</span><span class="s2">dataPath</span><span class="s1">.length </span><span class="s5">? </span><span class="s0">`${</span><span class="s2">error</span><span class="s0">.</span><span class="s2">dataPath</span><span class="s0">.</span><span class="s3">slice</span><span class="s0">(</span><span class="s7">1</span><span class="s0">)}.${</span><span class="s2">error</span><span class="s0">.</span><span class="s2">params</span><span class="s0">.</span><span class="s2">additionalProperty</span><span class="s0">}` </span><span class="s5">: </span><span class="s2">error</span><span class="s1">.</span><span class="s2">params</span><span class="s1">.</span><span class="s2">additionalProperty</span><span class="s1">;</span>

                <span class="s5">return </span><span class="s0">`Unexpected top-level property &quot;${</span><span class="s2">formattedPropertyPath</span><span class="s0">}&quot;`</span><span class="s1">;</span>
            <span class="s1">}</span>
            <span class="s5">if </span><span class="s1">(</span><span class="s2">error</span><span class="s1">.</span><span class="s2">keyword </span><span class="s5">=== </span><span class="s0">&quot;type&quot;</span><span class="s1">) {</span>
                <span class="s5">const </span><span class="s1">formattedField </span><span class="s5">= </span><span class="s2">error</span><span class="s1">.</span><span class="s2">dataPath</span><span class="s1">.</span><span class="s3">slice</span><span class="s1">(</span><span class="s7">1</span><span class="s1">);</span>
                <span class="s5">const </span><span class="s1">formattedExpectedType </span><span class="s5">= </span><span class="s2">Array</span><span class="s1">.</span><span class="s3">isArray</span><span class="s1">(</span><span class="s2">error</span><span class="s1">.</span><span class="s2">schema</span><span class="s1">) </span><span class="s5">? </span><span class="s2">error</span><span class="s1">.</span><span class="s2">schema</span><span class="s1">.</span><span class="s3">join</span><span class="s1">(</span><span class="s0">&quot;/&quot;</span><span class="s1">) </span><span class="s5">: </span><span class="s2">error</span><span class="s1">.</span><span class="s2">schema</span><span class="s1">;</span>
                <span class="s5">const </span><span class="s1">formattedValue </span><span class="s5">= </span><span class="s2">JSON</span><span class="s1">.</span><span class="s3">stringify</span><span class="s1">(</span><span class="s2">error</span><span class="s1">.</span><span class="s2">data</span><span class="s1">);</span>

                <span class="s5">return </span><span class="s0">`Property &quot;${</span><span class="s2">formattedField</span><span class="s0">}&quot; is the wrong type (expected ${</span><span class="s2">formattedExpectedType</span><span class="s0">} but got </span><span class="s8">\`</span><span class="s0">${</span><span class="s2">formattedValue</span><span class="s0">}</span><span class="s8">\`</span><span class="s0">)`</span><span class="s1">;</span>
            <span class="s1">}</span>

            <span class="s5">const </span><span class="s1">field </span><span class="s5">= </span><span class="s2">error</span><span class="s1">.</span><span class="s2">dataPath</span><span class="s1">[</span><span class="s7">0</span><span class="s1">] </span><span class="s5">=== </span><span class="s0">&quot;.&quot; </span><span class="s5">? </span><span class="s2">error</span><span class="s1">.</span><span class="s2">dataPath</span><span class="s1">.</span><span class="s3">slice</span><span class="s1">(</span><span class="s7">1</span><span class="s1">) </span><span class="s5">: </span><span class="s2">error</span><span class="s1">.</span><span class="s2">dataPath</span><span class="s1">;</span>

            <span class="s5">return </span><span class="s0">`&quot;${</span><span class="s2">field</span><span class="s0">}&quot; ${</span><span class="s2">error</span><span class="s0">.</span><span class="s2">message</span><span class="s0">}. Value: ${</span><span class="s2">JSON</span><span class="s0">.</span><span class="s3">stringify</span><span class="s0">(</span><span class="s2">error</span><span class="s0">.</span><span class="s2">data</span><span class="s0">)}`</span><span class="s1">;</span>
        <span class="s1">}).</span><span class="s3">map</span><span class="s1">(</span><span class="s2">message </span><span class="s5">=&gt; </span><span class="s0">`</span><span class="s8">\t</span><span class="s0">- ${</span><span class="s2">message</span><span class="s0">}.</span><span class="s8">\n</span><span class="s0">`</span><span class="s1">).</span><span class="s3">join</span><span class="s1">(</span><span class="s0">&quot;&quot;</span><span class="s1">);</span>
    <span class="s1">}</span>

    <span class="s6">/**</span>
     <span class="s6">* Validates the top level properties of the config object. 
     * </span><span class="s5">@param </span><span class="s2">{Object} config </span><span class="s6">The config object to validate. 
     * </span><span class="s5">@param </span><span class="s2">{string} source </span><span class="s6">The name of the configuration source to report in any errors. 
     * </span><span class="s5">@returns </span><span class="s2">{void}</span>
     <span class="s6">*/ 
    validateConfigSchema(config, source = null) { 
        validateSchema = validateSchema || ajv.compile(configSchema); 
</span>
        <span class="s6">if (!validateSchema(config)) { 
            throw new Error(`ESLint configuration in ${source} is invalid:\n${this.formatErrors(validateSchema.errors)}`); 
        } 
</span>
        <span class="s6">if (Object.hasOwnProperty.call(config, &quot;ecmaFeatures&quot;)) { 
            emitDeprecationWarning(source, &quot;ESLINT_LEGACY_ECMAFEATURES&quot;); 
        } 
    } 
</span>
    <span class="s6">/** 
     * Validates an entire config object. 
     * </span><span class="s5">@param </span><span class="s2">{Object} config </span><span class="s6">The config object to validate. 
     * </span><span class="s5">@param </span><span class="s2">{string} source </span><span class="s6">The name of the configuration source to report in any errors. 
     * </span><span class="s5">@param </span><span class="s2">{function(ruleId:string): Object} [getAdditionalRule] </span><span class="s6">A map from strings to loaded rules. 
     * </span><span class="s5">@param </span><span class="s2">{function(envId:string): Object} [getAdditionalEnv] </span><span class="s6">A map from strings to loaded envs. 
     * </span><span class="s5">@returns </span><span class="s2">{void}</span>
     <span class="s6">*/ 
    validate(config, source, getAdditionalRule, getAdditionalEnv) { 
        this.validateConfigSchema(config, source); 
        this.validateRules(config.rules, source, getAdditionalRule); 
        this.validateEnvironment(config.env, source, getAdditionalEnv); 
        this.validateGlobals(config.globals, source); 
</span>
        <span class="s6">for (const override of config.overrides || []) { 
            this.validateRules(override.rules, source, getAdditionalRule); 
            this.validateEnvironment(override.env, source, getAdditionalEnv); 
            this.validateGlobals(config.globals, source); 
        } 
    } 
</span>
    <span class="s6">/** 
     * Validate config array object. 
     * </span><span class="s5">@param </span><span class="s2">{ConfigArray} configArray </span><span class="s6">The config array to validate. 
     * </span><span class="s5">@returns </span><span class="s2">{void}</span>
     <span class="s6">*/ 
    validateConfigArray(configArray) { 
        const getPluginEnv = Map.prototype.get.bind(configArray.pluginEnvironments); 
        const getPluginProcessor = Map.prototype.get.bind(configArray.pluginProcessors); 
        const getPluginRule = Map.prototype.get.bind(configArray.pluginRules); 
</span>
        <span class="s6">// Validate. 
        for (const element of configArray) { 
            if (validated.has(element)) { 
                continue; 
            } 
            validated.add(element); 
</span>
            <span class="s6">this.validateEnvironment(element.env, element.name, getPluginEnv); 
            this.validateGlobals(element.globals, element.name); 
            this.validateProcessor(element.processor, element.name, getPluginProcessor); 
            this.validateRules(element.rules, element.name, getPluginRule); 
        } 
    } 
</span>
<span class="s6">} 
</span>
<span class="s6">/** 
 * </span><span class="s5">@fileoverview </span><span class="s6">Common helpers for naming of plugins, formatters and configs 
 */</span>

<span class="s2">const </span><span class="s1">NAMESPACE_REGEX </span><span class="s5">= </span><span class="s0">/</span><span class="s5">^</span><span class="s0">@</span><span class="s4">.</span><span class="s5">*</span><span class="s8">\/</span><span class="s0">/</span><span class="s5">iu</span><span class="s1">;</span>

<span class="s6">/**</span>
 <span class="s6">* Brings package name to correct format based on prefix 
 * </span><span class="s5">@param </span><span class="s2">{string} name </span><span class="s6">The name of the package. 
 * </span><span class="s5">@param </span><span class="s2">{string} prefix </span><span class="s6">Can be either &quot;eslint-plugin&quot;, &quot;eslint-config&quot; or &quot;eslint-formatter&quot; 
 * </span><span class="s5">@returns </span><span class="s2">{string} </span><span class="s6">Normalized name of the package 
 * </span><span class="s5">@private</span>
 <span class="s6">*/</span>
<span class="s5">function </span><span class="s1">normalizePackageName(</span><span class="s2">name</span><span class="s1">, </span><span class="s2">prefix</span><span class="s1">) {</span>
    <span class="s5">let </span><span class="s1">normalizedName </span><span class="s5">= </span><span class="s2">name</span><span class="s1">;</span>

    <span class="s6">/**</span>
     <span class="s6">* On Windows, name can come in with Windows slashes instead of Unix slashes. 
     * Normalize to Unix first to avoid errors later on. 
     * https://github.com/eslint/eslint/issues/5644 
     */</span>
    <span class="s5">if </span><span class="s1">(</span><span class="s2">normalizedName</span><span class="s1">.</span><span class="s3">includes</span><span class="s1">(</span><span class="s0">&quot;</span><span class="s8">\\</span><span class="s0">&quot;</span><span class="s1">)) {</span>
        <span class="s2">normalizedName </span><span class="s5">= </span><span class="s2">normalizedName</span><span class="s1">.</span><span class="s3">replace</span><span class="s1">(</span><span class="s0">/</span><span class="s8">\\</span><span class="s0">/</span><span class="s5">gu</span><span class="s1">, </span><span class="s0">&quot;/&quot;</span><span class="s1">);</span>
    <span class="s1">}</span>

    <span class="s5">if </span><span class="s1">(</span><span class="s2">normalizedName</span><span class="s1">.</span><span class="s3">charAt</span><span class="s1">(</span><span class="s7">0</span><span class="s1">) </span><span class="s5">=== </span><span class="s0">&quot;@&quot;</span><span class="s1">) {</span>

        <span class="s6">/**</span>
         <span class="s6">* it's a scoped package 
         * package name is the prefix, or just a username 
         */</span>
        <span class="s5">const </span><span class="s1">scopedPackageShortcutRegex </span><span class="s5">= new </span><span class="s3">RegExp</span><span class="s1">(</span><span class="s0">`^(@[^/]+)(?:/(?:${</span><span class="s2">prefix</span><span class="s0">})?)?$`</span><span class="s1">, </span><span class="s0">&quot;u&quot;</span><span class="s1">),</span>
            <span class="s1">scopedPackageNameRegex </span><span class="s5">= new </span><span class="s3">RegExp</span><span class="s1">(</span><span class="s0">`^${</span><span class="s2">prefix</span><span class="s0">}(-|$)`</span><span class="s1">, </span><span class="s0">&quot;u&quot;</span><span class="s1">);</span>

        <span class="s5">if </span><span class="s1">(</span><span class="s2">scopedPackageShortcutRegex</span><span class="s1">.</span><span class="s3">test</span><span class="s1">(</span><span class="s2">normalizedName</span><span class="s1">)) {</span>
            <span class="s2">normalizedName </span><span class="s5">= </span><span class="s2">normalizedName</span><span class="s1">.</span><span class="s3">replace</span><span class="s1">(</span><span class="s2">scopedPackageShortcutRegex</span><span class="s1">, </span><span class="s0">`$1/${</span><span class="s2">prefix</span><span class="s0">}`</span><span class="s1">);</span>
        <span class="s1">} </span><span class="s5">else if </span><span class="s1">(</span><span class="s5">!</span><span class="s2">scopedPackageNameRegex</span><span class="s1">.</span><span class="s3">test</span><span class="s1">(</span><span class="s2">normalizedName</span><span class="s1">.</span><span class="s3">split</span><span class="s1">(</span><span class="s0">&quot;/&quot;</span><span class="s1">)[</span><span class="s7">1</span><span class="s1">])) {</span>

            <span class="s6">/**</span>
             <span class="s6">* for scoped packages, insert the prefix after the first / unless 
             * the path is already @scope/eslint or @scope/eslint-xxx-yyy 
             */</span>
            <span class="s2">normalizedName </span><span class="s5">= </span><span class="s2">normalizedName</span><span class="s1">.</span><span class="s3">replace</span><span class="s1">(</span><span class="s0">/</span><span class="s5">^</span><span class="s0">@(</span><span class="s4">[</span><span class="s8">^</span><span class="s4">/]</span><span class="s5">+</span><span class="s0">)</span><span class="s8">\/</span><span class="s0">(</span><span class="s4">.</span><span class="s5">*</span><span class="s0">)</span><span class="s5">$</span><span class="s0">/</span><span class="s5">u</span><span class="s1">, </span><span class="s0">`@$1/${</span><span class="s2">prefix</span><span class="s0">}-$2`</span><span class="s1">);</span>
        <span class="s1">}</span>
    <span class="s1">} </span><span class="s5">else if </span><span class="s1">(</span><span class="s5">!</span><span class="s2">normalizedName</span><span class="s1">.</span><span class="s3">startsWith</span><span class="s1">(</span><span class="s0">`${</span><span class="s2">prefix</span><span class="s0">}-`</span><span class="s1">)) {</span>
        <span class="s2">normalizedName </span><span class="s5">= </span><span class="s0">`${</span><span class="s2">prefix</span><span class="s0">}-${</span><span class="s2">normalizedName</span><span class="s0">}`</span><span class="s1">;</span>
    <span class="s1">}</span>

    <span class="s5">return </span><span class="s2">normalizedName</span><span class="s1">;</span>
<span class="s1">}</span>

<span class="s6">/**</span>
 <span class="s6">* Removes the prefix from a fullname. 
 * </span><span class="s5">@param </span><span class="s2">{string} fullname </span><span class="s6">The term which may have the prefix. 
 * </span><span class="s5">@param </span><span class="s2">{string} prefix </span><span class="s6">The prefix to remove. 
 * </span><span class="s5">@returns </span><span class="s2">{string} </span><span class="s6">The term without prefix. 
 */</span>
<span class="s5">function </span><span class="s1">getShorthandName(</span><span class="s2">fullname</span><span class="s1">, </span><span class="s2">prefix</span><span class="s1">) {</span>
    <span class="s5">if </span><span class="s1">(</span><span class="s2">fullname</span><span class="s1">[</span><span class="s7">0</span><span class="s1">] </span><span class="s5">=== </span><span class="s0">&quot;@&quot;</span><span class="s1">) {</span>
        <span class="s5">let </span><span class="s1">matchResult </span><span class="s5">= new </span><span class="s3">RegExp</span><span class="s1">(</span><span class="s0">`^(@[^/]+)/${</span><span class="s2">prefix</span><span class="s0">}$`</span><span class="s1">, </span><span class="s0">&quot;u&quot;</span><span class="s1">).</span><span class="s3">exec</span><span class="s1">(</span><span class="s2">fullname</span><span class="s1">);</span>

        <span class="s5">if </span><span class="s1">(</span><span class="s2">matchResult</span><span class="s1">) {</span>
            <span class="s5">return </span><span class="s2">matchResult</span><span class="s1">[</span><span class="s7">1</span><span class="s1">];</span>
        <span class="s1">}</span>

        <span class="s2">matchResult </span><span class="s5">= new </span><span class="s3">RegExp</span><span class="s1">(</span><span class="s0">`^(@[^/]+)/${</span><span class="s2">prefix</span><span class="s0">}-(.+)$`</span><span class="s1">, </span><span class="s0">&quot;u&quot;</span><span class="s1">).</span><span class="s3">exec</span><span class="s1">(</span><span class="s2">fullname</span><span class="s1">);</span>
        <span class="s5">if </span><span class="s1">(</span><span class="s2">matchResult</span><span class="s1">) {</span>
            <span class="s5">return </span><span class="s0">`${</span><span class="s2">matchResult</span><span class="s0">[</span><span class="s7">1</span><span class="s0">]}/${</span><span class="s2">matchResult</span><span class="s0">[</span><span class="s7">2</span><span class="s0">]}`</span><span class="s1">;</span>
        <span class="s1">}</span>
    <span class="s1">} </span><span class="s5">else if </span><span class="s1">(</span><span class="s2">fullname</span><span class="s1">.</span><span class="s3">startsWith</span><span class="s1">(</span><span class="s0">`${</span><span class="s2">prefix</span><span class="s0">}-`</span><span class="s1">)) {</span>
        <span class="s5">return </span><span class="s2">fullname</span><span class="s1">.</span><span class="s3">slice</span><span class="s1">(</span><span class="s2">prefix</span><span class="s1">.length </span><span class="s5">+ </span><span class="s7">1</span><span class="s1">);</span>
    <span class="s1">}</span>

    <span class="s5">return </span><span class="s2">fullname</span><span class="s1">;</span>
<span class="s1">}</span>

<span class="s6">/**</span>
 <span class="s6">* Gets the scope (namespace) of a term. 
 * </span><span class="s5">@param </span><span class="s2">{string} term </span><span class="s6">The term which may have the namespace. 
 * </span><span class="s5">@returns </span><span class="s2">{string} </span><span class="s6">The namespace of the term if it has one. 
 */</span>
<span class="s5">function </span><span class="s1">getNamespaceFromTerm(</span><span class="s2">term</span><span class="s1">) {</span>
    <span class="s5">const </span><span class="s1">match </span><span class="s5">= </span><span class="s2">term</span><span class="s1">.</span><span class="s3">match</span><span class="s1">(</span><span class="s2">NAMESPACE_REGEX</span><span class="s1">);</span>

    <span class="s5">return </span><span class="s2">match </span><span class="s5">? </span><span class="s2">match</span><span class="s1">[</span><span class="s7">0</span><span class="s1">] </span><span class="s5">: </span><span class="s0">&quot;&quot;</span><span class="s1">;</span>
<span class="s1">}</span>

<span class="s2">var </span><span class="s1">naming </span><span class="s5">= </span><span class="s1">{</span>
    <span class="s1">__proto__: </span><span class="s4">null</span><span class="s1">,</span>
    <span class="s1">normalizePackageName: </span><span class="s2">normalizePackageName</span><span class="s1">,</span>
    <span class="s1">getShorthandName: </span><span class="s2">getShorthandName</span><span class="s1">,</span>
    <span class="s1">getNamespaceFromTerm: </span><span class="s2">getNamespaceFromTerm</span>
<span class="s1">};</span>

<span class="s6">/**</span>
 <span class="s6">* </span><span class="s5">@fileoverview </span><span class="s6">Package exports for @eslint/eslintrc 
 * </span><span class="s5">@author </span><span class="s2">Nicholas C. Zakas 
 </span><span class="s6">*/</span>

<span class="s6">//-----------------------------------------------------------------------------</span>
<span class="s6">// Exports</span>
<span class="s6">//-----------------------------------------------------------------------------</span>

<span class="s2">const </span><span class="s1">Legacy </span><span class="s5">= </span><span class="s1">{</span>
    <span class="s2">environments</span><span class="s1">,</span>

    <span class="s6">// shared</span>
    <span class="s2">ConfigOps</span><span class="s1">,</span>
    <span class="s2">ConfigValidator</span><span class="s1">,</span>
    <span class="s2">naming</span>
<span class="s1">};</span>

<span class="s2">exports</span><span class="s1">.</span><span class="s2">Legacy </span><span class="s5">= </span><span class="s2">Legacy</span><span class="s1">;</span>
<span class="s6">//# sourceMappingURL=eslintrc-universal.cjs.map</span>
</pre>
</body>
</html>