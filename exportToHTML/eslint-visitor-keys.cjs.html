<html>
<head>
<title>eslint-visitor-keys.cjs</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<style type="text/css">
.s0 { color: #6a8759;}
.s1 { color: #a9b7c6;}
.s2 { color: #a9b7c6;}
.s3 { color: #ffc66d;}
.s4 { color: #9876aa; font-style: italic;}
.s5 { color: #808080;}
.s6 { color: #cc7832;}
.s7 { color: #6897bb; font-style: italic;}
</style>
</head>
<body bgcolor="#2b2b2b">
<table CELLSPACING=0 CELLPADDING=5 COLS=1 WIDTH="100%" BGCOLOR="#606060" >
<tr><td><center>
<font face="Arial, Helvetica" color="#000000">
eslint-visitor-keys.cjs</font>
</center></td></tr></table>
<pre><span class="s0">'use strict'</span><span class="s1">;</span>

<span class="s2">Object</span><span class="s1">.</span><span class="s3">defineProperty</span><span class="s1">(</span><span class="s2">exports</span><span class="s1">, </span><span class="s0">'__esModule'</span><span class="s1">, { value: </span><span class="s4">true </span><span class="s1">});</span>

<span class="s5">/**</span>
 <span class="s5">* </span><span class="s6">@typedef </span><span class="s2">{{ readonly [type: string]: ReadonlyArray&lt;string&gt; }} VisitorKeys</span>
 <span class="s5">*/</span>

<span class="s5">/**</span>
 <span class="s5">* </span><span class="s6">@type </span><span class="s2">{VisitorKeys}</span>
 <span class="s5">*/ 
const KEYS = { 
    ArrayExpression: [ 
        &quot;elements&quot; 
    ], 
    ArrayPattern: [ 
        &quot;elements&quot; 
    ], 
    ArrowFunctionExpression: [ 
        &quot;params&quot;, 
        &quot;body&quot; 
    ], 
    AssignmentExpression: [ 
        &quot;left&quot;, 
        &quot;right&quot; 
    ], 
    AssignmentPattern: [ 
        &quot;left&quot;, 
        &quot;right&quot; 
    ], 
    AwaitExpression: [ 
        &quot;argument&quot; 
    ], 
    BinaryExpression: [ 
        &quot;left&quot;, 
        &quot;right&quot; 
    ], 
    BlockStatement: [ 
        &quot;body&quot; 
    ], 
    BreakStatement: [ 
        &quot;label&quot; 
    ], 
    CallExpression: [ 
        &quot;callee&quot;, 
        &quot;arguments&quot; 
    ], 
    CatchClause: [ 
        &quot;param&quot;, 
        &quot;body&quot; 
    ], 
    ChainExpression: [ 
        &quot;expression&quot; 
    ], 
    ClassBody: [ 
        &quot;body&quot; 
    ], 
    ClassDeclaration: [ 
        &quot;id&quot;, 
        &quot;superClass&quot;, 
        &quot;body&quot; 
    ], 
    ClassExpression: [ 
        &quot;id&quot;, 
        &quot;superClass&quot;, 
        &quot;body&quot; 
    ], 
    ConditionalExpression: [ 
        &quot;test&quot;, 
        &quot;consequent&quot;, 
        &quot;alternate&quot; 
    ], 
    ContinueStatement: [ 
        &quot;label&quot; 
    ], 
    DebuggerStatement: [], 
    DoWhileStatement: [ 
        &quot;body&quot;, 
        &quot;test&quot; 
    ], 
    EmptyStatement: [], 
    ExperimentalRestProperty: [ 
        &quot;argument&quot; 
    ], 
    ExperimentalSpreadProperty: [ 
        &quot;argument&quot; 
    ], 
    ExportAllDeclaration: [ 
        &quot;exported&quot;, 
        &quot;source&quot; 
    ], 
    ExportDefaultDeclaration: [ 
        &quot;declaration&quot; 
    ], 
    ExportNamedDeclaration: [ 
        &quot;declaration&quot;, 
        &quot;specifiers&quot;, 
        &quot;source&quot; 
    ], 
    ExportSpecifier: [ 
        &quot;exported&quot;, 
        &quot;local&quot; 
    ], 
    ExpressionStatement: [ 
        &quot;expression&quot; 
    ], 
    ForInStatement: [ 
        &quot;left&quot;, 
        &quot;right&quot;, 
        &quot;body&quot; 
    ], 
    ForOfStatement: [ 
        &quot;left&quot;, 
        &quot;right&quot;, 
        &quot;body&quot; 
    ], 
    ForStatement: [ 
        &quot;init&quot;, 
        &quot;test&quot;, 
        &quot;update&quot;, 
        &quot;body&quot; 
    ], 
    FunctionDeclaration: [ 
        &quot;id&quot;, 
        &quot;params&quot;, 
        &quot;body&quot; 
    ], 
    FunctionExpression: [ 
        &quot;id&quot;, 
        &quot;params&quot;, 
        &quot;body&quot; 
    ], 
    Identifier: [], 
    IfStatement: [ 
        &quot;test&quot;, 
        &quot;consequent&quot;, 
        &quot;alternate&quot; 
    ], 
    ImportDeclaration: [ 
        &quot;specifiers&quot;, 
        &quot;source&quot; 
    ], 
    ImportDefaultSpecifier: [ 
        &quot;local&quot; 
    ], 
    ImportExpression: [ 
        &quot;source&quot; 
    ], 
    ImportNamespaceSpecifier: [ 
        &quot;local&quot; 
    ], 
    ImportSpecifier: [ 
        &quot;imported&quot;, 
        &quot;local&quot; 
    ], 
    JSXAttribute: [ 
        &quot;name&quot;, 
        &quot;value&quot; 
    ], 
    JSXClosingElement: [ 
        &quot;name&quot; 
    ], 
    JSXClosingFragment: [], 
    JSXElement: [ 
        &quot;openingElement&quot;, 
        &quot;children&quot;, 
        &quot;closingElement&quot; 
    ], 
    JSXEmptyExpression: [], 
    JSXExpressionContainer: [ 
        &quot;expression&quot; 
    ], 
    JSXFragment: [ 
        &quot;openingFragment&quot;, 
        &quot;children&quot;, 
        &quot;closingFragment&quot; 
    ], 
    JSXIdentifier: [], 
    JSXMemberExpression: [ 
        &quot;object&quot;, 
        &quot;property&quot; 
    ], 
    JSXNamespacedName: [ 
        &quot;namespace&quot;, 
        &quot;name&quot; 
    ], 
    JSXOpeningElement: [ 
        &quot;name&quot;, 
        &quot;attributes&quot; 
    ], 
    JSXOpeningFragment: [], 
    JSXSpreadAttribute: [ 
        &quot;argument&quot; 
    ], 
    JSXSpreadChild: [ 
        &quot;expression&quot; 
    ], 
    JSXText: [], 
    LabeledStatement: [ 
        &quot;label&quot;, 
        &quot;body&quot; 
    ], 
    Literal: [], 
    LogicalExpression: [ 
        &quot;left&quot;, 
        &quot;right&quot; 
    ], 
    MemberExpression: [ 
        &quot;object&quot;, 
        &quot;property&quot; 
    ], 
    MetaProperty: [ 
        &quot;meta&quot;, 
        &quot;property&quot; 
    ], 
    MethodDefinition: [ 
        &quot;key&quot;, 
        &quot;value&quot; 
    ], 
    NewExpression: [ 
        &quot;callee&quot;, 
        &quot;arguments&quot; 
    ], 
    ObjectExpression: [ 
        &quot;properties&quot; 
    ], 
    ObjectPattern: [ 
        &quot;properties&quot; 
    ], 
    PrivateIdentifier: [], 
    Program: [ 
        &quot;body&quot; 
    ], 
    Property: [ 
        &quot;key&quot;, 
        &quot;value&quot; 
    ], 
    PropertyDefinition: [ 
        &quot;key&quot;, 
        &quot;value&quot; 
    ], 
    RestElement: [ 
        &quot;argument&quot; 
    ], 
    ReturnStatement: [ 
        &quot;argument&quot; 
    ], 
    SequenceExpression: [ 
        &quot;expressions&quot; 
    ], 
    SpreadElement: [ 
        &quot;argument&quot; 
    ], 
    StaticBlock: [ 
        &quot;body&quot; 
    ], 
    Super: [], 
    SwitchCase: [ 
        &quot;test&quot;, 
        &quot;consequent&quot; 
    ], 
    SwitchStatement: [ 
        &quot;discriminant&quot;, 
        &quot;cases&quot; 
    ], 
    TaggedTemplateExpression: [ 
        &quot;tag&quot;, 
        &quot;quasi&quot; 
    ], 
    TemplateElement: [], 
    TemplateLiteral: [ 
        &quot;quasis&quot;, 
        &quot;expressions&quot; 
    ], 
    ThisExpression: [], 
    ThrowStatement: [ 
        &quot;argument&quot; 
    ], 
    TryStatement: [ 
        &quot;block&quot;, 
        &quot;handler&quot;, 
        &quot;finalizer&quot; 
    ], 
    UnaryExpression: [ 
        &quot;argument&quot; 
    ], 
    UpdateExpression: [ 
        &quot;argument&quot; 
    ], 
    VariableDeclaration: [ 
        &quot;declarations&quot; 
    ], 
    VariableDeclarator: [ 
        &quot;id&quot;, 
        &quot;init&quot; 
    ], 
    WhileStatement: [ 
        &quot;test&quot;, 
        &quot;body&quot; 
    ], 
    WithStatement: [ 
        &quot;object&quot;, 
        &quot;body&quot; 
    ], 
    YieldExpression: [ 
        &quot;argument&quot; 
    ] 
}; 
</span>
<span class="s5">// Types. 
const NODE_TYPES = Object.keys(KEYS); 
</span>
<span class="s5">// Freeze the keys. 
for (const type of NODE_TYPES) { 
    Object.freeze(KEYS[type]); 
} 
Object.freeze(KEYS); 
</span>
<span class="s5">/** 
 * </span><span class="s6">@author </span><span class="s2">Toru Nagashima </span><span class="s5">&lt;</span><span class="s4">https://github.com/mysticatea</span><span class="s5">&gt;</span>
 <span class="s5">* See LICENSE file in root directory for full license. 
 */</span>

<span class="s5">/**</span>
 <span class="s5">* </span><span class="s6">@typedef </span><span class="s2">{import('./visitor-keys.js').VisitorKeys} VisitorKeys</span>
 <span class="s5">*/</span>

<span class="s5">// List to ignore keys.</span>
<span class="s6">const </span><span class="s1">KEY_BLACKLIST </span><span class="s6">= new </span><span class="s3">Set</span><span class="s1">([</span>
    <span class="s0">&quot;parent&quot;</span><span class="s1">,</span>
    <span class="s0">&quot;leadingComments&quot;</span><span class="s1">,</span>
    <span class="s0">&quot;trailingComments&quot;</span>
<span class="s1">]);</span>

<span class="s5">/**</span>
 <span class="s5">* Check whether a given key should be used or not. 
 * </span><span class="s6">@param </span><span class="s2">{string} key </span><span class="s5">The key to check. 
 * </span><span class="s6">@returns </span><span class="s2">{boolean} </span><span class="s5">`true` if the key should be used. 
 */</span>
<span class="s6">function </span><span class="s1">filterKey(</span><span class="s2">key</span><span class="s1">) {</span>
    <span class="s6">return !</span><span class="s2">KEY_BLACKLIST</span><span class="s1">.</span><span class="s3">has</span><span class="s1">(</span><span class="s2">key</span><span class="s1">) </span><span class="s6">&amp;&amp; </span><span class="s2">key</span><span class="s1">[</span><span class="s7">0</span><span class="s1">] </span><span class="s6">!== </span><span class="s0">&quot;_&quot;</span><span class="s1">;</span>
<span class="s1">}</span>

<span class="s5">/**</span>
 <span class="s5">* Get visitor keys of a given node. 
 * </span><span class="s6">@param </span><span class="s2">{object} node </span><span class="s5">The AST node to get keys. 
 * </span><span class="s6">@returns </span><span class="s2">{readonly string[]} </span><span class="s5">Visitor keys of the node. 
 */</span>
<span class="s6">function </span><span class="s1">getKeys(</span><span class="s2">node</span><span class="s1">) {</span>
    <span class="s6">return </span><span class="s2">Object</span><span class="s1">.</span><span class="s3">keys</span><span class="s1">(</span><span class="s2">node</span><span class="s1">).</span><span class="s3">filter</span><span class="s1">(</span><span class="s2">filterKey</span><span class="s1">);</span>
<span class="s1">}</span>

<span class="s5">// Disable valid-jsdoc rule because it reports syntax error on the type of @returns.</span>
<span class="s5">// eslint-disable-next-line valid-jsdoc</span>
<span class="s5">/**</span>
 <span class="s5">* Make the union set with `KEYS` and given keys. 
 * </span><span class="s6">@param </span><span class="s2">{VisitorKeys} additionalKeys </span><span class="s5">The additional keys. 
 * </span><span class="s6">@returns </span><span class="s2">{VisitorKeys} </span><span class="s5">The union set. 
 */</span>
<span class="s6">function </span><span class="s1">unionWith(</span><span class="s2">additionalKeys</span><span class="s1">) {</span>
    <span class="s6">const </span><span class="s1">retv </span><span class="s6">= </span><span class="s5">/** </span><span class="s6">@type </span><span class="s2">{{</span>
        <span class="s2">[type: string]: ReadonlyArray&lt;string&gt; 
    }} </span><span class="s5">*/ </span><span class="s1">(</span><span class="s2">Object</span><span class="s1">.</span><span class="s3">assign</span><span class="s1">({}, </span><span class="s2">KEYS</span><span class="s1">));</span>

    <span class="s6">for </span><span class="s1">(</span><span class="s6">const </span><span class="s1">type </span><span class="s6">of </span><span class="s2">Object</span><span class="s1">.</span><span class="s3">keys</span><span class="s1">(</span><span class="s2">additionalKeys</span><span class="s1">)) {</span>
        <span class="s6">if </span><span class="s1">(Object.prototype.</span><span class="s2">hasOwnProperty</span><span class="s1">.</span><span class="s3">call</span><span class="s1">(</span><span class="s2">retv</span><span class="s1">, </span><span class="s2">type</span><span class="s1">)) {</span>
            <span class="s6">const </span><span class="s1">keys </span><span class="s6">= new </span><span class="s3">Set</span><span class="s1">(</span><span class="s2">additionalKeys</span><span class="s1">[</span><span class="s2">type</span><span class="s1">]);</span>

            <span class="s6">for </span><span class="s1">(</span><span class="s6">const </span><span class="s1">key </span><span class="s6">of </span><span class="s2">retv</span><span class="s1">[</span><span class="s2">type</span><span class="s1">]) {</span>
                <span class="s2">keys</span><span class="s1">.</span><span class="s3">add</span><span class="s1">(</span><span class="s2">key</span><span class="s1">);</span>
            <span class="s1">}</span>

            <span class="s2">retv</span><span class="s1">[</span><span class="s2">type</span><span class="s1">] </span><span class="s6">= </span><span class="s2">Object</span><span class="s1">.</span><span class="s3">freeze</span><span class="s1">(</span><span class="s2">Array</span><span class="s1">.</span><span class="s3">from</span><span class="s1">(</span><span class="s2">keys</span><span class="s1">));</span>
        <span class="s1">} </span><span class="s6">else </span><span class="s1">{</span>
            <span class="s2">retv</span><span class="s1">[</span><span class="s2">type</span><span class="s1">] </span><span class="s6">= </span><span class="s2">Object</span><span class="s1">.</span><span class="s3">freeze</span><span class="s1">(</span><span class="s2">Array</span><span class="s1">.</span><span class="s3">from</span><span class="s1">(</span><span class="s2">additionalKeys</span><span class="s1">[</span><span class="s2">type</span><span class="s1">]));</span>
        <span class="s1">}</span>
    <span class="s1">}</span>

    <span class="s6">return </span><span class="s2">Object</span><span class="s1">.</span><span class="s3">freeze</span><span class="s1">(</span><span class="s2">retv</span><span class="s1">);</span>
<span class="s1">}</span>

<span class="s2">exports</span><span class="s1">.</span><span class="s2">KEYS </span><span class="s6">= </span><span class="s2">KEYS</span><span class="s1">;</span>
<span class="s2">exports</span><span class="s1">.</span><span class="s2">getKeys </span><span class="s6">= </span><span class="s2">getKeys</span><span class="s1">;</span>
<span class="s2">exports</span><span class="s1">.</span><span class="s2">unionWith </span><span class="s6">= </span><span class="s2">unionWith</span><span class="s1">;</span>
</pre>
</body>
</html>