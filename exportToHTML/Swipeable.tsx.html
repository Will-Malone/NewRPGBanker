<html>
<head>
<title>Swipeable.tsx</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<style type="text/css">
.s0 { color: #808080;}
.s1 { color: #a9b7c6;}
.s2 { color: #cc7832;}
.s3 { color: #9876aa; font-style: italic;}
.s4 { color: #a9b7c6;}
.s5 { color: #6a8759;}
.s6 { color: #6897bb; font-style: italic;}
.s7 { color: #ffc66d;}
.s8 { color: #a9b7c6;}
.s9 { color: #e8bf6a;}
.s10 { color: #bbb529;}
.s11 { color: #d0d0ff;}
.s12 { color: #bbb529;}
</style>
</head>
<body bgcolor="#2b2b2b">
<table CELLSPACING=0 CELLPADDING=5 COLS=1 WIDTH="100%" BGCOLOR="#606060" >
<tr><td><center>
<font face="Arial, Helvetica" color="#000000">
Swipeable.tsx</font>
</center></td></tr></table>
<pre><span class="s0">// Similarily to the DrawerLayout component this deserves to be put in a</span>
<span class="s0">// separate repo. Although, keeping it here for the time being will allow us to</span>
<span class="s0">// move faster and fix possible issues quicker</span>

<span class="s2">import </span><span class="s3">* </span><span class="s2">as </span><span class="s4">React </span><span class="s2">from </span><span class="s5">'react'</span><span class="s1">;</span>
<span class="s2">import </span><span class="s1">{ </span><span class="s4">Component </span><span class="s1">} </span><span class="s2">from </span><span class="s5">'react'</span><span class="s1">;</span>
<span class="s2">import </span><span class="s1">{</span>
  <span class="s4">Animated</span><span class="s1">,</span>
  <span class="s4">StyleSheet</span><span class="s1">,</span>
  <span class="s4">View</span><span class="s1">,</span>
  <span class="s4">I18nManager</span><span class="s1">,</span>
  <span class="s4">LayoutChangeEvent</span><span class="s1">,</span>
  <span class="s4">StyleProp</span><span class="s1">,</span>
  <span class="s4">ViewStyle</span><span class="s1">,</span>
<span class="s1">} </span><span class="s2">from </span><span class="s5">'react-native'</span><span class="s1">;</span>

<span class="s2">import </span><span class="s1">{</span>
  <span class="s4">GestureEvent</span><span class="s1">,</span>
  <span class="s4">HandlerStateChangeEvent</span><span class="s1">,</span>
<span class="s1">} </span><span class="s2">from </span><span class="s5">'../handlers/gestureHandlerCommon'</span><span class="s1">;</span>
<span class="s2">import </span><span class="s1">{</span>
  <span class="s4">PanGestureHandler</span><span class="s1">,</span>
  <span class="s4">PanGestureHandlerEventPayload</span><span class="s1">,</span>
  <span class="s4">PanGestureHandlerProps</span><span class="s1">,</span>
<span class="s1">} </span><span class="s2">from </span><span class="s5">'../handlers/PanGestureHandler'</span><span class="s1">;</span>
<span class="s2">import </span><span class="s1">{</span>
  <span class="s4">TapGestureHandler</span><span class="s1">,</span>
  <span class="s4">TapGestureHandlerEventPayload</span><span class="s1">,</span>
<span class="s1">} </span><span class="s2">from </span><span class="s5">'../handlers/TapGestureHandler'</span><span class="s1">;</span>
<span class="s2">import </span><span class="s1">{ </span><span class="s4">State </span><span class="s1">} </span><span class="s2">from </span><span class="s5">'../State'</span><span class="s1">;</span>

<span class="s2">const </span><span class="s1">DRAG_TOSS </span><span class="s2">= </span><span class="s6">0.05</span><span class="s1">;</span>

<span class="s2">type </span><span class="s4">SwipeableExcludes </span><span class="s2">= </span><span class="s4">Exclude</span><span class="s1">&lt;</span>
  <span class="s2">keyof </span><span class="s4">PanGestureHandlerProps</span><span class="s1">,</span>
  <span class="s5">'onGestureEvent' </span><span class="s2">| </span><span class="s5">'onHandlerStateChange'</span>
<span class="s1">&gt;;</span>

<span class="s0">// Animated.AnimatedInterpolation has been converted to a generic type</span>
<span class="s0">// in @types/react-native 0.70. This way we can maintain compatibility</span>
<span class="s0">// with all versions of @types/react-native</span>
<span class="s2">type </span><span class="s4">AnimatedInterpolation </span><span class="s2">= </span><span class="s4">ReturnType</span><span class="s1">&lt;</span><span class="s4">Animated</span><span class="s1">.</span><span class="s4">Value</span><span class="s1">[</span><span class="s5">'interpolate'</span><span class="s1">]&gt;;</span>

<span class="s2">export interface </span><span class="s4">SwipeableProps</span>
  <span class="s2">extends </span><span class="s4">Pick</span><span class="s1">&lt;</span><span class="s4">PanGestureHandlerProps</span><span class="s1">, </span><span class="s4">SwipeableExcludes</span><span class="s1">&gt; {</span>
  <span class="s0">/**</span>
   <span class="s0">* Enables two-finger gestures on supported devices, for example iPads with 
   * trackpads. If not enabled the gesture will require click + drag, with 
   * `enableTrackpadTwoFingerGesture` swiping with two fingers will also trigger 
   * the gesture. 
   */</span>
  <span class="s1">enableTrackpadTwoFingerGesture</span><span class="s2">?: </span><span class="s4">boolean</span><span class="s1">;</span>

  <span class="s0">/**</span>
   <span class="s0">* Specifies how much the visual interaction will be delayed compared to the 
   * gesture distance. e.g. value of 1 will indicate that the swipeable panel 
   * should exactly follow the gesture, 2 means it is going to be two times 
   * &quot;slower&quot;. 
   */</span>
  <span class="s1">friction</span><span class="s2">?: </span><span class="s4">number</span><span class="s1">;</span>

  <span class="s0">/**</span>
   <span class="s0">* Distance from the left edge at which released panel will animate to the 
   * open state (or the open panel will animate into the closed state). By 
   * default it's a half of the panel's width. 
   */</span>
  <span class="s1">leftThreshold</span><span class="s2">?: </span><span class="s4">number</span><span class="s1">;</span>

  <span class="s0">/**</span>
   <span class="s0">* Distance from the right edge at which released panel will animate to the 
   * open state (or the open panel will animate into the closed state). By 
   * default it's a half of the panel's width. 
   */</span>
  <span class="s1">rightThreshold</span><span class="s2">?: </span><span class="s4">number</span><span class="s1">;</span>

  <span class="s0">/**</span>
   <span class="s0">* Distance that the panel must be dragged from the left edge to be considered 
   * a swipe. The default value is 10. 
   */</span>
  <span class="s1">dragOffsetFromLeftEdge</span><span class="s2">?: </span><span class="s4">number</span><span class="s1">;</span>

  <span class="s0">/**</span>
   <span class="s0">* Distance that the panel must be dragged from the right edge to be considered 
   * a swipe. The default value is 10. 
   */</span>
  <span class="s1">dragOffsetFromRightEdge</span><span class="s2">?: </span><span class="s4">number</span><span class="s1">;</span>

  <span class="s0">/**</span>
   <span class="s0">* Value indicating if the swipeable panel can be pulled further than the left 
   * actions panel's width. It is set to true by default as long as the left 
   * panel render method is present. 
   */</span>
  <span class="s1">overshootLeft</span><span class="s2">?: </span><span class="s4">boolean</span><span class="s1">;</span>

  <span class="s0">/**</span>
   <span class="s0">* Value indicating if the swipeable panel can be pulled further than the 
   * right actions panel's width. It is set to true by default as long as the 
   * right panel render method is present. 
   */</span>
  <span class="s1">overshootRight</span><span class="s2">?: </span><span class="s4">boolean</span><span class="s1">;</span>

  <span class="s0">/**</span>
   <span class="s0">* Specifies how much the visual interaction will be delayed compared to the 
   * gesture distance at overshoot. Default value is 1, it mean no friction, for 
   * a native feel, try 8 or above. 
   */</span>
  <span class="s1">overshootFriction</span><span class="s2">?: </span><span class="s4">number</span><span class="s1">;</span>

  <span class="s0">/**</span>
   <span class="s0">* </span><span class="s2">@deprecated </span><span class="s0">Use `direction` argument of onSwipeableOpen() 
   * 
   * Called when left action panel gets open. 
   */</span>
  <span class="s1">onSwipeableLeftOpen</span><span class="s2">?: </span><span class="s1">() </span><span class="s2">=&gt; </span><span class="s4">void</span><span class="s1">;</span>

  <span class="s0">/**</span>
   <span class="s0">* </span><span class="s2">@deprecated </span><span class="s0">Use `direction` argument of onSwipeableOpen() 
   * 
   * Called when right action panel gets open. 
   */</span>
  <span class="s1">onSwipeableRightOpen</span><span class="s2">?: </span><span class="s1">() </span><span class="s2">=&gt; </span><span class="s4">void</span><span class="s1">;</span>

  <span class="s0">/**</span>
   <span class="s0">* Called when action panel gets open (either right or left). 
   */</span>
  <span class="s1">onSwipeableOpen</span><span class="s2">?: </span><span class="s1">(</span><span class="s4">direction</span><span class="s2">: </span><span class="s5">'left' </span><span class="s2">| </span><span class="s5">'right'</span><span class="s1">, </span><span class="s4">swipeable</span><span class="s2">: </span><span class="s4">Swipeable</span><span class="s1">) </span><span class="s2">=&gt; </span><span class="s4">void</span><span class="s1">;</span>

  <span class="s0">/**</span>
   <span class="s0">* Called when action panel is closed. 
   */</span>
  <span class="s1">onSwipeableClose</span><span class="s2">?: </span><span class="s1">(</span>
    <span class="s4">direction</span><span class="s2">: </span><span class="s5">'left' </span><span class="s2">| </span><span class="s5">'right'</span><span class="s1">,</span>
    <span class="s4">swipeable</span><span class="s2">: </span><span class="s4">Swipeable</span>
  <span class="s1">) </span><span class="s2">=&gt; </span><span class="s4">void</span><span class="s1">;</span>

  <span class="s0">/**</span>
   <span class="s0">* </span><span class="s2">@deprecated </span><span class="s0">Use `direction` argument of onSwipeableWillOpen() 
   * 
   * Called when left action panel starts animating on open. 
   */</span>
  <span class="s1">onSwipeableLeftWillOpen</span><span class="s2">?: </span><span class="s1">() </span><span class="s2">=&gt; </span><span class="s4">void</span><span class="s1">;</span>

  <span class="s0">/**</span>
   <span class="s0">* </span><span class="s2">@deprecated </span><span class="s0">Use `direction` argument of onSwipeableWillOpen() 
   * 
   * Called when right action panel starts animating on open. 
   */</span>
  <span class="s1">onSwipeableRightWillOpen</span><span class="s2">?: </span><span class="s1">() </span><span class="s2">=&gt; </span><span class="s4">void</span><span class="s1">;</span>

  <span class="s0">/**</span>
   <span class="s0">* Called when action panel starts animating on open (either right or left). 
   */</span>
  <span class="s1">onSwipeableWillOpen</span><span class="s2">?: </span><span class="s1">(</span><span class="s4">direction</span><span class="s2">: </span><span class="s5">'left' </span><span class="s2">| </span><span class="s5">'right'</span><span class="s1">) </span><span class="s2">=&gt; </span><span class="s4">void</span><span class="s1">;</span>

  <span class="s0">/**</span>
   <span class="s0">* Called when action panel starts animating on close. 
   */</span>
  <span class="s1">onSwipeableWillClose</span><span class="s2">?: </span><span class="s1">(</span><span class="s4">direction</span><span class="s2">: </span><span class="s5">'left' </span><span class="s2">| </span><span class="s5">'right'</span><span class="s1">) </span><span class="s2">=&gt; </span><span class="s4">void</span><span class="s1">;</span>

  <span class="s0">/**</span>
   <span class="s0">* 
   * This map describes the values to use as inputRange for extra interpolation: 
   * AnimatedValue: [startValue, endValue] 
   * 
   * progressAnimatedValue: [0, 1] dragAnimatedValue: [0, +] 
   * 
   * To support `rtl` flexbox layouts use `flexDirection` styling. 
   * */</span>
  <span class="s1">renderLeftActions</span><span class="s2">?: </span><span class="s1">(</span>
    <span class="s4">progressAnimatedValue</span><span class="s2">: </span><span class="s4">AnimatedInterpolation</span><span class="s1">,</span>
    <span class="s4">dragAnimatedValue</span><span class="s2">: </span><span class="s4">AnimatedInterpolation</span><span class="s1">,</span>
    <span class="s4">swipeable</span><span class="s2">: </span><span class="s4">Swipeable</span>
  <span class="s1">) </span><span class="s2">=&gt; </span><span class="s4">React</span><span class="s1">.</span><span class="s4">ReactNode</span><span class="s1">;</span>
  <span class="s0">/**</span>
   <span class="s0">* 
   * This map describes the values to use as inputRange for extra interpolation: 
   * AnimatedValue: [startValue, endValue] 
   * 
   * progressAnimatedValue: [0, 1] dragAnimatedValue: [0, -] 
   * 
   * To support `rtl` flexbox layouts use `flexDirection` styling. 
   * */</span>
  <span class="s1">renderRightActions</span><span class="s2">?: </span><span class="s1">(</span>
    <span class="s4">progressAnimatedValue</span><span class="s2">: </span><span class="s4">AnimatedInterpolation</span><span class="s1">,</span>
    <span class="s4">dragAnimatedValue</span><span class="s2">: </span><span class="s4">AnimatedInterpolation</span><span class="s1">,</span>
    <span class="s4">swipeable</span><span class="s2">: </span><span class="s4">Swipeable</span>
  <span class="s1">) </span><span class="s2">=&gt; </span><span class="s4">React</span><span class="s1">.</span><span class="s4">ReactNode</span><span class="s1">;</span>

  <span class="s1">useNativeAnimations</span><span class="s2">?: </span><span class="s4">boolean</span><span class="s1">;</span>

  <span class="s1">animationOptions</span><span class="s2">?: </span><span class="s4">Record</span><span class="s1">&lt;</span><span class="s4">string</span><span class="s1">, </span><span class="s4">unknown</span><span class="s1">&gt;;</span>

  <span class="s0">/**</span>
   <span class="s0">* Style object for the container (`Animated.View`), for example to override 
   * `overflow: 'hidden'`. 
   */</span>
  <span class="s1">containerStyle</span><span class="s2">?: </span><span class="s4">StyleProp</span><span class="s1">&lt;</span><span class="s4">ViewStyle</span><span class="s1">&gt;;</span>

  <span class="s0">/**</span>
   <span class="s0">* Style object for the children container (`Animated.View`), for example to 
   * apply `flex: 1` 
   */</span>
  <span class="s1">childrenContainerStyle</span><span class="s2">?: </span><span class="s4">StyleProp</span><span class="s1">&lt;</span><span class="s4">ViewStyle</span><span class="s1">&gt;;</span>
<span class="s1">}</span>

<span class="s2">type </span><span class="s4">SwipeableState </span><span class="s2">= </span><span class="s1">{</span>
  <span class="s1">dragX</span><span class="s2">: </span><span class="s4">Animated</span><span class="s1">.</span><span class="s4">Value</span><span class="s1">;</span>
  <span class="s1">rowTranslation</span><span class="s2">: </span><span class="s4">Animated</span><span class="s1">.</span><span class="s4">Value</span><span class="s1">;</span>
  <span class="s1">rowState</span><span class="s2">: </span><span class="s4">number</span><span class="s1">;</span>
  <span class="s1">leftWidth</span><span class="s2">?: </span><span class="s4">number</span><span class="s1">;</span>
  <span class="s1">rightOffset</span><span class="s2">?: </span><span class="s4">number</span><span class="s1">;</span>
  <span class="s1">rowWidth</span><span class="s2">?: </span><span class="s4">number</span><span class="s1">;</span>
<span class="s1">};</span>

<span class="s2">export default class </span><span class="s4">Swipeable </span><span class="s2">extends </span><span class="s4">Component</span><span class="s1">&lt;</span>
  <span class="s4">SwipeableProps</span><span class="s1">,</span>
  <span class="s4">SwipeableState</span>
<span class="s1">&gt; {</span>
  <span class="s2">static </span><span class="s1">defaultProps </span><span class="s2">= </span><span class="s1">{</span>
    <span class="s1">friction: </span><span class="s6">1</span><span class="s1">,</span>
    <span class="s1">overshootFriction: </span><span class="s6">1</span><span class="s1">,</span>
    <span class="s1">useNativeAnimations: </span><span class="s3">true</span><span class="s1">,</span>
  <span class="s1">};</span>

  <span class="s2">constructor</span><span class="s1">(</span><span class="s4">props</span><span class="s2">: </span><span class="s4">SwipeableProps</span><span class="s1">) {</span>
    <span class="s4">super</span><span class="s1">(</span><span class="s4">props</span><span class="s1">);</span>
    <span class="s2">const </span><span class="s1">dragX </span><span class="s2">= new </span><span class="s4">Animated</span><span class="s1">.</span><span class="s7">Value</span><span class="s1">(</span><span class="s6">0</span><span class="s1">);</span>
    <span class="s4">this</span><span class="s1">.</span><span class="s4">state </span><span class="s2">= </span><span class="s1">{</span>
      <span class="s4">dragX</span><span class="s1">,</span>
      <span class="s1">rowTranslation: </span><span class="s2">new </span><span class="s4">Animated</span><span class="s1">.</span><span class="s7">Value</span><span class="s1">(</span><span class="s6">0</span><span class="s1">),</span>
      <span class="s1">rowState: </span><span class="s6">0</span><span class="s1">,</span>
      <span class="s1">leftWidth: </span><span class="s3">undefined</span><span class="s1">,</span>
      <span class="s1">rightOffset: </span><span class="s3">undefined</span><span class="s1">,</span>
      <span class="s1">rowWidth: </span><span class="s3">undefined</span><span class="s1">,</span>
    <span class="s1">};</span>
    <span class="s4">this</span><span class="s1">.</span><span class="s7">updateAnimatedEvent</span><span class="s1">(</span><span class="s4">props</span><span class="s1">, </span><span class="s4">this</span><span class="s1">.</span><span class="s4">state</span><span class="s1">);</span>

    <span class="s4">this</span><span class="s1">.</span><span class="s4">onGestureEvent </span><span class="s2">= </span><span class="s4">Animated</span><span class="s1">.</span><span class="s7">event</span><span class="s1">(</span>
      <span class="s1">[{ nativeEvent: { translationX: </span><span class="s4">dragX </span><span class="s1">} }],</span>
      <span class="s1">{ useNativeDriver: </span><span class="s4">props</span><span class="s1">.</span><span class="s4">useNativeAnimations</span><span class="s2">! </span><span class="s1">}</span>
    <span class="s1">);</span>
  <span class="s1">}</span>

  <span class="s1">shouldComponentUpdate(</span><span class="s4">props</span><span class="s2">: </span><span class="s4">SwipeableProps</span><span class="s1">, </span><span class="s4">state</span><span class="s2">: </span><span class="s4">SwipeableState</span><span class="s1">) {</span>
    <span class="s2">if </span><span class="s1">(</span>
      <span class="s4">this</span><span class="s1">.</span><span class="s4">props</span><span class="s1">.</span><span class="s4">friction </span><span class="s2">!== </span><span class="s4">props</span><span class="s1">.</span><span class="s4">friction </span><span class="s2">||</span>
      <span class="s4">this</span><span class="s1">.</span><span class="s4">props</span><span class="s1">.</span><span class="s4">overshootLeft </span><span class="s2">!== </span><span class="s4">props</span><span class="s1">.</span><span class="s4">overshootLeft </span><span class="s2">||</span>
      <span class="s4">this</span><span class="s1">.</span><span class="s4">props</span><span class="s1">.</span><span class="s4">overshootRight </span><span class="s2">!== </span><span class="s4">props</span><span class="s1">.</span><span class="s4">overshootRight </span><span class="s2">||</span>
      <span class="s4">this</span><span class="s1">.</span><span class="s4">props</span><span class="s1">.</span><span class="s4">overshootFriction </span><span class="s2">!== </span><span class="s4">props</span><span class="s1">.</span><span class="s4">overshootFriction </span><span class="s2">||</span>
      <span class="s4">this</span><span class="s1">.</span><span class="s4">state</span><span class="s1">.</span><span class="s4">leftWidth </span><span class="s2">!== </span><span class="s4">state</span><span class="s1">.</span><span class="s4">leftWidth </span><span class="s2">||</span>
      <span class="s4">this</span><span class="s1">.</span><span class="s4">state</span><span class="s1">.</span><span class="s4">rightOffset </span><span class="s2">!== </span><span class="s4">state</span><span class="s1">.</span><span class="s4">rightOffset </span><span class="s2">||</span>
      <span class="s4">this</span><span class="s1">.</span><span class="s4">state</span><span class="s1">.</span><span class="s4">rowWidth </span><span class="s2">!== </span><span class="s4">state</span><span class="s1">.</span><span class="s4">rowWidth</span>
    <span class="s1">) {</span>
      <span class="s4">this</span><span class="s1">.</span><span class="s7">updateAnimatedEvent</span><span class="s1">(</span><span class="s4">props</span><span class="s1">, </span><span class="s4">state</span><span class="s1">);</span>
    <span class="s1">}</span>

    <span class="s2">return </span><span class="s3">true</span><span class="s1">;</span>
  <span class="s1">}</span>

  <span class="s2">private </span><span class="s1">onGestureEvent</span><span class="s2">?: </span><span class="s1">(</span>
    <span class="s4">event</span><span class="s2">: </span><span class="s4">GestureEvent</span><span class="s1">&lt;</span><span class="s4">PanGestureHandlerEventPayload</span><span class="s1">&gt;</span>
  <span class="s1">) </span><span class="s2">=&gt; </span><span class="s4">void</span><span class="s1">;</span>
  <span class="s2">private </span><span class="s1">transX</span><span class="s2">?: </span><span class="s4">AnimatedInterpolation</span><span class="s1">;</span>
  <span class="s2">private </span><span class="s1">showLeftAction</span><span class="s2">?: </span><span class="s4">AnimatedInterpolation </span><span class="s2">| </span><span class="s4">Animated</span><span class="s1">.</span><span class="s4">Value</span><span class="s1">;</span>
  <span class="s2">private </span><span class="s1">leftActionTranslate</span><span class="s2">?: </span><span class="s4">AnimatedInterpolation</span><span class="s1">;</span>
  <span class="s2">private </span><span class="s1">showRightAction</span><span class="s2">?: </span><span class="s4">AnimatedInterpolation </span><span class="s2">| </span><span class="s4">Animated</span><span class="s1">.</span><span class="s4">Value</span><span class="s1">;</span>
  <span class="s2">private </span><span class="s1">rightActionTranslate</span><span class="s2">?: </span><span class="s4">AnimatedInterpolation</span><span class="s1">;</span>

  <span class="s2">private </span><span class="s1">updateAnimatedEvent </span><span class="s2">= </span><span class="s1">(</span>
    <span class="s4">props</span><span class="s2">: </span><span class="s4">SwipeableProps</span><span class="s1">,</span>
    <span class="s4">state</span><span class="s2">: </span><span class="s4">SwipeableState</span>
  <span class="s1">) </span><span class="s2">=&gt; </span><span class="s1">{</span>
    <span class="s2">const </span><span class="s1">{ friction, overshootFriction } </span><span class="s2">= </span><span class="s4">props</span><span class="s1">;</span>
    <span class="s2">const </span><span class="s1">{ dragX, rowTranslation, leftWidth </span><span class="s2">= </span><span class="s6">0</span><span class="s1">, rowWidth </span><span class="s2">= </span><span class="s6">0 </span><span class="s1">} </span><span class="s2">= </span><span class="s4">state</span><span class="s1">;</span>
    <span class="s2">const </span><span class="s1">{ rightOffset </span><span class="s2">= </span><span class="s4">rowWidth </span><span class="s1">} </span><span class="s2">= </span><span class="s4">state</span><span class="s1">;</span>
    <span class="s2">const </span><span class="s1">rightWidth </span><span class="s2">= </span><span class="s4">Math</span><span class="s1">.</span><span class="s7">max</span><span class="s1">(</span><span class="s6">0</span><span class="s1">, </span><span class="s4">rowWidth </span><span class="s2">- </span><span class="s4">rightOffset</span><span class="s1">);</span>

    <span class="s2">const </span><span class="s1">{ overshootLeft </span><span class="s2">= </span><span class="s4">leftWidth </span><span class="s2">&gt; </span><span class="s6">0</span><span class="s1">, overshootRight </span><span class="s2">= </span><span class="s4">rightWidth </span><span class="s2">&gt; </span><span class="s6">0 </span><span class="s1">} </span><span class="s2">=</span>
      <span class="s4">props</span><span class="s1">;</span>

    <span class="s2">const </span><span class="s1">transX </span><span class="s2">= </span><span class="s4">Animated</span><span class="s1">.</span><span class="s7">add</span><span class="s1">(</span>
      <span class="s4">rowTranslation</span><span class="s1">,</span>
      <span class="s4">dragX</span><span class="s1">.</span><span class="s7">interpolate</span><span class="s1">({</span>
        <span class="s1">inputRange: [</span><span class="s6">0</span><span class="s1">, </span><span class="s4">friction</span><span class="s2">!</span><span class="s1">],</span>
        <span class="s1">outputRange: [</span><span class="s6">0</span><span class="s1">, </span><span class="s6">1</span><span class="s1">],</span>
      <span class="s1">})</span>
    <span class="s1">).</span><span class="s7">interpolate</span><span class="s1">({</span>
      <span class="s1">inputRange: [</span><span class="s2">-</span><span class="s4">rightWidth </span><span class="s2">- </span><span class="s6">1</span><span class="s1">, </span><span class="s2">-</span><span class="s4">rightWidth</span><span class="s1">, </span><span class="s4">leftWidth</span><span class="s1">, </span><span class="s4">leftWidth </span><span class="s2">+ </span><span class="s6">1</span><span class="s1">],</span>
      <span class="s1">outputRange: [</span>
        <span class="s2">-</span><span class="s4">rightWidth </span><span class="s2">- </span><span class="s1">(</span><span class="s4">overshootRight </span><span class="s2">? </span><span class="s6">1 </span><span class="s2">/ </span><span class="s4">overshootFriction</span><span class="s2">! : </span><span class="s6">0</span><span class="s1">),</span>
        <span class="s2">-</span><span class="s4">rightWidth</span><span class="s1">,</span>
        <span class="s4">leftWidth</span><span class="s1">,</span>
        <span class="s4">leftWidth </span><span class="s2">+ </span><span class="s1">(</span><span class="s4">overshootLeft </span><span class="s2">? </span><span class="s6">1 </span><span class="s2">/ </span><span class="s4">overshootFriction</span><span class="s2">! : </span><span class="s6">0</span><span class="s1">),</span>
      <span class="s1">],</span>
    <span class="s1">});</span>
    <span class="s4">this</span><span class="s1">.</span><span class="s4">transX </span><span class="s2">= </span><span class="s4">transX</span><span class="s1">;</span>
    <span class="s4">this</span><span class="s1">.</span><span class="s4">showLeftAction </span><span class="s2">=</span>
      <span class="s4">leftWidth </span><span class="s2">&gt; </span><span class="s6">0</span>
        <span class="s2">? </span><span class="s4">transX</span><span class="s1">.</span><span class="s7">interpolate</span><span class="s1">({</span>
            <span class="s1">inputRange: [</span><span class="s2">-</span><span class="s6">1</span><span class="s1">, </span><span class="s6">0</span><span class="s1">, </span><span class="s4">leftWidth</span><span class="s1">],</span>
            <span class="s1">outputRange: [</span><span class="s6">0</span><span class="s1">, </span><span class="s6">0</span><span class="s1">, </span><span class="s6">1</span><span class="s1">],</span>
          <span class="s1">})</span>
        <span class="s2">: new </span><span class="s4">Animated</span><span class="s1">.</span><span class="s7">Value</span><span class="s1">(</span><span class="s6">0</span><span class="s1">);</span>
    <span class="s4">this</span><span class="s1">.</span><span class="s4">leftActionTranslate </span><span class="s2">= </span><span class="s4">this</span><span class="s1">.</span><span class="s4">showLeftAction</span><span class="s1">.</span><span class="s7">interpolate</span><span class="s1">({</span>
      <span class="s1">inputRange: [</span><span class="s6">0</span><span class="s1">, </span><span class="s4">Number</span><span class="s1">.MIN_VALUE],</span>
      <span class="s1">outputRange: [</span><span class="s2">-</span><span class="s6">10000</span><span class="s1">, </span><span class="s6">0</span><span class="s1">],</span>
      <span class="s1">extrapolate: </span><span class="s5">'clamp'</span><span class="s1">,</span>
    <span class="s1">});</span>
    <span class="s4">this</span><span class="s1">.</span><span class="s4">showRightAction </span><span class="s2">=</span>
      <span class="s4">rightWidth </span><span class="s2">&gt; </span><span class="s6">0</span>
        <span class="s2">? </span><span class="s4">transX</span><span class="s1">.</span><span class="s7">interpolate</span><span class="s1">({</span>
            <span class="s1">inputRange: [</span><span class="s2">-</span><span class="s4">rightWidth</span><span class="s1">, </span><span class="s6">0</span><span class="s1">, </span><span class="s6">1</span><span class="s1">],</span>
            <span class="s1">outputRange: [</span><span class="s6">1</span><span class="s1">, </span><span class="s6">0</span><span class="s1">, </span><span class="s6">0</span><span class="s1">],</span>
          <span class="s1">})</span>
        <span class="s2">: new </span><span class="s4">Animated</span><span class="s1">.</span><span class="s7">Value</span><span class="s1">(</span><span class="s6">0</span><span class="s1">);</span>
    <span class="s4">this</span><span class="s1">.</span><span class="s4">rightActionTranslate </span><span class="s2">= </span><span class="s4">this</span><span class="s1">.</span><span class="s4">showRightAction</span><span class="s1">.</span><span class="s7">interpolate</span><span class="s1">({</span>
      <span class="s1">inputRange: [</span><span class="s6">0</span><span class="s1">, </span><span class="s4">Number</span><span class="s1">.MIN_VALUE],</span>
      <span class="s1">outputRange: [</span><span class="s2">-</span><span class="s6">10000</span><span class="s1">, </span><span class="s6">0</span><span class="s1">],</span>
      <span class="s1">extrapolate: </span><span class="s5">'clamp'</span><span class="s1">,</span>
    <span class="s1">});</span>
  <span class="s1">}; 
</span>
  <span class="s2">private </span><span class="s1">onTapHandlerStateChange </span><span class="s2">= </span><span class="s1">({</span>
    <span class="s4">nativeEvent</span><span class="s1">,</span>
  <span class="s1">}</span><span class="s2">: </span><span class="s4">HandlerStateChangeEvent</span><span class="s1">&lt;</span><span class="s4">TapGestureHandlerEventPayload</span><span class="s1">&gt;) </span><span class="s2">=&gt; </span><span class="s1">{</span>
    <span class="s2">if </span><span class="s1">(</span><span class="s4">nativeEvent</span><span class="s1">.</span><span class="s4">oldState </span><span class="s2">=== </span><span class="s4">State</span><span class="s1">.</span><span class="s4">ACTIVE</span><span class="s1">) {</span>
      <span class="s4">this</span><span class="s1">.</span><span class="s7">close</span><span class="s1">();</span>
    <span class="s1">}</span>
  <span class="s1">};</span>

  <span class="s2">private </span><span class="s1">onHandlerStateChange </span><span class="s2">= </span><span class="s1">(</span>
    <span class="s4">ev</span><span class="s2">: </span><span class="s4">HandlerStateChangeEvent</span><span class="s1">&lt;</span><span class="s4">PanGestureHandlerEventPayload</span><span class="s1">&gt;</span>
  <span class="s1">) </span><span class="s2">=&gt; </span><span class="s1">{</span>
    <span class="s2">if </span><span class="s1">(</span><span class="s4">ev</span><span class="s1">.</span><span class="s4">nativeEvent</span><span class="s1">.</span><span class="s4">oldState </span><span class="s2">=== </span><span class="s4">State</span><span class="s1">.</span><span class="s4">ACTIVE</span><span class="s1">) {</span>
      <span class="s4">this</span><span class="s1">.</span><span class="s7">handleRelease</span><span class="s1">(</span><span class="s4">ev</span><span class="s1">);</span>
    <span class="s1">}</span>
  <span class="s1">}; 
</span>
  <span class="s2">private </span><span class="s1">handleRelease </span><span class="s2">= </span><span class="s1">(</span>
    <span class="s4">ev</span><span class="s2">: </span><span class="s4">HandlerStateChangeEvent</span><span class="s1">&lt;</span><span class="s4">PanGestureHandlerEventPayload</span><span class="s1">&gt;</span>
  <span class="s1">) </span><span class="s2">=&gt; </span><span class="s1">{</span>
    <span class="s2">const </span><span class="s1">{ velocityX, </span><span class="s4">translationX</span><span class="s1">: dragX } </span><span class="s2">= </span><span class="s4">ev</span><span class="s1">.</span><span class="s4">nativeEvent</span><span class="s1">;</span>
    <span class="s2">const </span><span class="s1">{ leftWidth </span><span class="s2">= </span><span class="s6">0</span><span class="s1">, rowWidth </span><span class="s2">= </span><span class="s6">0</span><span class="s1">, rowState } </span><span class="s2">= </span><span class="s4">this</span><span class="s1">.</span><span class="s4">state</span><span class="s1">;</span>
    <span class="s2">const </span><span class="s1">{ rightOffset </span><span class="s2">= </span><span class="s4">rowWidth </span><span class="s1">} </span><span class="s2">= </span><span class="s4">this</span><span class="s1">.</span><span class="s4">state</span><span class="s1">;</span>
    <span class="s2">const </span><span class="s1">rightWidth </span><span class="s2">= </span><span class="s4">rowWidth </span><span class="s2">- </span><span class="s4">rightOffset</span><span class="s1">;</span>
    <span class="s2">const </span><span class="s1">{</span>
      <span class="s1">friction,</span>
      <span class="s1">leftThreshold </span><span class="s2">= </span><span class="s4">leftWidth </span><span class="s2">/ </span><span class="s6">2</span><span class="s1">,</span>
      <span class="s1">rightThreshold </span><span class="s2">= </span><span class="s4">rightWidth </span><span class="s2">/ </span><span class="s6">2</span><span class="s1">,</span>
    <span class="s1">} </span><span class="s2">= </span><span class="s4">this</span><span class="s1">.</span><span class="s4">props</span><span class="s1">;</span>

    <span class="s2">const </span><span class="s1">startOffsetX </span><span class="s2">= </span><span class="s4">this</span><span class="s1">.</span><span class="s7">currentOffset</span><span class="s1">() </span><span class="s2">+ </span><span class="s4">dragX </span><span class="s2">/ </span><span class="s4">friction</span><span class="s2">!</span><span class="s1">;</span>
    <span class="s2">const </span><span class="s1">translationX </span><span class="s2">= </span><span class="s1">(</span><span class="s4">dragX </span><span class="s2">+ </span><span class="s4">DRAG_TOSS </span><span class="s2">* </span><span class="s4">velocityX</span><span class="s1">) </span><span class="s2">/ </span><span class="s4">friction</span><span class="s2">!</span><span class="s1">;</span>

    <span class="s2">let </span><span class="s1">toValue </span><span class="s2">= </span><span class="s6">0</span><span class="s1">;</span>
    <span class="s2">if </span><span class="s1">(</span><span class="s4">rowState </span><span class="s2">=== </span><span class="s6">0</span><span class="s1">) {</span>
      <span class="s2">if </span><span class="s1">(</span><span class="s4">translationX </span><span class="s2">&gt; </span><span class="s4">leftThreshold</span><span class="s1">) {</span>
        <span class="s4">toValue </span><span class="s2">= </span><span class="s4">leftWidth</span><span class="s1">;</span>
      <span class="s1">} </span><span class="s2">else if </span><span class="s1">(</span><span class="s4">translationX </span><span class="s2">&lt; -</span><span class="s4">rightThreshold</span><span class="s1">) {</span>
        <span class="s4">toValue </span><span class="s2">= -</span><span class="s4">rightWidth</span><span class="s1">;</span>
      <span class="s1">}</span>
    <span class="s1">} </span><span class="s2">else if </span><span class="s1">(</span><span class="s4">rowState </span><span class="s2">=== </span><span class="s6">1</span><span class="s1">) {</span>
      <span class="s0">// swiped to left</span>
      <span class="s2">if </span><span class="s1">(</span><span class="s4">translationX </span><span class="s2">&gt; -</span><span class="s4">leftThreshold</span><span class="s1">) {</span>
        <span class="s4">toValue </span><span class="s2">= </span><span class="s4">leftWidth</span><span class="s1">;</span>
      <span class="s1">}</span>
    <span class="s1">} </span><span class="s2">else </span><span class="s1">{</span>
      <span class="s0">// swiped to right</span>
      <span class="s2">if </span><span class="s1">(</span><span class="s4">translationX </span><span class="s2">&lt; </span><span class="s4">rightThreshold</span><span class="s1">) {</span>
        <span class="s4">toValue </span><span class="s2">= -</span><span class="s4">rightWidth</span><span class="s1">;</span>
      <span class="s1">}</span>
    <span class="s1">}</span>

    <span class="s4">this</span><span class="s1">.</span><span class="s7">animateRow</span><span class="s1">(</span><span class="s4">startOffsetX</span><span class="s1">, </span><span class="s4">toValue</span><span class="s1">, </span><span class="s4">velocityX </span><span class="s2">/ </span><span class="s4">friction</span><span class="s2">!</span><span class="s1">);</span>
  <span class="s1">}; 
</span>
  <span class="s2">private </span><span class="s1">animateRow </span><span class="s2">= </span><span class="s1">(</span>
    <span class="s4">fromValue</span><span class="s2">: </span><span class="s4">number</span><span class="s1">,</span>
    <span class="s4">toValue</span><span class="s2">: </span><span class="s4">number</span><span class="s1">,</span>
    <span class="s4">velocityX</span><span class="s2">?:</span>
      <span class="s2">| </span><span class="s4">number</span>
      <span class="s2">| </span><span class="s1">{</span>
          <span class="s4">x</span><span class="s1">: </span><span class="s4">number</span><span class="s1">; 
          </span><span class="s4">y</span><span class="s1">: </span><span class="s4">number</span><span class="s1">; 
        }</span>
  <span class="s1">) </span><span class="s2">=&gt; </span><span class="s1">{</span>
    <span class="s2">const </span><span class="s1">{ dragX, rowTranslation } </span><span class="s2">= </span><span class="s4">this</span><span class="s1">.</span><span class="s4">state</span><span class="s1">;</span>
    <span class="s4">dragX</span><span class="s1">.</span><span class="s7">setValue</span><span class="s1">(</span><span class="s6">0</span><span class="s1">);</span>
    <span class="s4">rowTranslation</span><span class="s1">.</span><span class="s7">setValue</span><span class="s1">(</span><span class="s4">fromValue</span><span class="s1">);</span>

    <span class="s4">this</span><span class="s1">.</span><span class="s7">setState</span><span class="s1">({ rowState: </span><span class="s4">Math</span><span class="s1">.</span><span class="s7">sign</span><span class="s1">(</span><span class="s4">toValue</span><span class="s1">) });</span>
    <span class="s4">Animated</span><span class="s1">.</span><span class="s7">spring</span><span class="s1">(</span><span class="s4">rowTranslation</span><span class="s1">, {</span>
      <span class="s1">restSpeedThreshold: </span><span class="s6">1.7</span><span class="s1">,</span>
      <span class="s1">restDisplacementThreshold: </span><span class="s6">0.4</span><span class="s1">,</span>
      <span class="s1">velocity: </span><span class="s4">velocityX</span><span class="s1">,</span>
      <span class="s1">bounciness: </span><span class="s6">0</span><span class="s1">,</span>
      <span class="s4">toValue</span><span class="s1">,</span>
      <span class="s1">useNativeDriver: </span><span class="s4">this</span><span class="s1">.</span><span class="s4">props</span><span class="s1">.</span><span class="s4">useNativeAnimations</span><span class="s2">!</span><span class="s1">,</span>
      <span class="s2">...</span><span class="s4">this</span><span class="s1">.</span><span class="s4">props</span><span class="s1">.</span><span class="s4">animationOptions</span><span class="s1">,</span>
    <span class="s1">}).</span><span class="s7">start</span><span class="s1">(({ </span><span class="s4">finished </span><span class="s1">}) </span><span class="s2">=&gt; </span><span class="s1">{</span>
      <span class="s2">if </span><span class="s1">(</span><span class="s4">finished</span><span class="s1">) {</span>
        <span class="s2">if </span><span class="s1">(</span><span class="s4">toValue </span><span class="s2">&gt; </span><span class="s6">0</span><span class="s1">) {</span>
          <span class="s4">this</span><span class="s1">.</span><span class="s4">props</span><span class="s1">.</span><span class="s7">onSwipeableLeftOpen</span><span class="s1">?.();</span>
          <span class="s4">this</span><span class="s1">.</span><span class="s4">props</span><span class="s1">.</span><span class="s7">onSwipeableOpen</span><span class="s1">?.(</span><span class="s5">'left'</span><span class="s1">, </span><span class="s4">this</span><span class="s1">);</span>
        <span class="s1">} </span><span class="s2">else if </span><span class="s1">(</span><span class="s4">toValue </span><span class="s2">&lt; </span><span class="s6">0</span><span class="s1">) {</span>
          <span class="s4">this</span><span class="s1">.</span><span class="s4">props</span><span class="s1">.</span><span class="s7">onSwipeableRightOpen</span><span class="s1">?.();</span>
          <span class="s4">this</span><span class="s1">.</span><span class="s4">props</span><span class="s1">.</span><span class="s7">onSwipeableOpen</span><span class="s1">?.(</span><span class="s5">'right'</span><span class="s1">, </span><span class="s4">this</span><span class="s1">);</span>
        <span class="s1">} </span><span class="s2">else </span><span class="s1">{</span>
          <span class="s2">const </span><span class="s1">closingDirection </span><span class="s2">= </span><span class="s4">fromValue </span><span class="s2">&gt; </span><span class="s6">0 </span><span class="s2">? </span><span class="s5">'left' </span><span class="s2">: </span><span class="s5">'right'</span><span class="s1">;</span>
          <span class="s4">this</span><span class="s1">.</span><span class="s4">props</span><span class="s1">.</span><span class="s7">onSwipeableClose</span><span class="s1">?.(</span><span class="s4">closingDirection</span><span class="s1">, </span><span class="s4">this</span><span class="s1">);</span>
        <span class="s1">}</span>
      <span class="s1">}</span>
    <span class="s1">});</span>
    <span class="s2">if </span><span class="s1">(</span><span class="s4">toValue </span><span class="s2">&gt; </span><span class="s6">0</span><span class="s1">) {</span>
      <span class="s4">this</span><span class="s1">.</span><span class="s4">props</span><span class="s1">.</span><span class="s7">onSwipeableLeftWillOpen</span><span class="s1">?.();</span>
      <span class="s4">this</span><span class="s1">.</span><span class="s4">props</span><span class="s1">.</span><span class="s7">onSwipeableWillOpen</span><span class="s1">?.(</span><span class="s5">'left'</span><span class="s1">);</span>
    <span class="s1">} </span><span class="s2">else if </span><span class="s1">(</span><span class="s4">toValue </span><span class="s2">&lt; </span><span class="s6">0</span><span class="s1">) {</span>
      <span class="s4">this</span><span class="s1">.</span><span class="s4">props</span><span class="s1">.</span><span class="s7">onSwipeableRightWillOpen</span><span class="s1">?.();</span>
      <span class="s4">this</span><span class="s1">.</span><span class="s4">props</span><span class="s1">.</span><span class="s7">onSwipeableWillOpen</span><span class="s1">?.(</span><span class="s5">'right'</span><span class="s1">);</span>
    <span class="s1">} </span><span class="s2">else </span><span class="s1">{</span>
      <span class="s2">const </span><span class="s1">closingDirection </span><span class="s2">= </span><span class="s4">fromValue </span><span class="s2">&gt; </span><span class="s6">0 </span><span class="s2">? </span><span class="s5">'left' </span><span class="s2">: </span><span class="s5">'right'</span><span class="s1">;</span>
      <span class="s4">this</span><span class="s1">.</span><span class="s4">props</span><span class="s1">.</span><span class="s7">onSwipeableWillClose</span><span class="s1">?.(</span><span class="s4">closingDirection</span><span class="s1">);</span>
    <span class="s1">}</span>
  <span class="s1">}; 
</span>
  <span class="s2">private </span><span class="s1">onRowLayout </span><span class="s2">= </span><span class="s1">({ </span><span class="s4">nativeEvent </span><span class="s1">}</span><span class="s2">: </span><span class="s4">LayoutChangeEvent</span><span class="s1">) </span><span class="s2">=&gt; </span><span class="s1">{</span>
    <span class="s4">this</span><span class="s1">.</span><span class="s7">setState</span><span class="s1">({ rowWidth: </span><span class="s4">nativeEvent</span><span class="s1">.</span><span class="s4">layout</span><span class="s1">.</span><span class="s4">width </span><span class="s1">});</span>
  <span class="s1">};</span>

  <span class="s2">private </span><span class="s1">currentOffset </span><span class="s2">= </span><span class="s1">() </span><span class="s2">=&gt; </span><span class="s1">{</span>
    <span class="s2">const </span><span class="s1">{ leftWidth </span><span class="s2">= </span><span class="s6">0</span><span class="s1">, rowWidth </span><span class="s2">= </span><span class="s6">0</span><span class="s1">, rowState } </span><span class="s2">= </span><span class="s4">this</span><span class="s1">.</span><span class="s4">state</span><span class="s1">;</span>
    <span class="s2">const </span><span class="s1">{ rightOffset </span><span class="s2">= </span><span class="s4">rowWidth </span><span class="s1">} </span><span class="s2">= </span><span class="s4">this</span><span class="s1">.</span><span class="s4">state</span><span class="s1">;</span>
    <span class="s2">const </span><span class="s1">rightWidth </span><span class="s2">= </span><span class="s4">rowWidth </span><span class="s2">- </span><span class="s4">rightOffset</span><span class="s1">;</span>
    <span class="s2">if </span><span class="s1">(</span><span class="s4">rowState </span><span class="s2">=== </span><span class="s6">1</span><span class="s1">) {</span>
      <span class="s2">return </span><span class="s4">leftWidth</span><span class="s1">;</span>
    <span class="s1">} </span><span class="s2">else if </span><span class="s1">(</span><span class="s4">rowState </span><span class="s2">=== -</span><span class="s6">1</span><span class="s1">) {</span>
      <span class="s2">return -</span><span class="s4">rightWidth</span><span class="s1">;</span>
    <span class="s1">}</span>
    <span class="s2">return </span><span class="s6">0</span><span class="s1">;</span>
  <span class="s1">};</span>

  <span class="s1">close </span><span class="s2">= </span><span class="s1">() </span><span class="s2">=&gt; </span><span class="s1">{</span>
    <span class="s4">this</span><span class="s1">.</span><span class="s7">animateRow</span><span class="s1">(</span><span class="s4">this</span><span class="s1">.</span><span class="s7">currentOffset</span><span class="s1">(), </span><span class="s6">0</span><span class="s1">);</span>
  <span class="s1">};</span>

  <span class="s1">openLeft </span><span class="s2">= </span><span class="s1">() </span><span class="s2">=&gt; </span><span class="s1">{</span>
    <span class="s2">const </span><span class="s1">{ leftWidth </span><span class="s2">= </span><span class="s6">0 </span><span class="s1">} </span><span class="s2">= </span><span class="s4">this</span><span class="s1">.</span><span class="s4">state</span><span class="s1">;</span>
    <span class="s4">this</span><span class="s1">.</span><span class="s7">animateRow</span><span class="s1">(</span><span class="s4">this</span><span class="s1">.</span><span class="s7">currentOffset</span><span class="s1">(), </span><span class="s4">leftWidth</span><span class="s1">);</span>
  <span class="s1">};</span>

  <span class="s1">openRight </span><span class="s2">= </span><span class="s1">() </span><span class="s2">=&gt; </span><span class="s1">{</span>
    <span class="s2">const </span><span class="s1">{ rowWidth </span><span class="s2">= </span><span class="s6">0 </span><span class="s1">} </span><span class="s2">= </span><span class="s4">this</span><span class="s1">.</span><span class="s4">state</span><span class="s1">;</span>
    <span class="s2">const </span><span class="s1">{ rightOffset </span><span class="s2">= </span><span class="s4">rowWidth </span><span class="s1">} </span><span class="s2">= </span><span class="s4">this</span><span class="s1">.</span><span class="s4">state</span><span class="s1">;</span>
    <span class="s2">const </span><span class="s1">rightWidth </span><span class="s2">= </span><span class="s4">rowWidth </span><span class="s2">- </span><span class="s4">rightOffset</span><span class="s1">;</span>
    <span class="s4">this</span><span class="s1">.</span><span class="s7">animateRow</span><span class="s1">(</span><span class="s4">this</span><span class="s1">.</span><span class="s7">currentOffset</span><span class="s1">(), </span><span class="s2">-</span><span class="s4">rightWidth</span><span class="s1">);</span>
  <span class="s1">};</span>

  <span class="s1">reset </span><span class="s2">= </span><span class="s1">() </span><span class="s2">=&gt; </span><span class="s1">{</span>
    <span class="s2">const </span><span class="s1">{ dragX, rowTranslation } </span><span class="s2">= </span><span class="s4">this</span><span class="s1">.</span><span class="s4">state</span><span class="s1">;</span>
    <span class="s4">dragX</span><span class="s1">.</span><span class="s7">setValue</span><span class="s1">(</span><span class="s6">0</span><span class="s1">);</span>
    <span class="s4">rowTranslation</span><span class="s1">.</span><span class="s7">setValue</span><span class="s1">(</span><span class="s6">0</span><span class="s1">);</span>
    <span class="s4">this</span><span class="s1">.</span><span class="s7">setState</span><span class="s1">({ rowState: </span><span class="s6">0 </span><span class="s1">});</span>
  <span class="s1">};</span>

  <span class="s1">render() {</span>
    <span class="s2">const </span><span class="s1">{ rowState } </span><span class="s2">= </span><span class="s4">this</span><span class="s1">.</span><span class="s4">state</span><span class="s1">;</span>
    <span class="s2">const </span><span class="s1">{</span>
      <span class="s1">children,</span>
      <span class="s1">renderLeftActions,</span>
      <span class="s1">renderRightActions,</span>
      <span class="s1">dragOffsetFromLeftEdge </span><span class="s2">= </span><span class="s6">10</span><span class="s1">,</span>
      <span class="s1">dragOffsetFromRightEdge </span><span class="s2">= </span><span class="s6">10</span><span class="s1">,</span>
    <span class="s1">} </span><span class="s2">= </span><span class="s4">this</span><span class="s1">.</span><span class="s4">props</span><span class="s1">;</span>

    <span class="s2">const </span><span class="s1">left </span><span class="s2">= </span><span class="s4">renderLeftActions </span><span class="s2">&amp;&amp; </span><span class="s1">(</span>
      <span class="s8">&lt;</span><span class="s9">Animated.View</span>
        <span class="s11">style</span><span class="s2">=</span><span class="s10">{[</span>
          <span class="s4">styles</span><span class="s10">.</span><span class="s4">leftActions</span><span class="s10">,</span>
          <span class="s0">// all those and below parameters can have ! since they are all</span>
          <span class="s0">// asigned in constructor in `updateAnimatedEvent` but TS cannot spot</span>
          <span class="s0">// it for some reason</span>
          <span class="s10">{ transform: [{ translateX: </span><span class="s4">this</span><span class="s10">.</span><span class="s4">leftActionTranslate</span><span class="s2">! </span><span class="s10">}] },</span>
        <span class="s10">]}</span><span class="s8">&gt;</span>
        <span class="s10">{</span><span class="s7">renderLeftActions</span><span class="s10">(</span><span class="s4">this</span><span class="s10">.</span><span class="s4">showLeftAction</span><span class="s2">!</span><span class="s10">, </span><span class="s4">this</span><span class="s10">.</span><span class="s4">transX</span><span class="s2">!</span><span class="s10">, </span><span class="s4">this</span><span class="s10">)}</span>
        <span class="s8">&lt;</span><span class="s9">View</span>
          <span class="s11">onLayout</span><span class="s2">=</span><span class="s10">{({ </span><span class="s4">nativeEvent </span><span class="s10">}) </span><span class="s2">=&gt;</span>
            <span class="s4">this</span><span class="s10">.</span><span class="s7">setState</span><span class="s10">({ leftWidth: </span><span class="s4">nativeEvent</span><span class="s10">.</span><span class="s4">layout</span><span class="s10">.</span><span class="s4">x </span><span class="s10">})</span>
          <span class="s10">}</span>
        <span class="s10">/&gt; 
      </span><span class="s8">&lt;/</span><span class="s9">Animated.View</span><span class="s8">&gt;</span>
    <span class="s10">); 
</span>
    <span class="s10">const right = renderRightActions </span><span class="s12">&amp;&amp; </span><span class="s10">( 
      </span><span class="s8">&lt;</span><span class="s9">Animated.View</span>
        <span class="s11">style</span><span class="s2">=</span><span class="s10">{[</span>
          <span class="s4">styles</span><span class="s10">.</span><span class="s4">rightActions</span><span class="s10">,</span>
          <span class="s10">{ transform: [{ translateX: </span><span class="s4">this</span><span class="s10">.</span><span class="s4">rightActionTranslate</span><span class="s2">! </span><span class="s10">}] },</span>
        <span class="s10">]}</span><span class="s8">&gt;</span>
        <span class="s10">{</span><span class="s7">renderRightActions</span><span class="s10">(</span><span class="s4">this</span><span class="s10">.</span><span class="s4">showRightAction</span><span class="s2">!</span><span class="s10">, </span><span class="s4">this</span><span class="s10">.</span><span class="s4">transX</span><span class="s2">!</span><span class="s10">, </span><span class="s4">this</span><span class="s10">)}</span>
        <span class="s8">&lt;</span><span class="s9">View</span>
          <span class="s11">onLayout</span><span class="s2">=</span><span class="s10">{({ </span><span class="s4">nativeEvent </span><span class="s10">}) </span><span class="s2">=&gt;</span>
            <span class="s4">this</span><span class="s10">.</span><span class="s7">setState</span><span class="s10">({ rightOffset: </span><span class="s4">nativeEvent</span><span class="s10">.</span><span class="s4">layout</span><span class="s10">.</span><span class="s4">x </span><span class="s10">})</span>
          <span class="s10">}</span>
        <span class="s10">/&gt; 
      </span><span class="s8">&lt;/</span><span class="s9">Animated.View</span><span class="s8">&gt;</span>
    <span class="s10">); 
</span>
    <span class="s10">return ( 
      </span><span class="s8">&lt;</span><span class="s9">PanGestureHandler</span>
        <span class="s11">activeOffsetX</span><span class="s2">=</span><span class="s10">{[</span><span class="s2">-</span><span class="s4">dragOffsetFromRightEdge</span><span class="s10">, </span><span class="s4">dragOffsetFromLeftEdge</span><span class="s10">]}</span>
        <span class="s10">{</span><span class="s2">...</span><span class="s4">this</span><span class="s10">.</span><span class="s4">props</span><span class="s10">}</span>
        <span class="s11">onGestureEvent</span><span class="s2">=</span><span class="s10">{</span><span class="s4">this</span><span class="s10">.</span><span class="s4">onGestureEvent</span><span class="s10">}</span>
        <span class="s11">onHandlerStateChange</span><span class="s2">=</span><span class="s10">{</span><span class="s4">this</span><span class="s10">.</span><span class="s4">onHandlerStateChange</span><span class="s10">}</span><span class="s8">&gt;</span>
        <span class="s8">&lt;</span><span class="s9">Animated.View</span>
          <span class="s11">onLayout</span><span class="s2">=</span><span class="s10">{</span><span class="s4">this</span><span class="s10">.</span><span class="s4">onRowLayout</span><span class="s10">}</span>
          <span class="s11">style</span><span class="s2">=</span><span class="s10">{[</span><span class="s4">styles</span><span class="s10">.</span><span class="s4">container</span><span class="s10">, </span><span class="s4">this</span><span class="s10">.</span><span class="s4">props</span><span class="s10">.</span><span class="s4">containerStyle</span><span class="s10">]}</span><span class="s8">&gt;</span>
          <span class="s10">{</span><span class="s4">left</span><span class="s10">}</span>
          <span class="s10">{</span><span class="s4">right</span><span class="s10">}</span>
          <span class="s8">&lt;</span><span class="s9">TapGestureHandler</span>
            <span class="s11">enabled</span><span class="s2">=</span><span class="s10">{</span><span class="s4">rowState </span><span class="s2">!== </span><span class="s6">0</span><span class="s10">}</span>
            <span class="s11">onHandlerStateChange</span><span class="s2">=</span><span class="s10">{</span><span class="s4">this</span><span class="s10">.</span><span class="s4">onTapHandlerStateChange</span><span class="s10">}</span><span class="s8">&gt;</span>
            <span class="s8">&lt;</span><span class="s9">Animated.View</span>
              <span class="s11">pointerEvents</span><span class="s2">=</span><span class="s10">{</span><span class="s4">rowState </span><span class="s2">=== </span><span class="s6">0 </span><span class="s2">? </span><span class="s5">'auto' </span><span class="s2">: </span><span class="s5">'box-only'</span><span class="s10">}</span>
              <span class="s11">style</span><span class="s2">=</span><span class="s10">{[</span>
                <span class="s10">{</span>
                  <span class="s10">transform: [{ translateX: </span><span class="s4">this</span><span class="s10">.</span><span class="s4">transX</span><span class="s2">! </span><span class="s10">}],</span>
                <span class="s10">},</span>
                <span class="s4">this</span><span class="s10">.</span><span class="s4">props</span><span class="s10">.</span><span class="s4">childrenContainerStyle</span><span class="s10">,</span>
              <span class="s10">]}</span><span class="s8">&gt;</span>
              <span class="s10">{</span><span class="s4">children</span><span class="s10">}</span>
            <span class="s8">&lt;/</span><span class="s9">Animated.View</span><span class="s8">&gt;</span>
          <span class="s8">&lt;/</span><span class="s9">TapGestureHandler</span><span class="s8">&gt;</span>
        <span class="s8">&lt;/</span><span class="s9">Animated.View</span><span class="s8">&gt;</span>
      <span class="s8">&lt;/</span><span class="s9">PanGestureHandler</span><span class="s8">&gt;</span>
    <span class="s10">); 
  } 
} 
</span>
<span class="s10">const styles = StyleSheet.create({</span>
  <span class="s4">container</span><span class="s10">: {</span>
    <span class="s10">overflow: </span><span class="s5">'hidden'</span><span class="s10">,</span>
  <span class="s10">},</span>
  <span class="s4">leftActions</span><span class="s10">: {</span>
    <span class="s2">...</span><span class="s4">StyleSheet</span><span class="s10">.</span><span class="s4">absoluteFillObject</span><span class="s10">,</span>
    <span class="s10">flexDirection: </span><span class="s4">I18nManager</span><span class="s10">.</span><span class="s4">isRTL </span><span class="s2">? </span><span class="s5">'row-reverse' </span><span class="s2">: </span><span class="s5">'row'</span><span class="s10">,</span>
  <span class="s10">},</span>
  <span class="s4">rightActions</span><span class="s10">: {</span>
    <span class="s2">...</span><span class="s4">StyleSheet</span><span class="s10">.</span><span class="s4">absoluteFillObject</span><span class="s10">,</span>
    <span class="s10">flexDirection: </span><span class="s4">I18nManager</span><span class="s10">.</span><span class="s4">isRTL </span><span class="s2">? </span><span class="s5">'row' </span><span class="s2">: </span><span class="s5">'row-reverse'</span><span class="s10">,</span>
  <span class="s10">},</span>
<span class="s10">}); 
</span></pre>
</body>
</html>