<html>
<head>
<title>watchMode.js.map</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<style type="text/css">
.s0 { color: #a9b7c6;}
.s1 { color: #6a8759;}
.s2 { color: #6897bb; font-style: italic;}
.s3 { color: #cc7832; font-style: italic;}
</style>
</head>
<body bgcolor="#2b2b2b">
<table CELLSPACING=0 CELLPADDING=5 COLS=1 WIDTH="100%" BGCOLOR="#606060" >
<tr><td><center>
<font face="Arial, Helvetica" color="#000000">
watchMode.js.map</font>
</center></td></tr></table>
<pre><span class="s0">{</span><span class="s1">&quot;version&quot;</span><span class="s0">:</span><span class="s2">3</span><span class="s0">,</span><span class="s1">&quot;names&quot;</span><span class="s0">:[</span><span class="s1">&quot;printWatchModeInstructions&quot;</span><span class="s0">,</span><span class="s1">&quot;logger&quot;</span><span class="s0">,</span><span class="s1">&quot;log&quot;</span><span class="s0">,</span><span class="s1">&quot;chalk&quot;</span><span class="s0">,</span><span class="s1">&quot;bold&quot;</span><span class="s0">,</span><span class="s1">&quot;enableWatchMode&quot;</span><span class="s0">,</span><span class="s1">&quot;messageSocket&quot;</span><span class="s0">,</span><span class="s1">&quot;process&quot;</span><span class="s0">,</span><span class="s1">&quot;stdin&quot;</span><span class="s0">,</span><span class="s1">&quot;setRawMode&quot;</span><span class="s0">,</span><span class="s1">&quot;debug&quot;</span><span class="s0">,</span><span class="s1">&quot;readline&quot;</span><span class="s0">,</span><span class="s1">&quot;emitKeypressEvents&quot;</span><span class="s0">,</span><span class="s1">&quot;restore&quot;</span><span class="s0">,</span><span class="s1">&quot;hookStdout&quot;</span><span class="s0">,</span><span class="s1">&quot;output&quot;</span><span class="s0">,</span><span class="s1">&quot;includes&quot;</span><span class="s0">,</span><span class="s1">&quot;on&quot;</span><span class="s0">,</span><span class="s1">&quot;_key&quot;</span><span class="s0">,</span><span class="s1">&quot;data&quot;</span><span class="s0">,</span><span class="s1">&quot;ctrl&quot;</span><span class="s0">,</span><span class="s1">&quot;name&quot;</span><span class="s0">,</span><span class="s1">&quot;exit&quot;</span><span class="s0">,</span><span class="s1">&quot;emit&quot;</span><span class="s0">,</span><span class="s1">&quot;broadcast&quot;</span><span class="s0">,</span><span class="s1">&quot;info&quot;</span><span class="s0">,</span><span class="s1">&quot;execa&quot;</span><span class="s0">,</span><span class="s1">&quot;stdout&quot;</span><span class="s0">,</span><span class="s1">&quot;pipe&quot;</span><span class="s0">,</span><span class="s1">&quot;console&quot;</span><span class="s0">],</span><span class="s1">&quot;sources&quot;</span><span class="s0">:[</span><span class="s1">&quot;../../../src/commands/start/watchMode.ts&quot;</span><span class="s0">],</span><span class="s1">&quot;sourcesContent&quot;</span><span class="s0">:[</span><span class="s1">&quot;import readline from 'readline';</span><span class="s3">\n</span><span class="s1">import {logger, hookStdout} from '@react-native-community/cli-tools';</span><span class="s3">\n</span><span class="s1">import execa from 'execa';</span><span class="s3">\n</span><span class="s1">import chalk from 'chalk';</span><span class="s3">\n\n</span><span class="s1">function printWatchModeInstructions() {</span><span class="s3">\n  </span><span class="s1">logger.log(</span><span class="s3">\n    </span><span class="s1">`${chalk.bold('r')} - reload the app</span><span class="s3">\\</span><span class="s1">n${chalk.bold(</span><span class="s3">\n      </span><span class="s1">'d',</span><span class="s3">\n    </span><span class="s1">)} - open developer menu</span><span class="s3">\\</span><span class="s1">n${chalk.bold('i')} - run on iOS</span><span class="s3">\\</span><span class="s1">n${chalk.bold(</span><span class="s3">\n      </span><span class="s1">'a',</span><span class="s3">\n    </span><span class="s1">)} - run on Android`,</span><span class="s3">\n  </span><span class="s1">);</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">function enableWatchMode(messageSocket: any) {</span><span class="s3">\n  </span><span class="s1">// We need to set this to true to catch key presses individually.</span><span class="s3">\n  </span><span class="s1">// As a result we have to implement our own method for exiting</span><span class="s3">\n  </span><span class="s1">// and other commands (e.g. ctrl+c &amp; ctrl+z)</span><span class="s3">\n  </span><span class="s1">if (!process.stdin.setRawMode) {</span><span class="s3">\n    </span><span class="s1">logger.debug('Watch mode is not supported in this environment');</span><span class="s3">\n    </span><span class="s1">return;</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">readline.emitKeypressEvents(process.stdin);</span><span class="s3">\n\n  </span><span class="s1">process.stdin.setRawMode(true);</span><span class="s3">\n\n  </span><span class="s1">// We have no way of knowing when the dependency graph is done loading</span><span class="s3">\n  </span><span class="s1">// except by hooking into stdout itself. We want to print instructions</span><span class="s3">\n  </span><span class="s1">// right after its done loading.</span><span class="s3">\n  </span><span class="s1">const restore = hookStdout((output: string) =&gt; {</span><span class="s3">\n    </span><span class="s1">if (output.includes('Fast - Scalable - Integrated')) {</span><span class="s3">\n      </span><span class="s1">printWatchModeInstructions();</span><span class="s3">\n      </span><span class="s1">restore();</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">});</span><span class="s3">\n\n  </span><span class="s1">process.stdin.on('keypress', (_key, data) =&gt; {</span><span class="s3">\n    </span><span class="s1">const {ctrl, name} = data;</span><span class="s3">\n    </span><span class="s1">if (ctrl === true) {</span><span class="s3">\n      </span><span class="s1">switch (name) {</span><span class="s3">\n        </span><span class="s1">case 'c':</span><span class="s3">\n          </span><span class="s1">process.exit();</span><span class="s3">\n          </span><span class="s1">break;</span><span class="s3">\n        </span><span class="s1">case 'z':</span><span class="s3">\n          </span><span class="s1">process.emit('SIGTSTP', 'SIGTSTP');</span><span class="s3">\n          </span><span class="s1">break;</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">} else if (name === 'r') {</span><span class="s3">\n      </span><span class="s1">messageSocket.broadcast('reload', null);</span><span class="s3">\n      </span><span class="s1">logger.info('Reloading app...');</span><span class="s3">\n    </span><span class="s1">} else if (name === 'd') {</span><span class="s3">\n      </span><span class="s1">messageSocket.broadcast('devMenu', null);</span><span class="s3">\n      </span><span class="s1">logger.info('Opening developer menu...');</span><span class="s3">\n    </span><span class="s1">} else if (name === 'i' || name === 'a') {</span><span class="s3">\n      </span><span class="s1">logger.info(`Opening the app on ${name === 'i' ? 'iOS' : 'Android'}...`);</span><span class="s3">\n      </span><span class="s1">execa('npx', [</span><span class="s3">\n        </span><span class="s1">'react-native',</span><span class="s3">\n        </span><span class="s1">name === 'i' ? 'run-ios' : 'run-android',</span><span class="s3">\n      </span><span class="s1">]).stdout?.pipe(process.stdout);</span><span class="s3">\n    </span><span class="s1">} else {</span><span class="s3">\n      </span><span class="s1">console.log(_key);</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">});</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">export default enableWatchMode;</span><span class="s3">\n</span><span class="s1">&quot;</span><span class="s0">],</span><span class="s1">&quot;mappings&quot;</span><span class="s0">:</span><span class="s1">&quot;;;;;;;AAAA;EAAA;EAAA;IAAA;EAAA;EAAA;AAAA;AACA;EAAA;EAAA;IAAA;EAAA;EAAA;AAAA;AACA;EAAA;EAAA;IAAA;EAAA;EAAA;AAAA;AACA;EAAA;EAAA;IAAA;EAAA;EAAA;AAAA;AAA0B;AAE1B,SAASA,0BAA0B,GAAG;EACpCC,kBAAM,CAACC,GAAG,CACP,GAAEC,gBAAK,CAACC,IAAI,CAAC,GAAG,CAAE,sBAAqBD,gBAAK,CAACC,IAAI,CAChD,GAAG,CACH,2BAA0BD,gBAAK,CAACC,IAAI,CAAC,GAAG,CAAE,kBAAiBD,gBAAK,CAACC,IAAI,CACrE,GAAG,CACH,mBAAkB,CACrB;AACH;AAEA,SAASC,eAAe,CAACC,aAAkB,EAAE;EAC3C;EACA;EACA;EACA,IAAI,CAACC,OAAO,CAACC,KAAK,CAACC,UAAU,EAAE;IAC7BR,kBAAM,CAACS,KAAK,CAAC,iDAAiD,CAAC;IAC/D;EACF;EAEAC,mBAAQ,CAACC,kBAAkB,CAACL,OAAO,CAACC,KAAK,CAAC;EAE1CD,OAAO,CAACC,KAAK,CAACC,UAAU,CAAC,IAAI,CAAC;;EAE9B;EACA;EACA;EACA,MAAMI,OAAO,GAAG,IAAAC,sBAAU,EAAEC,MAAc,IAAK;IAC7C,IAAIA,MAAM,CAACC,QAAQ,CAAC,8BAA8B,CAAC,EAAE;MACnDhB,0BAA0B,EAAE;MAC5Ba,OAAO,EAAE;IACX;EACF,CAAC,CAAC;EAEFN,OAAO,CAACC,KAAK,CAACS,EAAE,CAAC,UAAU,EAAE,CAACC,IAAI,EAAEC,IAAI,KAAK;IAC3C,MAAM;MAACC,IAAI;MAAEC;IAAI,CAAC,GAAGF,IAAI;IACzB,IAAIC,IAAI,KAAK,IAAI,EAAE;MACjB,QAAQC,IAAI;QACV,KAAK,GAAG;UACNd,OAAO,CAACe,IAAI,EAAE;UACd;QACF,KAAK,GAAG;UACNf,OAAO,CAACgB,IAAI,CAAC,SAAS,EAAE,SAAS,CAAC;UAClC;MAAM;IAEZ,CAAC,MAAM,IAAIF,IAAI,KAAK,GAAG,EAAE;MACvBf,aAAa,CAACkB,SAAS,CAAC,QAAQ,EAAE,IAAI,CAAC;MACvCvB,kBAAM,CAACwB,IAAI,CAAC,kBAAkB,CAAC;IACjC,CAAC,MAAM,IAAIJ,IAAI,KAAK,GAAG,EAAE;MACvBf,aAAa,CAACkB,SAAS,CAAC,SAAS,EAAE,IAAI,CAAC;MACxCvB,kBAAM,CAACwB,IAAI,CAAC,2BAA2B,CAAC;IAC1C,CAAC,MAAM,IAAIJ,IAAI,KAAK,GAAG,IAAIA,IAAI,KAAK,GAAG,EAAE;MAAA;MACvCpB,kBAAM,CAACwB,IAAI,CAAE,sBAAqBJ,IAAI,KAAK,GAAG,GAAG,KAAK,GAAG,SAAU,KAAI,CAAC;MACxE,qBAAAK,gBAAK,EAAC,KAAK,EAAE,CACX,cAAc,EACdL,IAAI,KAAK,GAAG,GAAG,SAAS,GAAG,aAAa,CACzC,CAAC,CAACM,MAAM,kDAHT,cAGWC,IAAI,CAACrB,OAAO,CAACoB,MAAM,CAAC;IACjC,CAAC,MAAM;MACLE,OAAO,CAAC3B,GAAG,CAACgB,IAAI,CAAC;IACnB;EACF,CAAC,CAAC;AACJ;AAAC,eAEcb,eAAe;AAAA&quot;</span><span class="s0">}</span></pre>
</body>
</html>