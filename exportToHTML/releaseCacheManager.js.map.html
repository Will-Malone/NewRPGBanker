<html>
<head>
<title>releaseCacheManager.js.map</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<style type="text/css">
.s0 { color: #a9b7c6;}
.s1 { color: #6a8759;}
.s2 { color: #6897bb; font-style: italic;}
.s3 { color: #cc7832; font-style: italic;}
</style>
</head>
<body bgcolor="#2b2b2b">
<table CELLSPACING=0 CELLPADDING=5 COLS=1 WIDTH="100%" BGCOLOR="#606060" >
<tr><td><center>
<font face="Arial, Helvetica" color="#000000">
releaseCacheManager.js.map</font>
</center></td></tr></table>
<pre><span class="s0">{</span><span class="s1">&quot;version&quot;</span><span class="s0">:</span><span class="s2">3</span><span class="s0">,</span><span class="s1">&quot;names&quot;</span><span class="s0">:[</span><span class="s1">&quot;loadCache&quot;</span><span class="s0">,</span><span class="s1">&quot;name&quot;</span><span class="s0">,</span><span class="s1">&quot;cacheRaw&quot;</span><span class="s0">,</span><span class="s1">&quot;fs&quot;</span><span class="s0">,</span><span class="s1">&quot;readFileSync&quot;</span><span class="s0">,</span><span class="s1">&quot;path&quot;</span><span class="s0">,</span><span class="s1">&quot;resolve&quot;</span><span class="s0">,</span><span class="s1">&quot;getCacheRootPath&quot;</span><span class="s0">,</span><span class="s1">&quot;cache&quot;</span><span class="s0">,</span><span class="s1">&quot;JSON&quot;</span><span class="s0">,</span><span class="s1">&quot;parse&quot;</span><span class="s0">,</span><span class="s1">&quot;e&quot;</span><span class="s0">,</span><span class="s1">&quot;code&quot;</span><span class="s0">,</span><span class="s1">&quot;saveCache&quot;</span><span class="s0">,</span><span class="s1">&quot;logger&quot;</span><span class="s0">,</span><span class="s1">&quot;debug&quot;</span><span class="s0">,</span><span class="s1">&quot;undefined&quot;</span><span class="s0">,</span><span class="s1">&quot;writeFileSync&quot;</span><span class="s0">,</span><span class="s1">&quot;stringify&quot;</span><span class="s0">,</span><span class="s1">&quot;legacyPath&quot;</span><span class="s0">,</span><span class="s1">&quot;os&quot;</span><span class="s0">,</span><span class="s1">&quot;homedir&quot;</span><span class="s0">,</span><span class="s1">&quot;cachePath&quot;</span><span class="s0">,</span><span class="s1">&quot;appDirs&quot;</span><span class="s0">,</span><span class="s1">&quot;appName&quot;</span><span class="s0">,</span><span class="s1">&quot;existsSync&quot;</span><span class="s0">,</span><span class="s1">&quot;mkdirSync&quot;</span><span class="s0">,</span><span class="s1">&quot;recursive&quot;</span><span class="s0">,</span><span class="s1">&quot;get&quot;</span><span class="s0">,</span><span class="s1">&quot;key&quot;</span><span class="s0">,</span><span class="s1">&quot;set&quot;</span><span class="s0">,</span><span class="s1">&quot;value&quot;</span><span class="s0">],</span><span class="s1">&quot;sources&quot;</span><span class="s0">:[</span><span class="s1">&quot;../../src/releaseChecker/releaseCacheManager.ts&quot;</span><span class="s0">],</span><span class="s1">&quot;sourcesContent&quot;</span><span class="s0">:[</span><span class="s1">&quot;import path from 'path';</span><span class="s3">\n</span><span class="s1">import fs from 'fs';</span><span class="s3">\n</span><span class="s1">import os from 'os';</span><span class="s3">\n</span><span class="s1">import appDirs from 'appdirsjs';</span><span class="s3">\n</span><span class="s1">import logger from '../logger';</span><span class="s3">\n\n</span><span class="s1">type ReleaseCacheKey = 'eTag' | 'lastChecked' | 'latestVersion';</span><span class="s3">\n</span><span class="s1">type Cache = {[key in ReleaseCacheKey]?: string};</span><span class="s3">\n\n</span><span class="s1">function loadCache(name: string): Cache | undefined {</span><span class="s3">\n  </span><span class="s1">try {</span><span class="s3">\n    </span><span class="s1">const cacheRaw = fs.readFileSync(</span><span class="s3">\n      </span><span class="s1">path.resolve(getCacheRootPath(), name),</span><span class="s3">\n      </span><span class="s1">'utf8',</span><span class="s3">\n    </span><span class="s1">);</span><span class="s3">\n    </span><span class="s1">const cache = JSON.parse(cacheRaw);</span><span class="s3">\n    </span><span class="s1">return cache;</span><span class="s3">\n  </span><span class="s1">} catch (e) {</span><span class="s3">\n    </span><span class="s1">if ((e as any).code === 'ENOENT') {</span><span class="s3">\n      </span><span class="s1">// Create cache file since it doesn't exist.</span><span class="s3">\n      </span><span class="s1">saveCache(name, {});</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">logger.debug('No release cache found');</span><span class="s3">\n    </span><span class="s1">return undefined;</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">function saveCache(name: string, cache: Cache) {</span><span class="s3">\n  </span><span class="s1">fs.writeFileSync(</span><span class="s3">\n    </span><span class="s1">path.resolve(getCacheRootPath(), name),</span><span class="s3">\n    </span><span class="s1">JSON.stringify(cache, null, 2),</span><span class="s3">\n  </span><span class="s1">);</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">/**</span><span class="s3">\n </span><span class="s1">* Returns the path string of `$HOME/.react-native-cli`.</span><span class="s3">\n </span><span class="s1">*</span><span class="s3">\n </span><span class="s1">* In case it doesn't exist, it will be created.</span><span class="s3">\n </span><span class="s1">*/</span><span class="s3">\n</span><span class="s1">function getCacheRootPath() {</span><span class="s3">\n  </span><span class="s1">const legacyPath = path.resolve(os.homedir(), '.react-native-cli', 'cache');</span><span class="s3">\n  </span><span class="s1">const cachePath = appDirs({appName: 'react-native-cli', legacyPath}).cache;</span><span class="s3">\n\n  </span><span class="s1">if (!fs.existsSync(cachePath)) {</span><span class="s3">\n    </span><span class="s1">fs.mkdirSync(cachePath, {recursive: true});</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">return cachePath;</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">function get(name: string, key: ReleaseCacheKey): string | undefined {</span><span class="s3">\n  </span><span class="s1">const cache = loadCache(name);</span><span class="s3">\n  </span><span class="s1">if (cache) {</span><span class="s3">\n    </span><span class="s1">return cache[key];</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">return undefined;</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">function set(name: string, key: ReleaseCacheKey, value: string) {</span><span class="s3">\n  </span><span class="s1">const cache = loadCache(name);</span><span class="s3">\n  </span><span class="s1">if (cache) {</span><span class="s3">\n    </span><span class="s1">cache[key] = value;</span><span class="s3">\n    </span><span class="s1">saveCache(name, cache);</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">export default {</span><span class="s3">\n  </span><span class="s1">get,</span><span class="s3">\n  </span><span class="s1">set,</span><span class="s3">\n</span><span class="s1">};</span><span class="s3">\n</span><span class="s1">&quot;</span><span class="s0">],</span><span class="s1">&quot;mappings&quot;</span><span class="s0">:</span><span class="s1">&quot;;;;;;;AAAA;EAAA;EAAA;IAAA;EAAA;EAAA;AAAA;AACA;EAAA;EAAA;IAAA;EAAA;EAAA;AAAA;AACA;EAAA;EAAA;IAAA;EAAA;EAAA;AAAA;AACA;EAAA;EAAA;IAAA;EAAA;EAAA;AAAA;AACA;AAA+B;AAK/B,SAASA,SAAS,CAACC,IAAY,EAAqB;EAClD,IAAI;IACF,MAAMC,QAAQ,GAAGC,aAAE,CAACC,YAAY,CAC9BC,eAAI,CAACC,OAAO,CAACC,gBAAgB,EAAE,EAAEN,IAAI,CAAC,EACtC,MAAM,CACP;IACD,MAAMO,KAAK,GAAGC,IAAI,CAACC,KAAK,CAACR,QAAQ,CAAC;IAClC,OAAOM,KAAK;EACd,CAAC,CAAC,OAAOG,CAAC,EAAE;IACV,IAAKA,CAAC,CAASC,IAAI,KAAK,QAAQ,EAAE;MAChC;MACAC,SAAS,CAACZ,IAAI,EAAE,CAAC,CAAC,CAAC;IACrB;IACAa,eAAM,CAACC,KAAK,CAAC,wBAAwB,CAAC;IACtC,OAAOC,SAAS;EAClB;AACF;AAEA,SAASH,SAAS,CAACZ,IAAY,EAAEO,KAAY,EAAE;EAC7CL,aAAE,CAACc,aAAa,CACdZ,eAAI,CAACC,OAAO,CAACC,gBAAgB,EAAE,EAAEN,IAAI,CAAC,EACtCQ,IAAI,CAACS,SAAS,CAACV,KAAK,EAAE,IAAI,EAAE,CAAC,CAAC,CAC/B;AACH;;AAEA;AACA;AACA;AACA;AACA;AACA,SAASD,gBAAgB,GAAG;EAC1B,MAAMY,UAAU,GAAGd,eAAI,CAACC,OAAO,CAACc,aAAE,CAACC,OAAO,EAAE,EAAE,mBAAmB,EAAE,OAAO,CAAC;EAC3E,MAAMC,SAAS,GAAG,IAAAC,oBAAO,EAAC;IAACC,OAAO,EAAE,kBAAkB;IAAEL;EAAU,CAAC,CAAC,CAACX,KAAK;EAE1E,IAAI,CAACL,aAAE,CAACsB,UAAU,CAACH,SAAS,CAAC,EAAE;IAC7BnB,aAAE,CAACuB,SAAS,CAACJ,SAAS,EAAE;MAACK,SAAS,EAAE;IAAI,CAAC,CAAC;EAC5C;EAEA,OAAOL,SAAS;AAClB;AAEA,SAASM,GAAG,CAAC3B,IAAY,EAAE4B,GAAoB,EAAsB;EACnE,MAAMrB,KAAK,GAAGR,SAAS,CAACC,IAAI,CAAC;EAC7B,IAAIO,KAAK,EAAE;IACT,OAAOA,KAAK,CAACqB,GAAG,CAAC;EACnB;EACA,OAAOb,SAAS;AAClB;AAEA,SAASc,GAAG,CAAC7B,IAAY,EAAE4B,GAAoB,EAAEE,KAAa,EAAE;EAC9D,MAAMvB,KAAK,GAAGR,SAAS,CAACC,IAAI,CAAC;EAC7B,IAAIO,KAAK,EAAE;IACTA,KAAK,CAACqB,GAAG,CAAC,GAAGE,KAAK;IAClBlB,SAAS,CAACZ,IAAI,EAAEO,KAAK,CAAC;EACxB;AACF;AAAC,eAEc;EACboB,GAAG;EACHE;AACF,CAAC;AAAA&quot;</span><span class="s0">}</span></pre>
</body>
</html>