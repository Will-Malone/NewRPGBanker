<html>
<head>
<title>eslintrc.cjs</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<style type="text/css">
.s0 { color: #6a8759;}
.s1 { color: #a9b7c6;}
.s2 { color: #a9b7c6;}
.s3 { color: #ffc66d;}
.s4 { color: #9876aa; font-style: italic;}
.s5 { color: #cc7832;}
.s6 { color: #808080;}
.s7 { color: #6897bb; font-style: italic;}
.s8 { color: #cc7832; font-style: italic;}
</style>
</head>
<body bgcolor="#2b2b2b">
<table CELLSPACING=0 CELLPADDING=5 COLS=1 WIDTH="100%" BGCOLOR="#606060" >
<tr><td><center>
<font face="Arial, Helvetica" color="#000000">
eslintrc.cjs</font>
</center></td></tr></table>
<pre><span class="s0">'use strict'</span><span class="s1">;</span>

<span class="s2">Object</span><span class="s1">.</span><span class="s3">defineProperty</span><span class="s1">(</span><span class="s2">exports</span><span class="s1">, </span><span class="s0">'__esModule'</span><span class="s1">, { value: </span><span class="s4">true </span><span class="s1">});</span>

<span class="s5">var </span><span class="s1">debugOrig </span><span class="s5">= </span><span class="s3">require</span><span class="s1">(</span><span class="s0">'debug'</span><span class="s1">);</span>
<span class="s5">var </span><span class="s1">fs </span><span class="s5">= </span><span class="s3">require</span><span class="s1">(</span><span class="s0">'fs'</span><span class="s1">);</span>
<span class="s5">var </span><span class="s1">importFresh </span><span class="s5">= </span><span class="s3">require</span><span class="s1">(</span><span class="s0">'import-fresh'</span><span class="s1">);</span>
<span class="s5">var </span><span class="s1">Module </span><span class="s5">= </span><span class="s3">require</span><span class="s1">(</span><span class="s0">'module'</span><span class="s1">);</span>
<span class="s5">var </span><span class="s1">path </span><span class="s5">= </span><span class="s3">require</span><span class="s1">(</span><span class="s0">'path'</span><span class="s1">);</span>
<span class="s5">var </span><span class="s1">stripComments </span><span class="s5">= </span><span class="s3">require</span><span class="s1">(</span><span class="s0">'strip-json-comments'</span><span class="s1">);</span>
<span class="s5">var </span><span class="s1">assert </span><span class="s5">= </span><span class="s3">require</span><span class="s1">(</span><span class="s0">'assert'</span><span class="s1">);</span>
<span class="s5">var </span><span class="s1">ignore </span><span class="s5">= </span><span class="s3">require</span><span class="s1">(</span><span class="s0">'ignore'</span><span class="s1">);</span>
<span class="s5">var </span><span class="s1">util </span><span class="s5">= </span><span class="s3">require</span><span class="s1">(</span><span class="s0">'util'</span><span class="s1">);</span>
<span class="s5">var </span><span class="s1">minimatch </span><span class="s5">= </span><span class="s3">require</span><span class="s1">(</span><span class="s0">'minimatch'</span><span class="s1">);</span>
<span class="s5">var </span><span class="s1">Ajv </span><span class="s5">= </span><span class="s3">require</span><span class="s1">(</span><span class="s0">'ajv'</span><span class="s1">);</span>
<span class="s5">var </span><span class="s1">globals </span><span class="s5">= </span><span class="s3">require</span><span class="s1">(</span><span class="s0">'globals'</span><span class="s1">);</span>
<span class="s5">var </span><span class="s1">os </span><span class="s5">= </span><span class="s3">require</span><span class="s1">(</span><span class="s0">'os'</span><span class="s1">);</span>

<span class="s5">function </span><span class="s1">_interopDefaultLegacy (</span><span class="s2">e</span><span class="s1">) { </span><span class="s5">return </span><span class="s2">e </span><span class="s5">&amp;&amp; typeof </span><span class="s2">e </span><span class="s5">=== </span><span class="s0">'object' </span><span class="s5">&amp;&amp; </span><span class="s0">'default' </span><span class="s5">in </span><span class="s2">e </span><span class="s5">? </span><span class="s2">e </span><span class="s5">: </span><span class="s1">{ </span><span class="s0">'default'</span><span class="s1">: </span><span class="s2">e </span><span class="s1">}; }</span>

<span class="s5">var </span><span class="s1">debugOrig__default </span><span class="s5">= </span><span class="s6">/*#__PURE__*/</span><span class="s3">_interopDefaultLegacy</span><span class="s1">(</span><span class="s2">debugOrig</span><span class="s1">);</span>
<span class="s5">var </span><span class="s1">fs__default </span><span class="s5">= </span><span class="s6">/*#__PURE__*/</span><span class="s3">_interopDefaultLegacy</span><span class="s1">(</span><span class="s2">fs</span><span class="s1">);</span>
<span class="s5">var </span><span class="s1">importFresh__default </span><span class="s5">= </span><span class="s6">/*#__PURE__*/</span><span class="s3">_interopDefaultLegacy</span><span class="s1">(</span><span class="s2">importFresh</span><span class="s1">);</span>
<span class="s5">var </span><span class="s1">Module__default </span><span class="s5">= </span><span class="s6">/*#__PURE__*/</span><span class="s3">_interopDefaultLegacy</span><span class="s1">(</span><span class="s2">Module</span><span class="s1">);</span>
<span class="s5">var </span><span class="s1">path__default </span><span class="s5">= </span><span class="s6">/*#__PURE__*/</span><span class="s3">_interopDefaultLegacy</span><span class="s1">(</span><span class="s2">path</span><span class="s1">);</span>
<span class="s5">var </span><span class="s1">stripComments__default </span><span class="s5">= </span><span class="s6">/*#__PURE__*/</span><span class="s3">_interopDefaultLegacy</span><span class="s1">(</span><span class="s2">stripComments</span><span class="s1">);</span>
<span class="s5">var </span><span class="s1">assert__default </span><span class="s5">= </span><span class="s6">/*#__PURE__*/</span><span class="s3">_interopDefaultLegacy</span><span class="s1">(</span><span class="s2">assert</span><span class="s1">);</span>
<span class="s5">var </span><span class="s1">ignore__default </span><span class="s5">= </span><span class="s6">/*#__PURE__*/</span><span class="s3">_interopDefaultLegacy</span><span class="s1">(</span><span class="s2">ignore</span><span class="s1">);</span>
<span class="s5">var </span><span class="s1">util__default </span><span class="s5">= </span><span class="s6">/*#__PURE__*/</span><span class="s3">_interopDefaultLegacy</span><span class="s1">(</span><span class="s2">util</span><span class="s1">);</span>
<span class="s5">var </span><span class="s1">minimatch__default </span><span class="s5">= </span><span class="s6">/*#__PURE__*/</span><span class="s3">_interopDefaultLegacy</span><span class="s1">(</span><span class="s2">minimatch</span><span class="s1">);</span>
<span class="s5">var </span><span class="s1">Ajv__default </span><span class="s5">= </span><span class="s6">/*#__PURE__*/</span><span class="s3">_interopDefaultLegacy</span><span class="s1">(</span><span class="s2">Ajv</span><span class="s1">);</span>
<span class="s5">var </span><span class="s1">globals__default </span><span class="s5">= </span><span class="s6">/*#__PURE__*/</span><span class="s3">_interopDefaultLegacy</span><span class="s1">(</span><span class="s2">globals</span><span class="s1">);</span>
<span class="s5">var </span><span class="s1">os__default </span><span class="s5">= </span><span class="s6">/*#__PURE__*/</span><span class="s3">_interopDefaultLegacy</span><span class="s1">(</span><span class="s2">os</span><span class="s1">);</span>

<span class="s6">/**</span>
 <span class="s6">* </span><span class="s5">@fileoverview </span><span class="s6">`IgnorePattern` class. 
 * 
 * `IgnorePattern` class has the set of glob patterns and the base path. 
 * 
 * It provides two static methods. 
 * 
 * - `IgnorePattern.createDefaultIgnore(cwd)` 
 *      Create the default predicate function. 
 * - `IgnorePattern.createIgnore(ignorePatterns)` 
 *      Create the predicate function from multiple `IgnorePattern` objects. 
 * 
 * It provides two properties and a method. 
 * 
 * - `patterns` 
 *      The glob patterns that ignore to lint. 
 * - `basePath` 
 *      The base path of the glob patterns. If absolute paths existed in the 
 *      glob patterns, those are handled as relative paths to the base path. 
 * - `getPatternsRelativeTo(basePath)` 
 *      Get `patterns` as modified for a given base path. It modifies the 
 *      absolute paths in the patterns as prepending the difference of two base 
 *      paths. 
 * 
 * `ConfigArrayFactory` creates `IgnorePattern` objects when it processes 
 * `ignorePatterns` properties. 
 * 
 * </span><span class="s5">@author </span><span class="s2">Toru Nagashima </span><span class="s6">&lt;</span><span class="s4">https://github.com/mysticatea</span><span class="s6">&gt;</span>
 <span class="s6">*/</span>

<span class="s5">const </span><span class="s1">debug$3 </span><span class="s5">= </span><span class="s2">debugOrig__default</span><span class="s1">[</span><span class="s0">&quot;default&quot;</span><span class="s1">](</span><span class="s0">&quot;eslintrc:ignore-pattern&quot;</span><span class="s1">);</span>

<span class="s6">/** </span><span class="s5">@typedef </span><span class="s2">{ReturnType&lt;import(&quot;ignore&quot;).default&gt;} Ignore </span><span class="s6">*/</span>

<span class="s6">//------------------------------------------------------------------------------</span>
<span class="s6">// Helpers</span>
<span class="s6">//------------------------------------------------------------------------------</span>

<span class="s6">/**</span>
 <span class="s6">* Get the path to the common ancestor directory of given paths. 
 * </span><span class="s5">@param </span><span class="s2">{string[]} sourcePaths </span><span class="s6">The paths to calculate the common ancestor. 
 * </span><span class="s5">@returns </span><span class="s2">{string} </span><span class="s6">The path to the common ancestor directory. 
 */</span>
<span class="s5">function </span><span class="s1">getCommonAncestorPath(</span><span class="s2">sourcePaths</span><span class="s1">) {</span>
    <span class="s5">let </span><span class="s1">result </span><span class="s5">= </span><span class="s2">sourcePaths</span><span class="s1">[</span><span class="s7">0</span><span class="s1">];</span>

    <span class="s5">for </span><span class="s1">(</span><span class="s5">let </span><span class="s1">i </span><span class="s5">= </span><span class="s7">1</span><span class="s1">; </span><span class="s2">i </span><span class="s5">&lt; </span><span class="s2">sourcePaths</span><span class="s1">.length; </span><span class="s5">++</span><span class="s2">i</span><span class="s1">) {</span>
        <span class="s5">const </span><span class="s1">a </span><span class="s5">= </span><span class="s2">result</span><span class="s1">;</span>
        <span class="s5">const </span><span class="s1">b </span><span class="s5">= </span><span class="s2">sourcePaths</span><span class="s1">[</span><span class="s2">i</span><span class="s1">];</span>

        <span class="s6">// Set the shorter one (it's the common ancestor if one includes the other).</span>
        <span class="s2">result </span><span class="s5">= </span><span class="s2">a</span><span class="s1">.length </span><span class="s5">&lt; </span><span class="s2">b</span><span class="s1">.length </span><span class="s5">? </span><span class="s2">a </span><span class="s5">: </span><span class="s2">b</span><span class="s1">;</span>

        <span class="s6">// Set the common ancestor.</span>
        <span class="s5">for </span><span class="s1">(</span><span class="s5">let </span><span class="s1">j </span><span class="s5">= </span><span class="s7">0</span><span class="s1">, lastSepPos </span><span class="s5">= </span><span class="s7">0</span><span class="s1">; </span><span class="s2">j </span><span class="s5">&lt; </span><span class="s2">a</span><span class="s1">.length </span><span class="s5">&amp;&amp; </span><span class="s2">j </span><span class="s5">&lt; </span><span class="s2">b</span><span class="s1">.length; </span><span class="s5">++</span><span class="s2">j</span><span class="s1">) {</span>
            <span class="s5">if </span><span class="s1">(</span><span class="s2">a</span><span class="s1">[</span><span class="s2">j</span><span class="s1">] </span><span class="s5">!== </span><span class="s2">b</span><span class="s1">[</span><span class="s2">j</span><span class="s1">]) {</span>
                <span class="s2">result </span><span class="s5">= </span><span class="s2">a</span><span class="s1">.</span><span class="s3">slice</span><span class="s1">(</span><span class="s7">0</span><span class="s1">, </span><span class="s2">lastSepPos</span><span class="s1">);</span>
                <span class="s5">break</span><span class="s1">;</span>
            <span class="s1">}</span>
            <span class="s5">if </span><span class="s1">(</span><span class="s2">a</span><span class="s1">[</span><span class="s2">j</span><span class="s1">] </span><span class="s5">=== </span><span class="s2">path__default</span><span class="s1">[</span><span class="s0">&quot;default&quot;</span><span class="s1">].</span><span class="s2">sep</span><span class="s1">) {</span>
                <span class="s2">lastSepPos </span><span class="s5">= </span><span class="s2">j</span><span class="s1">;</span>
            <span class="s1">}</span>
        <span class="s1">}</span>
    <span class="s1">}</span>

    <span class="s5">let </span><span class="s1">resolvedResult </span><span class="s5">= </span><span class="s2">result </span><span class="s5">|| </span><span class="s2">path__default</span><span class="s1">[</span><span class="s0">&quot;default&quot;</span><span class="s1">].</span><span class="s2">sep</span><span class="s1">;</span>

    <span class="s6">// if Windows common ancestor is root of drive must have trailing slash to be absolute.</span>
    <span class="s5">if </span><span class="s1">(</span><span class="s2">resolvedResult </span><span class="s5">&amp;&amp; </span><span class="s2">resolvedResult</span><span class="s1">.</span><span class="s3">endsWith</span><span class="s1">(</span><span class="s0">&quot;:&quot;</span><span class="s1">) </span><span class="s5">&amp;&amp; </span><span class="s2">process</span><span class="s1">.</span><span class="s2">platform </span><span class="s5">=== </span><span class="s0">&quot;win32&quot;</span><span class="s1">) {</span>
        <span class="s2">resolvedResult </span><span class="s5">+= </span><span class="s2">path__default</span><span class="s1">[</span><span class="s0">&quot;default&quot;</span><span class="s1">].</span><span class="s2">sep</span><span class="s1">;</span>
    <span class="s1">}</span>
    <span class="s5">return </span><span class="s2">resolvedResult</span><span class="s1">;</span>
<span class="s1">}</span>

<span class="s6">/**</span>
 <span class="s6">* Make relative path. 
 * </span><span class="s5">@param </span><span class="s2">{string} from </span><span class="s6">The source path to get relative path. 
 * </span><span class="s5">@param </span><span class="s2">{string} to </span><span class="s6">The destination path to get relative path. 
 * </span><span class="s5">@returns </span><span class="s2">{string} </span><span class="s6">The relative path. 
 */</span>
<span class="s5">function </span><span class="s1">relative(</span><span class="s2">from</span><span class="s1">, </span><span class="s2">to</span><span class="s1">) {</span>
    <span class="s5">const </span><span class="s1">relPath </span><span class="s5">= </span><span class="s2">path__default</span><span class="s1">[</span><span class="s0">&quot;default&quot;</span><span class="s1">].</span><span class="s3">relative</span><span class="s1">(</span><span class="s2">from</span><span class="s1">, </span><span class="s2">to</span><span class="s1">);</span>

    <span class="s5">if </span><span class="s1">(</span><span class="s2">path__default</span><span class="s1">[</span><span class="s0">&quot;default&quot;</span><span class="s1">].</span><span class="s2">sep </span><span class="s5">=== </span><span class="s0">&quot;/&quot;</span><span class="s1">) {</span>
        <span class="s5">return </span><span class="s2">relPath</span><span class="s1">;</span>
    <span class="s1">}</span>
    <span class="s5">return </span><span class="s2">relPath</span><span class="s1">.</span><span class="s3">split</span><span class="s1">(</span><span class="s2">path__default</span><span class="s1">[</span><span class="s0">&quot;default&quot;</span><span class="s1">].</span><span class="s2">sep</span><span class="s1">).</span><span class="s3">join</span><span class="s1">(</span><span class="s0">&quot;/&quot;</span><span class="s1">);</span>
<span class="s1">}</span>

<span class="s6">/**</span>
 <span class="s6">* Get the trailing slash if existed. 
 * </span><span class="s5">@param </span><span class="s2">{string} filePath </span><span class="s6">The path to check. 
 * </span><span class="s5">@returns </span><span class="s2">{string} </span><span class="s6">The trailing slash if existed. 
 */</span>
<span class="s5">function </span><span class="s1">dirSuffix(</span><span class="s2">filePath</span><span class="s1">) {</span>
    <span class="s5">const </span><span class="s1">isDir </span><span class="s5">= </span><span class="s1">(</span>
        <span class="s2">filePath</span><span class="s1">.</span><span class="s3">endsWith</span><span class="s1">(</span><span class="s2">path__default</span><span class="s1">[</span><span class="s0">&quot;default&quot;</span><span class="s1">].</span><span class="s2">sep</span><span class="s1">) </span><span class="s5">||</span>
        <span class="s1">(</span><span class="s2">process</span><span class="s1">.</span><span class="s2">platform </span><span class="s5">=== </span><span class="s0">&quot;win32&quot; </span><span class="s5">&amp;&amp; </span><span class="s2">filePath</span><span class="s1">.</span><span class="s3">endsWith</span><span class="s1">(</span><span class="s0">&quot;/&quot;</span><span class="s1">))</span>
    <span class="s1">);</span>

    <span class="s5">return </span><span class="s2">isDir </span><span class="s5">? </span><span class="s0">&quot;/&quot; </span><span class="s5">: </span><span class="s0">&quot;&quot;</span><span class="s1">;</span>
<span class="s1">}</span>

<span class="s5">const </span><span class="s1">DefaultPatterns </span><span class="s5">= </span><span class="s2">Object</span><span class="s1">.</span><span class="s3">freeze</span><span class="s1">([</span><span class="s0">&quot;/**/node_modules/*&quot;</span><span class="s1">]);</span>
<span class="s5">const </span><span class="s1">DotPatterns </span><span class="s5">= </span><span class="s2">Object</span><span class="s1">.</span><span class="s3">freeze</span><span class="s1">([</span><span class="s0">&quot;.*&quot;</span><span class="s1">, </span><span class="s0">&quot;!.eslintrc.*&quot;</span><span class="s1">, </span><span class="s0">&quot;!../&quot;</span><span class="s1">]);</span>

<span class="s6">//------------------------------------------------------------------------------</span>
<span class="s6">// Public</span>
<span class="s6">//------------------------------------------------------------------------------</span>

<span class="s5">class </span><span class="s2">IgnorePattern </span><span class="s1">{</span>

    <span class="s6">/**</span>
     <span class="s6">* The default patterns. 
     * </span><span class="s5">@type </span><span class="s2">{string[]}</span>
     <span class="s6">*/ 
    static get DefaultPatterns() { 
        return DefaultPatterns; 
    } 
</span>
    <span class="s6">/** 
     * Create the default predicate function. 
     * </span><span class="s5">@param </span><span class="s2">{string} cwd </span><span class="s6">The current working directory. 
     * </span><span class="s5">@returns </span><span class="s2">{((filePath:string, dot:boolean) =&gt; boolean) &amp; {basePath:string; patterns:string[]}}</span>
     <span class="s6">* The preficate function. 
     * The first argument is an absolute path that is checked. 
     * The second argument is the flag to not ignore dotfiles. 
     * If the predicate function returned `true`, it means the path should be ignored. 
     */</span>
    <span class="s5">static </span><span class="s1">createDefaultIgnore(</span><span class="s2">cwd</span><span class="s1">) {</span>
        <span class="s5">return </span><span class="s2">this</span><span class="s1">.</span><span class="s3">createIgnore</span><span class="s1">([</span><span class="s5">new </span><span class="s3">IgnorePattern</span><span class="s1">(</span><span class="s2">DefaultPatterns</span><span class="s1">, </span><span class="s2">cwd</span><span class="s1">)]);</span>
    <span class="s1">}</span>

    <span class="s6">/**</span>
     <span class="s6">* Create the predicate function from multiple `IgnorePattern` objects. 
     * </span><span class="s5">@param </span><span class="s2">{IgnorePattern[]} ignorePatterns </span><span class="s6">The list of ignore patterns. 
     * </span><span class="s5">@returns </span><span class="s2">{((filePath:string, dot?:boolean) =&gt; boolean) &amp; {basePath:string; patterns:string[]}}</span>
     <span class="s6">* The preficate function. 
     * The first argument is an absolute path that is checked. 
     * The second argument is the flag to not ignore dotfiles. 
     * If the predicate function returned `true`, it means the path should be ignored. 
     */</span>
    <span class="s5">static </span><span class="s1">createIgnore(</span><span class="s2">ignorePatterns</span><span class="s1">) {</span>
        <span class="s3">debug$3</span><span class="s1">(</span><span class="s0">&quot;Create with: %o&quot;</span><span class="s1">, </span><span class="s2">ignorePatterns</span><span class="s1">);</span>

        <span class="s5">const </span><span class="s1">basePath </span><span class="s5">= </span><span class="s3">getCommonAncestorPath</span><span class="s1">(</span><span class="s2">ignorePatterns</span><span class="s1">.</span><span class="s3">map</span><span class="s1">(</span><span class="s2">p </span><span class="s5">=&gt; </span><span class="s2">p</span><span class="s1">.</span><span class="s2">basePath</span><span class="s1">));</span>
        <span class="s5">const </span><span class="s1">patterns </span><span class="s5">= </span><span class="s1">[].</span><span class="s3">concat</span><span class="s1">(</span>
            <span class="s5">...</span><span class="s2">ignorePatterns</span><span class="s1">.</span><span class="s3">map</span><span class="s1">(</span><span class="s2">p </span><span class="s5">=&gt; </span><span class="s2">p</span><span class="s1">.</span><span class="s3">getPatternsRelativeTo</span><span class="s1">(</span><span class="s2">basePath</span><span class="s1">))</span>
        <span class="s1">);</span>
        <span class="s5">const </span><span class="s1">ig </span><span class="s5">= </span><span class="s2">ignore__default</span><span class="s1">[</span><span class="s0">&quot;default&quot;</span><span class="s1">]({ allowRelativePaths: </span><span class="s4">true </span><span class="s1">}).</span><span class="s3">add</span><span class="s1">([</span><span class="s5">...</span><span class="s2">DotPatterns</span><span class="s1">, </span><span class="s5">...</span><span class="s2">patterns</span><span class="s1">]);</span>
        <span class="s5">const </span><span class="s1">dotIg </span><span class="s5">= </span><span class="s2">ignore__default</span><span class="s1">[</span><span class="s0">&quot;default&quot;</span><span class="s1">]({ allowRelativePaths: </span><span class="s4">true </span><span class="s1">}).</span><span class="s3">add</span><span class="s1">(</span><span class="s2">patterns</span><span class="s1">);</span>

        <span class="s3">debug$3</span><span class="s1">(</span><span class="s0">&quot;  processed: %o&quot;</span><span class="s1">, { </span><span class="s2">basePath</span><span class="s1">, </span><span class="s2">patterns </span><span class="s1">});</span>

        <span class="s5">return </span><span class="s2">Object</span><span class="s1">.</span><span class="s3">assign</span><span class="s1">(</span>
            <span class="s1">(</span><span class="s2">filePath</span><span class="s1">, </span><span class="s2">dot </span><span class="s5">= </span><span class="s4">false</span><span class="s1">) </span><span class="s5">=&gt; </span><span class="s1">{</span>
                <span class="s2">assert__default</span><span class="s1">[</span><span class="s0">&quot;default&quot;</span><span class="s1">](</span><span class="s2">path__default</span><span class="s1">[</span><span class="s0">&quot;default&quot;</span><span class="s1">].</span><span class="s3">isAbsolute</span><span class="s1">(</span><span class="s2">filePath</span><span class="s1">), </span><span class="s0">&quot;'filePath' should be an absolute path.&quot;</span><span class="s1">);</span>
                <span class="s5">const </span><span class="s1">relPathRaw </span><span class="s5">= </span><span class="s3">relative</span><span class="s1">(</span><span class="s2">basePath</span><span class="s1">, </span><span class="s2">filePath</span><span class="s1">);</span>
                <span class="s5">const </span><span class="s1">relPath </span><span class="s5">= </span><span class="s2">relPathRaw </span><span class="s5">&amp;&amp; </span><span class="s1">(</span><span class="s2">relPathRaw </span><span class="s5">+ </span><span class="s3">dirSuffix</span><span class="s1">(</span><span class="s2">filePath</span><span class="s1">));</span>
                <span class="s5">const </span><span class="s1">adoptedIg </span><span class="s5">= </span><span class="s2">dot </span><span class="s5">? </span><span class="s2">dotIg </span><span class="s5">: </span><span class="s2">ig</span><span class="s1">;</span>
                <span class="s5">const </span><span class="s1">result </span><span class="s5">= </span><span class="s2">relPath </span><span class="s5">!== </span><span class="s0">&quot;&quot; </span><span class="s5">&amp;&amp; </span><span class="s2">adoptedIg</span><span class="s1">.</span><span class="s3">ignores</span><span class="s1">(</span><span class="s2">relPath</span><span class="s1">);</span>

                <span class="s3">debug$3</span><span class="s1">(</span><span class="s0">&quot;Check&quot;</span><span class="s1">, { </span><span class="s2">filePath</span><span class="s1">, </span><span class="s2">dot</span><span class="s1">, relativePath: </span><span class="s2">relPath</span><span class="s1">, </span><span class="s2">result </span><span class="s1">});</span>
                <span class="s5">return </span><span class="s2">result</span><span class="s1">;</span>
            <span class="s1">},</span>
            <span class="s1">{ </span><span class="s2">basePath</span><span class="s1">, </span><span class="s2">patterns </span><span class="s1">}</span>
        <span class="s1">);</span>
    <span class="s1">}</span>

    <span class="s6">/**</span>
     <span class="s6">* Initialize a new `IgnorePattern` instance. 
     * </span><span class="s5">@param </span><span class="s2">{string[]} patterns </span><span class="s6">The glob patterns that ignore to lint. 
     * </span><span class="s5">@param </span><span class="s2">{string} basePath </span><span class="s6">The base path of `patterns`. 
     */</span>
    <span class="s5">constructor</span><span class="s1">(</span><span class="s2">patterns</span><span class="s1">, </span><span class="s2">basePath</span><span class="s1">) {</span>
        <span class="s2">assert__default</span><span class="s1">[</span><span class="s0">&quot;default&quot;</span><span class="s1">](</span><span class="s2">path__default</span><span class="s1">[</span><span class="s0">&quot;default&quot;</span><span class="s1">].</span><span class="s3">isAbsolute</span><span class="s1">(</span><span class="s2">basePath</span><span class="s1">), </span><span class="s0">&quot;'basePath' should be an absolute path.&quot;</span><span class="s1">);</span>

        <span class="s6">/**</span>
         <span class="s6">* The glob patterns that ignore to lint. 
         * </span><span class="s5">@type </span><span class="s2">{string[]}</span>
         <span class="s6">*/ 
        this.patterns = patterns; 
</span>
        <span class="s6">/** 
         * The base path of `patterns`. 
         * </span><span class="s5">@type </span><span class="s2">{string}</span>
         <span class="s6">*/ 
        this.basePath = basePath; 
</span>
        <span class="s6">/** 
         * If `true` then patterns which don't start with `/` will match the paths to the outside of `basePath`. Defaults to `false`. 
         * 
         * It's set `true` for `.eslintignore`, `package.json`, and `--ignore-path` for backward compatibility. 
         * It's `false` as-is for `ignorePatterns` property in config files. 
         * </span><span class="s5">@type </span><span class="s2">{boolean}</span>
         <span class="s6">*/ 
        this.loose = false; 
    } 
</span>
    <span class="s6">/** 
     * Get `patterns` as modified for a given base path. It modifies the 
     * absolute paths in the patterns as prepending the difference of two base 
     * paths. 
     * </span><span class="s5">@param </span><span class="s2">{string} newBasePath </span><span class="s6">The base path. 
     * </span><span class="s5">@returns </span><span class="s2">{string[]} </span><span class="s6">Modifired patterns. 
     */</span>
    <span class="s3">getPatternsRelativeTo</span><span class="s1">(</span><span class="s2">newBasePath</span><span class="s1">) {</span>
        <span class="s2">assert__default</span><span class="s1">[</span><span class="s0">&quot;default&quot;</span><span class="s1">](</span><span class="s2">path__default</span><span class="s1">[</span><span class="s0">&quot;default&quot;</span><span class="s1">].</span><span class="s3">isAbsolute</span><span class="s1">(</span><span class="s2">newBasePath</span><span class="s1">), </span><span class="s0">&quot;'newBasePath' should be an absolute path.&quot;</span><span class="s1">);</span>
        <span class="s5">const </span><span class="s1">{ basePath, loose, patterns } </span><span class="s5">= </span><span class="s2">this</span><span class="s1">;</span>

        <span class="s5">if </span><span class="s1">(</span><span class="s2">newBasePath </span><span class="s5">=== </span><span class="s2">basePath</span><span class="s1">) {</span>
            <span class="s5">return </span><span class="s2">patterns</span><span class="s1">;</span>
        <span class="s1">}</span>
        <span class="s5">const </span><span class="s1">prefix </span><span class="s5">= </span><span class="s0">`/${</span><span class="s3">relative</span><span class="s0">(</span><span class="s2">newBasePath</span><span class="s0">, </span><span class="s2">basePath</span><span class="s0">)}`</span><span class="s1">;</span>

        <span class="s5">return </span><span class="s2">patterns</span><span class="s1">.</span><span class="s3">map</span><span class="s1">(</span><span class="s2">pattern </span><span class="s5">=&gt; </span><span class="s1">{</span>
            <span class="s5">const </span><span class="s1">negative </span><span class="s5">= </span><span class="s2">pattern</span><span class="s1">.</span><span class="s3">startsWith</span><span class="s1">(</span><span class="s0">&quot;!&quot;</span><span class="s1">);</span>
            <span class="s5">const </span><span class="s1">head </span><span class="s5">= </span><span class="s2">negative </span><span class="s5">? </span><span class="s0">&quot;!&quot; </span><span class="s5">: </span><span class="s0">&quot;&quot;</span><span class="s1">;</span>
            <span class="s5">const </span><span class="s1">body </span><span class="s5">= </span><span class="s2">negative </span><span class="s5">? </span><span class="s2">pattern</span><span class="s1">.</span><span class="s3">slice</span><span class="s1">(</span><span class="s7">1</span><span class="s1">) </span><span class="s5">: </span><span class="s2">pattern</span><span class="s1">;</span>

            <span class="s5">if </span><span class="s1">(</span><span class="s2">body</span><span class="s1">.</span><span class="s3">startsWith</span><span class="s1">(</span><span class="s0">&quot;/&quot;</span><span class="s1">) </span><span class="s5">|| </span><span class="s2">body</span><span class="s1">.</span><span class="s3">startsWith</span><span class="s1">(</span><span class="s0">&quot;../&quot;</span><span class="s1">)) {</span>
                <span class="s5">return </span><span class="s0">`${</span><span class="s2">head</span><span class="s0">}${</span><span class="s2">prefix</span><span class="s0">}${</span><span class="s2">body</span><span class="s0">}`</span><span class="s1">;</span>
            <span class="s1">}</span>
            <span class="s5">return </span><span class="s2">loose </span><span class="s5">? </span><span class="s2">pattern </span><span class="s5">: </span><span class="s0">`${</span><span class="s2">head</span><span class="s0">}${</span><span class="s2">prefix</span><span class="s0">}/**/${</span><span class="s2">body</span><span class="s0">}`</span><span class="s1">;</span>
        <span class="s1">});</span>
    <span class="s1">}</span>
<span class="s1">}</span>

<span class="s6">/**</span>
 <span class="s6">* </span><span class="s5">@fileoverview </span><span class="s6">`ExtractedConfig` class. 
 * 
 * `ExtractedConfig` class expresses a final configuration for a specific file. 
 * 
 * It provides one method. 
 * 
 * - `toCompatibleObjectAsConfigFileContent()` 
 *      Convert this configuration to the compatible object as the content of 
 *      config files. It converts the loaded parser and plugins to strings. 
 *      `CLIEngine#getConfigForFile(filePath)` method uses this method. 
 * 
 * `ConfigArray#extractConfig(filePath)` creates a `ExtractedConfig` instance. 
 * 
 * </span><span class="s5">@author </span><span class="s2">Toru Nagashima </span><span class="s6">&lt;</span><span class="s4">https://github.com/mysticatea</span><span class="s6">&gt;</span>
 <span class="s6">*/</span>

<span class="s6">// For VSCode intellisense</span>
<span class="s6">/** </span><span class="s5">@typedef </span><span class="s2">{import(&quot;../../shared/types&quot;).ConfigData} ConfigData </span><span class="s6">*/</span>
<span class="s6">/** </span><span class="s5">@typedef </span><span class="s2">{import(&quot;../../shared/types&quot;).GlobalConf} GlobalConf </span><span class="s6">*/</span>
<span class="s6">/** </span><span class="s5">@typedef </span><span class="s2">{import(&quot;../../shared/types&quot;).SeverityConf} SeverityConf </span><span class="s6">*/</span>
<span class="s6">/** </span><span class="s5">@typedef </span><span class="s2">{import(&quot;./config-dependency&quot;).DependentParser} DependentParser </span><span class="s6">*/</span>
<span class="s6">/** </span><span class="s5">@typedef </span><span class="s2">{import(&quot;./config-dependency&quot;).DependentPlugin} DependentPlugin </span><span class="s6">*/</span>

<span class="s6">/**</span>
 <span class="s6">* Check if `xs` starts with `ys`. 
 * </span><span class="s5">@template </span><span class="s2">T</span>
 <span class="s6">* </span><span class="s5">@param </span><span class="s2">{T[]} xs </span><span class="s6">The array to check. 
 * </span><span class="s5">@param </span><span class="s2">{T[]} ys </span><span class="s6">The array that may be the first part of `xs`. 
 * </span><span class="s5">@returns </span><span class="s2">{boolean} </span><span class="s6">`true` if `xs` starts with `ys`. 
 */</span>
<span class="s5">function </span><span class="s1">startsWith(</span><span class="s2">xs</span><span class="s1">, </span><span class="s2">ys</span><span class="s1">) {</span>
    <span class="s5">return </span><span class="s2">xs</span><span class="s1">.length </span><span class="s5">&gt;= </span><span class="s2">ys</span><span class="s1">.length </span><span class="s5">&amp;&amp; </span><span class="s2">ys</span><span class="s1">.</span><span class="s3">every</span><span class="s1">((</span><span class="s2">y</span><span class="s1">, </span><span class="s2">i</span><span class="s1">) </span><span class="s5">=&gt; </span><span class="s2">y </span><span class="s5">=== </span><span class="s2">xs</span><span class="s1">[</span><span class="s2">i</span><span class="s1">]);</span>
<span class="s1">}</span>

<span class="s6">/**</span>
 <span class="s6">* The class for extracted config data. 
 */</span>
<span class="s5">class </span><span class="s2">ExtractedConfig </span><span class="s1">{</span>
    <span class="s5">constructor</span><span class="s1">() {</span>

        <span class="s6">/**</span>
         <span class="s6">* The config name what `noInlineConfig` setting came from. 
         * </span><span class="s5">@type </span><span class="s2">{string}</span>
         <span class="s6">*/ 
        this.configNameOfNoInlineConfig = &quot;&quot;; 
</span>
        <span class="s6">/** 
         * Environments. 
         * </span><span class="s5">@type </span><span class="s2">{Record&lt;string, boolean&gt;}</span>
         <span class="s6">*/ 
        this.env = {}; 
</span>
        <span class="s6">/** 
         * Global variables. 
         * </span><span class="s5">@type </span><span class="s2">{Record&lt;string, GlobalConf&gt;}</span>
         <span class="s6">*/ 
        this.globals = {}; 
</span>
        <span class="s6">/** 
         * The glob patterns that ignore to lint. 
         * </span><span class="s5">@type </span><span class="s2">{(((filePath:string, dot?:boolean) =&gt; boolean) &amp; { basePath:string; patterns:string[] }) | undefined}</span>
         <span class="s6">*/ 
        this.ignores = void 0; 
</span>
        <span class="s6">/** 
         * The flag that disables directive comments. 
         * </span><span class="s5">@type </span><span class="s2">{boolean|undefined}</span>
         <span class="s6">*/ 
        this.noInlineConfig = void 0; 
</span>
        <span class="s6">/** 
         * Parser definition. 
         * </span><span class="s5">@type </span><span class="s2">{DependentParser|null}</span>
         <span class="s6">*/ 
        this.parser = null; 
</span>
        <span class="s6">/** 
         * Options for the parser. 
         * </span><span class="s5">@type </span><span class="s2">{Object}</span>
         <span class="s6">*/ 
        this.parserOptions = {}; 
</span>
        <span class="s6">/** 
         * Plugin definitions. 
         * </span><span class="s5">@type </span><span class="s2">{Record&lt;string, DependentPlugin&gt;}</span>
         <span class="s6">*/ 
        this.plugins = {}; 
</span>
        <span class="s6">/** 
         * Processor ID. 
         * </span><span class="s5">@type </span><span class="s2">{string|null}</span>
         <span class="s6">*/ 
        this.processor = null; 
</span>
        <span class="s6">/** 
         * The flag that reports unused `eslint-disable` directive comments. 
         * </span><span class="s5">@type </span><span class="s2">{boolean|undefined}</span>
         <span class="s6">*/ 
        this.reportUnusedDisableDirectives = void 0; 
</span>
        <span class="s6">/** 
         * Rule settings. 
         * </span><span class="s5">@type </span><span class="s2">{Record&lt;string, [SeverityConf, ...any[]]&gt;}</span>
         <span class="s6">*/ 
        this.rules = {}; 
</span>
        <span class="s6">/** 
         * Shared settings. 
         * </span><span class="s5">@type </span><span class="s2">{Object}</span>
         <span class="s6">*/ 
        this.settings = {}; 
    } 
</span>
    <span class="s6">/** 
     * Convert this config to the compatible object as a config file content. 
     * </span><span class="s5">@returns </span><span class="s2">{ConfigData} </span><span class="s6">The converted object. 
     */</span>
    <span class="s3">toCompatibleObjectAsConfigFileContent</span><span class="s1">() {</span>
        <span class="s5">const </span><span class="s1">{</span>
            <span class="s6">/* eslint-disable no-unused-vars */</span>
            <span class="s2">configNameOfNoInlineConfig</span><span class="s1">: _ignore1,</span>
            <span class="s2">processor</span><span class="s1">: _ignore2,</span>
            <span class="s6">/* eslint-enable no-unused-vars */</span>
            <span class="s1">ignores,</span>
            <span class="s5">...</span><span class="s1">config</span>
        <span class="s1">} </span><span class="s5">= </span><span class="s2">this</span><span class="s1">;</span>

        <span class="s2">config</span><span class="s1">.</span><span class="s2">parser </span><span class="s5">= </span><span class="s2">config</span><span class="s1">.</span><span class="s2">parser </span><span class="s5">&amp;&amp; </span><span class="s2">config</span><span class="s1">.</span><span class="s2">parser</span><span class="s1">.</span><span class="s2">filePath</span><span class="s1">;</span>
        <span class="s2">config</span><span class="s1">.</span><span class="s2">plugins </span><span class="s5">= </span><span class="s2">Object</span><span class="s1">.</span><span class="s3">keys</span><span class="s1">(</span><span class="s2">config</span><span class="s1">.</span><span class="s2">plugins</span><span class="s1">).</span><span class="s3">filter</span><span class="s1">(</span><span class="s2">Boolean</span><span class="s1">).</span><span class="s3">reverse</span><span class="s1">();</span>
        <span class="s2">config</span><span class="s1">.</span><span class="s2">ignorePatterns </span><span class="s5">= </span><span class="s2">ignores </span><span class="s5">? </span><span class="s2">ignores</span><span class="s1">.</span><span class="s2">patterns </span><span class="s5">: </span><span class="s1">[];</span>

        <span class="s6">// Strip the default patterns from `ignorePatterns`.</span>
        <span class="s5">if </span><span class="s1">(</span><span class="s3">startsWith</span><span class="s1">(</span><span class="s2">config</span><span class="s1">.</span><span class="s2">ignorePatterns</span><span class="s1">, </span><span class="s2">IgnorePattern</span><span class="s1">.</span><span class="s2">DefaultPatterns</span><span class="s1">)) {</span>
            <span class="s2">config</span><span class="s1">.</span><span class="s2">ignorePatterns </span><span class="s5">=</span>
                <span class="s2">config</span><span class="s1">.</span><span class="s2">ignorePatterns</span><span class="s1">.</span><span class="s3">slice</span><span class="s1">(</span><span class="s2">IgnorePattern</span><span class="s1">.</span><span class="s2">DefaultPatterns</span><span class="s1">.length);</span>
        <span class="s1">}</span>

        <span class="s5">return </span><span class="s2">config</span><span class="s1">;</span>
    <span class="s1">}</span>
<span class="s1">}</span>

<span class="s6">/**</span>
 <span class="s6">* </span><span class="s5">@fileoverview </span><span class="s6">`ConfigArray` class. 
 * 
 * `ConfigArray` class expresses the full of a configuration. It has the entry 
 * config file, base config files that were extended, loaded parsers, and loaded 
 * plugins. 
 * 
 * `ConfigArray` class provides three properties and two methods. 
 * 
 * - `pluginEnvironments` 
 * - `pluginProcessors` 
 * - `pluginRules` 
 *      The `Map` objects that contain the members of all plugins that this 
 *      config array contains. Those map objects don't have mutation methods. 
 *      Those keys are the member ID such as `pluginId/memberName`. 
 * - `isRoot()` 
 *      If `true` then this configuration has `root:true` property. 
 * - `extractConfig(filePath)` 
 *      Extract the final configuration for a given file. This means merging 
 *      every config array element which that `criteria` property matched. The 
 *      `filePath` argument must be an absolute path. 
 * 
 * `ConfigArrayFactory` provides the loading logic of config files. 
 * 
 * </span><span class="s5">@author </span><span class="s2">Toru Nagashima </span><span class="s6">&lt;</span><span class="s4">https://github.com/mysticatea</span><span class="s6">&gt;</span>
 <span class="s6">*/</span>

<span class="s6">//------------------------------------------------------------------------------</span>
<span class="s6">// Helpers</span>
<span class="s6">//------------------------------------------------------------------------------</span>

<span class="s6">// Define types for VSCode IntelliSense.</span>
<span class="s6">/** </span><span class="s5">@typedef </span><span class="s2">{import(&quot;../../shared/types&quot;).Environment} Environment </span><span class="s6">*/</span>
<span class="s6">/** </span><span class="s5">@typedef </span><span class="s2">{import(&quot;../../shared/types&quot;).GlobalConf} GlobalConf </span><span class="s6">*/</span>
<span class="s6">/** </span><span class="s5">@typedef </span><span class="s2">{import(&quot;../../shared/types&quot;).RuleConf} RuleConf </span><span class="s6">*/</span>
<span class="s6">/** </span><span class="s5">@typedef </span><span class="s2">{import(&quot;../../shared/types&quot;).Rule} Rule </span><span class="s6">*/</span>
<span class="s6">/** </span><span class="s5">@typedef </span><span class="s2">{import(&quot;../../shared/types&quot;).Plugin} Plugin </span><span class="s6">*/</span>
<span class="s6">/** </span><span class="s5">@typedef </span><span class="s2">{import(&quot;../../shared/types&quot;).Processor} Processor </span><span class="s6">*/</span>
<span class="s6">/** </span><span class="s5">@typedef </span><span class="s2">{import(&quot;./config-dependency&quot;).DependentParser} DependentParser </span><span class="s6">*/</span>
<span class="s6">/** </span><span class="s5">@typedef </span><span class="s2">{import(&quot;./config-dependency&quot;).DependentPlugin} DependentPlugin </span><span class="s6">*/</span>
<span class="s6">/** </span><span class="s5">@typedef </span><span class="s2">{import(&quot;./override-tester&quot;)[&quot;OverrideTester&quot;]} OverrideTester </span><span class="s6">*/</span>

<span class="s6">/**</span>
 <span class="s6">* </span><span class="s5">@typedef </span><span class="s2">{Object} ConfigArrayElement</span>
 <span class="s6">* </span><span class="s5">@property </span><span class="s2">{string} name </span><span class="s6">The name of this config element. 
 * </span><span class="s5">@property </span><span class="s2">{string} filePath </span><span class="s6">The path to the source file of this config element. 
 * </span><span class="s5">@property </span><span class="s2">{InstanceType&lt;OverrideTester&gt;|null} criteria </span><span class="s6">The tester for the `files` and `excludedFiles` of this config element. 
 * </span><span class="s5">@property </span><span class="s2">{Record&lt;string, boolean&gt;|undefined} env </span><span class="s6">The environment settings. 
 * </span><span class="s5">@property </span><span class="s2">{Record&lt;string, GlobalConf&gt;|undefined} globals </span><span class="s6">The global variable settings. 
 * </span><span class="s5">@property </span><span class="s2">{IgnorePattern|undefined} ignorePattern </span><span class="s6">The ignore patterns. 
 * </span><span class="s5">@property </span><span class="s2">{boolean|undefined} noInlineConfig </span><span class="s6">The flag that disables directive comments. 
 * </span><span class="s5">@property </span><span class="s2">{DependentParser|undefined} parser </span><span class="s6">The parser loader. 
 * </span><span class="s5">@property </span><span class="s2">{Object|undefined} parserOptions </span><span class="s6">The parser options. 
 * </span><span class="s5">@property </span><span class="s2">{Record&lt;string, DependentPlugin&gt;|undefined} plugins </span><span class="s6">The plugin loaders. 
 * </span><span class="s5">@property </span><span class="s2">{string|undefined} processor </span><span class="s6">The processor name to refer plugin's processor. 
 * </span><span class="s5">@property </span><span class="s2">{boolean|undefined} reportUnusedDisableDirectives </span><span class="s6">The flag to report unused `eslint-disable` comments. 
 * </span><span class="s5">@property </span><span class="s2">{boolean|undefined} root </span><span class="s6">The flag to express root. 
 * </span><span class="s5">@property </span><span class="s2">{Record&lt;string, RuleConf&gt;|undefined} rules </span><span class="s6">The rule settings 
 * </span><span class="s5">@property </span><span class="s2">{Object|undefined} settings </span><span class="s6">The shared settings. 
 * </span><span class="s5">@property </span><span class="s2">{&quot;config&quot; | &quot;ignore&quot; | &quot;implicit-processor&quot;} type </span><span class="s6">The element type. 
 */</span>

<span class="s6">/**</span>
 <span class="s6">* </span><span class="s5">@typedef </span><span class="s2">{Object} ConfigArrayInternalSlots</span>
 <span class="s6">* </span><span class="s5">@property </span><span class="s2">{Map&lt;string, ExtractedConfig&gt;} cache </span><span class="s6">The cache to extract configs. 
 * </span><span class="s5">@property </span><span class="s2">{ReadonlyMap&lt;string, Environment&gt;|null} envMap </span><span class="s6">The map from environment ID to environment definition. 
 * </span><span class="s5">@property </span><span class="s2">{ReadonlyMap&lt;string, Processor&gt;|null} processorMap </span><span class="s6">The map from processor ID to environment definition. 
 * </span><span class="s5">@property </span><span class="s2">{ReadonlyMap&lt;string, Rule&gt;|null} ruleMap </span><span class="s6">The map from rule ID to rule definition. 
 */</span>

<span class="s6">/** </span><span class="s5">@type </span><span class="s2">{WeakMap&lt;ConfigArray, ConfigArrayInternalSlots&gt;} </span><span class="s6">*/</span>
<span class="s2">const </span><span class="s1">internalSlotsMap$2 </span><span class="s5">= new class extends </span><span class="s2">WeakMap </span><span class="s1">{</span>
    <span class="s1">get(</span><span class="s2">key</span><span class="s1">) {</span>
        <span class="s5">let </span><span class="s1">value </span><span class="s5">= </span><span class="s2">super</span><span class="s1">.</span><span class="s3">get</span><span class="s1">(</span><span class="s2">key</span><span class="s1">);</span>

        <span class="s5">if </span><span class="s1">(</span><span class="s5">!</span><span class="s2">value</span><span class="s1">) {</span>
            <span class="s2">value </span><span class="s5">= </span><span class="s1">{</span>
                <span class="s1">cache: </span><span class="s5">new </span><span class="s3">Map</span><span class="s1">(),</span>
                <span class="s1">envMap: </span><span class="s4">null</span><span class="s1">,</span>
                <span class="s1">processorMap: </span><span class="s4">null</span><span class="s1">,</span>
                <span class="s1">ruleMap: </span><span class="s4">null</span>
            <span class="s1">};</span>
            <span class="s2">super</span><span class="s1">.</span><span class="s3">set</span><span class="s1">(</span><span class="s2">key</span><span class="s1">, </span><span class="s2">value</span><span class="s1">);</span>
        <span class="s1">}</span>

        <span class="s5">return </span><span class="s2">value</span><span class="s1">;</span>
    <span class="s1">}</span>
<span class="s1">}();</span>

<span class="s6">/**</span>
 <span class="s6">* Get the indices which are matched to a given file. 
 * </span><span class="s5">@param </span><span class="s2">{ConfigArrayElement[]} elements </span><span class="s6">The elements. 
 * </span><span class="s5">@param </span><span class="s2">{string} filePath </span><span class="s6">The path to a target file. 
 * </span><span class="s5">@returns </span><span class="s2">{number[]} </span><span class="s6">The indices. 
 */</span>
<span class="s5">function </span><span class="s1">getMatchedIndices(</span><span class="s2">elements</span><span class="s1">, </span><span class="s2">filePath</span><span class="s1">) {</span>
    <span class="s5">const </span><span class="s1">indices </span><span class="s5">= </span><span class="s1">[];</span>

    <span class="s5">for </span><span class="s1">(</span><span class="s5">let </span><span class="s1">i </span><span class="s5">= </span><span class="s2">elements</span><span class="s1">.length </span><span class="s5">- </span><span class="s7">1</span><span class="s1">; </span><span class="s2">i </span><span class="s5">&gt;= </span><span class="s7">0</span><span class="s1">; </span><span class="s5">--</span><span class="s2">i</span><span class="s1">) {</span>
        <span class="s5">const </span><span class="s1">element </span><span class="s5">= </span><span class="s2">elements</span><span class="s1">[</span><span class="s2">i</span><span class="s1">];</span>

        <span class="s5">if </span><span class="s1">(</span><span class="s5">!</span><span class="s2">element</span><span class="s1">.</span><span class="s2">criteria </span><span class="s5">|| </span><span class="s1">(</span><span class="s2">filePath </span><span class="s5">&amp;&amp; </span><span class="s2">element</span><span class="s1">.</span><span class="s2">criteria</span><span class="s1">.</span><span class="s3">test</span><span class="s1">(</span><span class="s2">filePath</span><span class="s1">))) {</span>
            <span class="s2">indices</span><span class="s1">.</span><span class="s3">push</span><span class="s1">(</span><span class="s2">i</span><span class="s1">);</span>
        <span class="s1">}</span>
    <span class="s1">}</span>

    <span class="s5">return </span><span class="s2">indices</span><span class="s1">;</span>
<span class="s1">}</span>

<span class="s6">/**</span>
 <span class="s6">* Check if a value is a non-null object. 
 * </span><span class="s5">@param </span><span class="s2">{any} x </span><span class="s6">The value to check. 
 * </span><span class="s5">@returns </span><span class="s2">{boolean} </span><span class="s6">`true` if the value is a non-null object. 
 */</span>
<span class="s5">function </span><span class="s1">isNonNullObject(</span><span class="s2">x</span><span class="s1">) {</span>
    <span class="s5">return typeof </span><span class="s2">x </span><span class="s5">=== </span><span class="s0">&quot;object&quot; </span><span class="s5">&amp;&amp; </span><span class="s2">x </span><span class="s5">!== </span><span class="s4">null</span><span class="s1">;</span>
<span class="s1">}</span>

<span class="s6">/**</span>
 <span class="s6">* Merge two objects. 
 * 
 * Assign every property values of `y` to `x` if `x` doesn't have the property. 
 * If `x`'s property value is an object, it does recursive. 
 * </span><span class="s5">@param </span><span class="s2">{Object} target </span><span class="s6">The destination to merge 
 * </span><span class="s5">@param </span><span class="s2">{Object|undefined} source </span><span class="s6">The source to merge. 
 * </span><span class="s5">@returns </span><span class="s2">{void}</span>
 <span class="s6">*/ 
function mergeWithoutOverwrite(target, source) { 
    if (!isNonNullObject(source)) { 
        return; 
    } 
</span>
    <span class="s6">for (const key of Object.keys(source)) { 
        if (key === &quot;__proto__&quot;) { 
            continue; 
        } 
</span>
        <span class="s6">if (isNonNullObject(target[key])) { 
            mergeWithoutOverwrite(target[key], source[key]); 
        } else if (target[key] === void 0) { 
            if (isNonNullObject(source[key])) { 
                target[key] = Array.isArray(source[key]) ? [] : {}; 
                mergeWithoutOverwrite(target[key], source[key]); 
            } else if (source[key] !== void 0) { 
                target[key] = source[key]; 
            } 
        } 
    } 
} 
</span>
<span class="s6">/** 
 * The error for plugin conflicts. 
 */</span>
<span class="s5">class </span><span class="s2">PluginConflictError </span><span class="s5">extends </span><span class="s2">Error </span><span class="s1">{</span>

    <span class="s6">/**</span>
     <span class="s6">* Initialize this error object. 
     * </span><span class="s5">@param </span><span class="s2">{string} pluginId </span><span class="s6">The plugin ID. 
     * </span><span class="s5">@param </span><span class="s2">{{filePath:string, importerName:string}[]} plugins </span><span class="s6">The resolved plugins. 
     */</span>
    <span class="s5">constructor</span><span class="s1">(</span><span class="s2">pluginId</span><span class="s1">, </span><span class="s2">plugins</span><span class="s1">) {</span>
        <span class="s2">super</span><span class="s1">(</span><span class="s0">`Plugin &quot;${</span><span class="s2">pluginId</span><span class="s0">}&quot; was conflicted between ${</span><span class="s2">plugins</span><span class="s0">.</span><span class="s3">map</span><span class="s0">(</span><span class="s2">p </span><span class="s5">=&gt; </span><span class="s0">`&quot;${</span><span class="s2">p</span><span class="s0">.</span><span class="s2">importerName</span><span class="s0">}&quot;`).</span><span class="s3">join</span><span class="s0">(&quot; and &quot;)}.`</span><span class="s1">);</span>
        <span class="s2">this</span><span class="s1">.</span><span class="s2">messageTemplate </span><span class="s5">= </span><span class="s0">&quot;plugin-conflict&quot;</span><span class="s1">;</span>
        <span class="s2">this</span><span class="s1">.</span><span class="s2">messageData </span><span class="s5">= </span><span class="s1">{ </span><span class="s2">pluginId</span><span class="s1">, </span><span class="s2">plugins </span><span class="s1">};</span>
    <span class="s1">}</span>
<span class="s1">}</span>

<span class="s6">/**</span>
 <span class="s6">* Merge plugins. 
 * `target`'s definition is prior to `source`'s. 
 * </span><span class="s5">@param </span><span class="s2">{Record&lt;string, DependentPlugin&gt;} target </span><span class="s6">The destination to merge 
 * </span><span class="s5">@param </span><span class="s2">{Record&lt;string, DependentPlugin&gt;|undefined} source </span><span class="s6">The source to merge. 
 * </span><span class="s5">@returns </span><span class="s2">{void}</span>
 <span class="s6">*/ 
function mergePlugins(target, source) { 
    if (!isNonNullObject(source)) { 
        return; 
    } 
</span>
    <span class="s6">for (const key of Object.keys(source)) { 
        if (key === &quot;__proto__&quot;) { 
            continue; 
        } 
        const targetValue = target[key]; 
        const sourceValue = source[key]; 
</span>
        <span class="s6">// Adopt the plugin which was found at first. 
        if (targetValue === void 0) { 
            if (sourceValue.error) { 
                throw sourceValue.error; 
            } 
            target[key] = sourceValue; 
        } else if (sourceValue.filePath !== targetValue.filePath) { 
            throw new PluginConflictError(key, [ 
                { 
                    filePath: targetValue.filePath, 
                    importerName: targetValue.importerName 
                }, 
                { 
                    filePath: sourceValue.filePath, 
                    importerName: sourceValue.importerName 
                } 
            ]); 
        } 
    } 
} 
</span>
<span class="s6">/** 
 * Merge rule configs. 
 * `target`'s definition is prior to `source`'s. 
 * </span><span class="s5">@param </span><span class="s2">{Record&lt;string, Array&gt;} target </span><span class="s6">The destination to merge 
 * </span><span class="s5">@param </span><span class="s2">{Record&lt;string, RuleConf&gt;|undefined} source </span><span class="s6">The source to merge. 
 * </span><span class="s5">@returns </span><span class="s2">{void}</span>
 <span class="s6">*/ 
function mergeRuleConfigs(target, source) { 
    if (!isNonNullObject(source)) { 
        return; 
    } 
</span>
    <span class="s6">for (const key of Object.keys(source)) { 
        if (key === &quot;__proto__&quot;) { 
            continue; 
        } 
        const targetDef = target[key]; 
        const sourceDef = source[key]; 
</span>
        <span class="s6">// Adopt the rule config which was found at first. 
        if (targetDef === void 0) { 
            if (Array.isArray(sourceDef)) { 
                target[key] = [...sourceDef]; 
            } else { 
                target[key] = [sourceDef]; 
            } 
</span>
        <span class="s6">/* 
         * If the first found rule config is severity only and the current rule 
         * config has options, merge the severity and the options. 
         */</span>
        <span class="s1">} </span><span class="s2">else </span><span class="s1">if (</span>
            <span class="s1">targetDef.length === 1 &amp;&amp; 
            Array.isArray(</span><span class="s2">sourceDef</span><span class="s1">) &amp;&amp;</span>
            <span class="s2">sourceDef</span><span class="s1">.length </span><span class="s5">&gt;= </span><span class="s7">2</span>
        <span class="s1">) {</span>
            <span class="s2">targetDef</span><span class="s1">.</span><span class="s3">push</span><span class="s1">(</span><span class="s5">...</span><span class="s2">sourceDef</span><span class="s1">.</span><span class="s3">slice</span><span class="s1">(</span><span class="s7">1</span><span class="s1">));</span>
        <span class="s1">}</span>
    <span class="s1">}</span>
<span class="s1">} 
</span>
<span class="s6">/**</span>
 <span class="s6">* Create the extracted config. 
 * </span><span class="s5">@param </span><span class="s2">{ConfigArray} instance </span><span class="s6">The config elements. 
 * </span><span class="s5">@param </span><span class="s2">{number[]} indices </span><span class="s6">The indices to use. 
 * </span><span class="s5">@returns </span><span class="s2">{ExtractedConfig} </span><span class="s6">The extracted config. 
 */</span>
<span class="s5">function </span><span class="s1">createConfig(</span><span class="s2">instance</span><span class="s1">, </span><span class="s2">indices</span><span class="s1">) {</span>
    <span class="s5">const </span><span class="s1">config </span><span class="s5">= new </span><span class="s3">ExtractedConfig</span><span class="s1">();</span>
    <span class="s5">const </span><span class="s1">ignorePatterns </span><span class="s5">= </span><span class="s1">[];</span>

    <span class="s6">// Merge elements.</span>
    <span class="s5">for </span><span class="s1">(</span><span class="s5">const </span><span class="s1">index </span><span class="s5">of </span><span class="s2">indices</span><span class="s1">) {</span>
        <span class="s5">const </span><span class="s1">element </span><span class="s5">= </span><span class="s2">instance</span><span class="s1">[</span><span class="s2">index</span><span class="s1">];</span>

        <span class="s6">// Adopt the parser which was found at first.</span>
        <span class="s5">if </span><span class="s1">(</span><span class="s5">!</span><span class="s2">config</span><span class="s1">.</span><span class="s2">parser </span><span class="s5">&amp;&amp; </span><span class="s2">element</span><span class="s1">.</span><span class="s2">parser</span><span class="s1">) {</span>
            <span class="s5">if </span><span class="s1">(</span><span class="s2">element</span><span class="s1">.</span><span class="s2">parser</span><span class="s1">.</span><span class="s2">error</span><span class="s1">) {</span>
                <span class="s5">throw </span><span class="s2">element</span><span class="s1">.</span><span class="s2">parser</span><span class="s1">.</span><span class="s2">error</span><span class="s1">;</span>
            <span class="s1">}</span>
            <span class="s2">config</span><span class="s1">.</span><span class="s2">parser </span><span class="s5">= </span><span class="s2">element</span><span class="s1">.</span><span class="s2">parser</span><span class="s1">;</span>
        <span class="s1">}</span>

        <span class="s6">// Adopt the processor which was found at first.</span>
        <span class="s5">if </span><span class="s1">(</span><span class="s5">!</span><span class="s2">config</span><span class="s1">.</span><span class="s2">processor </span><span class="s5">&amp;&amp; </span><span class="s2">element</span><span class="s1">.</span><span class="s2">processor</span><span class="s1">) {</span>
            <span class="s2">config</span><span class="s1">.</span><span class="s2">processor </span><span class="s5">= </span><span class="s2">element</span><span class="s1">.</span><span class="s2">processor</span><span class="s1">;</span>
        <span class="s1">}</span>

        <span class="s6">// Adopt the noInlineConfig which was found at first.</span>
        <span class="s5">if </span><span class="s1">(</span><span class="s2">config</span><span class="s1">.</span><span class="s2">noInlineConfig </span><span class="s5">=== void </span><span class="s7">0 </span><span class="s5">&amp;&amp; </span><span class="s2">element</span><span class="s1">.</span><span class="s2">noInlineConfig </span><span class="s5">!== void </span><span class="s7">0</span><span class="s1">) {</span>
            <span class="s2">config</span><span class="s1">.</span><span class="s2">noInlineConfig </span><span class="s5">= </span><span class="s2">element</span><span class="s1">.</span><span class="s2">noInlineConfig</span><span class="s1">;</span>
            <span class="s2">config</span><span class="s1">.</span><span class="s2">configNameOfNoInlineConfig </span><span class="s5">= </span><span class="s2">element</span><span class="s1">.</span><span class="s2">name</span><span class="s1">;</span>
        <span class="s1">}</span>

        <span class="s6">// Adopt the reportUnusedDisableDirectives which was found at first.</span>
        <span class="s5">if </span><span class="s1">(</span><span class="s2">config</span><span class="s1">.</span><span class="s2">reportUnusedDisableDirectives </span><span class="s5">=== void </span><span class="s7">0 </span><span class="s5">&amp;&amp; </span><span class="s2">element</span><span class="s1">.</span><span class="s2">reportUnusedDisableDirectives </span><span class="s5">!== void </span><span class="s7">0</span><span class="s1">) {</span>
            <span class="s2">config</span><span class="s1">.</span><span class="s2">reportUnusedDisableDirectives </span><span class="s5">= </span><span class="s2">element</span><span class="s1">.</span><span class="s2">reportUnusedDisableDirectives</span><span class="s1">;</span>
        <span class="s1">}</span>

        <span class="s6">// Collect ignorePatterns</span>
        <span class="s5">if </span><span class="s1">(</span><span class="s2">element</span><span class="s1">.</span><span class="s2">ignorePattern</span><span class="s1">) {</span>
            <span class="s2">ignorePatterns</span><span class="s1">.</span><span class="s3">push</span><span class="s1">(</span><span class="s2">element</span><span class="s1">.</span><span class="s2">ignorePattern</span><span class="s1">);</span>
        <span class="s1">}</span>

        <span class="s6">// Merge others.</span>
        <span class="s3">mergeWithoutOverwrite</span><span class="s1">(</span><span class="s2">config</span><span class="s1">.</span><span class="s2">env</span><span class="s1">, </span><span class="s2">element</span><span class="s1">.</span><span class="s2">env</span><span class="s1">);</span>
        <span class="s3">mergeWithoutOverwrite</span><span class="s1">(</span><span class="s2">config</span><span class="s1">.</span><span class="s2">globals</span><span class="s1">, </span><span class="s2">element</span><span class="s1">.</span><span class="s2">globals</span><span class="s1">);</span>
        <span class="s3">mergeWithoutOverwrite</span><span class="s1">(</span><span class="s2">config</span><span class="s1">.</span><span class="s2">parserOptions</span><span class="s1">, </span><span class="s2">element</span><span class="s1">.</span><span class="s2">parserOptions</span><span class="s1">);</span>
        <span class="s3">mergeWithoutOverwrite</span><span class="s1">(</span><span class="s2">config</span><span class="s1">.</span><span class="s2">settings</span><span class="s1">, </span><span class="s2">element</span><span class="s1">.</span><span class="s2">settings</span><span class="s1">);</span>
        <span class="s3">mergePlugins</span><span class="s1">(</span><span class="s2">config</span><span class="s1">.</span><span class="s2">plugins</span><span class="s1">, </span><span class="s2">element</span><span class="s1">.</span><span class="s2">plugins</span><span class="s1">);</span>
        <span class="s3">mergeRuleConfigs</span><span class="s1">(</span><span class="s2">config</span><span class="s1">.</span><span class="s2">rules</span><span class="s1">, </span><span class="s2">element</span><span class="s1">.</span><span class="s2">rules</span><span class="s1">);</span>
    <span class="s1">}</span>

    <span class="s6">// Create the predicate function for ignore patterns.</span>
    <span class="s5">if </span><span class="s1">(</span><span class="s2">ignorePatterns</span><span class="s1">.length </span><span class="s5">&gt; </span><span class="s7">0</span><span class="s1">) {</span>
        <span class="s2">config</span><span class="s1">.</span><span class="s2">ignores </span><span class="s5">= </span><span class="s2">IgnorePattern</span><span class="s1">.</span><span class="s3">createIgnore</span><span class="s1">(</span><span class="s2">ignorePatterns</span><span class="s1">.</span><span class="s3">reverse</span><span class="s1">());</span>
    <span class="s1">}</span>

    <span class="s5">return </span><span class="s2">config</span><span class="s1">;</span>
<span class="s1">}</span>

<span class="s6">/**</span>
 <span class="s6">* Collect definitions. 
 * </span><span class="s5">@template </span><span class="s2">T, U</span>
 <span class="s6">* </span><span class="s5">@param </span><span class="s2">{string} pluginId </span><span class="s6">The plugin ID for prefix. 
 * </span><span class="s5">@param </span><span class="s2">{Record&lt;string,T&gt;} defs </span><span class="s6">The definitions to collect. 
 * </span><span class="s5">@param </span><span class="s2">{Map&lt;string, U&gt;} map </span><span class="s6">The map to output. 
 * </span><span class="s5">@param </span><span class="s2">{function(T): U} [normalize] </span><span class="s6">The normalize function for each value. 
 * </span><span class="s5">@returns </span><span class="s2">{void}</span>
 <span class="s6">*/ 
function collect(pluginId, defs, map, normalize) { 
    if (defs) { 
        const prefix = pluginId &amp;&amp; `${pluginId}/`; 
</span>
        <span class="s6">for (const [key, value] of Object.entries(defs)) { 
            map.set( 
                `${prefix}${key}`, 
                normalize ? normalize(value) : value 
            ); 
        } 
    } 
} 
</span>
<span class="s6">/** 
 * Normalize a rule definition. 
 * </span><span class="s5">@param </span><span class="s2">{Function|Rule} rule </span><span class="s6">The rule definition to normalize. 
 * </span><span class="s5">@returns </span><span class="s2">{Rule} </span><span class="s6">The normalized rule definition. 
 */</span>
<span class="s5">function </span><span class="s1">normalizePluginRule(</span><span class="s2">rule</span><span class="s1">) {</span>
    <span class="s5">return typeof </span><span class="s2">rule </span><span class="s5">=== </span><span class="s0">&quot;function&quot; </span><span class="s5">? </span><span class="s1">{ create: </span><span class="s2">rule </span><span class="s1">} </span><span class="s5">: </span><span class="s2">rule</span><span class="s1">;</span>
<span class="s1">}</span>

<span class="s6">/**</span>
 <span class="s6">* Delete the mutation methods from a given map. 
 * </span><span class="s5">@param </span><span class="s2">{Map&lt;any, any&gt;} map </span><span class="s6">The map object to delete. 
 * </span><span class="s5">@returns </span><span class="s2">{void}</span>
 <span class="s6">*/ 
function deleteMutationMethods(map) { 
    Object.defineProperties(map, { 
        clear: { configurable: true, value: void 0 }, 
        delete: { configurable: true, value: void 0 }, 
        set: { configurable: true, value: void 0 } 
    }); 
} 
</span>
<span class="s6">/** 
 * Create `envMap`, `processorMap`, `ruleMap` with the plugins in the config array. 
 * </span><span class="s5">@param </span><span class="s2">{ConfigArrayElement[]} elements </span><span class="s6">The config elements. 
 * </span><span class="s5">@param </span><span class="s2">{ConfigArrayInternalSlots} slots </span><span class="s6">The internal slots. 
 * </span><span class="s5">@returns </span><span class="s2">{void}</span>
 <span class="s6">*/ 
function initPluginMemberMaps(elements, slots) { 
    const processed = new Set(); 
</span>
    <span class="s6">slots.envMap = new Map(); 
    slots.processorMap = new Map(); 
    slots.ruleMap = new Map(); 
</span>
    <span class="s6">for (const element of elements) { 
        if (!element.plugins) { 
            continue; 
        } 
</span>
        <span class="s6">for (const [pluginId, value] of Object.entries(element.plugins)) { 
            const plugin = value.definition; 
</span>
            <span class="s6">if (!plugin || processed.has(pluginId)) { 
                continue; 
            } 
            processed.add(pluginId); 
</span>
            <span class="s6">collect(pluginId, plugin.environments, slots.envMap); 
            collect(pluginId, plugin.processors, slots.processorMap); 
            collect(pluginId, plugin.rules, slots.ruleMap, normalizePluginRule); 
        } 
    } 
</span>
    <span class="s6">deleteMutationMethods(slots.envMap); 
    deleteMutationMethods(slots.processorMap); 
    deleteMutationMethods(slots.ruleMap); 
} 
</span>
<span class="s6">/** 
 * Create `envMap`, `processorMap`, `ruleMap` with the plugins in the config array. 
 * </span><span class="s5">@param </span><span class="s2">{ConfigArray} instance </span><span class="s6">The config elements. 
 * </span><span class="s5">@returns </span><span class="s2">{ConfigArrayInternalSlots} </span><span class="s6">The extracted config. 
 */</span>
<span class="s5">function </span><span class="s1">ensurePluginMemberMaps(</span><span class="s2">instance</span><span class="s1">) {</span>
    <span class="s5">const </span><span class="s1">slots </span><span class="s5">= </span><span class="s2">internalSlotsMap$2</span><span class="s1">.</span><span class="s3">get</span><span class="s1">(</span><span class="s2">instance</span><span class="s1">);</span>

    <span class="s5">if </span><span class="s1">(</span><span class="s5">!</span><span class="s2">slots</span><span class="s1">.</span><span class="s2">ruleMap</span><span class="s1">) {</span>
        <span class="s3">initPluginMemberMaps</span><span class="s1">(</span><span class="s2">instance</span><span class="s1">, </span><span class="s2">slots</span><span class="s1">);</span>
    <span class="s1">}</span>

    <span class="s5">return </span><span class="s2">slots</span><span class="s1">;</span>
<span class="s1">}</span>

<span class="s6">//------------------------------------------------------------------------------</span>
<span class="s6">// Public Interface</span>
<span class="s6">//------------------------------------------------------------------------------</span>

<span class="s6">/**</span>
 <span class="s6">* The Config Array. 
 * 
 * `ConfigArray` instance contains all settings, parsers, and plugins. 
 * You need to call `ConfigArray#extractConfig(filePath)` method in order to 
 * extract, merge and get only the config data which is related to an arbitrary 
 * file. 
 * </span><span class="s5">@extends </span><span class="s2">{Array&lt;ConfigArrayElement&gt;}</span>
 <span class="s6">*/ 
class ConfigArray extends Array { 
</span>
    <span class="s6">/** 
     * Get the plugin environments. 
     * The returned map cannot be mutated. 
     * </span><span class="s5">@type </span><span class="s2">{ReadonlyMap&lt;string, Environment&gt;} </span><span class="s6">The plugin environments. 
     */</span>
    <span class="s2">get </span><span class="s3">pluginEnvironments</span><span class="s1">() {</span>
        <span class="s5">return </span><span class="s3">ensurePluginMemberMaps</span><span class="s1">(</span><span class="s2">this</span><span class="s1">).</span><span class="s2">envMap</span><span class="s1">;</span>
    <span class="s1">}</span>

    <span class="s6">/**</span>
     <span class="s6">* Get the plugin processors. 
     * The returned map cannot be mutated. 
     * </span><span class="s5">@type </span><span class="s2">{ReadonlyMap&lt;string, Processor&gt;} </span><span class="s6">The plugin processors. 
     */</span>
    <span class="s2">get </span><span class="s3">pluginProcessors</span><span class="s1">() {</span>
        <span class="s5">return </span><span class="s3">ensurePluginMemberMaps</span><span class="s1">(</span><span class="s2">this</span><span class="s1">).</span><span class="s2">processorMap</span><span class="s1">;</span>
    <span class="s1">}</span>

    <span class="s6">/**</span>
     <span class="s6">* Get the plugin rules. 
     * The returned map cannot be mutated. 
     * </span><span class="s5">@returns </span><span class="s2">{ReadonlyMap&lt;string, Rule&gt;} </span><span class="s6">The plugin rules. 
     */</span>
    <span class="s2">get </span><span class="s3">pluginRules</span><span class="s1">() {</span>
        <span class="s5">return </span><span class="s3">ensurePluginMemberMaps</span><span class="s1">(</span><span class="s2">this</span><span class="s1">).</span><span class="s2">ruleMap</span><span class="s1">;</span>
    <span class="s1">}</span>

    <span class="s6">/**</span>
     <span class="s6">* Check if this config has `root` flag. 
     * </span><span class="s5">@returns </span><span class="s2">{boolean} </span><span class="s6">`true` if this config array is root. 
     */</span>
    <span class="s3">isRoot</span><span class="s1">() {</span>
        <span class="s5">for </span><span class="s1">(</span><span class="s5">let </span><span class="s1">i </span><span class="s5">= </span><span class="s2">this</span><span class="s1">.length </span><span class="s5">- </span><span class="s7">1</span><span class="s1">; </span><span class="s2">i </span><span class="s5">&gt;= </span><span class="s7">0</span><span class="s1">; </span><span class="s5">--</span><span class="s2">i</span><span class="s1">) {</span>
            <span class="s5">const </span><span class="s1">root </span><span class="s5">= </span><span class="s2">this</span><span class="s1">[</span><span class="s2">i</span><span class="s1">].</span><span class="s2">root</span><span class="s1">;</span>

            <span class="s5">if </span><span class="s1">(</span><span class="s5">typeof </span><span class="s2">root </span><span class="s5">=== </span><span class="s0">&quot;boolean&quot;</span><span class="s1">) {</span>
                <span class="s5">return </span><span class="s2">root</span><span class="s1">;</span>
            <span class="s1">}</span>
        <span class="s1">}</span>
        <span class="s5">return </span><span class="s4">false</span><span class="s1">;</span>
    <span class="s1">}</span>

    <span class="s6">/**</span>
     <span class="s6">* Extract the config data which is related to a given file. 
     * </span><span class="s5">@param </span><span class="s2">{string} filePath </span><span class="s6">The absolute path to the target file. 
     * </span><span class="s5">@returns </span><span class="s2">{ExtractedConfig} </span><span class="s6">The extracted config data. 
     */</span>
    <span class="s3">extractConfig</span><span class="s1">(</span><span class="s2">filePath</span><span class="s1">) {</span>
        <span class="s5">const </span><span class="s1">{ cache } </span><span class="s5">= </span><span class="s2">internalSlotsMap$2</span><span class="s1">.</span><span class="s3">get</span><span class="s1">(</span><span class="s2">this</span><span class="s1">);</span>
        <span class="s5">const </span><span class="s1">indices </span><span class="s5">= </span><span class="s3">getMatchedIndices</span><span class="s1">(</span><span class="s2">this</span><span class="s1">, </span><span class="s2">filePath</span><span class="s1">);</span>
        <span class="s5">const </span><span class="s1">cacheKey </span><span class="s5">= </span><span class="s2">indices</span><span class="s1">.</span><span class="s3">join</span><span class="s1">(</span><span class="s0">&quot;,&quot;</span><span class="s1">);</span>

        <span class="s5">if </span><span class="s1">(</span><span class="s5">!</span><span class="s2">cache</span><span class="s1">.</span><span class="s3">has</span><span class="s1">(</span><span class="s2">cacheKey</span><span class="s1">)) {</span>
            <span class="s2">cache</span><span class="s1">.</span><span class="s3">set</span><span class="s1">(</span><span class="s2">cacheKey</span><span class="s1">, </span><span class="s3">createConfig</span><span class="s1">(</span><span class="s2">this</span><span class="s1">, </span><span class="s2">indices</span><span class="s1">));</span>
        <span class="s1">}</span>

        <span class="s5">return </span><span class="s2">cache</span><span class="s1">.</span><span class="s3">get</span><span class="s1">(</span><span class="s2">cacheKey</span><span class="s1">);</span>
    <span class="s1">}</span>

    <span class="s6">/**</span>
     <span class="s6">* Check if a given path is an additional lint target. 
     * </span><span class="s5">@param </span><span class="s2">{string} filePath </span><span class="s6">The absolute path to the target file. 
     * </span><span class="s5">@returns </span><span class="s2">{boolean} </span><span class="s6">`true` if the file is an additional lint target. 
     */</span>
    <span class="s3">isAdditionalTargetPath</span><span class="s1">(</span><span class="s2">filePath</span><span class="s1">) {</span>
        <span class="s5">for </span><span class="s1">(</span><span class="s5">const </span><span class="s1">{ criteria, type } </span><span class="s5">of </span><span class="s2">this</span><span class="s1">) {</span>
            <span class="s5">if </span><span class="s1">(</span>
                <span class="s2">type </span><span class="s5">=== </span><span class="s0">&quot;config&quot; </span><span class="s5">&amp;&amp;</span>
                <span class="s2">criteria </span><span class="s5">&amp;&amp;</span>
                <span class="s5">!</span><span class="s2">criteria</span><span class="s1">.</span><span class="s2">endsWithWildcard </span><span class="s5">&amp;&amp;</span>
                <span class="s2">criteria</span><span class="s1">.</span><span class="s3">test</span><span class="s1">(</span><span class="s2">filePath</span><span class="s1">)</span>
            <span class="s1">) {</span>
                <span class="s5">return </span><span class="s4">true</span><span class="s1">;</span>
            <span class="s1">}</span>
        <span class="s1">}</span>
        <span class="s5">return </span><span class="s4">false</span><span class="s1">;</span>
    <span class="s1">}</span>
<span class="s1">} 
</span>
<span class="s6">/**</span>
 <span class="s6">* Get the used extracted configs. 
 * CLIEngine will use this method to collect used deprecated rules. 
 * </span><span class="s5">@param </span><span class="s2">{ConfigArray} instance </span><span class="s6">The config array object to get. 
 * </span><span class="s5">@returns </span><span class="s2">{ExtractedConfig[]} </span><span class="s6">The used extracted configs. 
 * </span><span class="s5">@private</span>
 <span class="s6">*/</span>
<span class="s5">function </span><span class="s1">getUsedExtractedConfigs(</span><span class="s2">instance</span><span class="s1">) {</span>
    <span class="s5">const </span><span class="s1">{ cache } </span><span class="s5">= </span><span class="s2">internalSlotsMap$2</span><span class="s1">.</span><span class="s3">get</span><span class="s1">(</span><span class="s2">instance</span><span class="s1">);</span>

    <span class="s5">return </span><span class="s2">Array</span><span class="s1">.</span><span class="s3">from</span><span class="s1">(</span><span class="s2">cache</span><span class="s1">.</span><span class="s3">values</span><span class="s1">());</span>
<span class="s1">}</span>

<span class="s6">/**</span>
 <span class="s6">* </span><span class="s5">@fileoverview </span><span class="s6">`ConfigDependency` class. 
 * 
 * `ConfigDependency` class expresses a loaded parser or plugin. 
 * 
 * If the parser or plugin was loaded successfully, it has `definition` property 
 * and `filePath` property. Otherwise, it has `error` property. 
 * 
 * When `JSON.stringify()` converted a `ConfigDependency` object to a JSON, it 
 * omits `definition` property. 
 * 
 * `ConfigArrayFactory` creates `ConfigDependency` objects when it loads parsers 
 * or plugins. 
 * 
 * </span><span class="s5">@author </span><span class="s2">Toru Nagashima </span><span class="s6">&lt;</span><span class="s4">https://github.com/mysticatea</span><span class="s6">&gt;</span>
 <span class="s6">*/</span>

<span class="s6">/**</span>
 <span class="s6">* The class is to store parsers or plugins. 
 * This class hides the loaded object from `JSON.stringify()` and `console.log`. 
 * </span><span class="s5">@template </span><span class="s2">T</span>
 <span class="s6">*/</span>
<span class="s5">class </span><span class="s2">ConfigDependency </span><span class="s1">{</span>

    <span class="s6">/**</span>
     <span class="s6">* Initialize this instance. 
     * </span><span class="s5">@param </span><span class="s2">{Object} data </span><span class="s6">The dependency data. 
     * </span><span class="s5">@param </span><span class="s2">{T} [data.definition] </span><span class="s6">The dependency if the loading succeeded. 
     * </span><span class="s5">@param </span><span class="s2">{Error} [data.error] </span><span class="s6">The error object if the loading failed. 
     * </span><span class="s5">@param </span><span class="s2">{string} [data.filePath] </span><span class="s6">The actual path to the dependency if the loading succeeded. 
     * </span><span class="s5">@param </span><span class="s2">{string} data.id </span><span class="s6">The ID of this dependency. 
     * </span><span class="s5">@param </span><span class="s2">{string} data.importerName </span><span class="s6">The name of the config file which loads this dependency. 
     * </span><span class="s5">@param </span><span class="s2">{string} data.importerPath </span><span class="s6">The path to the config file which loads this dependency. 
     */</span>
    <span class="s5">constructor</span><span class="s1">({</span>
        <span class="s2">definition </span><span class="s5">= </span><span class="s4">null</span><span class="s1">,</span>
        <span class="s2">error </span><span class="s5">= </span><span class="s4">null</span><span class="s1">,</span>
        <span class="s2">filePath </span><span class="s5">= </span><span class="s4">null</span><span class="s1">,</span>
        <span class="s2">id</span><span class="s1">,</span>
        <span class="s2">importerName</span><span class="s1">,</span>
        <span class="s2">importerPath</span>
    <span class="s1">}) {</span>

        <span class="s6">/**</span>
         <span class="s6">* The loaded dependency if the loading succeeded. 
         * </span><span class="s5">@type </span><span class="s2">{T|null}</span>
         <span class="s6">*/ 
        this.definition = definition; 
</span>
        <span class="s6">/** 
         * The error object if the loading failed. 
         * </span><span class="s5">@type </span><span class="s2">{Error|null}</span>
         <span class="s6">*/ 
        this.error = error; 
</span>
        <span class="s6">/** 
         * The loaded dependency if the loading succeeded. 
         * </span><span class="s5">@type </span><span class="s2">{string|null}</span>
         <span class="s6">*/ 
        this.filePath = filePath; 
</span>
        <span class="s6">/** 
         * The ID of this dependency. 
         * </span><span class="s5">@type </span><span class="s2">{string}</span>
         <span class="s6">*/ 
        this.id = id; 
</span>
        <span class="s6">/** 
         * The name of the config file which loads this dependency. 
         * </span><span class="s5">@type </span><span class="s2">{string}</span>
         <span class="s6">*/ 
        this.importerName = importerName; 
</span>
        <span class="s6">/** 
         * The path to the config file which loads this dependency. 
         * </span><span class="s5">@type </span><span class="s2">{string}</span>
         <span class="s6">*/ 
        this.importerPath = importerPath; 
    } 
</span>
    <span class="s6">// eslint-disable-next-line jsdoc/require-description 
    /** 
     * </span><span class="s5">@returns </span><span class="s2">{Object} </span><span class="s6">a JSON compatible object. 
     */</span>
    <span class="s3">toJSON</span><span class="s1">() {</span>
        <span class="s5">const </span><span class="s1">obj </span><span class="s5">= </span><span class="s2">this</span><span class="s1">[</span><span class="s2">util__default</span><span class="s1">[</span><span class="s0">&quot;default&quot;</span><span class="s1">].</span><span class="s2">inspect</span><span class="s1">.</span><span class="s2">custom</span><span class="s1">]();</span>

        <span class="s6">// Display `error.message` (`Error#message` is unenumerable).</span>
        <span class="s5">if </span><span class="s1">(</span><span class="s2">obj</span><span class="s1">.</span><span class="s2">error </span><span class="s5">instanceof </span><span class="s2">Error</span><span class="s1">) {</span>
            <span class="s2">obj</span><span class="s1">.</span><span class="s2">error </span><span class="s5">= </span><span class="s1">{ </span><span class="s5">...</span><span class="s2">obj</span><span class="s1">.</span><span class="s2">error</span><span class="s1">, message: </span><span class="s2">obj</span><span class="s1">.</span><span class="s2">error</span><span class="s1">.</span><span class="s2">message </span><span class="s1">};</span>
        <span class="s1">}</span>

        <span class="s5">return </span><span class="s2">obj</span><span class="s1">;</span>
    <span class="s1">}</span>

    <span class="s6">// eslint-disable-next-line jsdoc/require-description</span>
    <span class="s6">/**</span>
     <span class="s6">* </span><span class="s5">@returns </span><span class="s2">{Object} </span><span class="s6">an object to display by `console.log()`. 
     */</span>
    <span class="s1">[</span><span class="s2">util__default</span><span class="s1">[</span><span class="s0">&quot;default&quot;</span><span class="s1">].</span><span class="s2">inspect</span><span class="s1">.</span><span class="s2">custom</span><span class="s1">]() {</span>
        <span class="s5">const </span><span class="s1">{</span>
            <span class="s2">definition</span><span class="s1">: _ignore, </span><span class="s6">// eslint-disable-line no-unused-vars</span>
            <span class="s5">...</span><span class="s1">obj</span>
        <span class="s1">} </span><span class="s5">= </span><span class="s2">this</span><span class="s1">;</span>

        <span class="s5">return </span><span class="s2">obj</span><span class="s1">;</span>
    <span class="s1">}</span>
<span class="s1">}</span>

<span class="s6">/**</span>
 <span class="s6">* </span><span class="s5">@fileoverview </span><span class="s6">`OverrideTester` class. 
 * 
 * `OverrideTester` class handles `files` property and `excludedFiles` property 
 * of `overrides` config. 
 * 
 * It provides one method. 
 * 
 * - `test(filePath)` 
 *      Test if a file path matches the pair of `files` property and 
 *      `excludedFiles` property. The `filePath` argument must be an absolute 
 *      path. 
 * 
 * `ConfigArrayFactory` creates `OverrideTester` objects when it processes 
 * `overrides` properties. 
 * 
 * </span><span class="s5">@author </span><span class="s2">Toru Nagashima </span><span class="s6">&lt;</span><span class="s4">https://github.com/mysticatea</span><span class="s6">&gt;</span>
 <span class="s6">*/</span>

<span class="s2">const </span><span class="s1">{ </span><span class="s2">Minimatch </span><span class="s1">} </span><span class="s5">= </span><span class="s2">minimatch__default</span><span class="s1">[</span><span class="s0">&quot;default&quot;</span><span class="s1">];</span>

<span class="s2">const </span><span class="s1">minimatchOpts </span><span class="s5">= </span><span class="s1">{ dot: </span><span class="s4">true</span><span class="s1">, matchBase: </span><span class="s4">true </span><span class="s1">};</span>

<span class="s6">/**</span>
 <span class="s6">* </span><span class="s5">@typedef </span><span class="s2">{Object} Pattern</span>
 <span class="s6">* </span><span class="s5">@property </span><span class="s2">{InstanceType&lt;Minimatch&gt;[] | null} includes </span><span class="s6">The positive matchers. 
 * </span><span class="s5">@property </span><span class="s2">{InstanceType&lt;Minimatch&gt;[] | null} excludes </span><span class="s6">The negative matchers. 
 */</span>

<span class="s6">/**</span>
 <span class="s6">* Normalize a given pattern to an array. 
 * </span><span class="s5">@param </span><span class="s2">{string|string[]|undefined} patterns </span><span class="s6">A glob pattern or an array of glob patterns. 
 * </span><span class="s5">@returns </span><span class="s2">{string[]|null} </span><span class="s6">Normalized patterns. 
 * </span><span class="s5">@private</span>
 <span class="s6">*/</span>
<span class="s5">function </span><span class="s1">normalizePatterns(</span><span class="s2">patterns</span><span class="s1">) {</span>
    <span class="s5">if </span><span class="s1">(</span><span class="s2">Array</span><span class="s1">.</span><span class="s3">isArray</span><span class="s1">(</span><span class="s2">patterns</span><span class="s1">)) {</span>
        <span class="s5">return </span><span class="s2">patterns</span><span class="s1">.</span><span class="s3">filter</span><span class="s1">(</span><span class="s2">Boolean</span><span class="s1">);</span>
    <span class="s1">}</span>
    <span class="s5">if </span><span class="s1">(</span><span class="s5">typeof </span><span class="s2">patterns </span><span class="s5">=== </span><span class="s0">&quot;string&quot; </span><span class="s5">&amp;&amp; </span><span class="s2">patterns</span><span class="s1">) {</span>
        <span class="s5">return </span><span class="s1">[</span><span class="s2">patterns</span><span class="s1">];</span>
    <span class="s1">}</span>
    <span class="s5">return </span><span class="s1">[];</span>
<span class="s1">}</span>

<span class="s6">/**</span>
 <span class="s6">* Create the matchers of given patterns. 
 * </span><span class="s5">@param </span><span class="s2">{string[]} patterns </span><span class="s6">The patterns. 
 * </span><span class="s5">@returns </span><span class="s2">{InstanceType&lt;Minimatch&gt;[] | null} </span><span class="s6">The matchers. 
 */</span>
<span class="s5">function </span><span class="s1">toMatcher(</span><span class="s2">patterns</span><span class="s1">) {</span>
    <span class="s5">if </span><span class="s1">(</span><span class="s2">patterns</span><span class="s1">.length </span><span class="s5">=== </span><span class="s7">0</span><span class="s1">) {</span>
        <span class="s5">return </span><span class="s4">null</span><span class="s1">;</span>
    <span class="s1">}</span>
    <span class="s5">return </span><span class="s2">patterns</span><span class="s1">.</span><span class="s3">map</span><span class="s1">(</span><span class="s2">pattern </span><span class="s5">=&gt; </span><span class="s1">{</span>
        <span class="s5">if </span><span class="s1">(</span><span class="s0">/</span><span class="s5">^</span><span class="s8">\.</span><span class="s4">[/</span><span class="s8">\\</span><span class="s4">]</span><span class="s0">/</span><span class="s5">u</span><span class="s1">.</span><span class="s3">test</span><span class="s1">(</span><span class="s2">pattern</span><span class="s1">)) {</span>
            <span class="s5">return new </span><span class="s3">Minimatch</span><span class="s1">(</span>
                <span class="s2">pattern</span><span class="s1">.</span><span class="s3">slice</span><span class="s1">(</span><span class="s7">2</span><span class="s1">),</span>

                <span class="s6">// `./*.js` should not match with `subdir/foo.js`</span>
                <span class="s1">{ </span><span class="s5">...</span><span class="s2">minimatchOpts</span><span class="s1">, matchBase: </span><span class="s4">false </span><span class="s1">}</span>
            <span class="s1">);</span>
        <span class="s1">}</span>
        <span class="s5">return new </span><span class="s3">Minimatch</span><span class="s1">(</span><span class="s2">pattern</span><span class="s1">, </span><span class="s2">minimatchOpts</span><span class="s1">);</span>
    <span class="s1">});</span>
<span class="s1">}</span>

<span class="s6">/**</span>
 <span class="s6">* Convert a given matcher to string. 
 * </span><span class="s5">@param </span><span class="s2">{Pattern} matchers </span><span class="s6">The matchers. 
 * </span><span class="s5">@returns </span><span class="s2">{string} </span><span class="s6">The string expression of the matcher. 
 */</span>
<span class="s5">function </span><span class="s1">patternToJson({ </span><span class="s2">includes</span><span class="s1">, </span><span class="s2">excludes </span><span class="s1">}) {</span>
    <span class="s5">return </span><span class="s1">{</span>
        <span class="s1">includes: </span><span class="s2">includes </span><span class="s5">&amp;&amp; </span><span class="s2">includes</span><span class="s1">.</span><span class="s3">map</span><span class="s1">(</span><span class="s2">m </span><span class="s5">=&gt; </span><span class="s2">m</span><span class="s1">.</span><span class="s2">pattern</span><span class="s1">),</span>
        <span class="s1">excludes: </span><span class="s2">excludes </span><span class="s5">&amp;&amp; </span><span class="s2">excludes</span><span class="s1">.</span><span class="s3">map</span><span class="s1">(</span><span class="s2">m </span><span class="s5">=&gt; </span><span class="s2">m</span><span class="s1">.</span><span class="s2">pattern</span><span class="s1">)</span>
    <span class="s1">};</span>
<span class="s1">}</span>

<span class="s6">/**</span>
 <span class="s6">* The class to test given paths are matched by the patterns. 
 */</span>
<span class="s5">class </span><span class="s2">OverrideTester </span><span class="s1">{</span>

    <span class="s6">/**</span>
     <span class="s6">* Create a tester with given criteria. 
     * If there are no criteria, returns `null`. 
     * </span><span class="s5">@param </span><span class="s2">{string|string[]} files </span><span class="s6">The glob patterns for included files. 
     * </span><span class="s5">@param </span><span class="s2">{string|string[]} excludedFiles </span><span class="s6">The glob patterns for excluded files. 
     * </span><span class="s5">@param </span><span class="s2">{string} basePath </span><span class="s6">The path to the base directory to test paths. 
     * </span><span class="s5">@returns </span><span class="s2">{OverrideTester|null} </span><span class="s6">The created instance or `null`. 
     */</span>
    <span class="s5">static </span><span class="s1">create(</span><span class="s2">files</span><span class="s1">, </span><span class="s2">excludedFiles</span><span class="s1">, </span><span class="s2">basePath</span><span class="s1">) {</span>
        <span class="s5">const </span><span class="s1">includePatterns </span><span class="s5">= </span><span class="s3">normalizePatterns</span><span class="s1">(</span><span class="s2">files</span><span class="s1">);</span>
        <span class="s5">const </span><span class="s1">excludePatterns </span><span class="s5">= </span><span class="s3">normalizePatterns</span><span class="s1">(</span><span class="s2">excludedFiles</span><span class="s1">);</span>
        <span class="s5">let </span><span class="s1">endsWithWildcard </span><span class="s5">= </span><span class="s4">false</span><span class="s1">;</span>

        <span class="s5">if </span><span class="s1">(</span><span class="s2">includePatterns</span><span class="s1">.length </span><span class="s5">=== </span><span class="s7">0</span><span class="s1">) {</span>
            <span class="s5">return </span><span class="s4">null</span><span class="s1">;</span>
        <span class="s1">}</span>

        <span class="s6">// Rejects absolute paths or relative paths to parents.</span>
        <span class="s5">for </span><span class="s1">(</span><span class="s5">const </span><span class="s1">pattern </span><span class="s5">of </span><span class="s2">includePatterns</span><span class="s1">) {</span>
            <span class="s5">if </span><span class="s1">(</span><span class="s2">path__default</span><span class="s1">[</span><span class="s0">&quot;default&quot;</span><span class="s1">].</span><span class="s3">isAbsolute</span><span class="s1">(</span><span class="s2">pattern</span><span class="s1">) </span><span class="s5">|| </span><span class="s2">pattern</span><span class="s1">.</span><span class="s3">includes</span><span class="s1">(</span><span class="s0">&quot;..&quot;</span><span class="s1">)) {</span>
                <span class="s5">throw new </span><span class="s3">Error</span><span class="s1">(</span><span class="s0">`Invalid override pattern (expected relative path not containing '..'): ${</span><span class="s2">pattern</span><span class="s0">}`</span><span class="s1">);</span>
            <span class="s1">}</span>
            <span class="s5">if </span><span class="s1">(</span><span class="s2">pattern</span><span class="s1">.</span><span class="s3">endsWith</span><span class="s1">(</span><span class="s0">&quot;*&quot;</span><span class="s1">)) {</span>
                <span class="s2">endsWithWildcard </span><span class="s5">= </span><span class="s4">true</span><span class="s1">;</span>
            <span class="s1">}</span>
        <span class="s1">}</span>
        <span class="s5">for </span><span class="s1">(</span><span class="s5">const </span><span class="s1">pattern </span><span class="s5">of </span><span class="s2">excludePatterns</span><span class="s1">) {</span>
            <span class="s5">if </span><span class="s1">(</span><span class="s2">path__default</span><span class="s1">[</span><span class="s0">&quot;default&quot;</span><span class="s1">].</span><span class="s3">isAbsolute</span><span class="s1">(</span><span class="s2">pattern</span><span class="s1">) </span><span class="s5">|| </span><span class="s2">pattern</span><span class="s1">.</span><span class="s3">includes</span><span class="s1">(</span><span class="s0">&quot;..&quot;</span><span class="s1">)) {</span>
                <span class="s5">throw new </span><span class="s3">Error</span><span class="s1">(</span><span class="s0">`Invalid override pattern (expected relative path not containing '..'): ${</span><span class="s2">pattern</span><span class="s0">}`</span><span class="s1">);</span>
            <span class="s1">}</span>
        <span class="s1">}</span>

        <span class="s5">const </span><span class="s1">includes </span><span class="s5">= </span><span class="s3">toMatcher</span><span class="s1">(</span><span class="s2">includePatterns</span><span class="s1">);</span>
        <span class="s5">const </span><span class="s1">excludes </span><span class="s5">= </span><span class="s3">toMatcher</span><span class="s1">(</span><span class="s2">excludePatterns</span><span class="s1">);</span>

        <span class="s5">return new </span><span class="s3">OverrideTester</span><span class="s1">(</span>
            <span class="s1">[{ </span><span class="s2">includes</span><span class="s1">, </span><span class="s2">excludes </span><span class="s1">}],</span>
            <span class="s2">basePath</span><span class="s1">,</span>
            <span class="s2">endsWithWildcard</span>
        <span class="s1">);</span>
    <span class="s1">}</span>

    <span class="s6">/**</span>
     <span class="s6">* Combine two testers by logical and. 
     * If either of the testers was `null`, returns the other tester. 
     * The `basePath` property of the two must be the same value. 
     * </span><span class="s5">@param </span><span class="s2">{OverrideTester|null} a </span><span class="s6">A tester. 
     * </span><span class="s5">@param </span><span class="s2">{OverrideTester|null} b </span><span class="s6">Another tester. 
     * </span><span class="s5">@returns </span><span class="s2">{OverrideTester|null} </span><span class="s6">Combined tester. 
     */</span>
    <span class="s5">static </span><span class="s1">and(</span><span class="s2">a</span><span class="s1">, </span><span class="s2">b</span><span class="s1">) {</span>
        <span class="s5">if </span><span class="s1">(</span><span class="s5">!</span><span class="s2">b</span><span class="s1">) {</span>
            <span class="s5">return </span><span class="s2">a </span><span class="s5">&amp;&amp; new </span><span class="s3">OverrideTester</span><span class="s1">(</span>
                <span class="s2">a</span><span class="s1">.</span><span class="s2">patterns</span><span class="s1">,</span>
                <span class="s2">a</span><span class="s1">.</span><span class="s2">basePath</span><span class="s1">,</span>
                <span class="s2">a</span><span class="s1">.</span><span class="s2">endsWithWildcard</span>
            <span class="s1">);</span>
        <span class="s1">}</span>
        <span class="s5">if </span><span class="s1">(</span><span class="s5">!</span><span class="s2">a</span><span class="s1">) {</span>
            <span class="s5">return new </span><span class="s3">OverrideTester</span><span class="s1">(</span>
                <span class="s2">b</span><span class="s1">.</span><span class="s2">patterns</span><span class="s1">,</span>
                <span class="s2">b</span><span class="s1">.</span><span class="s2">basePath</span><span class="s1">,</span>
                <span class="s2">b</span><span class="s1">.</span><span class="s2">endsWithWildcard</span>
            <span class="s1">);</span>
        <span class="s1">}</span>

        <span class="s2">assert__default</span><span class="s1">[</span><span class="s0">&quot;default&quot;</span><span class="s1">].</span><span class="s3">strictEqual</span><span class="s1">(</span><span class="s2">a</span><span class="s1">.</span><span class="s2">basePath</span><span class="s1">, </span><span class="s2">b</span><span class="s1">.</span><span class="s2">basePath</span><span class="s1">);</span>
        <span class="s5">return new </span><span class="s3">OverrideTester</span><span class="s1">(</span>
            <span class="s2">a</span><span class="s1">.</span><span class="s2">patterns</span><span class="s1">.</span><span class="s3">concat</span><span class="s1">(</span><span class="s2">b</span><span class="s1">.</span><span class="s2">patterns</span><span class="s1">),</span>
            <span class="s2">a</span><span class="s1">.</span><span class="s2">basePath</span><span class="s1">,</span>
            <span class="s2">a</span><span class="s1">.</span><span class="s2">endsWithWildcard </span><span class="s5">|| </span><span class="s2">b</span><span class="s1">.</span><span class="s2">endsWithWildcard</span>
        <span class="s1">);</span>
    <span class="s1">}</span>

    <span class="s6">/**</span>
     <span class="s6">* Initialize this instance. 
     * </span><span class="s5">@param </span><span class="s2">{Pattern[]} patterns </span><span class="s6">The matchers. 
     * </span><span class="s5">@param </span><span class="s2">{string} basePath </span><span class="s6">The base path. 
     * </span><span class="s5">@param </span><span class="s2">{boolean} endsWithWildcard </span><span class="s6">If `true` then a pattern ends with `*`. 
     */</span>
    <span class="s5">constructor</span><span class="s1">(</span><span class="s2">patterns</span><span class="s1">, </span><span class="s2">basePath</span><span class="s1">, </span><span class="s2">endsWithWildcard </span><span class="s5">= </span><span class="s4">false</span><span class="s1">) {</span>

        <span class="s6">/** </span><span class="s5">@type </span><span class="s2">{Pattern[]} </span><span class="s6">*/</span>
        <span class="s2">this</span><span class="s1">.</span><span class="s2">patterns </span><span class="s5">= </span><span class="s2">patterns</span><span class="s1">;</span>

        <span class="s6">/** </span><span class="s5">@type </span><span class="s2">{string} </span><span class="s6">*/</span>
        <span class="s2">this</span><span class="s1">.</span><span class="s2">basePath </span><span class="s5">= </span><span class="s2">basePath</span><span class="s1">;</span>

        <span class="s6">/** </span><span class="s5">@type </span><span class="s2">{boolean} </span><span class="s6">*/</span>
        <span class="s2">this</span><span class="s1">.</span><span class="s2">endsWithWildcard </span><span class="s5">= </span><span class="s2">endsWithWildcard</span><span class="s1">;</span>
    <span class="s1">}</span>

    <span class="s6">/**</span>
     <span class="s6">* Test if a given path is matched or not. 
     * </span><span class="s5">@param </span><span class="s2">{string} filePath </span><span class="s6">The absolute path to the target file. 
     * </span><span class="s5">@returns </span><span class="s2">{boolean} </span><span class="s6">`true` if the path was matched. 
     */</span>
    <span class="s1">test(</span><span class="s2">filePath</span><span class="s1">) {</span>
        <span class="s5">if </span><span class="s1">(</span><span class="s5">typeof </span><span class="s2">filePath </span><span class="s5">!== </span><span class="s0">&quot;string&quot; </span><span class="s5">|| !</span><span class="s2">path__default</span><span class="s1">[</span><span class="s0">&quot;default&quot;</span><span class="s1">].</span><span class="s3">isAbsolute</span><span class="s1">(</span><span class="s2">filePath</span><span class="s1">)) {</span>
            <span class="s5">throw new </span><span class="s3">Error</span><span class="s1">(</span><span class="s0">`'filePath' should be an absolute path, but got ${</span><span class="s2">filePath</span><span class="s0">}.`</span><span class="s1">);</span>
        <span class="s1">}</span>
        <span class="s5">const </span><span class="s1">relativePath </span><span class="s5">= </span><span class="s2">path__default</span><span class="s1">[</span><span class="s0">&quot;default&quot;</span><span class="s1">].</span><span class="s3">relative</span><span class="s1">(</span><span class="s2">this</span><span class="s1">.</span><span class="s2">basePath</span><span class="s1">, </span><span class="s2">filePath</span><span class="s1">);</span>

        <span class="s5">return </span><span class="s2">this</span><span class="s1">.</span><span class="s2">patterns</span><span class="s1">.</span><span class="s3">every</span><span class="s1">(({ </span><span class="s2">includes</span><span class="s1">, </span><span class="s2">excludes </span><span class="s1">}) </span><span class="s5">=&gt; </span><span class="s1">(</span>
            <span class="s1">(</span><span class="s5">!</span><span class="s2">includes </span><span class="s5">|| </span><span class="s2">includes</span><span class="s1">.</span><span class="s3">some</span><span class="s1">(</span><span class="s2">m </span><span class="s5">=&gt; </span><span class="s2">m</span><span class="s1">.</span><span class="s3">match</span><span class="s1">(</span><span class="s2">relativePath</span><span class="s1">))) </span><span class="s5">&amp;&amp;</span>
            <span class="s1">(</span><span class="s5">!</span><span class="s2">excludes </span><span class="s5">|| !</span><span class="s2">excludes</span><span class="s1">.</span><span class="s3">some</span><span class="s1">(</span><span class="s2">m </span><span class="s5">=&gt; </span><span class="s2">m</span><span class="s1">.</span><span class="s3">match</span><span class="s1">(</span><span class="s2">relativePath</span><span class="s1">)))</span>
        <span class="s1">));</span>
    <span class="s1">}</span>

    <span class="s6">// eslint-disable-next-line jsdoc/require-description</span>
    <span class="s6">/**</span>
     <span class="s6">* </span><span class="s5">@returns </span><span class="s2">{Object} </span><span class="s6">a JSON compatible object. 
     */</span>
    <span class="s1">toJSON() {</span>
        <span class="s5">if </span><span class="s1">(</span><span class="s2">this</span><span class="s1">.</span><span class="s2">patterns</span><span class="s1">.length </span><span class="s5">=== </span><span class="s7">1</span><span class="s1">) {</span>
            <span class="s5">return </span><span class="s1">{</span>
                <span class="s5">...</span><span class="s3">patternToJson</span><span class="s1">(</span><span class="s2">this</span><span class="s1">.</span><span class="s2">patterns</span><span class="s1">[</span><span class="s7">0</span><span class="s1">]),</span>
                <span class="s1">basePath: </span><span class="s2">this</span><span class="s1">.</span><span class="s2">basePath</span>
            <span class="s1">};</span>
        <span class="s1">}</span>
        <span class="s5">return </span><span class="s1">{</span>
            <span class="s1">AND: </span><span class="s2">this</span><span class="s1">.</span><span class="s2">patterns</span><span class="s1">.</span><span class="s3">map</span><span class="s1">(</span><span class="s2">patternToJson</span><span class="s1">),</span>
            <span class="s1">basePath: </span><span class="s2">this</span><span class="s1">.</span><span class="s2">basePath</span>
        <span class="s1">};</span>
    <span class="s1">}</span>

    <span class="s6">// eslint-disable-next-line jsdoc/require-description</span>
    <span class="s6">/**</span>
     <span class="s6">* </span><span class="s5">@returns </span><span class="s2">{Object} </span><span class="s6">an object to display by `console.log()`. 
     */</span>
    <span class="s1">[</span><span class="s2">util__default</span><span class="s1">[</span><span class="s0">&quot;default&quot;</span><span class="s1">].</span><span class="s2">inspect</span><span class="s1">.</span><span class="s2">custom</span><span class="s1">]() {</span>
        <span class="s5">return </span><span class="s2">this</span><span class="s1">.</span><span class="s3">toJSON</span><span class="s1">();</span>
    <span class="s1">}</span>
<span class="s1">}</span>

<span class="s6">/**</span>
 <span class="s6">* </span><span class="s5">@fileoverview </span><span class="s6">`ConfigArray` class. 
 * </span><span class="s5">@author </span><span class="s2">Toru Nagashima </span><span class="s6">&lt;</span><span class="s4">https://github.com/mysticatea</span><span class="s6">&gt;</span>
 <span class="s6">*/</span>

<span class="s6">/**</span>
 <span class="s6">* </span><span class="s5">@fileoverview </span><span class="s6">Config file operations. This file must be usable in the browser, 
 * so no Node-specific code can be here. 
 * </span><span class="s5">@author </span><span class="s2">Nicholas C. Zakas 
 </span><span class="s6">*/</span>

<span class="s6">//------------------------------------------------------------------------------</span>
<span class="s6">// Private</span>
<span class="s6">//------------------------------------------------------------------------------</span>

<span class="s2">const </span><span class="s1">RULE_SEVERITY_STRINGS </span><span class="s5">= </span><span class="s1">[</span><span class="s0">&quot;off&quot;</span><span class="s1">, </span><span class="s0">&quot;warn&quot;</span><span class="s1">, </span><span class="s0">&quot;error&quot;</span><span class="s1">],</span>
    <span class="s1">RULE_SEVERITY </span><span class="s5">= </span><span class="s2">RULE_SEVERITY_STRINGS</span><span class="s1">.</span><span class="s3">reduce</span><span class="s1">((</span><span class="s2">map</span><span class="s1">, </span><span class="s2">value</span><span class="s1">, </span><span class="s2">index</span><span class="s1">) </span><span class="s5">=&gt; </span><span class="s1">{</span>
        <span class="s2">map</span><span class="s1">[</span><span class="s2">value</span><span class="s1">] </span><span class="s5">= </span><span class="s2">index</span><span class="s1">;</span>
        <span class="s5">return </span><span class="s2">map</span><span class="s1">;</span>
    <span class="s1">}, {}),</span>
    <span class="s1">VALID_SEVERITIES </span><span class="s5">= </span><span class="s1">[</span><span class="s7">0</span><span class="s1">, </span><span class="s7">1</span><span class="s1">, </span><span class="s7">2</span><span class="s1">, </span><span class="s0">&quot;off&quot;</span><span class="s1">, </span><span class="s0">&quot;warn&quot;</span><span class="s1">, </span><span class="s0">&quot;error&quot;</span><span class="s1">];</span>

<span class="s6">//------------------------------------------------------------------------------</span>
<span class="s6">// Public Interface</span>
<span class="s6">//------------------------------------------------------------------------------</span>

<span class="s6">/**</span>
 <span class="s6">* Normalizes the severity value of a rule's configuration to a number 
 * </span><span class="s5">@param </span><span class="s2">{(number|string|[number, ...*]|[string, ...*])} ruleConfig </span><span class="s6">A rule's configuration value, generally 
 * received from the user. A valid config value is either 0, 1, 2, the string &quot;off&quot; (treated the same as 0), 
 * the string &quot;warn&quot; (treated the same as 1), the string &quot;error&quot; (treated the same as 2), or an array 
 * whose first element is one of the above values. Strings are matched case-insensitively. 
 * </span><span class="s5">@returns </span><span class="s2">{(0|1|2)} </span><span class="s6">The numeric severity value if the config value was valid, otherwise 0. 
 */</span>
<span class="s5">function </span><span class="s1">getRuleSeverity(</span><span class="s2">ruleConfig</span><span class="s1">) {</span>
    <span class="s5">const </span><span class="s1">severityValue </span><span class="s5">= </span><span class="s2">Array</span><span class="s1">.</span><span class="s3">isArray</span><span class="s1">(</span><span class="s2">ruleConfig</span><span class="s1">) </span><span class="s5">? </span><span class="s2">ruleConfig</span><span class="s1">[</span><span class="s7">0</span><span class="s1">] </span><span class="s5">: </span><span class="s2">ruleConfig</span><span class="s1">;</span>

    <span class="s5">if </span><span class="s1">(</span><span class="s2">severityValue </span><span class="s5">=== </span><span class="s7">0 </span><span class="s5">|| </span><span class="s2">severityValue </span><span class="s5">=== </span><span class="s7">1 </span><span class="s5">|| </span><span class="s2">severityValue </span><span class="s5">=== </span><span class="s7">2</span><span class="s1">) {</span>
        <span class="s5">return </span><span class="s2">severityValue</span><span class="s1">;</span>
    <span class="s1">}</span>

    <span class="s5">if </span><span class="s1">(</span><span class="s5">typeof </span><span class="s2">severityValue </span><span class="s5">=== </span><span class="s0">&quot;string&quot;</span><span class="s1">) {</span>
        <span class="s5">return </span><span class="s2">RULE_SEVERITY</span><span class="s1">[</span><span class="s2">severityValue</span><span class="s1">.</span><span class="s3">toLowerCase</span><span class="s1">()] </span><span class="s5">|| </span><span class="s7">0</span><span class="s1">;</span>
    <span class="s1">}</span>

    <span class="s5">return </span><span class="s7">0</span><span class="s1">;</span>
<span class="s1">}</span>

<span class="s6">/**</span>
 <span class="s6">* Converts old-style severity settings (0, 1, 2) into new-style 
 * severity settings (off, warn, error) for all rules. Assumption is that severity 
 * values have already been validated as correct. 
 * </span><span class="s5">@param </span><span class="s2">{Object} config </span><span class="s6">The config object to normalize. 
 * </span><span class="s5">@returns </span><span class="s2">{void}</span>
 <span class="s6">*/ 
function normalizeToStrings(config) { 
</span>
    <span class="s6">if (config.rules) { 
        Object.keys(config.rules).forEach(ruleId =&gt; { 
            const ruleConfig = config.rules[ruleId]; 
</span>
            <span class="s6">if (typeof ruleConfig === &quot;number&quot;) { 
                config.rules[ruleId] = RULE_SEVERITY_STRINGS[ruleConfig] || RULE_SEVERITY_STRINGS[0]; 
            } else if (Array.isArray(ruleConfig) &amp;&amp; typeof ruleConfig[0] === &quot;number&quot;) { 
                ruleConfig[0] = RULE_SEVERITY_STRINGS[ruleConfig[0]] || RULE_SEVERITY_STRINGS[0]; 
            } 
        }); 
    } 
} 
</span>
<span class="s6">/** 
 * Determines if the severity for the given rule configuration represents an error. 
 * </span><span class="s5">@param </span><span class="s2">{int|string|Array} ruleConfig </span><span class="s6">The configuration for an individual rule. 
 * </span><span class="s5">@returns </span><span class="s2">{boolean} </span><span class="s6">True if the rule represents an error, false if not. 
 */</span>
<span class="s5">function </span><span class="s1">isErrorSeverity(</span><span class="s2">ruleConfig</span><span class="s1">) {</span>
    <span class="s5">return </span><span class="s3">getRuleSeverity</span><span class="s1">(</span><span class="s2">ruleConfig</span><span class="s1">) </span><span class="s5">=== </span><span class="s7">2</span><span class="s1">;</span>
<span class="s1">}</span>

<span class="s6">/**</span>
 <span class="s6">* Checks whether a given config has valid severity or not. 
 * </span><span class="s5">@param </span><span class="s2">{number|string|Array} ruleConfig </span><span class="s6">The configuration for an individual rule. 
 * </span><span class="s5">@returns </span><span class="s2">{boolean} </span><span class="s6">`true` if the configuration has valid severity. 
 */</span>
<span class="s5">function </span><span class="s1">isValidSeverity(</span><span class="s2">ruleConfig</span><span class="s1">) {</span>
    <span class="s5">let </span><span class="s1">severity </span><span class="s5">= </span><span class="s2">Array</span><span class="s1">.</span><span class="s3">isArray</span><span class="s1">(</span><span class="s2">ruleConfig</span><span class="s1">) </span><span class="s5">? </span><span class="s2">ruleConfig</span><span class="s1">[</span><span class="s7">0</span><span class="s1">] </span><span class="s5">: </span><span class="s2">ruleConfig</span><span class="s1">;</span>

    <span class="s5">if </span><span class="s1">(</span><span class="s5">typeof </span><span class="s2">severity </span><span class="s5">=== </span><span class="s0">&quot;string&quot;</span><span class="s1">) {</span>
        <span class="s2">severity </span><span class="s5">= </span><span class="s2">severity</span><span class="s1">.</span><span class="s3">toLowerCase</span><span class="s1">();</span>
    <span class="s1">}</span>
    <span class="s5">return </span><span class="s2">VALID_SEVERITIES</span><span class="s1">.</span><span class="s3">indexOf</span><span class="s1">(</span><span class="s2">severity</span><span class="s1">) </span><span class="s5">!== -</span><span class="s7">1</span><span class="s1">;</span>
<span class="s1">}</span>

<span class="s6">/**</span>
 <span class="s6">* Checks whether every rule of a given config has valid severity or not. 
 * </span><span class="s5">@param </span><span class="s2">{Object} config </span><span class="s6">The configuration for rules. 
 * </span><span class="s5">@returns </span><span class="s2">{boolean} </span><span class="s6">`true` if the configuration has valid severity. 
 */</span>
<span class="s5">function </span><span class="s1">isEverySeverityValid(</span><span class="s2">config</span><span class="s1">) {</span>
    <span class="s5">return </span><span class="s2">Object</span><span class="s1">.</span><span class="s3">keys</span><span class="s1">(</span><span class="s2">config</span><span class="s1">).</span><span class="s3">every</span><span class="s1">(</span><span class="s2">ruleId </span><span class="s5">=&gt; </span><span class="s3">isValidSeverity</span><span class="s1">(</span><span class="s2">config</span><span class="s1">[</span><span class="s2">ruleId</span><span class="s1">]));</span>
<span class="s1">}</span>

<span class="s6">/**</span>
 <span class="s6">* Normalizes a value for a global in a config 
 * </span><span class="s5">@param </span><span class="s2">{(boolean|string|null)} configuredValue </span><span class="s6">The value given for a global in configuration or in 
 * a global directive comment 
 * </span><span class="s5">@returns </span><span class="s2">{(&quot;readable&quot;|&quot;writeable&quot;|&quot;off&quot;)} </span><span class="s6">The value normalized as a string 
 * </span><span class="s5">@throws </span><span class="s6">Error if global value is invalid 
 */</span>
<span class="s5">function </span><span class="s1">normalizeConfigGlobal(</span><span class="s2">configuredValue</span><span class="s1">) {</span>
    <span class="s5">switch </span><span class="s1">(</span><span class="s2">configuredValue</span><span class="s1">) {</span>
        <span class="s5">case </span><span class="s0">&quot;off&quot;</span><span class="s1">:</span>
            <span class="s5">return </span><span class="s0">&quot;off&quot;</span><span class="s1">;</span>

        <span class="s5">case </span><span class="s4">true</span><span class="s1">:</span>
        <span class="s5">case </span><span class="s0">&quot;true&quot;</span><span class="s1">:</span>
        <span class="s5">case </span><span class="s0">&quot;writeable&quot;</span><span class="s1">:</span>
        <span class="s5">case </span><span class="s0">&quot;writable&quot;</span><span class="s1">:</span>
            <span class="s5">return </span><span class="s0">&quot;writable&quot;</span><span class="s1">;</span>

        <span class="s5">case </span><span class="s4">null</span><span class="s1">:</span>
        <span class="s5">case </span><span class="s4">false</span><span class="s1">:</span>
        <span class="s5">case </span><span class="s0">&quot;false&quot;</span><span class="s1">:</span>
        <span class="s5">case </span><span class="s0">&quot;readable&quot;</span><span class="s1">:</span>
        <span class="s5">case </span><span class="s0">&quot;readonly&quot;</span><span class="s1">:</span>
            <span class="s5">return </span><span class="s0">&quot;readonly&quot;</span><span class="s1">;</span>

        <span class="s5">default</span><span class="s1">:</span>
            <span class="s5">throw new </span><span class="s3">Error</span><span class="s1">(</span><span class="s0">`'${</span><span class="s2">configuredValue</span><span class="s0">}' is not a valid configuration for a global (use 'readonly', 'writable', or 'off')`</span><span class="s1">);</span>
    <span class="s1">}</span>
<span class="s1">}</span>

<span class="s2">var </span><span class="s1">ConfigOps </span><span class="s5">= </span><span class="s1">{</span>
    <span class="s1">__proto__: </span><span class="s4">null</span><span class="s1">,</span>
    <span class="s1">getRuleSeverity: </span><span class="s2">getRuleSeverity</span><span class="s1">,</span>
    <span class="s1">normalizeToStrings: </span><span class="s2">normalizeToStrings</span><span class="s1">,</span>
    <span class="s1">isErrorSeverity: </span><span class="s2">isErrorSeverity</span><span class="s1">,</span>
    <span class="s1">isValidSeverity: </span><span class="s2">isValidSeverity</span><span class="s1">,</span>
    <span class="s1">isEverySeverityValid: </span><span class="s2">isEverySeverityValid</span><span class="s1">,</span>
    <span class="s1">normalizeConfigGlobal: </span><span class="s2">normalizeConfigGlobal</span>
<span class="s1">};</span>

<span class="s6">/**</span>
 <span class="s6">* </span><span class="s5">@fileoverview </span><span class="s6">Provide the function that emits deprecation warnings. 
 * </span><span class="s5">@author </span><span class="s2">Toru Nagashima </span><span class="s6">&lt;</span><span class="s4">http://github.com/mysticatea</span><span class="s6">&gt;</span>
 <span class="s6">*/</span>

<span class="s6">//------------------------------------------------------------------------------</span>
<span class="s6">// Private</span>
<span class="s6">//------------------------------------------------------------------------------</span>

<span class="s6">// Defitions for deprecation warnings.</span>
<span class="s2">const </span><span class="s1">deprecationWarningMessages </span><span class="s5">= </span><span class="s1">{</span>
    <span class="s1">ESLINT_LEGACY_ECMAFEATURES:</span>
        <span class="s0">&quot;The 'ecmaFeatures' config file property is deprecated and has no effect.&quot;</span><span class="s1">,</span>
    <span class="s1">ESLINT_PERSONAL_CONFIG_LOAD:</span>
        <span class="s0">&quot;'~/.eslintrc.*' config files have been deprecated. &quot; </span><span class="s5">+</span>
        <span class="s0">&quot;Please use a config file per project or the '--config' option.&quot;</span><span class="s1">,</span>
    <span class="s1">ESLINT_PERSONAL_CONFIG_SUPPRESS:</span>
        <span class="s0">&quot;'~/.eslintrc.*' config files have been deprecated. &quot; </span><span class="s5">+</span>
        <span class="s0">&quot;Please remove it or add 'root:true' to the config files in your &quot; </span><span class="s5">+</span>
        <span class="s0">&quot;projects in order to avoid loading '~/.eslintrc.*' accidentally.&quot;</span>
<span class="s1">};</span>

<span class="s2">const </span><span class="s1">sourceFileErrorCache </span><span class="s5">= new </span><span class="s3">Set</span><span class="s1">();</span>

<span class="s6">/**</span>
 <span class="s6">* Emits a deprecation warning containing a given filepath. A new deprecation warning is emitted 
 * for each unique file path, but repeated invocations with the same file path have no effect. 
 * No warnings are emitted if the `--no-deprecation` or `--no-warnings` Node runtime flags are active. 
 * </span><span class="s5">@param </span><span class="s2">{string} source </span><span class="s6">The name of the configuration source to report the warning for. 
 * </span><span class="s5">@param </span><span class="s2">{string} errorCode </span><span class="s6">The warning message to show. 
 * </span><span class="s5">@returns </span><span class="s2">{void}</span>
 <span class="s6">*/ 
function emitDeprecationWarning(source, errorCode) { 
    const cacheKey = JSON.stringify({ source, errorCode }); 
</span>
    <span class="s6">if (sourceFileErrorCache.has(cacheKey)) { 
        return; 
    } 
    sourceFileErrorCache.add(cacheKey); 
</span>
    <span class="s6">const rel = path__default[&quot;default&quot;].relative(process.cwd(), source); 
    const message = deprecationWarningMessages[errorCode]; 
</span>
    <span class="s6">process.emitWarning( 
        `${message} (found in &quot;${rel}&quot;)`, 
        &quot;DeprecationWarning&quot;, 
        errorCode 
    ); 
} 
</span>
<span class="s6">/** 
 * </span><span class="s5">@fileoverview </span><span class="s6">The instance of Ajv validator. 
 * </span><span class="s5">@author </span><span class="s2">Evgeny Poberezkin 
 </span><span class="s6">*/</span>

<span class="s6">//-----------------------------------------------------------------------------</span>
<span class="s6">// Helpers</span>
<span class="s6">//-----------------------------------------------------------------------------</span>

<span class="s6">/*</span>
 <span class="s6">* Copied from ajv/lib/refs/json-schema-draft-04.json 
 * The MIT License (MIT) 
 * Copyright (c) 2015-2017 Evgeny Poberezkin 
 */</span>
<span class="s2">const </span><span class="s1">metaSchema </span><span class="s5">= </span><span class="s1">{</span>
    <span class="s1">id: </span><span class="s0">&quot;http://json-schema.org/draft-04/schema#&quot;</span><span class="s1">,</span>
    <span class="s1">$schema: </span><span class="s0">&quot;http://json-schema.org/draft-04/schema#&quot;</span><span class="s1">,</span>
    <span class="s1">description: </span><span class="s0">&quot;Core schema meta-schema&quot;</span><span class="s1">,</span>
    <span class="s1">definitions: {</span>
        <span class="s1">schemaArray: {</span>
            <span class="s1">type: </span><span class="s0">&quot;array&quot;</span><span class="s1">,</span>
            <span class="s1">minItems: </span><span class="s7">1</span><span class="s1">,</span>
            <span class="s1">items: { $ref: </span><span class="s0">&quot;#&quot; </span><span class="s1">}</span>
        <span class="s1">},</span>
        <span class="s1">positiveInteger: {</span>
            <span class="s1">type: </span><span class="s0">&quot;integer&quot;</span><span class="s1">,</span>
            <span class="s1">minimum: </span><span class="s7">0</span>
        <span class="s1">},</span>
        <span class="s1">positiveIntegerDefault0: {</span>
            <span class="s1">allOf: [{ $ref: </span><span class="s0">&quot;#/definitions/positiveInteger&quot; </span><span class="s1">}, { default: </span><span class="s7">0 </span><span class="s1">}]</span>
        <span class="s1">},</span>
        <span class="s1">simpleTypes: {</span>
            <span class="s1">enum: [</span><span class="s0">&quot;array&quot;</span><span class="s1">, </span><span class="s0">&quot;boolean&quot;</span><span class="s1">, </span><span class="s0">&quot;integer&quot;</span><span class="s1">, </span><span class="s0">&quot;null&quot;</span><span class="s1">, </span><span class="s0">&quot;number&quot;</span><span class="s1">, </span><span class="s0">&quot;object&quot;</span><span class="s1">, </span><span class="s0">&quot;string&quot;</span><span class="s1">]</span>
        <span class="s1">},</span>
        <span class="s1">stringArray: {</span>
            <span class="s1">type: </span><span class="s0">&quot;array&quot;</span><span class="s1">,</span>
            <span class="s1">items: { type: </span><span class="s0">&quot;string&quot; </span><span class="s1">},</span>
            <span class="s1">minItems: </span><span class="s7">1</span><span class="s1">,</span>
            <span class="s1">uniqueItems: </span><span class="s4">true</span>
        <span class="s1">}</span>
    <span class="s1">},</span>
    <span class="s1">type: </span><span class="s0">&quot;object&quot;</span><span class="s1">,</span>
    <span class="s1">properties: {</span>
        <span class="s1">id: {</span>
            <span class="s1">type: </span><span class="s0">&quot;string&quot;</span>
        <span class="s1">},</span>
        <span class="s1">$schema: {</span>
            <span class="s1">type: </span><span class="s0">&quot;string&quot;</span>
        <span class="s1">},</span>
        <span class="s1">title: {</span>
            <span class="s1">type: </span><span class="s0">&quot;string&quot;</span>
        <span class="s1">},</span>
        <span class="s1">description: {</span>
            <span class="s1">type: </span><span class="s0">&quot;string&quot;</span>
        <span class="s1">},</span>
        <span class="s1">default: { },</span>
        <span class="s1">multipleOf: {</span>
            <span class="s1">type: </span><span class="s0">&quot;number&quot;</span><span class="s1">,</span>
            <span class="s1">minimum: </span><span class="s7">0</span><span class="s1">,</span>
            <span class="s1">exclusiveMinimum: </span><span class="s4">true</span>
        <span class="s1">},</span>
        <span class="s1">maximum: {</span>
            <span class="s1">type: </span><span class="s0">&quot;number&quot;</span>
        <span class="s1">},</span>
        <span class="s1">exclusiveMaximum: {</span>
            <span class="s1">type: </span><span class="s0">&quot;boolean&quot;</span><span class="s1">,</span>
            <span class="s1">default: </span><span class="s4">false</span>
        <span class="s1">},</span>
        <span class="s1">minimum: {</span>
            <span class="s1">type: </span><span class="s0">&quot;number&quot;</span>
        <span class="s1">},</span>
        <span class="s1">exclusiveMinimum: {</span>
            <span class="s1">type: </span><span class="s0">&quot;boolean&quot;</span><span class="s1">,</span>
            <span class="s1">default: </span><span class="s4">false</span>
        <span class="s1">},</span>
        <span class="s1">maxLength: { $ref: </span><span class="s0">&quot;#/definitions/positiveInteger&quot; </span><span class="s1">},</span>
        <span class="s1">minLength: { $ref: </span><span class="s0">&quot;#/definitions/positiveIntegerDefault0&quot; </span><span class="s1">},</span>
        <span class="s1">pattern: {</span>
            <span class="s1">type: </span><span class="s0">&quot;string&quot;</span><span class="s1">,</span>
            <span class="s1">format: </span><span class="s0">&quot;regex&quot;</span>
        <span class="s1">},</span>
        <span class="s1">additionalItems: {</span>
            <span class="s1">anyOf: [</span>
                <span class="s1">{ type: </span><span class="s0">&quot;boolean&quot; </span><span class="s1">},</span>
                <span class="s1">{ $ref: </span><span class="s0">&quot;#&quot; </span><span class="s1">}</span>
            <span class="s1">],</span>
            <span class="s1">default: { }</span>
        <span class="s1">},</span>
        <span class="s1">items: {</span>
            <span class="s1">anyOf: [</span>
                <span class="s1">{ $ref: </span><span class="s0">&quot;#&quot; </span><span class="s1">},</span>
                <span class="s1">{ $ref: </span><span class="s0">&quot;#/definitions/schemaArray&quot; </span><span class="s1">}</span>
            <span class="s1">],</span>
            <span class="s1">default: { }</span>
        <span class="s1">},</span>
        <span class="s1">maxItems: { $ref: </span><span class="s0">&quot;#/definitions/positiveInteger&quot; </span><span class="s1">},</span>
        <span class="s1">minItems: { $ref: </span><span class="s0">&quot;#/definitions/positiveIntegerDefault0&quot; </span><span class="s1">},</span>
        <span class="s1">uniqueItems: {</span>
            <span class="s1">type: </span><span class="s0">&quot;boolean&quot;</span><span class="s1">,</span>
            <span class="s1">default: </span><span class="s4">false</span>
        <span class="s1">},</span>
        <span class="s1">maxProperties: { $ref: </span><span class="s0">&quot;#/definitions/positiveInteger&quot; </span><span class="s1">},</span>
        <span class="s1">minProperties: { $ref: </span><span class="s0">&quot;#/definitions/positiveIntegerDefault0&quot; </span><span class="s1">},</span>
        <span class="s1">required: { $ref: </span><span class="s0">&quot;#/definitions/stringArray&quot; </span><span class="s1">},</span>
        <span class="s1">additionalProperties: {</span>
            <span class="s1">anyOf: [</span>
                <span class="s1">{ type: </span><span class="s0">&quot;boolean&quot; </span><span class="s1">},</span>
                <span class="s1">{ $ref: </span><span class="s0">&quot;#&quot; </span><span class="s1">}</span>
            <span class="s1">],</span>
            <span class="s1">default: { }</span>
        <span class="s1">},</span>
        <span class="s1">definitions: {</span>
            <span class="s1">type: </span><span class="s0">&quot;object&quot;</span><span class="s1">,</span>
            <span class="s1">additionalProperties: { $ref: </span><span class="s0">&quot;#&quot; </span><span class="s1">},</span>
            <span class="s1">default: { }</span>
        <span class="s1">},</span>
        <span class="s1">properties: {</span>
            <span class="s1">type: </span><span class="s0">&quot;object&quot;</span><span class="s1">,</span>
            <span class="s1">additionalProperties: { $ref: </span><span class="s0">&quot;#&quot; </span><span class="s1">},</span>
            <span class="s1">default: { }</span>
        <span class="s1">},</span>
        <span class="s1">patternProperties: {</span>
            <span class="s1">type: </span><span class="s0">&quot;object&quot;</span><span class="s1">,</span>
            <span class="s1">additionalProperties: { $ref: </span><span class="s0">&quot;#&quot; </span><span class="s1">},</span>
            <span class="s1">default: { }</span>
        <span class="s1">},</span>
        <span class="s1">dependencies: {</span>
            <span class="s1">type: </span><span class="s0">&quot;object&quot;</span><span class="s1">,</span>
            <span class="s1">additionalProperties: {</span>
                <span class="s1">anyOf: [</span>
                    <span class="s1">{ $ref: </span><span class="s0">&quot;#&quot; </span><span class="s1">},</span>
                    <span class="s1">{ $ref: </span><span class="s0">&quot;#/definitions/stringArray&quot; </span><span class="s1">}</span>
                <span class="s1">]</span>
            <span class="s1">}</span>
        <span class="s1">},</span>
        <span class="s1">enum: {</span>
            <span class="s1">type: </span><span class="s0">&quot;array&quot;</span><span class="s1">,</span>
            <span class="s1">minItems: </span><span class="s7">1</span><span class="s1">,</span>
            <span class="s1">uniqueItems: </span><span class="s4">true</span>
        <span class="s1">},</span>
        <span class="s1">type: {</span>
            <span class="s1">anyOf: [</span>
                <span class="s1">{ $ref: </span><span class="s0">&quot;#/definitions/simpleTypes&quot; </span><span class="s1">},</span>
                <span class="s1">{</span>
                    <span class="s1">type: </span><span class="s0">&quot;array&quot;</span><span class="s1">,</span>
                    <span class="s1">items: { $ref: </span><span class="s0">&quot;#/definitions/simpleTypes&quot; </span><span class="s1">},</span>
                    <span class="s1">minItems: </span><span class="s7">1</span><span class="s1">,</span>
                    <span class="s1">uniqueItems: </span><span class="s4">true</span>
                <span class="s1">}</span>
            <span class="s1">]</span>
        <span class="s1">},</span>
        <span class="s1">format: { type: </span><span class="s0">&quot;string&quot; </span><span class="s1">},</span>
        <span class="s1">allOf: { $ref: </span><span class="s0">&quot;#/definitions/schemaArray&quot; </span><span class="s1">},</span>
        <span class="s1">anyOf: { $ref: </span><span class="s0">&quot;#/definitions/schemaArray&quot; </span><span class="s1">},</span>
        <span class="s1">oneOf: { $ref: </span><span class="s0">&quot;#/definitions/schemaArray&quot; </span><span class="s1">},</span>
        <span class="s1">not: { $ref: </span><span class="s0">&quot;#&quot; </span><span class="s1">}</span>
    <span class="s1">},</span>
    <span class="s1">dependencies: {</span>
        <span class="s1">exclusiveMaximum: [</span><span class="s0">&quot;maximum&quot;</span><span class="s1">],</span>
        <span class="s1">exclusiveMinimum: [</span><span class="s0">&quot;minimum&quot;</span><span class="s1">]</span>
    <span class="s1">},</span>
    <span class="s1">default: { }</span>
<span class="s1">};</span>

<span class="s6">//------------------------------------------------------------------------------</span>
<span class="s6">// Public Interface</span>
<span class="s6">//------------------------------------------------------------------------------</span>

<span class="s2">var </span><span class="s1">ajvOrig </span><span class="s5">= </span><span class="s1">(</span><span class="s2">additionalOptions </span><span class="s5">= </span><span class="s1">{}) </span><span class="s5">=&gt; </span><span class="s1">{</span>
    <span class="s5">const </span><span class="s1">ajv </span><span class="s5">= new </span><span class="s2">Ajv__default</span><span class="s1">[</span><span class="s0">&quot;default&quot;</span><span class="s1">]({</span>
        <span class="s1">meta: </span><span class="s4">false</span><span class="s1">,</span>
        <span class="s1">useDefaults: </span><span class="s4">true</span><span class="s1">,</span>
        <span class="s1">validateSchema: </span><span class="s4">false</span><span class="s1">,</span>
        <span class="s1">missingRefs: </span><span class="s0">&quot;ignore&quot;</span><span class="s1">,</span>
        <span class="s1">verbose: </span><span class="s4">true</span><span class="s1">,</span>
        <span class="s1">schemaId: </span><span class="s0">&quot;auto&quot;</span><span class="s1">,</span>
        <span class="s5">...</span><span class="s2">additionalOptions</span>
    <span class="s1">});</span>

    <span class="s2">ajv</span><span class="s1">.</span><span class="s3">addMetaSchema</span><span class="s1">(</span><span class="s2">metaSchema</span><span class="s1">);</span>
    <span class="s6">// eslint-disable-next-line no-underscore-dangle</span>
    <span class="s2">ajv</span><span class="s1">.</span><span class="s2">_opts</span><span class="s1">.</span><span class="s2">defaultMeta </span><span class="s5">= </span><span class="s2">metaSchema</span><span class="s1">.</span><span class="s2">id</span><span class="s1">;</span>

    <span class="s5">return </span><span class="s2">ajv</span><span class="s1">;</span>
<span class="s1">};</span>

<span class="s6">/**</span>
 <span class="s6">* </span><span class="s5">@fileoverview </span><span class="s6">Defines a schema for configs. 
 * </span><span class="s5">@author </span><span class="s2">Sylvan Mably 
 </span><span class="s6">*/</span>

<span class="s2">const </span><span class="s1">baseConfigProperties </span><span class="s5">= </span><span class="s1">{</span>
    <span class="s1">$schema: { type: </span><span class="s0">&quot;string&quot; </span><span class="s1">},</span>
    <span class="s1">env: { type: </span><span class="s0">&quot;object&quot; </span><span class="s1">},</span>
    <span class="s1">extends: { $ref: </span><span class="s0">&quot;#/definitions/stringOrStrings&quot; </span><span class="s1">},</span>
    <span class="s1">globals: { type: </span><span class="s0">&quot;object&quot; </span><span class="s1">},</span>
    <span class="s1">overrides: {</span>
        <span class="s1">type: </span><span class="s0">&quot;array&quot;</span><span class="s1">,</span>
        <span class="s1">items: { $ref: </span><span class="s0">&quot;#/definitions/overrideConfig&quot; </span><span class="s1">},</span>
        <span class="s1">additionalItems: </span><span class="s4">false</span>
    <span class="s1">},</span>
    <span class="s1">parser: { type: [</span><span class="s0">&quot;string&quot;</span><span class="s1">, </span><span class="s0">&quot;null&quot;</span><span class="s1">] },</span>
    <span class="s1">parserOptions: { type: </span><span class="s0">&quot;object&quot; </span><span class="s1">},</span>
    <span class="s1">plugins: { type: </span><span class="s0">&quot;array&quot; </span><span class="s1">},</span>
    <span class="s1">processor: { type: </span><span class="s0">&quot;string&quot; </span><span class="s1">},</span>
    <span class="s1">rules: { type: </span><span class="s0">&quot;object&quot; </span><span class="s1">},</span>
    <span class="s1">settings: { type: </span><span class="s0">&quot;object&quot; </span><span class="s1">},</span>
    <span class="s1">noInlineConfig: { type: </span><span class="s0">&quot;boolean&quot; </span><span class="s1">},</span>
    <span class="s1">reportUnusedDisableDirectives: { type: </span><span class="s0">&quot;boolean&quot; </span><span class="s1">},</span>

    <span class="s1">ecmaFeatures: { type: </span><span class="s0">&quot;object&quot; </span><span class="s1">} </span><span class="s6">// deprecated; logs a warning when used</span>
<span class="s1">};</span>

<span class="s2">const </span><span class="s1">configSchema </span><span class="s5">= </span><span class="s1">{</span>
    <span class="s1">definitions: {</span>
        <span class="s1">stringOrStrings: {</span>
            <span class="s1">oneOf: [</span>
                <span class="s1">{ type: </span><span class="s0">&quot;string&quot; </span><span class="s1">},</span>
                <span class="s1">{</span>
                    <span class="s1">type: </span><span class="s0">&quot;array&quot;</span><span class="s1">,</span>
                    <span class="s1">items: { type: </span><span class="s0">&quot;string&quot; </span><span class="s1">},</span>
                    <span class="s1">additionalItems: </span><span class="s4">false</span>
                <span class="s1">}</span>
            <span class="s1">]</span>
        <span class="s1">},</span>
        <span class="s1">stringOrStringsRequired: {</span>
            <span class="s1">oneOf: [</span>
                <span class="s1">{ type: </span><span class="s0">&quot;string&quot; </span><span class="s1">},</span>
                <span class="s1">{</span>
                    <span class="s1">type: </span><span class="s0">&quot;array&quot;</span><span class="s1">,</span>
                    <span class="s1">items: { type: </span><span class="s0">&quot;string&quot; </span><span class="s1">},</span>
                    <span class="s1">additionalItems: </span><span class="s4">false</span><span class="s1">,</span>
                    <span class="s1">minItems: </span><span class="s7">1</span>
                <span class="s1">}</span>
            <span class="s1">]</span>
        <span class="s1">},</span>

        <span class="s6">// Config at top-level.</span>
        <span class="s1">objectConfig: {</span>
            <span class="s1">type: </span><span class="s0">&quot;object&quot;</span><span class="s1">,</span>
            <span class="s1">properties: {</span>
                <span class="s1">root: { type: </span><span class="s0">&quot;boolean&quot; </span><span class="s1">},</span>
                <span class="s1">ignorePatterns: { $ref: </span><span class="s0">&quot;#/definitions/stringOrStrings&quot; </span><span class="s1">},</span>
                <span class="s5">...</span><span class="s2">baseConfigProperties</span>
            <span class="s1">},</span>
            <span class="s1">additionalProperties: </span><span class="s4">false</span>
        <span class="s1">},</span>

        <span class="s6">// Config in `overrides`.</span>
        <span class="s1">overrideConfig: {</span>
            <span class="s1">type: </span><span class="s0">&quot;object&quot;</span><span class="s1">,</span>
            <span class="s1">properties: {</span>
                <span class="s1">excludedFiles: { $ref: </span><span class="s0">&quot;#/definitions/stringOrStrings&quot; </span><span class="s1">},</span>
                <span class="s1">files: { $ref: </span><span class="s0">&quot;#/definitions/stringOrStringsRequired&quot; </span><span class="s1">},</span>
                <span class="s5">...</span><span class="s2">baseConfigProperties</span>
            <span class="s1">},</span>
            <span class="s1">required: [</span><span class="s0">&quot;files&quot;</span><span class="s1">],</span>
            <span class="s1">additionalProperties: </span><span class="s4">false</span>
        <span class="s1">}</span>
    <span class="s1">},</span>

    <span class="s1">$ref: </span><span class="s0">&quot;#/definitions/objectConfig&quot;</span>
<span class="s1">};</span>

<span class="s6">/**</span>
 <span class="s6">* </span><span class="s5">@fileoverview </span><span class="s6">Defines environment settings and globals. 
 * </span><span class="s5">@author </span><span class="s2">Elan Shanker 
 </span><span class="s6">*/</span>

<span class="s6">//------------------------------------------------------------------------------</span>
<span class="s6">// Helpers</span>
<span class="s6">//------------------------------------------------------------------------------</span>

<span class="s6">/**</span>
 <span class="s6">* Get the object that has difference. 
 * </span><span class="s5">@param </span><span class="s2">{Record&lt;string,boolean&gt;} current </span><span class="s6">The newer object. 
 * </span><span class="s5">@param </span><span class="s2">{Record&lt;string,boolean&gt;} prev </span><span class="s6">The older object. 
 * </span><span class="s5">@returns </span><span class="s2">{Record&lt;string,boolean&gt;} </span><span class="s6">The difference object. 
 */</span>
<span class="s5">function </span><span class="s1">getDiff(</span><span class="s2">current</span><span class="s1">, </span><span class="s2">prev</span><span class="s1">) {</span>
    <span class="s5">const </span><span class="s1">retv </span><span class="s5">= </span><span class="s1">{};</span>

    <span class="s5">for </span><span class="s1">(</span><span class="s5">const </span><span class="s1">[key, value] </span><span class="s5">of </span><span class="s2">Object</span><span class="s1">.</span><span class="s3">entries</span><span class="s1">(</span><span class="s2">current</span><span class="s1">)) {</span>
        <span class="s5">if </span><span class="s1">(</span><span class="s5">!</span><span class="s2">Object</span><span class="s1">.</span><span class="s2">hasOwnProperty</span><span class="s1">.</span><span class="s3">call</span><span class="s1">(</span><span class="s2">prev</span><span class="s1">, </span><span class="s2">key</span><span class="s1">)) {</span>
            <span class="s2">retv</span><span class="s1">[</span><span class="s2">key</span><span class="s1">] </span><span class="s5">= </span><span class="s2">value</span><span class="s1">;</span>
        <span class="s1">}</span>
    <span class="s1">}</span>

    <span class="s5">return </span><span class="s2">retv</span><span class="s1">;</span>
<span class="s1">}</span>

<span class="s2">const </span><span class="s1">newGlobals2015 </span><span class="s5">= </span><span class="s3">getDiff</span><span class="s1">(</span><span class="s2">globals__default</span><span class="s1">[</span><span class="s0">&quot;default&quot;</span><span class="s1">].</span><span class="s2">es2015</span><span class="s1">, </span><span class="s2">globals__default</span><span class="s1">[</span><span class="s0">&quot;default&quot;</span><span class="s1">].</span><span class="s2">es5</span><span class="s1">); </span><span class="s6">// 19 variables such as Promise, Map, ...</span>
<span class="s2">const </span><span class="s1">newGlobals2017 </span><span class="s5">= </span><span class="s1">{</span>
    <span class="s1">Atomics: </span><span class="s4">false</span><span class="s1">,</span>
    <span class="s1">SharedArrayBuffer: </span><span class="s4">false</span>
<span class="s1">};</span>
<span class="s2">const </span><span class="s1">newGlobals2020 </span><span class="s5">= </span><span class="s1">{</span>
    <span class="s1">BigInt: </span><span class="s4">false</span><span class="s1">,</span>
    <span class="s1">BigInt64Array: </span><span class="s4">false</span><span class="s1">,</span>
    <span class="s1">BigUint64Array: </span><span class="s4">false</span><span class="s1">,</span>
    <span class="s1">globalThis: </span><span class="s4">false</span>
<span class="s1">};</span>

<span class="s2">const </span><span class="s1">newGlobals2021 </span><span class="s5">= </span><span class="s1">{</span>
    <span class="s1">AggregateError: </span><span class="s4">false</span><span class="s1">,</span>
    <span class="s1">FinalizationRegistry: </span><span class="s4">false</span><span class="s1">,</span>
    <span class="s1">WeakRef: </span><span class="s4">false</span>
<span class="s1">};</span>

<span class="s6">//------------------------------------------------------------------------------</span>
<span class="s6">// Public Interface</span>
<span class="s6">//------------------------------------------------------------------------------</span>

<span class="s6">/** </span><span class="s5">@type </span><span class="s2">{Map&lt;string, import(&quot;../lib/shared/types&quot;).Environment&gt;} </span><span class="s6">*/</span>
<span class="s2">var </span><span class="s1">environments </span><span class="s5">= new </span><span class="s3">Map</span><span class="s1">(</span><span class="s2">Object</span><span class="s1">.</span><span class="s3">entries</span><span class="s1">({</span>

    <span class="s6">// Language</span>
    <span class="s1">builtin: {</span>
        <span class="s1">globals: </span><span class="s2">globals__default</span><span class="s1">[</span><span class="s0">&quot;default&quot;</span><span class="s1">].</span><span class="s2">es5</span>
    <span class="s1">},</span>
    <span class="s1">es6: {</span>
        <span class="s1">globals: </span><span class="s2">newGlobals2015</span><span class="s1">,</span>
        <span class="s1">parserOptions: {</span>
            <span class="s1">ecmaVersion: </span><span class="s7">6</span>
        <span class="s1">}</span>
    <span class="s1">},</span>
    <span class="s1">es2015: {</span>
        <span class="s1">globals: </span><span class="s2">newGlobals2015</span><span class="s1">,</span>
        <span class="s1">parserOptions: {</span>
            <span class="s1">ecmaVersion: </span><span class="s7">6</span>
        <span class="s1">}</span>
    <span class="s1">},</span>
    <span class="s1">es2016: {</span>
        <span class="s1">globals: </span><span class="s2">newGlobals2015</span><span class="s1">,</span>
        <span class="s1">parserOptions: {</span>
            <span class="s1">ecmaVersion: </span><span class="s7">7</span>
        <span class="s1">}</span>
    <span class="s1">},</span>
    <span class="s1">es2017: {</span>
        <span class="s1">globals: { </span><span class="s5">...</span><span class="s2">newGlobals2015</span><span class="s1">, </span><span class="s5">...</span><span class="s2">newGlobals2017 </span><span class="s1">},</span>
        <span class="s1">parserOptions: {</span>
            <span class="s1">ecmaVersion: </span><span class="s7">8</span>
        <span class="s1">}</span>
    <span class="s1">},</span>
    <span class="s1">es2018: {</span>
        <span class="s1">globals: { </span><span class="s5">...</span><span class="s2">newGlobals2015</span><span class="s1">, </span><span class="s5">...</span><span class="s2">newGlobals2017 </span><span class="s1">},</span>
        <span class="s1">parserOptions: {</span>
            <span class="s1">ecmaVersion: </span><span class="s7">9</span>
        <span class="s1">}</span>
    <span class="s1">},</span>
    <span class="s1">es2019: {</span>
        <span class="s1">globals: { </span><span class="s5">...</span><span class="s2">newGlobals2015</span><span class="s1">, </span><span class="s5">...</span><span class="s2">newGlobals2017 </span><span class="s1">},</span>
        <span class="s1">parserOptions: {</span>
            <span class="s1">ecmaVersion: </span><span class="s7">10</span>
        <span class="s1">}</span>
    <span class="s1">},</span>
    <span class="s1">es2020: {</span>
        <span class="s1">globals: { </span><span class="s5">...</span><span class="s2">newGlobals2015</span><span class="s1">, </span><span class="s5">...</span><span class="s2">newGlobals2017</span><span class="s1">, </span><span class="s5">...</span><span class="s2">newGlobals2020 </span><span class="s1">},</span>
        <span class="s1">parserOptions: {</span>
            <span class="s1">ecmaVersion: </span><span class="s7">11</span>
        <span class="s1">}</span>
    <span class="s1">},</span>
    <span class="s1">es2021: {</span>
        <span class="s1">globals: { </span><span class="s5">...</span><span class="s2">newGlobals2015</span><span class="s1">, </span><span class="s5">...</span><span class="s2">newGlobals2017</span><span class="s1">, </span><span class="s5">...</span><span class="s2">newGlobals2020</span><span class="s1">, </span><span class="s5">...</span><span class="s2">newGlobals2021 </span><span class="s1">},</span>
        <span class="s1">parserOptions: {</span>
            <span class="s1">ecmaVersion: </span><span class="s7">12</span>
        <span class="s1">}</span>
    <span class="s1">},</span>
    <span class="s1">es2022: {</span>
        <span class="s1">globals: { </span><span class="s5">...</span><span class="s2">newGlobals2015</span><span class="s1">, </span><span class="s5">...</span><span class="s2">newGlobals2017</span><span class="s1">, </span><span class="s5">...</span><span class="s2">newGlobals2020</span><span class="s1">, </span><span class="s5">...</span><span class="s2">newGlobals2021 </span><span class="s1">},</span>
        <span class="s1">parserOptions: {</span>
            <span class="s1">ecmaVersion: </span><span class="s7">13</span>
        <span class="s1">}</span>
    <span class="s1">},</span>
    <span class="s1">es2023: {</span>
        <span class="s1">globals: { </span><span class="s5">...</span><span class="s2">newGlobals2015</span><span class="s1">, </span><span class="s5">...</span><span class="s2">newGlobals2017</span><span class="s1">, </span><span class="s5">...</span><span class="s2">newGlobals2020</span><span class="s1">, </span><span class="s5">...</span><span class="s2">newGlobals2021 </span><span class="s1">},</span>
        <span class="s1">parserOptions: {</span>
            <span class="s1">ecmaVersion: </span><span class="s7">14</span>
        <span class="s1">}</span>
    <span class="s1">},</span>
    <span class="s1">es2024: {</span>
        <span class="s1">globals: { </span><span class="s5">...</span><span class="s2">newGlobals2015</span><span class="s1">, </span><span class="s5">...</span><span class="s2">newGlobals2017</span><span class="s1">, </span><span class="s5">...</span><span class="s2">newGlobals2020</span><span class="s1">, </span><span class="s5">...</span><span class="s2">newGlobals2021 </span><span class="s1">},</span>
        <span class="s1">parserOptions: {</span>
            <span class="s1">ecmaVersion: </span><span class="s7">15</span>
        <span class="s1">}</span>
    <span class="s1">},</span>

    <span class="s6">// Platforms</span>
    <span class="s1">browser: {</span>
        <span class="s1">globals: </span><span class="s2">globals__default</span><span class="s1">[</span><span class="s0">&quot;default&quot;</span><span class="s1">].</span><span class="s2">browser</span>
    <span class="s1">},</span>
    <span class="s1">node: {</span>
        <span class="s1">globals: </span><span class="s2">globals__default</span><span class="s1">[</span><span class="s0">&quot;default&quot;</span><span class="s1">].</span><span class="s2">node</span><span class="s1">,</span>
        <span class="s1">parserOptions: {</span>
            <span class="s1">ecmaFeatures: {</span>
                <span class="s1">globalReturn: </span><span class="s4">true</span>
            <span class="s1">}</span>
        <span class="s1">}</span>
    <span class="s1">},</span>
    <span class="s0">&quot;shared-node-browser&quot;</span><span class="s1">: {</span>
        <span class="s1">globals: </span><span class="s2">globals__default</span><span class="s1">[</span><span class="s0">&quot;default&quot;</span><span class="s1">][</span><span class="s0">&quot;shared-node-browser&quot;</span><span class="s1">]</span>
    <span class="s1">},</span>
    <span class="s1">worker: {</span>
        <span class="s1">globals: </span><span class="s2">globals__default</span><span class="s1">[</span><span class="s0">&quot;default&quot;</span><span class="s1">].</span><span class="s2">worker</span>
    <span class="s1">},</span>
    <span class="s1">serviceworker: {</span>
        <span class="s1">globals: </span><span class="s2">globals__default</span><span class="s1">[</span><span class="s0">&quot;default&quot;</span><span class="s1">].</span><span class="s2">serviceworker</span>
    <span class="s1">},</span>

    <span class="s6">// Frameworks</span>
    <span class="s1">commonjs: {</span>
        <span class="s1">globals: </span><span class="s2">globals__default</span><span class="s1">[</span><span class="s0">&quot;default&quot;</span><span class="s1">].</span><span class="s2">commonjs</span><span class="s1">,</span>
        <span class="s1">parserOptions: {</span>
            <span class="s1">ecmaFeatures: {</span>
                <span class="s1">globalReturn: </span><span class="s4">true</span>
            <span class="s1">}</span>
        <span class="s1">}</span>
    <span class="s1">},</span>
    <span class="s1">amd: {</span>
        <span class="s1">globals: </span><span class="s2">globals__default</span><span class="s1">[</span><span class="s0">&quot;default&quot;</span><span class="s1">].</span><span class="s2">amd</span>
    <span class="s1">},</span>
    <span class="s1">mocha: {</span>
        <span class="s1">globals: </span><span class="s2">globals__default</span><span class="s1">[</span><span class="s0">&quot;default&quot;</span><span class="s1">].</span><span class="s2">mocha</span>
    <span class="s1">},</span>
    <span class="s1">jasmine: {</span>
        <span class="s1">globals: </span><span class="s2">globals__default</span><span class="s1">[</span><span class="s0">&quot;default&quot;</span><span class="s1">].</span><span class="s2">jasmine</span>
    <span class="s1">},</span>
    <span class="s1">jest: {</span>
        <span class="s1">globals: </span><span class="s2">globals__default</span><span class="s1">[</span><span class="s0">&quot;default&quot;</span><span class="s1">].</span><span class="s2">jest</span>
    <span class="s1">},</span>
    <span class="s1">phantomjs: {</span>
        <span class="s1">globals: </span><span class="s2">globals__default</span><span class="s1">[</span><span class="s0">&quot;default&quot;</span><span class="s1">].</span><span class="s2">phantomjs</span>
    <span class="s1">},</span>
    <span class="s1">jquery: {</span>
        <span class="s1">globals: </span><span class="s2">globals__default</span><span class="s1">[</span><span class="s0">&quot;default&quot;</span><span class="s1">].</span><span class="s2">jquery</span>
    <span class="s1">},</span>
    <span class="s1">qunit: {</span>
        <span class="s1">globals: </span><span class="s2">globals__default</span><span class="s1">[</span><span class="s0">&quot;default&quot;</span><span class="s1">].</span><span class="s2">qunit</span>
    <span class="s1">},</span>
    <span class="s1">prototypejs: {</span>
        <span class="s1">globals: </span><span class="s2">globals__default</span><span class="s1">[</span><span class="s0">&quot;default&quot;</span><span class="s1">].</span><span class="s2">prototypejs</span>
    <span class="s1">},</span>
    <span class="s1">shelljs: {</span>
        <span class="s1">globals: </span><span class="s2">globals__default</span><span class="s1">[</span><span class="s0">&quot;default&quot;</span><span class="s1">].</span><span class="s2">shelljs</span>
    <span class="s1">},</span>
    <span class="s1">meteor: {</span>
        <span class="s1">globals: </span><span class="s2">globals__default</span><span class="s1">[</span><span class="s0">&quot;default&quot;</span><span class="s1">].</span><span class="s2">meteor</span>
    <span class="s1">},</span>
    <span class="s1">mongo: {</span>
        <span class="s1">globals: </span><span class="s2">globals__default</span><span class="s1">[</span><span class="s0">&quot;default&quot;</span><span class="s1">].</span><span class="s2">mongo</span>
    <span class="s1">},</span>
    <span class="s1">protractor: {</span>
        <span class="s1">globals: </span><span class="s2">globals__default</span><span class="s1">[</span><span class="s0">&quot;default&quot;</span><span class="s1">].</span><span class="s2">protractor</span>
    <span class="s1">},</span>
    <span class="s1">applescript: {</span>
        <span class="s1">globals: </span><span class="s2">globals__default</span><span class="s1">[</span><span class="s0">&quot;default&quot;</span><span class="s1">].</span><span class="s2">applescript</span>
    <span class="s1">},</span>
    <span class="s1">nashorn: {</span>
        <span class="s1">globals: </span><span class="s2">globals__default</span><span class="s1">[</span><span class="s0">&quot;default&quot;</span><span class="s1">].</span><span class="s2">nashorn</span>
    <span class="s1">},</span>
    <span class="s1">atomtest: {</span>
        <span class="s1">globals: </span><span class="s2">globals__default</span><span class="s1">[</span><span class="s0">&quot;default&quot;</span><span class="s1">].</span><span class="s2">atomtest</span>
    <span class="s1">},</span>
    <span class="s1">embertest: {</span>
        <span class="s1">globals: </span><span class="s2">globals__default</span><span class="s1">[</span><span class="s0">&quot;default&quot;</span><span class="s1">].</span><span class="s2">embertest</span>
    <span class="s1">},</span>
    <span class="s1">webextensions: {</span>
        <span class="s1">globals: </span><span class="s2">globals__default</span><span class="s1">[</span><span class="s0">&quot;default&quot;</span><span class="s1">].</span><span class="s2">webextensions</span>
    <span class="s1">},</span>
    <span class="s1">greasemonkey: {</span>
        <span class="s1">globals: </span><span class="s2">globals__default</span><span class="s1">[</span><span class="s0">&quot;default&quot;</span><span class="s1">].</span><span class="s2">greasemonkey</span>
    <span class="s1">}</span>
<span class="s1">})); 
</span>
<span class="s6">/**</span>
 <span class="s6">* </span><span class="s5">@fileoverview </span><span class="s6">Validates configs. 
 * </span><span class="s5">@author </span><span class="s2">Brandon Mills 
 </span><span class="s6">*/</span>

<span class="s2">const </span><span class="s1">ajv </span><span class="s5">= </span><span class="s3">ajvOrig</span><span class="s1">();</span>

<span class="s2">const </span><span class="s1">ruleValidators </span><span class="s5">= new </span><span class="s3">WeakMap</span><span class="s1">();</span>
<span class="s2">const </span><span class="s1">noop </span><span class="s5">= </span><span class="s1">Function.prototype;</span>

<span class="s6">//------------------------------------------------------------------------------</span>
<span class="s6">// Private</span>
<span class="s6">//------------------------------------------------------------------------------</span>
<span class="s2">let </span><span class="s1">validateSchema;</span>
<span class="s2">const </span><span class="s1">severityMap </span><span class="s5">= </span><span class="s1">{</span>
    <span class="s1">error: </span><span class="s7">2</span><span class="s1">,</span>
    <span class="s1">warn: </span><span class="s7">1</span><span class="s1">,</span>
    <span class="s1">off: </span><span class="s7">0</span>
<span class="s1">};</span>

<span class="s2">const </span><span class="s1">validated </span><span class="s5">= new </span><span class="s3">WeakSet</span><span class="s1">();</span>

<span class="s6">//-----------------------------------------------------------------------------</span>
<span class="s6">// Exports</span>
<span class="s6">//-----------------------------------------------------------------------------</span>

<span class="s5">class </span><span class="s2">ConfigValidator </span><span class="s1">{</span>
    <span class="s5">constructor</span><span class="s1">({ </span><span class="s2">builtInRules </span><span class="s5">= new </span><span class="s3">Map</span><span class="s1">() } </span><span class="s5">= </span><span class="s1">{}) {</span>
        <span class="s2">this</span><span class="s1">.</span><span class="s2">builtInRules </span><span class="s5">= </span><span class="s2">builtInRules</span><span class="s1">;</span>
    <span class="s1">}</span>

    <span class="s6">/**</span>
     <span class="s6">* Gets a complete options schema for a rule. 
     * </span><span class="s5">@param </span><span class="s2">{{create: Function, schema: (Array|null)}} rule </span><span class="s6">A new-style rule object 
     * </span><span class="s5">@returns </span><span class="s2">{Object} </span><span class="s6">JSON Schema for the rule's options. 
     */</span>
    <span class="s1">getRuleOptionsSchema(</span><span class="s2">rule</span><span class="s1">) {</span>
        <span class="s5">if </span><span class="s1">(</span><span class="s5">!</span><span class="s2">rule</span><span class="s1">) {</span>
            <span class="s5">return </span><span class="s4">null</span><span class="s1">;</span>
        <span class="s1">}</span>

        <span class="s5">const </span><span class="s1">schema </span><span class="s5">= </span><span class="s2">rule</span><span class="s1">.</span><span class="s2">schema </span><span class="s5">|| </span><span class="s2">rule</span><span class="s1">.</span><span class="s2">meta </span><span class="s5">&amp;&amp; </span><span class="s2">rule</span><span class="s1">.</span><span class="s2">meta</span><span class="s1">.</span><span class="s2">schema</span><span class="s1">;</span>

        <span class="s6">// Given a tuple of schemas, insert warning level at the beginning</span>
        <span class="s5">if </span><span class="s1">(</span><span class="s2">Array</span><span class="s1">.</span><span class="s3">isArray</span><span class="s1">(</span><span class="s2">schema</span><span class="s1">)) {</span>
            <span class="s5">if </span><span class="s1">(</span><span class="s2">schema</span><span class="s1">.length) {</span>
                <span class="s5">return </span><span class="s1">{</span>
                    <span class="s1">type: </span><span class="s0">&quot;array&quot;</span><span class="s1">,</span>
                    <span class="s1">items: </span><span class="s2">schema</span><span class="s1">,</span>
                    <span class="s1">minItems: </span><span class="s7">0</span><span class="s1">,</span>
                    <span class="s1">maxItems: </span><span class="s2">schema</span><span class="s1">.length</span>
                <span class="s1">};</span>
            <span class="s1">}</span>
            <span class="s5">return </span><span class="s1">{</span>
                <span class="s1">type: </span><span class="s0">&quot;array&quot;</span><span class="s1">,</span>
                <span class="s1">minItems: </span><span class="s7">0</span><span class="s1">,</span>
                <span class="s1">maxItems: </span><span class="s7">0</span>
            <span class="s1">};</span>

        <span class="s1">}</span>

        <span class="s6">// Given a full schema, leave it alone</span>
        <span class="s5">return </span><span class="s2">schema </span><span class="s5">|| </span><span class="s4">null</span><span class="s1">;</span>
    <span class="s1">}</span>

    <span class="s6">/**</span>
     <span class="s6">* Validates a rule's severity and returns the severity value. Throws an error if the severity is invalid. 
     * </span><span class="s5">@param </span><span class="s2">{options} options </span><span class="s6">The given options for the rule. 
     * </span><span class="s5">@returns </span><span class="s2">{number|string} </span><span class="s6">The rule's severity value 
     */</span>
    <span class="s1">validateRuleSeverity(</span><span class="s2">options</span><span class="s1">) {</span>
        <span class="s5">const </span><span class="s1">severity </span><span class="s5">= </span><span class="s2">Array</span><span class="s1">.</span><span class="s3">isArray</span><span class="s1">(</span><span class="s2">options</span><span class="s1">) </span><span class="s5">? </span><span class="s2">options</span><span class="s1">[</span><span class="s7">0</span><span class="s1">] </span><span class="s5">: </span><span class="s2">options</span><span class="s1">;</span>
        <span class="s5">const </span><span class="s1">normSeverity </span><span class="s5">= typeof </span><span class="s2">severity </span><span class="s5">=== </span><span class="s0">&quot;string&quot; </span><span class="s5">? </span><span class="s2">severityMap</span><span class="s1">[</span><span class="s2">severity</span><span class="s1">.</span><span class="s3">toLowerCase</span><span class="s1">()] </span><span class="s5">: </span><span class="s2">severity</span><span class="s1">;</span>

        <span class="s5">if </span><span class="s1">(</span><span class="s2">normSeverity </span><span class="s5">=== </span><span class="s7">0 </span><span class="s5">|| </span><span class="s2">normSeverity </span><span class="s5">=== </span><span class="s7">1 </span><span class="s5">|| </span><span class="s2">normSeverity </span><span class="s5">=== </span><span class="s7">2</span><span class="s1">) {</span>
            <span class="s5">return </span><span class="s2">normSeverity</span><span class="s1">;</span>
        <span class="s1">}</span>

        <span class="s5">throw new </span><span class="s3">Error</span><span class="s1">(</span><span class="s0">`</span><span class="s8">\t</span><span class="s0">Severity should be one of the following: 0 = off, 1 = warn, 2 = error (you passed '${</span><span class="s2">util__default</span><span class="s0">[&quot;default&quot;].</span><span class="s3">inspect</span><span class="s0">(</span><span class="s2">severity</span><span class="s0">).</span><span class="s3">replace</span><span class="s0">(/'/</span><span class="s5">gu</span><span class="s0">, &quot;</span><span class="s8">\&quot;</span><span class="s0">&quot;).</span><span class="s3">replace</span><span class="s0">(/</span><span class="s4">\n</span><span class="s0">/</span><span class="s5">gu</span><span class="s0">, &quot;&quot;)}').</span><span class="s8">\n</span><span class="s0">`</span><span class="s1">);</span>

    <span class="s1">}</span>

    <span class="s6">/**</span>
     <span class="s6">* Validates the non-severity options passed to a rule, based on its schema. 
     * </span><span class="s5">@param </span><span class="s2">{{create: Function}} rule </span><span class="s6">The rule to validate 
     * </span><span class="s5">@param </span><span class="s2">{Array} localOptions </span><span class="s6">The options for the rule, excluding severity 
     * </span><span class="s5">@returns </span><span class="s2">{void}</span>
     <span class="s6">*/ 
    validateRuleSchema(rule, localOptions) { 
        if (!ruleValidators.has(rule)) { 
            const schema = this.getRuleOptionsSchema(rule); 
</span>
            <span class="s6">if (schema) { 
                ruleValidators.set(rule, ajv.compile(schema)); 
            } 
        } 
</span>
        <span class="s6">const validateRule = ruleValidators.get(rule); 
</span>
        <span class="s6">if (validateRule) { 
            validateRule(localOptions); 
            if (validateRule.errors) { 
                throw new Error(validateRule.errors.map( 
                    error =&gt; `\tValue ${JSON.stringify(error.data)} ${error.message}.\n` 
                ).join(&quot;&quot;)); 
            } 
        } 
    } 
</span>
    <span class="s6">/** 
     * Validates a rule's options against its schema. 
     * </span><span class="s5">@param </span><span class="s2">{{create: Function}|null} rule </span><span class="s6">The rule that the config is being validated for 
     * </span><span class="s5">@param </span><span class="s2">{string} ruleId </span><span class="s6">The rule's unique name. 
     * </span><span class="s5">@param </span><span class="s2">{Array|number} options </span><span class="s6">The given options for the rule. 
     * </span><span class="s5">@param </span><span class="s2">{string|null} source </span><span class="s6">The name of the configuration source to report in any errors. If null or undefined, 
     * no source is prepended to the message. 
     * </span><span class="s5">@returns </span><span class="s2">{void}</span>
     <span class="s6">*/ 
    validateRuleOptions(rule, ruleId, options, source = null) { 
        try { 
            const severity = this.validateRuleSeverity(options); 
</span>
            <span class="s6">if (severity !== 0) { 
                this.validateRuleSchema(rule, Array.isArray(options) ? options.slice(1) : []); 
            } 
        } catch (err) { 
            const enhancedMessage = `Configuration for rule &quot;${ruleId}&quot; is invalid:\n${err.message}`; 
</span>
            <span class="s6">if (typeof source === &quot;string&quot;) { 
                throw new Error(`${source}:\n\t${enhancedMessage}`); 
            } else { 
                throw new Error(enhancedMessage); 
            } 
        } 
    } 
</span>
    <span class="s6">/** 
     * Validates an environment object 
     * </span><span class="s5">@param </span><span class="s2">{Object} environment </span><span class="s6">The environment config object to validate. 
     * </span><span class="s5">@param </span><span class="s2">{string} source </span><span class="s6">The name of the configuration source to report in any errors. 
     * </span><span class="s5">@param </span><span class="s2">{function(envId:string): Object} [getAdditionalEnv] </span><span class="s6">A map from strings to loaded environments. 
     * </span><span class="s5">@returns </span><span class="s2">{void}</span>
     <span class="s6">*/ 
    validateEnvironment( 
        environment, 
        source, 
        getAdditionalEnv = noop 
    ) { 
</span>
        <span class="s6">// not having an environment is ok 
        if (!environment) { 
            return; 
        } 
</span>
        <span class="s6">Object.keys(environment).forEach(id =&gt; { 
            const env = getAdditionalEnv(id) || environments.get(id) || null; 
</span>
            <span class="s6">if (!env) { 
                const message = `${source}:\n\tEnvironment key &quot;${id}&quot; is unknown\n`; 
</span>
                <span class="s6">throw new Error(message); 
            } 
        }); 
    } 
</span>
    <span class="s6">/** 
     * Validates a rules config object 
     * </span><span class="s5">@param </span><span class="s2">{Object} rulesConfig </span><span class="s6">The rules config object to validate. 
     * </span><span class="s5">@param </span><span class="s2">{string} source </span><span class="s6">The name of the configuration source to report in any errors. 
     * </span><span class="s5">@param </span><span class="s2">{function(ruleId:string): Object} getAdditionalRule </span><span class="s6">A map from strings to loaded rules 
     * </span><span class="s5">@returns </span><span class="s2">{void}</span>
     <span class="s6">*/ 
    validateRules( 
        rulesConfig, 
        source, 
        getAdditionalRule = noop 
    ) { 
        if (!rulesConfig) { 
            return; 
        } 
</span>
        <span class="s6">Object.keys(rulesConfig).forEach(id =&gt; { 
            const rule = getAdditionalRule(id) || this.builtInRules.get(id) || null; 
</span>
            <span class="s6">this.validateRuleOptions(rule, id, rulesConfig[id], source); 
        }); 
    } 
</span>
    <span class="s6">/** 
     * Validates a `globals` section of a config file 
     * </span><span class="s5">@param </span><span class="s2">{Object} globalsConfig </span><span class="s6">The `globals` section 
     * </span><span class="s5">@param </span><span class="s2">{string|null} source </span><span class="s6">The name of the configuration source to report in the event of an error. 
     * </span><span class="s5">@returns </span><span class="s2">{void}</span>
     <span class="s6">*/ 
    validateGlobals(globalsConfig, source = null) { 
        if (!globalsConfig) { 
            return; 
        } 
</span>
        <span class="s6">Object.entries(globalsConfig) 
            .forEach(([configuredGlobal, configuredValue]) =&gt; { 
                try { 
                    normalizeConfigGlobal(configuredValue); 
                } catch (err) { 
                    throw new Error(`ESLint configuration of global '${configuredGlobal}' in ${source} is invalid:\n${err.message}`); 
                } 
            }); 
    } 
</span>
    <span class="s6">/** 
     * Validate `processor` configuration. 
     * </span><span class="s5">@param </span><span class="s2">{string|undefined} processorName </span><span class="s6">The processor name. 
     * </span><span class="s5">@param </span><span class="s2">{string} source </span><span class="s6">The name of config file. 
     * </span><span class="s5">@param </span><span class="s2">{function(id:string): Processor} getProcessor </span><span class="s6">The getter of defined processors. 
     * </span><span class="s5">@returns </span><span class="s2">{void}</span>
     <span class="s6">*/ 
    validateProcessor(processorName, source, getProcessor) { 
        if (processorName &amp;&amp; !getProcessor(processorName)) { 
            throw new Error(`ESLint configuration of processor in '${source}' is invalid: '${processorName}' was not found.`); 
        } 
    } 
</span>
    <span class="s6">/** 
     * Formats an array of schema validation errors. 
     * </span><span class="s5">@param </span><span class="s2">{Array} errors </span><span class="s6">An array of error messages to format. 
     * </span><span class="s5">@returns </span><span class="s2">{string} </span><span class="s6">Formatted error message 
     */</span>
    <span class="s1">formatErrors(</span><span class="s2">errors</span><span class="s1">) {</span>
        <span class="s5">return </span><span class="s2">errors</span><span class="s1">.</span><span class="s3">map</span><span class="s1">(</span><span class="s2">error </span><span class="s5">=&gt; </span><span class="s1">{</span>
            <span class="s5">if </span><span class="s1">(</span><span class="s2">error</span><span class="s1">.</span><span class="s2">keyword </span><span class="s5">=== </span><span class="s0">&quot;additionalProperties&quot;</span><span class="s1">) {</span>
                <span class="s5">const </span><span class="s1">formattedPropertyPath </span><span class="s5">= </span><span class="s2">error</span><span class="s1">.</span><span class="s2">dataPath</span><span class="s1">.length </span><span class="s5">? </span><span class="s0">`${</span><span class="s2">error</span><span class="s0">.</span><span class="s2">dataPath</span><span class="s0">.</span><span class="s3">slice</span><span class="s0">(</span><span class="s7">1</span><span class="s0">)}.${</span><span class="s2">error</span><span class="s0">.</span><span class="s2">params</span><span class="s0">.</span><span class="s2">additionalProperty</span><span class="s0">}` </span><span class="s5">: </span><span class="s2">error</span><span class="s1">.</span><span class="s2">params</span><span class="s1">.</span><span class="s2">additionalProperty</span><span class="s1">;</span>

                <span class="s5">return </span><span class="s0">`Unexpected top-level property &quot;${</span><span class="s2">formattedPropertyPath</span><span class="s0">}&quot;`</span><span class="s1">;</span>
            <span class="s1">}</span>
            <span class="s5">if </span><span class="s1">(</span><span class="s2">error</span><span class="s1">.</span><span class="s2">keyword </span><span class="s5">=== </span><span class="s0">&quot;type&quot;</span><span class="s1">) {</span>
                <span class="s5">const </span><span class="s1">formattedField </span><span class="s5">= </span><span class="s2">error</span><span class="s1">.</span><span class="s2">dataPath</span><span class="s1">.</span><span class="s3">slice</span><span class="s1">(</span><span class="s7">1</span><span class="s1">);</span>
                <span class="s5">const </span><span class="s1">formattedExpectedType </span><span class="s5">= </span><span class="s2">Array</span><span class="s1">.</span><span class="s3">isArray</span><span class="s1">(</span><span class="s2">error</span><span class="s1">.</span><span class="s2">schema</span><span class="s1">) </span><span class="s5">? </span><span class="s2">error</span><span class="s1">.</span><span class="s2">schema</span><span class="s1">.</span><span class="s3">join</span><span class="s1">(</span><span class="s0">&quot;/&quot;</span><span class="s1">) </span><span class="s5">: </span><span class="s2">error</span><span class="s1">.</span><span class="s2">schema</span><span class="s1">;</span>
                <span class="s5">const </span><span class="s1">formattedValue </span><span class="s5">= </span><span class="s2">JSON</span><span class="s1">.</span><span class="s3">stringify</span><span class="s1">(</span><span class="s2">error</span><span class="s1">.</span><span class="s2">data</span><span class="s1">);</span>

                <span class="s5">return </span><span class="s0">`Property &quot;${</span><span class="s2">formattedField</span><span class="s0">}&quot; is the wrong type (expected ${</span><span class="s2">formattedExpectedType</span><span class="s0">} but got </span><span class="s8">\`</span><span class="s0">${</span><span class="s2">formattedValue</span><span class="s0">}</span><span class="s8">\`</span><span class="s0">)`</span><span class="s1">;</span>
            <span class="s1">}</span>

            <span class="s5">const </span><span class="s1">field </span><span class="s5">= </span><span class="s2">error</span><span class="s1">.</span><span class="s2">dataPath</span><span class="s1">[</span><span class="s7">0</span><span class="s1">] </span><span class="s5">=== </span><span class="s0">&quot;.&quot; </span><span class="s5">? </span><span class="s2">error</span><span class="s1">.</span><span class="s2">dataPath</span><span class="s1">.</span><span class="s3">slice</span><span class="s1">(</span><span class="s7">1</span><span class="s1">) </span><span class="s5">: </span><span class="s2">error</span><span class="s1">.</span><span class="s2">dataPath</span><span class="s1">;</span>

            <span class="s5">return </span><span class="s0">`&quot;${</span><span class="s2">field</span><span class="s0">}&quot; ${</span><span class="s2">error</span><span class="s0">.</span><span class="s2">message</span><span class="s0">}. Value: ${</span><span class="s2">JSON</span><span class="s0">.</span><span class="s3">stringify</span><span class="s0">(</span><span class="s2">error</span><span class="s0">.</span><span class="s2">data</span><span class="s0">)}`</span><span class="s1">;</span>
        <span class="s1">}).</span><span class="s3">map</span><span class="s1">(</span><span class="s2">message </span><span class="s5">=&gt; </span><span class="s0">`</span><span class="s8">\t</span><span class="s0">- ${</span><span class="s2">message</span><span class="s0">}.</span><span class="s8">\n</span><span class="s0">`</span><span class="s1">).</span><span class="s3">join</span><span class="s1">(</span><span class="s0">&quot;&quot;</span><span class="s1">);</span>
    <span class="s1">}</span>

    <span class="s6">/**</span>
     <span class="s6">* Validates the top level properties of the config object. 
     * </span><span class="s5">@param </span><span class="s2">{Object} config </span><span class="s6">The config object to validate. 
     * </span><span class="s5">@param </span><span class="s2">{string} source </span><span class="s6">The name of the configuration source to report in any errors. 
     * </span><span class="s5">@returns </span><span class="s2">{void}</span>
     <span class="s6">*/ 
    validateConfigSchema(config, source = null) { 
        validateSchema = validateSchema || ajv.compile(configSchema); 
</span>
        <span class="s6">if (!validateSchema(config)) { 
            throw new Error(`ESLint configuration in ${source} is invalid:\n${this.formatErrors(validateSchema.errors)}`); 
        } 
</span>
        <span class="s6">if (Object.hasOwnProperty.call(config, &quot;ecmaFeatures&quot;)) { 
            emitDeprecationWarning(source, &quot;ESLINT_LEGACY_ECMAFEATURES&quot;); 
        } 
    } 
</span>
    <span class="s6">/** 
     * Validates an entire config object. 
     * </span><span class="s5">@param </span><span class="s2">{Object} config </span><span class="s6">The config object to validate. 
     * </span><span class="s5">@param </span><span class="s2">{string} source </span><span class="s6">The name of the configuration source to report in any errors. 
     * </span><span class="s5">@param </span><span class="s2">{function(ruleId:string): Object} [getAdditionalRule] </span><span class="s6">A map from strings to loaded rules. 
     * </span><span class="s5">@param </span><span class="s2">{function(envId:string): Object} [getAdditionalEnv] </span><span class="s6">A map from strings to loaded envs. 
     * </span><span class="s5">@returns </span><span class="s2">{void}</span>
     <span class="s6">*/ 
    validate(config, source, getAdditionalRule, getAdditionalEnv) { 
        this.validateConfigSchema(config, source); 
        this.validateRules(config.rules, source, getAdditionalRule); 
        this.validateEnvironment(config.env, source, getAdditionalEnv); 
        this.validateGlobals(config.globals, source); 
</span>
        <span class="s6">for (const override of config.overrides || []) { 
            this.validateRules(override.rules, source, getAdditionalRule); 
            this.validateEnvironment(override.env, source, getAdditionalEnv); 
            this.validateGlobals(config.globals, source); 
        } 
    } 
</span>
    <span class="s6">/** 
     * Validate config array object. 
     * </span><span class="s5">@param </span><span class="s2">{ConfigArray} configArray </span><span class="s6">The config array to validate. 
     * </span><span class="s5">@returns </span><span class="s2">{void}</span>
     <span class="s6">*/ 
    validateConfigArray(configArray) { 
        const getPluginEnv = Map.prototype.get.bind(configArray.pluginEnvironments); 
        const getPluginProcessor = Map.prototype.get.bind(configArray.pluginProcessors); 
        const getPluginRule = Map.prototype.get.bind(configArray.pluginRules); 
</span>
        <span class="s6">// Validate. 
        for (const element of configArray) { 
            if (validated.has(element)) { 
                continue; 
            } 
            validated.add(element); 
</span>
            <span class="s6">this.validateEnvironment(element.env, element.name, getPluginEnv); 
            this.validateGlobals(element.globals, element.name); 
            this.validateProcessor(element.processor, element.name, getPluginProcessor); 
            this.validateRules(element.rules, element.name, getPluginRule); 
        } 
    } 
</span>
<span class="s6">} 
</span>
<span class="s6">/** 
 * </span><span class="s5">@fileoverview </span><span class="s6">Common helpers for naming of plugins, formatters and configs 
 */</span>

<span class="s2">const </span><span class="s1">NAMESPACE_REGEX </span><span class="s5">= </span><span class="s0">/</span><span class="s5">^</span><span class="s0">@</span><span class="s4">.</span><span class="s5">*</span><span class="s8">\/</span><span class="s0">/</span><span class="s5">iu</span><span class="s1">;</span>

<span class="s6">/**</span>
 <span class="s6">* Brings package name to correct format based on prefix 
 * </span><span class="s5">@param </span><span class="s2">{string} name </span><span class="s6">The name of the package. 
 * </span><span class="s5">@param </span><span class="s2">{string} prefix </span><span class="s6">Can be either &quot;eslint-plugin&quot;, &quot;eslint-config&quot; or &quot;eslint-formatter&quot; 
 * </span><span class="s5">@returns </span><span class="s2">{string} </span><span class="s6">Normalized name of the package 
 * </span><span class="s5">@private</span>
 <span class="s6">*/</span>
<span class="s5">function </span><span class="s1">normalizePackageName(</span><span class="s2">name</span><span class="s1">, </span><span class="s2">prefix</span><span class="s1">) {</span>
    <span class="s5">let </span><span class="s1">normalizedName </span><span class="s5">= </span><span class="s2">name</span><span class="s1">;</span>

    <span class="s6">/**</span>
     <span class="s6">* On Windows, name can come in with Windows slashes instead of Unix slashes. 
     * Normalize to Unix first to avoid errors later on. 
     * https://github.com/eslint/eslint/issues/5644 
     */</span>
    <span class="s5">if </span><span class="s1">(</span><span class="s2">normalizedName</span><span class="s1">.</span><span class="s3">includes</span><span class="s1">(</span><span class="s0">&quot;</span><span class="s8">\\</span><span class="s0">&quot;</span><span class="s1">)) {</span>
        <span class="s2">normalizedName </span><span class="s5">= </span><span class="s2">normalizedName</span><span class="s1">.</span><span class="s3">replace</span><span class="s1">(</span><span class="s0">/</span><span class="s8">\\</span><span class="s0">/</span><span class="s5">gu</span><span class="s1">, </span><span class="s0">&quot;/&quot;</span><span class="s1">);</span>
    <span class="s1">}</span>

    <span class="s5">if </span><span class="s1">(</span><span class="s2">normalizedName</span><span class="s1">.</span><span class="s3">charAt</span><span class="s1">(</span><span class="s7">0</span><span class="s1">) </span><span class="s5">=== </span><span class="s0">&quot;@&quot;</span><span class="s1">) {</span>

        <span class="s6">/**</span>
         <span class="s6">* it's a scoped package 
         * package name is the prefix, or just a username 
         */</span>
        <span class="s5">const </span><span class="s1">scopedPackageShortcutRegex </span><span class="s5">= new </span><span class="s3">RegExp</span><span class="s1">(</span><span class="s0">`^(@[^/]+)(?:/(?:${</span><span class="s2">prefix</span><span class="s0">})?)?$`</span><span class="s1">, </span><span class="s0">&quot;u&quot;</span><span class="s1">),</span>
            <span class="s1">scopedPackageNameRegex </span><span class="s5">= new </span><span class="s3">RegExp</span><span class="s1">(</span><span class="s0">`^${</span><span class="s2">prefix</span><span class="s0">}(-|$)`</span><span class="s1">, </span><span class="s0">&quot;u&quot;</span><span class="s1">);</span>

        <span class="s5">if </span><span class="s1">(</span><span class="s2">scopedPackageShortcutRegex</span><span class="s1">.</span><span class="s3">test</span><span class="s1">(</span><span class="s2">normalizedName</span><span class="s1">)) {</span>
            <span class="s2">normalizedName </span><span class="s5">= </span><span class="s2">normalizedName</span><span class="s1">.</span><span class="s3">replace</span><span class="s1">(</span><span class="s2">scopedPackageShortcutRegex</span><span class="s1">, </span><span class="s0">`$1/${</span><span class="s2">prefix</span><span class="s0">}`</span><span class="s1">);</span>
        <span class="s1">} </span><span class="s5">else if </span><span class="s1">(</span><span class="s5">!</span><span class="s2">scopedPackageNameRegex</span><span class="s1">.</span><span class="s3">test</span><span class="s1">(</span><span class="s2">normalizedName</span><span class="s1">.</span><span class="s3">split</span><span class="s1">(</span><span class="s0">&quot;/&quot;</span><span class="s1">)[</span><span class="s7">1</span><span class="s1">])) {</span>

            <span class="s6">/**</span>
             <span class="s6">* for scoped packages, insert the prefix after the first / unless 
             * the path is already @scope/eslint or @scope/eslint-xxx-yyy 
             */</span>
            <span class="s2">normalizedName </span><span class="s5">= </span><span class="s2">normalizedName</span><span class="s1">.</span><span class="s3">replace</span><span class="s1">(</span><span class="s0">/</span><span class="s5">^</span><span class="s0">@(</span><span class="s4">[</span><span class="s8">^</span><span class="s4">/]</span><span class="s5">+</span><span class="s0">)</span><span class="s8">\/</span><span class="s0">(</span><span class="s4">.</span><span class="s5">*</span><span class="s0">)</span><span class="s5">$</span><span class="s0">/</span><span class="s5">u</span><span class="s1">, </span><span class="s0">`@$1/${</span><span class="s2">prefix</span><span class="s0">}-$2`</span><span class="s1">);</span>
        <span class="s1">}</span>
    <span class="s1">} </span><span class="s5">else if </span><span class="s1">(</span><span class="s5">!</span><span class="s2">normalizedName</span><span class="s1">.</span><span class="s3">startsWith</span><span class="s1">(</span><span class="s0">`${</span><span class="s2">prefix</span><span class="s0">}-`</span><span class="s1">)) {</span>
        <span class="s2">normalizedName </span><span class="s5">= </span><span class="s0">`${</span><span class="s2">prefix</span><span class="s0">}-${</span><span class="s2">normalizedName</span><span class="s0">}`</span><span class="s1">;</span>
    <span class="s1">}</span>

    <span class="s5">return </span><span class="s2">normalizedName</span><span class="s1">;</span>
<span class="s1">}</span>

<span class="s6">/**</span>
 <span class="s6">* Removes the prefix from a fullname. 
 * </span><span class="s5">@param </span><span class="s2">{string} fullname </span><span class="s6">The term which may have the prefix. 
 * </span><span class="s5">@param </span><span class="s2">{string} prefix </span><span class="s6">The prefix to remove. 
 * </span><span class="s5">@returns </span><span class="s2">{string} </span><span class="s6">The term without prefix. 
 */</span>
<span class="s5">function </span><span class="s1">getShorthandName(</span><span class="s2">fullname</span><span class="s1">, </span><span class="s2">prefix</span><span class="s1">) {</span>
    <span class="s5">if </span><span class="s1">(</span><span class="s2">fullname</span><span class="s1">[</span><span class="s7">0</span><span class="s1">] </span><span class="s5">=== </span><span class="s0">&quot;@&quot;</span><span class="s1">) {</span>
        <span class="s5">let </span><span class="s1">matchResult </span><span class="s5">= new </span><span class="s3">RegExp</span><span class="s1">(</span><span class="s0">`^(@[^/]+)/${</span><span class="s2">prefix</span><span class="s0">}$`</span><span class="s1">, </span><span class="s0">&quot;u&quot;</span><span class="s1">).</span><span class="s3">exec</span><span class="s1">(</span><span class="s2">fullname</span><span class="s1">);</span>

        <span class="s5">if </span><span class="s1">(</span><span class="s2">matchResult</span><span class="s1">) {</span>
            <span class="s5">return </span><span class="s2">matchResult</span><span class="s1">[</span><span class="s7">1</span><span class="s1">];</span>
        <span class="s1">}</span>

        <span class="s2">matchResult </span><span class="s5">= new </span><span class="s3">RegExp</span><span class="s1">(</span><span class="s0">`^(@[^/]+)/${</span><span class="s2">prefix</span><span class="s0">}-(.+)$`</span><span class="s1">, </span><span class="s0">&quot;u&quot;</span><span class="s1">).</span><span class="s3">exec</span><span class="s1">(</span><span class="s2">fullname</span><span class="s1">);</span>
        <span class="s5">if </span><span class="s1">(</span><span class="s2">matchResult</span><span class="s1">) {</span>
            <span class="s5">return </span><span class="s0">`${</span><span class="s2">matchResult</span><span class="s0">[</span><span class="s7">1</span><span class="s0">]}/${</span><span class="s2">matchResult</span><span class="s0">[</span><span class="s7">2</span><span class="s0">]}`</span><span class="s1">;</span>
        <span class="s1">}</span>
    <span class="s1">} </span><span class="s5">else if </span><span class="s1">(</span><span class="s2">fullname</span><span class="s1">.</span><span class="s3">startsWith</span><span class="s1">(</span><span class="s0">`${</span><span class="s2">prefix</span><span class="s0">}-`</span><span class="s1">)) {</span>
        <span class="s5">return </span><span class="s2">fullname</span><span class="s1">.</span><span class="s3">slice</span><span class="s1">(</span><span class="s2">prefix</span><span class="s1">.length </span><span class="s5">+ </span><span class="s7">1</span><span class="s1">);</span>
    <span class="s1">}</span>

    <span class="s5">return </span><span class="s2">fullname</span><span class="s1">;</span>
<span class="s1">}</span>

<span class="s6">/**</span>
 <span class="s6">* Gets the scope (namespace) of a term. 
 * </span><span class="s5">@param </span><span class="s2">{string} term </span><span class="s6">The term which may have the namespace. 
 * </span><span class="s5">@returns </span><span class="s2">{string} </span><span class="s6">The namespace of the term if it has one. 
 */</span>
<span class="s5">function </span><span class="s1">getNamespaceFromTerm(</span><span class="s2">term</span><span class="s1">) {</span>
    <span class="s5">const </span><span class="s1">match </span><span class="s5">= </span><span class="s2">term</span><span class="s1">.</span><span class="s3">match</span><span class="s1">(</span><span class="s2">NAMESPACE_REGEX</span><span class="s1">);</span>

    <span class="s5">return </span><span class="s2">match </span><span class="s5">? </span><span class="s2">match</span><span class="s1">[</span><span class="s7">0</span><span class="s1">] </span><span class="s5">: </span><span class="s0">&quot;&quot;</span><span class="s1">;</span>
<span class="s1">}</span>

<span class="s2">var </span><span class="s1">naming </span><span class="s5">= </span><span class="s1">{</span>
    <span class="s1">__proto__: </span><span class="s4">null</span><span class="s1">,</span>
    <span class="s1">normalizePackageName: </span><span class="s2">normalizePackageName</span><span class="s1">,</span>
    <span class="s1">getShorthandName: </span><span class="s2">getShorthandName</span><span class="s1">,</span>
    <span class="s1">getNamespaceFromTerm: </span><span class="s2">getNamespaceFromTerm</span>
<span class="s1">};</span>

<span class="s6">/**</span>
 <span class="s6">* Utility for resolving a module relative to another module 
 * </span><span class="s5">@author </span><span class="s2">Teddy Katz 
 </span><span class="s6">*/</span>

<span class="s6">/*</span>
 <span class="s6">* `Module.createRequire` is added in v12.2.0. It supports URL as well. 
 * We only support the case where the argument is a filepath, not a URL. 
 */</span>
<span class="s2">const </span><span class="s1">createRequire </span><span class="s5">= </span><span class="s2">Module__default</span><span class="s1">[</span><span class="s0">&quot;default&quot;</span><span class="s1">].</span><span class="s2">createRequire</span><span class="s1">;</span>

<span class="s6">/**</span>
 <span class="s6">* Resolves a Node module relative to another module 
 * </span><span class="s5">@param </span><span class="s2">{string} moduleName </span><span class="s6">The name of a Node module, or a path to a Node module. 
 * </span><span class="s5">@param </span><span class="s2">{string} relativeToPath </span><span class="s6">An absolute path indicating the module that `moduleName` should be resolved relative to. This must be 
 * a file rather than a directory, but the file need not actually exist. 
 * </span><span class="s5">@returns </span><span class="s2">{string} </span><span class="s6">The absolute path that would result from calling `require.resolve(moduleName)` in a file located at `relativeToPath` 
 */</span>
<span class="s5">function </span><span class="s1">resolve(</span><span class="s2">moduleName</span><span class="s1">, </span><span class="s2">relativeToPath</span><span class="s1">) {</span>
    <span class="s5">try </span><span class="s1">{</span>
        <span class="s5">return </span><span class="s3">createRequire</span><span class="s1">(</span><span class="s2">relativeToPath</span><span class="s1">).</span><span class="s3">resolve</span><span class="s1">(</span><span class="s2">moduleName</span><span class="s1">);</span>
    <span class="s1">} </span><span class="s5">catch </span><span class="s1">(</span><span class="s2">error</span><span class="s1">) {</span>

        <span class="s6">// This `if` block is for older Node.js than 12.0.0. We can remove this block in the future.</span>
        <span class="s5">if </span><span class="s1">(</span>
            <span class="s5">typeof </span><span class="s2">error </span><span class="s5">=== </span><span class="s0">&quot;object&quot; </span><span class="s5">&amp;&amp;</span>
            <span class="s2">error </span><span class="s5">!== </span><span class="s4">null </span><span class="s5">&amp;&amp;</span>
            <span class="s2">error</span><span class="s1">.</span><span class="s2">code </span><span class="s5">=== </span><span class="s0">&quot;MODULE_NOT_FOUND&quot; </span><span class="s5">&amp;&amp;</span>
            <span class="s5">!</span><span class="s2">error</span><span class="s1">.</span><span class="s2">requireStack </span><span class="s5">&amp;&amp;</span>
            <span class="s2">error</span><span class="s1">.</span><span class="s2">message</span><span class="s1">.</span><span class="s3">includes</span><span class="s1">(</span><span class="s2">moduleName</span><span class="s1">)</span>
        <span class="s1">) {</span>
            <span class="s2">error</span><span class="s1">.</span><span class="s2">message </span><span class="s5">+= </span><span class="s0">`</span><span class="s8">\n</span><span class="s0">Require stack:</span><span class="s8">\n</span><span class="s0">- ${</span><span class="s2">relativeToPath</span><span class="s0">}`</span><span class="s1">;</span>
        <span class="s1">}</span>
        <span class="s5">throw </span><span class="s2">error</span><span class="s1">;</span>
    <span class="s1">}</span>
<span class="s1">}</span>

<span class="s2">var </span><span class="s1">ModuleResolver </span><span class="s5">= </span><span class="s1">{</span>
    <span class="s1">__proto__: </span><span class="s4">null</span><span class="s1">,</span>
    <span class="s1">resolve: </span><span class="s2">resolve</span>
<span class="s1">};</span>

<span class="s6">/**</span>
 <span class="s6">* </span><span class="s5">@fileoverview </span><span class="s6">The factory of `ConfigArray` objects. 
 * 
 * This class provides methods to create `ConfigArray` instance. 
 * 
 * - `create(configData, options)` 
 *     Create a `ConfigArray` instance from a config data. This is to handle CLI 
 *     options except `--config`. 
 * - `loadFile(filePath, options)` 
 *     Create a `ConfigArray` instance from a config file. This is to handle 
 *     `--config` option. If the file was not found, throws the following error: 
 *      - If the filename was `*.js`, a `MODULE_NOT_FOUND` error. 
 *      - If the filename was `package.json`, an IO error or an 
 *        `ESLINT_CONFIG_FIELD_NOT_FOUND` error. 
 *      - Otherwise, an IO error such as `ENOENT`. 
 * - `loadInDirectory(directoryPath, options)` 
 *     Create a `ConfigArray` instance from a config file which is on a given 
 *     directory. This tries to load `.eslintrc.*` or `package.json`. If not 
 *     found, returns an empty `ConfigArray`. 
 * - `loadESLintIgnore(filePath)` 
 *     Create a `ConfigArray` instance from a config file that is `.eslintignore` 
 *     format. This is to handle `--ignore-path` option. 
 * - `loadDefaultESLintIgnore()` 
 *     Create a `ConfigArray` instance from `.eslintignore` or `package.json` in 
 *     the current working directory. 
 * 
 * `ConfigArrayFactory` class has the responsibility that loads configuration 
 * files, including loading `extends`, `parser`, and `plugins`. The created 
 * `ConfigArray` instance has the loaded `extends`, `parser`, and `plugins`. 
 * 
 * But this class doesn't handle cascading. `CascadingConfigArrayFactory` class 
 * handles cascading and hierarchy. 
 * 
 * </span><span class="s5">@author </span><span class="s2">Toru Nagashima </span><span class="s6">&lt;</span><span class="s4">https://github.com/mysticatea</span><span class="s6">&gt;</span>
 <span class="s6">*/</span>

<span class="s2">const </span><span class="s1">require$1 </span><span class="s5">= </span><span class="s2">Module</span><span class="s1">.</span><span class="s3">createRequire</span><span class="s1">(</span><span class="s3">require</span><span class="s1">(</span><span class="s0">'url'</span><span class="s1">).</span><span class="s3">pathToFileURL</span><span class="s1">(</span><span class="s2">__filename</span><span class="s1">).</span><span class="s3">toString</span><span class="s1">());</span>

<span class="s2">const </span><span class="s1">debug$2 </span><span class="s5">= </span><span class="s2">debugOrig__default</span><span class="s1">[</span><span class="s0">&quot;default&quot;</span><span class="s1">](</span><span class="s0">&quot;eslintrc:config-array-factory&quot;</span><span class="s1">);</span>

<span class="s6">//------------------------------------------------------------------------------</span>
<span class="s6">// Helpers</span>
<span class="s6">//------------------------------------------------------------------------------</span>

<span class="s2">const </span><span class="s1">configFilenames </span><span class="s5">= </span><span class="s1">[</span>
    <span class="s0">&quot;.eslintrc.js&quot;</span><span class="s1">,</span>
    <span class="s0">&quot;.eslintrc.cjs&quot;</span><span class="s1">,</span>
    <span class="s0">&quot;.eslintrc.yaml&quot;</span><span class="s1">,</span>
    <span class="s0">&quot;.eslintrc.yml&quot;</span><span class="s1">,</span>
    <span class="s0">&quot;.eslintrc.json&quot;</span><span class="s1">,</span>
    <span class="s0">&quot;.eslintrc&quot;</span><span class="s1">,</span>
    <span class="s0">&quot;package.json&quot;</span>
<span class="s1">];</span>

<span class="s6">// Define types for VSCode IntelliSense.</span>
<span class="s6">/** </span><span class="s5">@typedef </span><span class="s2">{import(&quot;./shared/types&quot;).ConfigData} ConfigData </span><span class="s6">*/</span>
<span class="s6">/** </span><span class="s5">@typedef </span><span class="s2">{import(&quot;./shared/types&quot;).OverrideConfigData} OverrideConfigData </span><span class="s6">*/</span>
<span class="s6">/** </span><span class="s5">@typedef </span><span class="s2">{import(&quot;./shared/types&quot;).Parser} Parser </span><span class="s6">*/</span>
<span class="s6">/** </span><span class="s5">@typedef </span><span class="s2">{import(&quot;./shared/types&quot;).Plugin} Plugin </span><span class="s6">*/</span>
<span class="s6">/** </span><span class="s5">@typedef </span><span class="s2">{import(&quot;./shared/types&quot;).Rule} Rule </span><span class="s6">*/</span>
<span class="s6">/** </span><span class="s5">@typedef </span><span class="s2">{import(&quot;./config-array/config-dependency&quot;).DependentParser} DependentParser </span><span class="s6">*/</span>
<span class="s6">/** </span><span class="s5">@typedef </span><span class="s2">{import(&quot;./config-array/config-dependency&quot;).DependentPlugin} DependentPlugin </span><span class="s6">*/</span>
<span class="s6">/** </span><span class="s5">@typedef </span><span class="s2">{ConfigArray[0]} ConfigArrayElement </span><span class="s6">*/</span>

<span class="s6">/**</span>
 <span class="s6">* </span><span class="s5">@typedef </span><span class="s2">{Object} ConfigArrayFactoryOptions</span>
 <span class="s6">* </span><span class="s5">@property </span><span class="s2">{Map&lt;string,Plugin&gt;} [additionalPluginPool] </span><span class="s6">The map for additional plugins. 
 * </span><span class="s5">@property </span><span class="s2">{string} [cwd] </span><span class="s6">The path to the current working directory. 
 * </span><span class="s5">@property </span><span class="s2">{string} [resolvePluginsRelativeTo] </span><span class="s6">A path to the directory that plugins should be resolved from. Defaults to `cwd`. 
 * </span><span class="s5">@property </span><span class="s2">{Map&lt;string,Rule&gt;} builtInRules </span><span class="s6">The rules that are built in to ESLint. 
 * </span><span class="s5">@property </span><span class="s2">{Object} [resolver</span><span class="s5">=</span><span class="s2">ModuleResolver] </span><span class="s6">The module resolver object. 
 * </span><span class="s5">@property </span><span class="s2">{string} eslintAllPath </span><span class="s6">The path to the definitions for eslint:all. 
 * </span><span class="s5">@property </span><span class="s2">{Function} getEslintAllConfig </span><span class="s6">Returns the config data for eslint:all. 
 * </span><span class="s5">@property </span><span class="s2">{string} eslintRecommendedPath </span><span class="s6">The path to the definitions for eslint:recommended. 
 * </span><span class="s5">@property </span><span class="s2">{Function} getEslintRecommendedConfig </span><span class="s6">Returns the config data for eslint:recommended. 
 */</span>

<span class="s6">/**</span>
 <span class="s6">* </span><span class="s5">@typedef </span><span class="s2">{Object} ConfigArrayFactoryInternalSlots</span>
 <span class="s6">* </span><span class="s5">@property </span><span class="s2">{Map&lt;string,Plugin&gt;} additionalPluginPool </span><span class="s6">The map for additional plugins. 
 * </span><span class="s5">@property </span><span class="s2">{string} cwd </span><span class="s6">The path to the current working directory. 
 * </span><span class="s5">@property </span><span class="s2">{string | undefined} resolvePluginsRelativeTo </span><span class="s6">An absolute path the the directory that plugins should be resolved from. 
 * </span><span class="s5">@property </span><span class="s2">{Map&lt;string,Rule&gt;} builtInRules </span><span class="s6">The rules that are built in to ESLint. 
 * </span><span class="s5">@property </span><span class="s2">{Object} [resolver</span><span class="s5">=</span><span class="s2">ModuleResolver] </span><span class="s6">The module resolver object. 
 * </span><span class="s5">@property </span><span class="s2">{string} eslintAllPath </span><span class="s6">The path to the definitions for eslint:all. 
 * </span><span class="s5">@property </span><span class="s2">{Function} getEslintAllConfig </span><span class="s6">Returns the config data for eslint:all. 
 * </span><span class="s5">@property </span><span class="s2">{string} eslintRecommendedPath </span><span class="s6">The path to the definitions for eslint:recommended. 
 * </span><span class="s5">@property </span><span class="s2">{Function} getEslintRecommendedConfig </span><span class="s6">Returns the config data for eslint:recommended. 
 */</span>

<span class="s6">/**</span>
 <span class="s6">* </span><span class="s5">@typedef </span><span class="s2">{Object} ConfigArrayFactoryLoadingContext</span>
 <span class="s6">* </span><span class="s5">@property </span><span class="s2">{string} filePath </span><span class="s6">The path to the current configuration. 
 * </span><span class="s5">@property </span><span class="s2">{string} matchBasePath </span><span class="s6">The base path to resolve relative paths in `overrides[].files`, `overrides[].excludedFiles`, and `ignorePatterns`. 
 * </span><span class="s5">@property </span><span class="s2">{string} name </span><span class="s6">The name of the current configuration. 
 * </span><span class="s5">@property </span><span class="s2">{string} pluginBasePath </span><span class="s6">The base path to resolve plugins. 
 * </span><span class="s5">@property </span><span class="s2">{&quot;config&quot; | &quot;ignore&quot; | &quot;implicit-processor&quot;} type </span><span class="s6">The type of the current configuration. This is `&quot;config&quot;` in normal. This is `&quot;ignore&quot;` if it came from `.eslintignore`. This is `&quot;implicit-processor&quot;` if it came from legacy file-extension processors. 
 */</span>

<span class="s6">/**</span>
 <span class="s6">* </span><span class="s5">@typedef </span><span class="s2">{Object} ConfigArrayFactoryLoadingContext</span>
 <span class="s6">* </span><span class="s5">@property </span><span class="s2">{string} filePath </span><span class="s6">The path to the current configuration. 
 * </span><span class="s5">@property </span><span class="s2">{string} matchBasePath </span><span class="s6">The base path to resolve relative paths in `overrides[].files`, `overrides[].excludedFiles`, and `ignorePatterns`. 
 * </span><span class="s5">@property </span><span class="s2">{string} name </span><span class="s6">The name of the current configuration. 
 * </span><span class="s5">@property </span><span class="s2">{&quot;config&quot; | &quot;ignore&quot; | &quot;implicit-processor&quot;} type </span><span class="s6">The type of the current configuration. This is `&quot;config&quot;` in normal. This is `&quot;ignore&quot;` if it came from `.eslintignore`. This is `&quot;implicit-processor&quot;` if it came from legacy file-extension processors. 
 */</span>

<span class="s6">/** </span><span class="s5">@type </span><span class="s2">{WeakMap&lt;ConfigArrayFactory, ConfigArrayFactoryInternalSlots&gt;} </span><span class="s6">*/</span>
<span class="s2">const </span><span class="s1">internalSlotsMap$1 </span><span class="s5">= new </span><span class="s3">WeakMap</span><span class="s1">();</span>

<span class="s6">/** </span><span class="s5">@type </span><span class="s2">{WeakMap&lt;object, Plugin&gt;} </span><span class="s6">*/</span>
<span class="s2">const </span><span class="s1">normalizedPlugins </span><span class="s5">= new </span><span class="s3">WeakMap</span><span class="s1">();</span>

<span class="s6">/**</span>
 <span class="s6">* Check if a given string is a file path. 
 * </span><span class="s5">@param </span><span class="s2">{string} nameOrPath </span><span class="s6">A module name or file path. 
 * </span><span class="s5">@returns </span><span class="s2">{boolean} </span><span class="s6">`true` if the `nameOrPath` is a file path. 
 */</span>
<span class="s5">function </span><span class="s1">isFilePath(</span><span class="s2">nameOrPath</span><span class="s1">) {</span>
    <span class="s5">return </span><span class="s1">(</span>
        <span class="s0">/</span><span class="s5">^</span><span class="s8">\.</span><span class="s5">{1,2}</span><span class="s4">[/</span><span class="s8">\\</span><span class="s4">]</span><span class="s0">/</span><span class="s5">u</span><span class="s1">.</span><span class="s3">test</span><span class="s1">(</span><span class="s2">nameOrPath</span><span class="s1">) </span><span class="s5">||</span>
        <span class="s2">path__default</span><span class="s1">[</span><span class="s0">&quot;default&quot;</span><span class="s1">].</span><span class="s3">isAbsolute</span><span class="s1">(</span><span class="s2">nameOrPath</span><span class="s1">)</span>
    <span class="s1">);</span>
<span class="s1">}</span>

<span class="s6">/**</span>
 <span class="s6">* Convenience wrapper for synchronously reading file contents. 
 * </span><span class="s5">@param </span><span class="s2">{string} filePath </span><span class="s6">The filename to read. 
 * </span><span class="s5">@returns </span><span class="s2">{string} </span><span class="s6">The file contents, with the BOM removed. 
 * </span><span class="s5">@private</span>
 <span class="s6">*/</span>
<span class="s5">function </span><span class="s1">readFile(</span><span class="s2">filePath</span><span class="s1">) {</span>
    <span class="s5">return </span><span class="s2">fs__default</span><span class="s1">[</span><span class="s0">&quot;default&quot;</span><span class="s1">].</span><span class="s3">readFileSync</span><span class="s1">(</span><span class="s2">filePath</span><span class="s1">, </span><span class="s0">&quot;utf8&quot;</span><span class="s1">).</span><span class="s3">replace</span><span class="s1">(</span><span class="s0">/</span><span class="s5">^</span><span class="s4">\ufeff</span><span class="s0">/</span><span class="s5">u</span><span class="s1">, </span><span class="s0">&quot;&quot;</span><span class="s1">);</span>
<span class="s1">}</span>

<span class="s6">/**</span>
 <span class="s6">* Loads a YAML configuration from a file. 
 * </span><span class="s5">@param </span><span class="s2">{string} filePath </span><span class="s6">The filename to load. 
 * </span><span class="s5">@returns </span><span class="s2">{ConfigData} </span><span class="s6">The configuration object from the file. 
 * </span><span class="s5">@throws </span><span class="s2">{Error} </span><span class="s6">If the file cannot be read. 
 * </span><span class="s5">@private</span>
 <span class="s6">*/</span>
<span class="s5">function </span><span class="s1">loadYAMLConfigFile(</span><span class="s2">filePath</span><span class="s1">) {</span>
    <span class="s3">debug$2</span><span class="s1">(</span><span class="s0">`Loading YAML config file: ${</span><span class="s2">filePath</span><span class="s0">}`</span><span class="s1">);</span>

    <span class="s6">// lazy load YAML to improve performance when not used</span>
    <span class="s5">const </span><span class="s1">yaml </span><span class="s5">= </span><span class="s3">require$1</span><span class="s1">(</span><span class="s0">&quot;js-yaml&quot;</span><span class="s1">);</span>

    <span class="s5">try </span><span class="s1">{</span>

        <span class="s6">// empty YAML file can be null, so always use</span>
        <span class="s5">return </span><span class="s2">yaml</span><span class="s1">.</span><span class="s3">load</span><span class="s1">(</span><span class="s3">readFile</span><span class="s1">(</span><span class="s2">filePath</span><span class="s1">)) </span><span class="s5">|| </span><span class="s1">{};</span>
    <span class="s1">} </span><span class="s5">catch </span><span class="s1">(</span><span class="s2">e</span><span class="s1">) {</span>
        <span class="s3">debug$2</span><span class="s1">(</span><span class="s0">`Error reading YAML file: ${</span><span class="s2">filePath</span><span class="s0">}`</span><span class="s1">);</span>
        <span class="s2">e</span><span class="s1">.</span><span class="s2">message </span><span class="s5">= </span><span class="s0">`Cannot read config file: ${</span><span class="s2">filePath</span><span class="s0">}</span><span class="s8">\n</span><span class="s0">Error: ${</span><span class="s2">e</span><span class="s0">.</span><span class="s2">message</span><span class="s0">}`</span><span class="s1">;</span>
        <span class="s5">throw </span><span class="s2">e</span><span class="s1">;</span>
    <span class="s1">}</span>
<span class="s1">}</span>

<span class="s6">/**</span>
 <span class="s6">* Loads a JSON configuration from a file. 
 * </span><span class="s5">@param </span><span class="s2">{string} filePath </span><span class="s6">The filename to load. 
 * </span><span class="s5">@returns </span><span class="s2">{ConfigData} </span><span class="s6">The configuration object from the file. 
 * </span><span class="s5">@throws </span><span class="s2">{Error} </span><span class="s6">If the file cannot be read. 
 * </span><span class="s5">@private</span>
 <span class="s6">*/</span>
<span class="s5">function </span><span class="s1">loadJSONConfigFile(</span><span class="s2">filePath</span><span class="s1">) {</span>
    <span class="s3">debug$2</span><span class="s1">(</span><span class="s0">`Loading JSON config file: ${</span><span class="s2">filePath</span><span class="s0">}`</span><span class="s1">);</span>

    <span class="s5">try </span><span class="s1">{</span>
        <span class="s5">return </span><span class="s2">JSON</span><span class="s1">.</span><span class="s3">parse</span><span class="s1">(</span><span class="s2">stripComments__default</span><span class="s1">[</span><span class="s0">&quot;default&quot;</span><span class="s1">](</span><span class="s3">readFile</span><span class="s1">(</span><span class="s2">filePath</span><span class="s1">)));</span>
    <span class="s1">} </span><span class="s5">catch </span><span class="s1">(</span><span class="s2">e</span><span class="s1">) {</span>
        <span class="s3">debug$2</span><span class="s1">(</span><span class="s0">`Error reading JSON file: ${</span><span class="s2">filePath</span><span class="s0">}`</span><span class="s1">);</span>
        <span class="s2">e</span><span class="s1">.</span><span class="s2">message </span><span class="s5">= </span><span class="s0">`Cannot read config file: ${</span><span class="s2">filePath</span><span class="s0">}</span><span class="s8">\n</span><span class="s0">Error: ${</span><span class="s2">e</span><span class="s0">.</span><span class="s2">message</span><span class="s0">}`</span><span class="s1">;</span>
        <span class="s2">e</span><span class="s1">.</span><span class="s2">messageTemplate </span><span class="s5">= </span><span class="s0">&quot;failed-to-read-json&quot;</span><span class="s1">;</span>
        <span class="s2">e</span><span class="s1">.</span><span class="s2">messageData </span><span class="s5">= </span><span class="s1">{</span>
            <span class="s1">path: </span><span class="s2">filePath</span><span class="s1">,</span>
            <span class="s1">message: </span><span class="s2">e</span><span class="s1">.</span><span class="s2">message</span>
        <span class="s1">};</span>
        <span class="s5">throw </span><span class="s2">e</span><span class="s1">;</span>
    <span class="s1">}</span>
<span class="s1">}</span>

<span class="s6">/**</span>
 <span class="s6">* Loads a legacy (.eslintrc) configuration from a file. 
 * </span><span class="s5">@param </span><span class="s2">{string} filePath </span><span class="s6">The filename to load. 
 * </span><span class="s5">@returns </span><span class="s2">{ConfigData} </span><span class="s6">The configuration object from the file. 
 * </span><span class="s5">@throws </span><span class="s2">{Error} </span><span class="s6">If the file cannot be read. 
 * </span><span class="s5">@private</span>
 <span class="s6">*/</span>
<span class="s5">function </span><span class="s1">loadLegacyConfigFile(</span><span class="s2">filePath</span><span class="s1">) {</span>
    <span class="s3">debug$2</span><span class="s1">(</span><span class="s0">`Loading legacy config file: ${</span><span class="s2">filePath</span><span class="s0">}`</span><span class="s1">);</span>

    <span class="s6">// lazy load YAML to improve performance when not used</span>
    <span class="s5">const </span><span class="s1">yaml </span><span class="s5">= </span><span class="s3">require$1</span><span class="s1">(</span><span class="s0">&quot;js-yaml&quot;</span><span class="s1">);</span>

    <span class="s5">try </span><span class="s1">{</span>
        <span class="s5">return </span><span class="s2">yaml</span><span class="s1">.</span><span class="s3">load</span><span class="s1">(</span><span class="s2">stripComments__default</span><span class="s1">[</span><span class="s0">&quot;default&quot;</span><span class="s1">](</span><span class="s3">readFile</span><span class="s1">(</span><span class="s2">filePath</span><span class="s1">))) </span><span class="s5">|| </span><span class="s6">/* istanbul ignore next */ </span><span class="s1">{};</span>
    <span class="s1">} </span><span class="s5">catch </span><span class="s1">(</span><span class="s2">e</span><span class="s1">) {</span>
        <span class="s3">debug$2</span><span class="s1">(</span><span class="s0">&quot;Error reading YAML file: %s</span><span class="s8">\n</span><span class="s0">%o&quot;</span><span class="s1">, </span><span class="s2">filePath</span><span class="s1">, </span><span class="s2">e</span><span class="s1">);</span>
        <span class="s2">e</span><span class="s1">.</span><span class="s2">message </span><span class="s5">= </span><span class="s0">`Cannot read config file: ${</span><span class="s2">filePath</span><span class="s0">}</span><span class="s8">\n</span><span class="s0">Error: ${</span><span class="s2">e</span><span class="s0">.</span><span class="s2">message</span><span class="s0">}`</span><span class="s1">;</span>
        <span class="s5">throw </span><span class="s2">e</span><span class="s1">;</span>
    <span class="s1">}</span>
<span class="s1">}</span>

<span class="s6">/**</span>
 <span class="s6">* Loads a JavaScript configuration from a file. 
 * </span><span class="s5">@param </span><span class="s2">{string} filePath </span><span class="s6">The filename to load. 
 * </span><span class="s5">@returns </span><span class="s2">{ConfigData} </span><span class="s6">The configuration object from the file. 
 * </span><span class="s5">@throws </span><span class="s2">{Error} </span><span class="s6">If the file cannot be read. 
 * </span><span class="s5">@private</span>
 <span class="s6">*/</span>
<span class="s5">function </span><span class="s1">loadJSConfigFile(</span><span class="s2">filePath</span><span class="s1">) {</span>
    <span class="s3">debug$2</span><span class="s1">(</span><span class="s0">`Loading JS config file: ${</span><span class="s2">filePath</span><span class="s0">}`</span><span class="s1">);</span>
    <span class="s5">try </span><span class="s1">{</span>
        <span class="s5">return </span><span class="s2">importFresh__default</span><span class="s1">[</span><span class="s0">&quot;default&quot;</span><span class="s1">](</span><span class="s2">filePath</span><span class="s1">);</span>
    <span class="s1">} </span><span class="s5">catch </span><span class="s1">(</span><span class="s2">e</span><span class="s1">) {</span>
        <span class="s3">debug$2</span><span class="s1">(</span><span class="s0">`Error reading JavaScript file: ${</span><span class="s2">filePath</span><span class="s0">}`</span><span class="s1">);</span>
        <span class="s2">e</span><span class="s1">.</span><span class="s2">message </span><span class="s5">= </span><span class="s0">`Cannot read config file: ${</span><span class="s2">filePath</span><span class="s0">}</span><span class="s8">\n</span><span class="s0">Error: ${</span><span class="s2">e</span><span class="s0">.</span><span class="s2">message</span><span class="s0">}`</span><span class="s1">;</span>
        <span class="s5">throw </span><span class="s2">e</span><span class="s1">;</span>
    <span class="s1">}</span>
<span class="s1">}</span>

<span class="s6">/**</span>
 <span class="s6">* Loads a configuration from a package.json file. 
 * </span><span class="s5">@param </span><span class="s2">{string} filePath </span><span class="s6">The filename to load. 
 * </span><span class="s5">@returns </span><span class="s2">{ConfigData} </span><span class="s6">The configuration object from the file. 
 * </span><span class="s5">@throws </span><span class="s2">{Error} </span><span class="s6">If the file cannot be read. 
 * </span><span class="s5">@private</span>
 <span class="s6">*/</span>
<span class="s5">function </span><span class="s1">loadPackageJSONConfigFile(</span><span class="s2">filePath</span><span class="s1">) {</span>
    <span class="s3">debug$2</span><span class="s1">(</span><span class="s0">`Loading package.json config file: ${</span><span class="s2">filePath</span><span class="s0">}`</span><span class="s1">);</span>
    <span class="s5">try </span><span class="s1">{</span>
        <span class="s5">const </span><span class="s1">packageData </span><span class="s5">= </span><span class="s3">loadJSONConfigFile</span><span class="s1">(</span><span class="s2">filePath</span><span class="s1">);</span>

        <span class="s5">if </span><span class="s1">(</span><span class="s5">!</span><span class="s2">Object</span><span class="s1">.</span><span class="s2">hasOwnProperty</span><span class="s1">.</span><span class="s3">call</span><span class="s1">(</span><span class="s2">packageData</span><span class="s1">, </span><span class="s0">&quot;eslintConfig&quot;</span><span class="s1">)) {</span>
            <span class="s5">throw </span><span class="s2">Object</span><span class="s1">.</span><span class="s3">assign</span><span class="s1">(</span>
                <span class="s5">new </span><span class="s3">Error</span><span class="s1">(</span><span class="s0">&quot;package.json file doesn't have 'eslintConfig' field.&quot;</span><span class="s1">),</span>
                <span class="s1">{ code: </span><span class="s0">&quot;ESLINT_CONFIG_FIELD_NOT_FOUND&quot; </span><span class="s1">}</span>
            <span class="s1">);</span>
        <span class="s1">}</span>

        <span class="s5">return </span><span class="s2">packageData</span><span class="s1">.</span><span class="s2">eslintConfig</span><span class="s1">;</span>
    <span class="s1">} </span><span class="s5">catch </span><span class="s1">(</span><span class="s2">e</span><span class="s1">) {</span>
        <span class="s3">debug$2</span><span class="s1">(</span><span class="s0">`Error reading package.json file: ${</span><span class="s2">filePath</span><span class="s0">}`</span><span class="s1">);</span>
        <span class="s2">e</span><span class="s1">.</span><span class="s2">message </span><span class="s5">= </span><span class="s0">`Cannot read config file: ${</span><span class="s2">filePath</span><span class="s0">}</span><span class="s8">\n</span><span class="s0">Error: ${</span><span class="s2">e</span><span class="s0">.</span><span class="s2">message</span><span class="s0">}`</span><span class="s1">;</span>
        <span class="s5">throw </span><span class="s2">e</span><span class="s1">;</span>
    <span class="s1">}</span>
<span class="s1">}</span>

<span class="s6">/**</span>
 <span class="s6">* Loads a `.eslintignore` from a file. 
 * </span><span class="s5">@param </span><span class="s2">{string} filePath </span><span class="s6">The filename to load. 
 * </span><span class="s5">@returns </span><span class="s2">{string[]} </span><span class="s6">The ignore patterns from the file. 
 * </span><span class="s5">@private</span>
 <span class="s6">*/</span>
<span class="s5">function </span><span class="s1">loadESLintIgnoreFile(</span><span class="s2">filePath</span><span class="s1">) {</span>
    <span class="s3">debug$2</span><span class="s1">(</span><span class="s0">`Loading .eslintignore file: ${</span><span class="s2">filePath</span><span class="s0">}`</span><span class="s1">);</span>

    <span class="s5">try </span><span class="s1">{</span>
        <span class="s5">return </span><span class="s3">readFile</span><span class="s1">(</span><span class="s2">filePath</span><span class="s1">)</span>
            <span class="s1">.</span><span class="s3">split</span><span class="s1">(</span><span class="s0">/</span><span class="s4">\r</span><span class="s5">?</span><span class="s4">\n</span><span class="s0">/</span><span class="s5">gu</span><span class="s1">)</span>
            <span class="s1">.</span><span class="s3">filter</span><span class="s1">(</span><span class="s2">line </span><span class="s5">=&gt; </span><span class="s2">line</span><span class="s1">.</span><span class="s3">trim</span><span class="s1">() </span><span class="s5">!== </span><span class="s0">&quot;&quot; </span><span class="s5">&amp;&amp; !</span><span class="s2">line</span><span class="s1">.</span><span class="s3">startsWith</span><span class="s1">(</span><span class="s0">&quot;#&quot;</span><span class="s1">));</span>
    <span class="s1">} </span><span class="s5">catch </span><span class="s1">(</span><span class="s2">e</span><span class="s1">) {</span>
        <span class="s3">debug$2</span><span class="s1">(</span><span class="s0">`Error reading .eslintignore file: ${</span><span class="s2">filePath</span><span class="s0">}`</span><span class="s1">);</span>
        <span class="s2">e</span><span class="s1">.</span><span class="s2">message </span><span class="s5">= </span><span class="s0">`Cannot read .eslintignore file: ${</span><span class="s2">filePath</span><span class="s0">}</span><span class="s8">\n</span><span class="s0">Error: ${</span><span class="s2">e</span><span class="s0">.</span><span class="s2">message</span><span class="s0">}`</span><span class="s1">;</span>
        <span class="s5">throw </span><span class="s2">e</span><span class="s1">;</span>
    <span class="s1">}</span>
<span class="s1">}</span>

<span class="s6">/**</span>
 <span class="s6">* Creates an error to notify about a missing config to extend from. 
 * </span><span class="s5">@param </span><span class="s2">{string} configName </span><span class="s6">The name of the missing config. 
 * </span><span class="s5">@param </span><span class="s2">{string} importerName </span><span class="s6">The name of the config that imported the missing config 
 * </span><span class="s5">@param </span><span class="s2">{string} messageTemplate </span><span class="s6">The text template to source error strings from. 
 * </span><span class="s5">@returns </span><span class="s2">{Error} </span><span class="s6">The error object to throw 
 * </span><span class="s5">@private</span>
 <span class="s6">*/</span>
<span class="s5">function </span><span class="s1">configInvalidError(</span><span class="s2">configName</span><span class="s1">, </span><span class="s2">importerName</span><span class="s1">, </span><span class="s2">messageTemplate</span><span class="s1">) {</span>
    <span class="s5">return </span><span class="s2">Object</span><span class="s1">.</span><span class="s3">assign</span><span class="s1">(</span>
        <span class="s5">new </span><span class="s3">Error</span><span class="s1">(</span><span class="s0">`Failed to load config &quot;${</span><span class="s2">configName</span><span class="s0">}&quot; to extend from.`</span><span class="s1">),</span>
        <span class="s1">{</span>
            <span class="s2">messageTemplate</span><span class="s1">,</span>
            <span class="s1">messageData: { </span><span class="s2">configName</span><span class="s1">, </span><span class="s2">importerName </span><span class="s1">}</span>
        <span class="s1">}</span>
    <span class="s1">);</span>
<span class="s1">}</span>

<span class="s6">/**</span>
 <span class="s6">* Loads a configuration file regardless of the source. Inspects the file path 
 * to determine the correctly way to load the config file. 
 * </span><span class="s5">@param </span><span class="s2">{string} filePath </span><span class="s6">The path to the configuration. 
 * </span><span class="s5">@returns </span><span class="s2">{ConfigData|null} </span><span class="s6">The configuration information. 
 * </span><span class="s5">@private</span>
 <span class="s6">*/</span>
<span class="s5">function </span><span class="s1">loadConfigFile(</span><span class="s2">filePath</span><span class="s1">) {</span>
    <span class="s5">switch </span><span class="s1">(</span><span class="s2">path__default</span><span class="s1">[</span><span class="s0">&quot;default&quot;</span><span class="s1">].</span><span class="s3">extname</span><span class="s1">(</span><span class="s2">filePath</span><span class="s1">)) {</span>
        <span class="s5">case </span><span class="s0">&quot;.js&quot;</span><span class="s1">:</span>
        <span class="s5">case </span><span class="s0">&quot;.cjs&quot;</span><span class="s1">:</span>
            <span class="s5">return </span><span class="s3">loadJSConfigFile</span><span class="s1">(</span><span class="s2">filePath</span><span class="s1">);</span>

        <span class="s5">case </span><span class="s0">&quot;.json&quot;</span><span class="s1">:</span>
            <span class="s5">if </span><span class="s1">(</span><span class="s2">path__default</span><span class="s1">[</span><span class="s0">&quot;default&quot;</span><span class="s1">].</span><span class="s3">basename</span><span class="s1">(</span><span class="s2">filePath</span><span class="s1">) </span><span class="s5">=== </span><span class="s0">&quot;package.json&quot;</span><span class="s1">) {</span>
                <span class="s5">return </span><span class="s3">loadPackageJSONConfigFile</span><span class="s1">(</span><span class="s2">filePath</span><span class="s1">);</span>
            <span class="s1">}</span>
            <span class="s5">return </span><span class="s3">loadJSONConfigFile</span><span class="s1">(</span><span class="s2">filePath</span><span class="s1">);</span>

        <span class="s5">case </span><span class="s0">&quot;.yaml&quot;</span><span class="s1">:</span>
        <span class="s5">case </span><span class="s0">&quot;.yml&quot;</span><span class="s1">:</span>
            <span class="s5">return </span><span class="s3">loadYAMLConfigFile</span><span class="s1">(</span><span class="s2">filePath</span><span class="s1">);</span>

        <span class="s5">default</span><span class="s1">:</span>
            <span class="s5">return </span><span class="s3">loadLegacyConfigFile</span><span class="s1">(</span><span class="s2">filePath</span><span class="s1">);</span>
    <span class="s1">}</span>
<span class="s1">}</span>

<span class="s6">/**</span>
 <span class="s6">* Write debug log. 
 * </span><span class="s5">@param </span><span class="s2">{string} request </span><span class="s6">The requested module name. 
 * </span><span class="s5">@param </span><span class="s2">{string} relativeTo </span><span class="s6">The file path to resolve the request relative to. 
 * </span><span class="s5">@param </span><span class="s2">{string} filePath </span><span class="s6">The resolved file path. 
 * </span><span class="s5">@returns </span><span class="s2">{void}</span>
 <span class="s6">*/ 
function writeDebugLogForLoading(request, relativeTo, filePath) { 
    /* istanbul ignore next */</span>
    <span class="s1">if (debug$2.enabled) {</span>
        <span class="s5">let </span><span class="s1">nameAndVersion </span><span class="s5">= </span><span class="s4">null</span><span class="s1">;</span>

        <span class="s5">try </span><span class="s1">{</span>
            <span class="s5">const </span><span class="s1">packageJsonPath </span><span class="s5">= </span><span class="s3">resolve</span><span class="s1">(</span>
                <span class="s0">`${</span><span class="s2">request</span><span class="s0">}/package.json`</span><span class="s1">,</span>
                <span class="s2">relativeTo</span>
            <span class="s1">);</span>
            <span class="s5">const </span><span class="s1">{ version </span><span class="s5">= </span><span class="s0">&quot;unknown&quot; </span><span class="s1">} </span><span class="s5">= </span><span class="s3">require$1</span><span class="s1">(</span><span class="s2">packageJsonPath</span><span class="s1">);</span>

            <span class="s2">nameAndVersion </span><span class="s5">= </span><span class="s0">`${</span><span class="s2">request</span><span class="s0">}@${</span><span class="s2">version</span><span class="s0">}`</span><span class="s1">;</span>
        <span class="s1">} </span><span class="s5">catch </span><span class="s1">(</span><span class="s2">error</span><span class="s1">) {</span>
            <span class="s3">debug$2</span><span class="s1">(</span><span class="s0">&quot;package.json was not found:&quot;</span><span class="s1">, </span><span class="s2">error</span><span class="s1">.</span><span class="s2">message</span><span class="s1">);</span>
            <span class="s2">nameAndVersion </span><span class="s5">= </span><span class="s2">request</span><span class="s1">;</span>
        <span class="s1">}</span>

        <span class="s3">debug$2</span><span class="s1">(</span><span class="s0">&quot;Loaded: %s (%s)&quot;</span><span class="s1">, </span><span class="s2">nameAndVersion</span><span class="s1">, </span><span class="s2">filePath</span><span class="s1">);</span>
    <span class="s1">}</span>
<span class="s1">}</span>

<span class="s6">/**</span>
 <span class="s6">* Create a new context with default values. 
 * </span><span class="s5">@param </span><span class="s2">{ConfigArrayFactoryInternalSlots} slots </span><span class="s6">The internal slots. 
 * </span><span class="s5">@param </span><span class="s2">{&quot;config&quot; | &quot;ignore&quot; | &quot;implicit-processor&quot; | undefined} providedType </span><span class="s6">The type of the current configuration. Default is `&quot;config&quot;`. 
 * </span><span class="s5">@param </span><span class="s2">{string | undefined} providedName </span><span class="s6">The name of the current configuration. Default is the relative path from `cwd` to `filePath`. 
 * </span><span class="s5">@param </span><span class="s2">{string | undefined} providedFilePath </span><span class="s6">The path to the current configuration. Default is empty string. 
 * </span><span class="s5">@param </span><span class="s2">{string | undefined} providedMatchBasePath </span><span class="s6">The type of the current configuration. Default is the directory of `filePath` or `cwd`. 
 * </span><span class="s5">@returns </span><span class="s2">{ConfigArrayFactoryLoadingContext} </span><span class="s6">The created context. 
 */</span>
<span class="s5">function </span><span class="s1">createContext(</span>
    <span class="s1">{ </span><span class="s2">cwd</span><span class="s1">, </span><span class="s2">resolvePluginsRelativeTo </span><span class="s1">},</span>
    <span class="s2">providedType</span><span class="s1">,</span>
    <span class="s2">providedName</span><span class="s1">,</span>
    <span class="s2">providedFilePath</span><span class="s1">,</span>
    <span class="s2">providedMatchBasePath</span>
<span class="s1">) {</span>
    <span class="s5">const </span><span class="s1">filePath </span><span class="s5">= </span><span class="s2">providedFilePath</span>
        <span class="s5">? </span><span class="s2">path__default</span><span class="s1">[</span><span class="s0">&quot;default&quot;</span><span class="s1">].</span><span class="s3">resolve</span><span class="s1">(</span><span class="s2">cwd</span><span class="s1">, </span><span class="s2">providedFilePath</span><span class="s1">)</span>
        <span class="s5">: </span><span class="s0">&quot;&quot;</span><span class="s1">;</span>
    <span class="s5">const </span><span class="s1">matchBasePath </span><span class="s5">=</span>
        <span class="s1">(</span><span class="s2">providedMatchBasePath </span><span class="s5">&amp;&amp; </span><span class="s2">path__default</span><span class="s1">[</span><span class="s0">&quot;default&quot;</span><span class="s1">].</span><span class="s3">resolve</span><span class="s1">(</span><span class="s2">cwd</span><span class="s1">, </span><span class="s2">providedMatchBasePath</span><span class="s1">)) </span><span class="s5">||</span>
        <span class="s1">(</span><span class="s2">filePath </span><span class="s5">&amp;&amp; </span><span class="s2">path__default</span><span class="s1">[</span><span class="s0">&quot;default&quot;</span><span class="s1">].</span><span class="s3">dirname</span><span class="s1">(</span><span class="s2">filePath</span><span class="s1">)) </span><span class="s5">||</span>
        <span class="s2">cwd</span><span class="s1">;</span>
    <span class="s5">const </span><span class="s1">name </span><span class="s5">=</span>
        <span class="s2">providedName </span><span class="s5">||</span>
        <span class="s1">(</span><span class="s2">filePath </span><span class="s5">&amp;&amp; </span><span class="s2">path__default</span><span class="s1">[</span><span class="s0">&quot;default&quot;</span><span class="s1">].</span><span class="s3">relative</span><span class="s1">(</span><span class="s2">cwd</span><span class="s1">, </span><span class="s2">filePath</span><span class="s1">)) </span><span class="s5">||</span>
        <span class="s0">&quot;&quot;</span><span class="s1">;</span>
    <span class="s5">const </span><span class="s1">pluginBasePath </span><span class="s5">=</span>
        <span class="s2">resolvePluginsRelativeTo </span><span class="s5">||</span>
        <span class="s1">(</span><span class="s2">filePath </span><span class="s5">&amp;&amp; </span><span class="s2">path__default</span><span class="s1">[</span><span class="s0">&quot;default&quot;</span><span class="s1">].</span><span class="s3">dirname</span><span class="s1">(</span><span class="s2">filePath</span><span class="s1">)) </span><span class="s5">||</span>
        <span class="s2">cwd</span><span class="s1">;</span>
    <span class="s5">const </span><span class="s1">type </span><span class="s5">= </span><span class="s2">providedType </span><span class="s5">|| </span><span class="s0">&quot;config&quot;</span><span class="s1">;</span>

    <span class="s5">return </span><span class="s1">{ </span><span class="s2">filePath</span><span class="s1">, </span><span class="s2">matchBasePath</span><span class="s1">, </span><span class="s2">name</span><span class="s1">, </span><span class="s2">pluginBasePath</span><span class="s1">, </span><span class="s2">type </span><span class="s1">};</span>
<span class="s1">}</span>

<span class="s6">/**</span>
 <span class="s6">* Normalize a given plugin. 
 * - Ensure the object to have four properties: configs, environments, processors, and rules. 
 * - Ensure the object to not have other properties. 
 * </span><span class="s5">@param </span><span class="s2">{Plugin} plugin </span><span class="s6">The plugin to normalize. 
 * </span><span class="s5">@returns </span><span class="s2">{Plugin} </span><span class="s6">The normalized plugin. 
 */</span>
<span class="s5">function </span><span class="s1">normalizePlugin(</span><span class="s2">plugin</span><span class="s1">) {</span>

    <span class="s6">// first check the cache</span>
    <span class="s5">let </span><span class="s1">normalizedPlugin </span><span class="s5">= </span><span class="s2">normalizedPlugins</span><span class="s1">.</span><span class="s3">get</span><span class="s1">(</span><span class="s2">plugin</span><span class="s1">);</span>

    <span class="s5">if </span><span class="s1">(</span><span class="s2">normalizedPlugin</span><span class="s1">) {</span>
        <span class="s5">return </span><span class="s2">normalizedPlugin</span><span class="s1">;</span>
    <span class="s1">}</span>

    <span class="s2">normalizedPlugin </span><span class="s5">= </span><span class="s1">{</span>
        <span class="s1">configs: </span><span class="s2">plugin</span><span class="s1">.</span><span class="s2">configs </span><span class="s5">|| </span><span class="s1">{},</span>
        <span class="s1">environments: </span><span class="s2">plugin</span><span class="s1">.</span><span class="s2">environments </span><span class="s5">|| </span><span class="s1">{},</span>
        <span class="s1">processors: </span><span class="s2">plugin</span><span class="s1">.</span><span class="s2">processors </span><span class="s5">|| </span><span class="s1">{},</span>
        <span class="s1">rules: </span><span class="s2">plugin</span><span class="s1">.</span><span class="s2">rules </span><span class="s5">|| </span><span class="s1">{}</span>
    <span class="s1">};</span>

    <span class="s6">// save the reference for later</span>
    <span class="s2">normalizedPlugins</span><span class="s1">.</span><span class="s3">set</span><span class="s1">(</span><span class="s2">plugin</span><span class="s1">, </span><span class="s2">normalizedPlugin</span><span class="s1">);</span>

    <span class="s5">return </span><span class="s2">normalizedPlugin</span><span class="s1">;</span>
<span class="s1">}</span>

<span class="s6">//------------------------------------------------------------------------------</span>
<span class="s6">// Public Interface</span>
<span class="s6">//------------------------------------------------------------------------------</span>

<span class="s6">/**</span>
 <span class="s6">* The factory of `ConfigArray` objects. 
 */</span>
<span class="s5">class </span><span class="s2">ConfigArrayFactory </span><span class="s1">{</span>

    <span class="s6">/**</span>
     <span class="s6">* Initialize this instance. 
     * </span><span class="s5">@param </span><span class="s2">{ConfigArrayFactoryOptions} [options] </span><span class="s6">The map for additional plugins. 
     */</span>
    <span class="s5">constructor</span><span class="s1">({</span>
        <span class="s2">additionalPluginPool </span><span class="s5">= new </span><span class="s3">Map</span><span class="s1">(),</span>
        <span class="s2">cwd </span><span class="s5">= </span><span class="s2">process</span><span class="s1">.</span><span class="s3">cwd</span><span class="s1">(),</span>
        <span class="s2">resolvePluginsRelativeTo</span><span class="s1">,</span>
        <span class="s2">builtInRules</span><span class="s1">,</span>
        <span class="s2">resolver </span><span class="s5">= </span><span class="s2">ModuleResolver</span><span class="s1">,</span>
        <span class="s2">eslintAllPath</span><span class="s1">,</span>
        <span class="s2">getEslintAllConfig</span><span class="s1">,</span>
        <span class="s2">eslintRecommendedPath</span><span class="s1">,</span>
        <span class="s2">getEslintRecommendedConfig</span>
    <span class="s1">} </span><span class="s5">= </span><span class="s1">{}) {</span>
        <span class="s2">internalSlotsMap$1</span><span class="s1">.</span><span class="s3">set</span><span class="s1">(</span><span class="s2">this</span><span class="s1">, {</span>
            <span class="s2">additionalPluginPool</span><span class="s1">,</span>
            <span class="s2">cwd</span><span class="s1">,</span>
            <span class="s1">resolvePluginsRelativeTo:</span>
                <span class="s2">resolvePluginsRelativeTo </span><span class="s5">&amp;&amp;</span>
                <span class="s2">path__default</span><span class="s1">[</span><span class="s0">&quot;default&quot;</span><span class="s1">].</span><span class="s3">resolve</span><span class="s1">(</span><span class="s2">cwd</span><span class="s1">, </span><span class="s2">resolvePluginsRelativeTo</span><span class="s1">),</span>
            <span class="s2">builtInRules</span><span class="s1">,</span>
            <span class="s2">resolver</span><span class="s1">,</span>
            <span class="s2">eslintAllPath</span><span class="s1">,</span>
            <span class="s2">getEslintAllConfig</span><span class="s1">,</span>
            <span class="s2">eslintRecommendedPath</span><span class="s1">,</span>
            <span class="s2">getEslintRecommendedConfig</span>
        <span class="s1">});</span>
    <span class="s1">}</span>

    <span class="s6">/**</span>
     <span class="s6">* Create `ConfigArray` instance from a config data. 
     * </span><span class="s5">@param </span><span class="s2">{ConfigData|null} configData </span><span class="s6">The config data to create. 
     * </span><span class="s5">@param </span><span class="s2">{Object} [options] </span><span class="s6">The options. 
     * </span><span class="s5">@param </span><span class="s2">{string} [options.basePath] </span><span class="s6">The base path to resolve relative paths in `overrides[].files`, `overrides[].excludedFiles`, and `ignorePatterns`. 
     * </span><span class="s5">@param </span><span class="s2">{string} [options.filePath] </span><span class="s6">The path to this config data. 
     * </span><span class="s5">@param </span><span class="s2">{string} [options.name] </span><span class="s6">The config name. 
     * </span><span class="s5">@returns </span><span class="s2">{ConfigArray} </span><span class="s6">Loaded config. 
     */</span>
    <span class="s1">create(</span><span class="s2">configData</span><span class="s1">, { </span><span class="s2">basePath</span><span class="s1">, </span><span class="s2">filePath</span><span class="s1">, </span><span class="s2">name </span><span class="s1">} </span><span class="s5">= </span><span class="s1">{}) {</span>
        <span class="s5">if </span><span class="s1">(</span><span class="s5">!</span><span class="s2">configData</span><span class="s1">) {</span>
            <span class="s5">return new </span><span class="s3">ConfigArray</span><span class="s1">();</span>
        <span class="s1">}</span>

        <span class="s5">const </span><span class="s1">slots </span><span class="s5">= </span><span class="s2">internalSlotsMap$1</span><span class="s1">.</span><span class="s3">get</span><span class="s1">(</span><span class="s2">this</span><span class="s1">);</span>
        <span class="s5">const </span><span class="s1">ctx </span><span class="s5">= </span><span class="s3">createContext</span><span class="s1">(</span><span class="s2">slots</span><span class="s1">, </span><span class="s0">&quot;config&quot;</span><span class="s1">, </span><span class="s2">name</span><span class="s1">, </span><span class="s2">filePath</span><span class="s1">, </span><span class="s2">basePath</span><span class="s1">);</span>
        <span class="s5">const </span><span class="s1">elements </span><span class="s5">= </span><span class="s2">this</span><span class="s1">.</span><span class="s3">_normalizeConfigData</span><span class="s1">(</span><span class="s2">configData</span><span class="s1">, </span><span class="s2">ctx</span><span class="s1">);</span>

        <span class="s5">return new </span><span class="s3">ConfigArray</span><span class="s1">(</span><span class="s5">...</span><span class="s2">elements</span><span class="s1">);</span>
    <span class="s1">}</span>

    <span class="s6">/**</span>
     <span class="s6">* Load a config file. 
     * </span><span class="s5">@param </span><span class="s2">{string} filePath </span><span class="s6">The path to a config file. 
     * </span><span class="s5">@param </span><span class="s2">{Object} [options] </span><span class="s6">The options. 
     * </span><span class="s5">@param </span><span class="s2">{string} [options.basePath] </span><span class="s6">The base path to resolve relative paths in `overrides[].files`, `overrides[].excludedFiles`, and `ignorePatterns`. 
     * </span><span class="s5">@param </span><span class="s2">{string} [options.name] </span><span class="s6">The config name. 
     * </span><span class="s5">@returns </span><span class="s2">{ConfigArray} </span><span class="s6">Loaded config. 
     */</span>
    <span class="s1">loadFile(</span><span class="s2">filePath</span><span class="s1">, { </span><span class="s2">basePath</span><span class="s1">, </span><span class="s2">name </span><span class="s1">} </span><span class="s5">= </span><span class="s1">{}) {</span>
        <span class="s5">const </span><span class="s1">slots </span><span class="s5">= </span><span class="s2">internalSlotsMap$1</span><span class="s1">.</span><span class="s3">get</span><span class="s1">(</span><span class="s2">this</span><span class="s1">);</span>
        <span class="s5">const </span><span class="s1">ctx </span><span class="s5">= </span><span class="s3">createContext</span><span class="s1">(</span><span class="s2">slots</span><span class="s1">, </span><span class="s0">&quot;config&quot;</span><span class="s1">, </span><span class="s2">name</span><span class="s1">, </span><span class="s2">filePath</span><span class="s1">, </span><span class="s2">basePath</span><span class="s1">);</span>

        <span class="s5">return new </span><span class="s3">ConfigArray</span><span class="s1">(</span><span class="s5">...</span><span class="s2">this</span><span class="s1">.</span><span class="s3">_loadConfigData</span><span class="s1">(</span><span class="s2">ctx</span><span class="s1">));</span>
    <span class="s1">}</span>

    <span class="s6">/**</span>
     <span class="s6">* Load the config file on a given directory if exists. 
     * </span><span class="s5">@param </span><span class="s2">{string} directoryPath </span><span class="s6">The path to a directory. 
     * </span><span class="s5">@param </span><span class="s2">{Object} [options] </span><span class="s6">The options. 
     * </span><span class="s5">@param </span><span class="s2">{string} [options.basePath] </span><span class="s6">The base path to resolve relative paths in `overrides[].files`, `overrides[].excludedFiles`, and `ignorePatterns`. 
     * </span><span class="s5">@param </span><span class="s2">{string} [options.name] </span><span class="s6">The config name. 
     * </span><span class="s5">@returns </span><span class="s2">{ConfigArray} </span><span class="s6">Loaded config. An empty `ConfigArray` if any config doesn't exist. 
     */</span>
    <span class="s1">loadInDirectory(</span><span class="s2">directoryPath</span><span class="s1">, { </span><span class="s2">basePath</span><span class="s1">, </span><span class="s2">name </span><span class="s1">} </span><span class="s5">= </span><span class="s1">{}) {</span>
        <span class="s5">const </span><span class="s1">slots </span><span class="s5">= </span><span class="s2">internalSlotsMap$1</span><span class="s1">.</span><span class="s3">get</span><span class="s1">(</span><span class="s2">this</span><span class="s1">);</span>

        <span class="s5">for </span><span class="s1">(</span><span class="s5">const </span><span class="s1">filename </span><span class="s5">of </span><span class="s2">configFilenames</span><span class="s1">) {</span>
            <span class="s5">const </span><span class="s1">ctx </span><span class="s5">= </span><span class="s3">createContext</span><span class="s1">(</span>
                <span class="s2">slots</span><span class="s1">,</span>
                <span class="s0">&quot;config&quot;</span><span class="s1">,</span>
                <span class="s2">name</span><span class="s1">,</span>
                <span class="s2">path__default</span><span class="s1">[</span><span class="s0">&quot;default&quot;</span><span class="s1">].</span><span class="s3">join</span><span class="s1">(</span><span class="s2">directoryPath</span><span class="s1">, </span><span class="s2">filename</span><span class="s1">),</span>
                <span class="s2">basePath</span>
            <span class="s1">);</span>

            <span class="s5">if </span><span class="s1">(</span><span class="s2">fs__default</span><span class="s1">[</span><span class="s0">&quot;default&quot;</span><span class="s1">].</span><span class="s3">existsSync</span><span class="s1">(</span><span class="s2">ctx</span><span class="s1">.</span><span class="s2">filePath</span><span class="s1">) </span><span class="s5">&amp;&amp; </span><span class="s2">fs__default</span><span class="s1">[</span><span class="s0">&quot;default&quot;</span><span class="s1">].</span><span class="s3">statSync</span><span class="s1">(</span><span class="s2">ctx</span><span class="s1">.</span><span class="s2">filePath</span><span class="s1">).</span><span class="s3">isFile</span><span class="s1">()) {</span>
                <span class="s5">let </span><span class="s1">configData;</span>

                <span class="s5">try </span><span class="s1">{</span>
                    <span class="s2">configData </span><span class="s5">= </span><span class="s3">loadConfigFile</span><span class="s1">(</span><span class="s2">ctx</span><span class="s1">.</span><span class="s2">filePath</span><span class="s1">);</span>
                <span class="s1">} </span><span class="s5">catch </span><span class="s1">(</span><span class="s2">error</span><span class="s1">) {</span>
                    <span class="s5">if </span><span class="s1">(</span><span class="s5">!</span><span class="s2">error </span><span class="s5">|| </span><span class="s2">error</span><span class="s1">.</span><span class="s2">code </span><span class="s5">!== </span><span class="s0">&quot;ESLINT_CONFIG_FIELD_NOT_FOUND&quot;</span><span class="s1">) {</span>
                        <span class="s5">throw </span><span class="s2">error</span><span class="s1">;</span>
                    <span class="s1">}</span>
                <span class="s1">}</span>

                <span class="s5">if </span><span class="s1">(</span><span class="s2">configData</span><span class="s1">) {</span>
                    <span class="s3">debug$2</span><span class="s1">(</span><span class="s0">`Config file found: ${</span><span class="s2">ctx</span><span class="s0">.</span><span class="s2">filePath</span><span class="s0">}`</span><span class="s1">);</span>
                    <span class="s5">return new </span><span class="s3">ConfigArray</span><span class="s1">(</span>
                        <span class="s5">...</span><span class="s2">this</span><span class="s1">.</span><span class="s3">_normalizeConfigData</span><span class="s1">(</span><span class="s2">configData</span><span class="s1">, </span><span class="s2">ctx</span><span class="s1">)</span>
                    <span class="s1">);</span>
                <span class="s1">}</span>
            <span class="s1">}</span>
        <span class="s1">}</span>

        <span class="s3">debug$2</span><span class="s1">(</span><span class="s0">`Config file not found on ${</span><span class="s2">directoryPath</span><span class="s0">}`</span><span class="s1">);</span>
        <span class="s5">return new </span><span class="s3">ConfigArray</span><span class="s1">();</span>
    <span class="s1">}</span>

    <span class="s6">/**</span>
     <span class="s6">* Check if a config file on a given directory exists or not. 
     * </span><span class="s5">@param </span><span class="s2">{string} directoryPath </span><span class="s6">The path to a directory. 
     * </span><span class="s5">@returns </span><span class="s2">{string | null} </span><span class="s6">The path to the found config file. If not found then null. 
     */</span>
    <span class="s5">static </span><span class="s1">getPathToConfigFileInDirectory(</span><span class="s2">directoryPath</span><span class="s1">) {</span>
        <span class="s5">for </span><span class="s1">(</span><span class="s5">const </span><span class="s1">filename </span><span class="s5">of </span><span class="s2">configFilenames</span><span class="s1">) {</span>
            <span class="s5">const </span><span class="s1">filePath </span><span class="s5">= </span><span class="s2">path__default</span><span class="s1">[</span><span class="s0">&quot;default&quot;</span><span class="s1">].</span><span class="s3">join</span><span class="s1">(</span><span class="s2">directoryPath</span><span class="s1">, </span><span class="s2">filename</span><span class="s1">);</span>

            <span class="s5">if </span><span class="s1">(</span><span class="s2">fs__default</span><span class="s1">[</span><span class="s0">&quot;default&quot;</span><span class="s1">].</span><span class="s3">existsSync</span><span class="s1">(</span><span class="s2">filePath</span><span class="s1">)) {</span>
                <span class="s5">if </span><span class="s1">(</span><span class="s2">filename </span><span class="s5">=== </span><span class="s0">&quot;package.json&quot;</span><span class="s1">) {</span>
                    <span class="s5">try </span><span class="s1">{</span>
                        <span class="s3">loadPackageJSONConfigFile</span><span class="s1">(</span><span class="s2">filePath</span><span class="s1">);</span>
                        <span class="s5">return </span><span class="s2">filePath</span><span class="s1">;</span>
                    <span class="s1">} </span><span class="s5">catch </span><span class="s1">{ </span><span class="s6">/* ignore */ </span><span class="s1">}</span>
                <span class="s1">} </span><span class="s5">else </span><span class="s1">{</span>
                    <span class="s5">return </span><span class="s2">filePath</span><span class="s1">;</span>
                <span class="s1">}</span>
            <span class="s1">}</span>
        <span class="s1">}</span>
        <span class="s5">return </span><span class="s4">null</span><span class="s1">;</span>
    <span class="s1">}</span>

    <span class="s6">/**</span>
     <span class="s6">* Load `.eslintignore` file. 
     * </span><span class="s5">@param </span><span class="s2">{string} filePath </span><span class="s6">The path to a `.eslintignore` file to load. 
     * </span><span class="s5">@returns </span><span class="s2">{ConfigArray} </span><span class="s6">Loaded config. An empty `ConfigArray` if any config doesn't exist. 
     */</span>
    <span class="s1">loadESLintIgnore(</span><span class="s2">filePath</span><span class="s1">) {</span>
        <span class="s5">const </span><span class="s1">slots </span><span class="s5">= </span><span class="s2">internalSlotsMap$1</span><span class="s1">.</span><span class="s3">get</span><span class="s1">(</span><span class="s2">this</span><span class="s1">);</span>
        <span class="s5">const </span><span class="s1">ctx </span><span class="s5">= </span><span class="s3">createContext</span><span class="s1">(</span>
            <span class="s2">slots</span><span class="s1">,</span>
            <span class="s0">&quot;ignore&quot;</span><span class="s1">,</span>
            <span class="s5">void </span><span class="s7">0</span><span class="s1">,</span>
            <span class="s2">filePath</span><span class="s1">,</span>
            <span class="s2">slots</span><span class="s1">.</span><span class="s2">cwd</span>
        <span class="s1">);</span>
        <span class="s5">const </span><span class="s1">ignorePatterns </span><span class="s5">= </span><span class="s3">loadESLintIgnoreFile</span><span class="s1">(</span><span class="s2">ctx</span><span class="s1">.</span><span class="s2">filePath</span><span class="s1">);</span>

        <span class="s5">return new </span><span class="s3">ConfigArray</span><span class="s1">(</span>
            <span class="s5">...</span><span class="s2">this</span><span class="s1">.</span><span class="s3">_normalizeESLintIgnoreData</span><span class="s1">(</span><span class="s2">ignorePatterns</span><span class="s1">, </span><span class="s2">ctx</span><span class="s1">)</span>
        <span class="s1">);</span>
    <span class="s1">}</span>

    <span class="s6">/**</span>
     <span class="s6">* Load `.eslintignore` file in the current working directory. 
     * </span><span class="s5">@returns </span><span class="s2">{ConfigArray} </span><span class="s6">Loaded config. An empty `ConfigArray` if any config doesn't exist. 
     */</span>
    <span class="s1">loadDefaultESLintIgnore() {</span>
        <span class="s5">const </span><span class="s1">slots </span><span class="s5">= </span><span class="s2">internalSlotsMap$1</span><span class="s1">.</span><span class="s3">get</span><span class="s1">(</span><span class="s2">this</span><span class="s1">);</span>
        <span class="s5">const </span><span class="s1">eslintIgnorePath </span><span class="s5">= </span><span class="s2">path__default</span><span class="s1">[</span><span class="s0">&quot;default&quot;</span><span class="s1">].</span><span class="s3">resolve</span><span class="s1">(</span><span class="s2">slots</span><span class="s1">.</span><span class="s2">cwd</span><span class="s1">, </span><span class="s0">&quot;.eslintignore&quot;</span><span class="s1">);</span>
        <span class="s5">const </span><span class="s1">packageJsonPath </span><span class="s5">= </span><span class="s2">path__default</span><span class="s1">[</span><span class="s0">&quot;default&quot;</span><span class="s1">].</span><span class="s3">resolve</span><span class="s1">(</span><span class="s2">slots</span><span class="s1">.</span><span class="s2">cwd</span><span class="s1">, </span><span class="s0">&quot;package.json&quot;</span><span class="s1">);</span>

        <span class="s5">if </span><span class="s1">(</span><span class="s2">fs__default</span><span class="s1">[</span><span class="s0">&quot;default&quot;</span><span class="s1">].</span><span class="s3">existsSync</span><span class="s1">(</span><span class="s2">eslintIgnorePath</span><span class="s1">)) {</span>
            <span class="s5">return </span><span class="s2">this</span><span class="s1">.</span><span class="s3">loadESLintIgnore</span><span class="s1">(</span><span class="s2">eslintIgnorePath</span><span class="s1">);</span>
        <span class="s1">}</span>
        <span class="s5">if </span><span class="s1">(</span><span class="s2">fs__default</span><span class="s1">[</span><span class="s0">&quot;default&quot;</span><span class="s1">].</span><span class="s3">existsSync</span><span class="s1">(</span><span class="s2">packageJsonPath</span><span class="s1">)) {</span>
            <span class="s5">const </span><span class="s1">data </span><span class="s5">= </span><span class="s3">loadJSONConfigFile</span><span class="s1">(</span><span class="s2">packageJsonPath</span><span class="s1">);</span>

            <span class="s5">if </span><span class="s1">(</span><span class="s2">Object</span><span class="s1">.</span><span class="s2">hasOwnProperty</span><span class="s1">.</span><span class="s3">call</span><span class="s1">(</span><span class="s2">data</span><span class="s1">, </span><span class="s0">&quot;eslintIgnore&quot;</span><span class="s1">)) {</span>
                <span class="s5">if </span><span class="s1">(</span><span class="s5">!</span><span class="s2">Array</span><span class="s1">.</span><span class="s3">isArray</span><span class="s1">(</span><span class="s2">data</span><span class="s1">.</span><span class="s2">eslintIgnore</span><span class="s1">)) {</span>
                    <span class="s5">throw new </span><span class="s3">Error</span><span class="s1">(</span><span class="s0">&quot;Package.json eslintIgnore property requires an array of paths&quot;</span><span class="s1">);</span>
                <span class="s1">}</span>
                <span class="s5">const </span><span class="s1">ctx </span><span class="s5">= </span><span class="s3">createContext</span><span class="s1">(</span>
                    <span class="s2">slots</span><span class="s1">,</span>
                    <span class="s0">&quot;ignore&quot;</span><span class="s1">,</span>
                    <span class="s0">&quot;eslintIgnore in package.json&quot;</span><span class="s1">,</span>
                    <span class="s2">packageJsonPath</span><span class="s1">,</span>
                    <span class="s2">slots</span><span class="s1">.</span><span class="s2">cwd</span>
                <span class="s1">);</span>

                <span class="s5">return new </span><span class="s3">ConfigArray</span><span class="s1">(</span>
                    <span class="s5">...</span><span class="s2">this</span><span class="s1">.</span><span class="s3">_normalizeESLintIgnoreData</span><span class="s1">(</span><span class="s2">data</span><span class="s1">.</span><span class="s2">eslintIgnore</span><span class="s1">, </span><span class="s2">ctx</span><span class="s1">)</span>
                <span class="s1">);</span>
            <span class="s1">}</span>
        <span class="s1">}</span>

        <span class="s5">return new </span><span class="s3">ConfigArray</span><span class="s1">();</span>
    <span class="s1">}</span>

    <span class="s6">/**</span>
     <span class="s6">* Load a given config file. 
     * </span><span class="s5">@param </span><span class="s2">{ConfigArrayFactoryLoadingContext} ctx </span><span class="s6">The loading context. 
     * </span><span class="s5">@returns </span><span class="s2">{IterableIterator&lt;ConfigArrayElement&gt;} </span><span class="s6">Loaded config. 
     * </span><span class="s5">@private</span>
     <span class="s6">*/</span>
    <span class="s1">_loadConfigData(</span><span class="s2">ctx</span><span class="s1">) {</span>
        <span class="s5">return </span><span class="s2">this</span><span class="s1">.</span><span class="s3">_normalizeConfigData</span><span class="s1">(</span><span class="s3">loadConfigFile</span><span class="s1">(</span><span class="s2">ctx</span><span class="s1">.</span><span class="s2">filePath</span><span class="s1">), </span><span class="s2">ctx</span><span class="s1">);</span>
    <span class="s1">}</span>

    <span class="s6">/**</span>
     <span class="s6">* Normalize a given `.eslintignore` data to config array elements. 
     * </span><span class="s5">@param </span><span class="s2">{string[]} ignorePatterns </span><span class="s6">The patterns to ignore files. 
     * </span><span class="s5">@param </span><span class="s2">{ConfigArrayFactoryLoadingContext} ctx </span><span class="s6">The loading context. 
     * </span><span class="s5">@returns </span><span class="s2">{IterableIterator&lt;ConfigArrayElement&gt;} </span><span class="s6">The normalized config. 
     * </span><span class="s5">@private</span>
     <span class="s6">*/</span>
    <span class="s5">*</span><span class="s1">_normalizeESLintIgnoreData(</span><span class="s2">ignorePatterns</span><span class="s1">, </span><span class="s2">ctx</span><span class="s1">) {</span>
        <span class="s5">const </span><span class="s1">elements </span><span class="s5">= </span><span class="s2">this</span><span class="s1">.</span><span class="s3">_normalizeObjectConfigData</span><span class="s1">(</span>
            <span class="s1">{ </span><span class="s2">ignorePatterns </span><span class="s1">},</span>
            <span class="s2">ctx</span>
        <span class="s1">);</span>

        <span class="s6">// Set `ignorePattern.loose` flag for backward compatibility.</span>
        <span class="s5">for </span><span class="s1">(</span><span class="s5">const </span><span class="s1">element </span><span class="s5">of </span><span class="s2">elements</span><span class="s1">) {</span>
            <span class="s5">if </span><span class="s1">(</span><span class="s2">element</span><span class="s1">.</span><span class="s2">ignorePattern</span><span class="s1">) {</span>
                <span class="s2">element</span><span class="s1">.</span><span class="s2">ignorePattern</span><span class="s1">.</span><span class="s2">loose </span><span class="s5">= </span><span class="s4">true</span><span class="s1">;</span>
            <span class="s1">}</span>
            <span class="s5">yield </span><span class="s2">element</span><span class="s1">;</span>
        <span class="s1">}</span>
    <span class="s1">}</span>

    <span class="s6">/**</span>
     <span class="s6">* Normalize a given config to an array. 
     * </span><span class="s5">@param </span><span class="s2">{ConfigData} configData </span><span class="s6">The config data to normalize. 
     * </span><span class="s5">@param </span><span class="s2">{ConfigArrayFactoryLoadingContext} ctx </span><span class="s6">The loading context. 
     * </span><span class="s5">@returns </span><span class="s2">{IterableIterator&lt;ConfigArrayElement&gt;} </span><span class="s6">The normalized config. 
     * </span><span class="s5">@private</span>
     <span class="s6">*/</span>
    <span class="s1">_normalizeConfigData(</span><span class="s2">configData</span><span class="s1">, </span><span class="s2">ctx</span><span class="s1">) {</span>
        <span class="s5">const </span><span class="s1">validator </span><span class="s5">= new </span><span class="s3">ConfigValidator</span><span class="s1">();</span>

        <span class="s2">validator</span><span class="s1">.</span><span class="s3">validateConfigSchema</span><span class="s1">(</span><span class="s2">configData</span><span class="s1">, </span><span class="s2">ctx</span><span class="s1">.</span><span class="s2">name </span><span class="s5">|| </span><span class="s2">ctx</span><span class="s1">.</span><span class="s2">filePath</span><span class="s1">);</span>
        <span class="s5">return </span><span class="s2">this</span><span class="s1">.</span><span class="s3">_normalizeObjectConfigData</span><span class="s1">(</span><span class="s2">configData</span><span class="s1">, </span><span class="s2">ctx</span><span class="s1">);</span>
    <span class="s1">}</span>

    <span class="s6">/**</span>
     <span class="s6">* Normalize a given config to an array. 
     * </span><span class="s5">@param </span><span class="s2">{ConfigData|OverrideConfigData} configData </span><span class="s6">The config data to normalize. 
     * </span><span class="s5">@param </span><span class="s2">{ConfigArrayFactoryLoadingContext} ctx </span><span class="s6">The loading context. 
     * </span><span class="s5">@returns </span><span class="s2">{IterableIterator&lt;ConfigArrayElement&gt;} </span><span class="s6">The normalized config. 
     * </span><span class="s5">@private</span>
     <span class="s6">*/</span>
    <span class="s5">*</span><span class="s1">_normalizeObjectConfigData(</span><span class="s2">configData</span><span class="s1">, </span><span class="s2">ctx</span><span class="s1">) {</span>
        <span class="s5">const </span><span class="s1">{ files, excludedFiles, </span><span class="s5">...</span><span class="s1">configBody } </span><span class="s5">= </span><span class="s2">configData</span><span class="s1">;</span>
        <span class="s5">const </span><span class="s1">criteria </span><span class="s5">= </span><span class="s2">OverrideTester</span><span class="s1">.</span><span class="s3">create</span><span class="s1">(</span>
            <span class="s2">files</span><span class="s1">,</span>
            <span class="s2">excludedFiles</span><span class="s1">,</span>
            <span class="s2">ctx</span><span class="s1">.</span><span class="s2">matchBasePath</span>
        <span class="s1">);</span>
        <span class="s5">const </span><span class="s1">elements </span><span class="s5">= </span><span class="s2">this</span><span class="s1">.</span><span class="s3">_normalizeObjectConfigDataBody</span><span class="s1">(</span><span class="s2">configBody</span><span class="s1">, </span><span class="s2">ctx</span><span class="s1">);</span>

        <span class="s6">// Apply the criteria to every element.</span>
        <span class="s5">for </span><span class="s1">(</span><span class="s5">const </span><span class="s1">element </span><span class="s5">of </span><span class="s2">elements</span><span class="s1">) {</span>

            <span class="s6">/*</span>
             <span class="s6">* Merge the criteria. 
             * This is for the `overrides` entries that came from the 
             * configurations of `overrides[].extends`. 
             */</span>
            <span class="s2">element</span><span class="s1">.</span><span class="s2">criteria </span><span class="s5">= </span><span class="s2">OverrideTester</span><span class="s1">.</span><span class="s3">and</span><span class="s1">(</span><span class="s2">criteria</span><span class="s1">, </span><span class="s2">element</span><span class="s1">.</span><span class="s2">criteria</span><span class="s1">);</span>

            <span class="s6">/*</span>
             <span class="s6">* Remove `root` property to ignore `root` settings which came from 
             * `extends` in `overrides`. 
             */</span>
            <span class="s5">if </span><span class="s1">(</span><span class="s2">element</span><span class="s1">.</span><span class="s2">criteria</span><span class="s1">) {</span>
                <span class="s2">element</span><span class="s1">.</span><span class="s2">root </span><span class="s5">= void </span><span class="s7">0</span><span class="s1">;</span>
            <span class="s1">}</span>

            <span class="s5">yield </span><span class="s2">element</span><span class="s1">;</span>
        <span class="s1">}</span>
    <span class="s1">}</span>

    <span class="s6">/**</span>
     <span class="s6">* Normalize a given config to an array. 
     * </span><span class="s5">@param </span><span class="s2">{ConfigData} configData </span><span class="s6">The config data to normalize. 
     * </span><span class="s5">@param </span><span class="s2">{ConfigArrayFactoryLoadingContext} ctx </span><span class="s6">The loading context. 
     * </span><span class="s5">@returns </span><span class="s2">{IterableIterator&lt;ConfigArrayElement&gt;} </span><span class="s6">The normalized config. 
     * </span><span class="s5">@private</span>
     <span class="s6">*/</span>
    <span class="s5">*</span><span class="s1">_normalizeObjectConfigDataBody(</span>
        <span class="s1">{</span>
            <span class="s2">env</span><span class="s1">,</span>
            <span class="s2">extends</span><span class="s1">: </span><span class="s2">extend</span><span class="s1">,</span>
            <span class="s2">globals</span><span class="s1">,</span>
            <span class="s2">ignorePatterns</span><span class="s1">,</span>
            <span class="s2">noInlineConfig</span><span class="s1">,</span>
            <span class="s2">parser</span><span class="s1">: </span><span class="s2">parserName</span><span class="s1">,</span>
            <span class="s2">parserOptions</span><span class="s1">,</span>
            <span class="s2">plugins</span><span class="s1">: </span><span class="s2">pluginList</span><span class="s1">,</span>
            <span class="s2">processor</span><span class="s1">,</span>
            <span class="s2">reportUnusedDisableDirectives</span><span class="s1">,</span>
            <span class="s2">root</span><span class="s1">,</span>
            <span class="s2">rules</span><span class="s1">,</span>
            <span class="s2">settings</span><span class="s1">,</span>
            <span class="s2">overrides</span><span class="s1">: </span><span class="s2">overrideList </span><span class="s5">= </span><span class="s1">[]</span>
        <span class="s1">},</span>
        <span class="s2">ctx</span>
    <span class="s1">) {</span>
        <span class="s5">const </span><span class="s1">extendList </span><span class="s5">= </span><span class="s2">Array</span><span class="s1">.</span><span class="s3">isArray</span><span class="s1">(</span><span class="s2">extend</span><span class="s1">) </span><span class="s5">? </span><span class="s2">extend </span><span class="s5">: </span><span class="s1">[</span><span class="s2">extend</span><span class="s1">];</span>
        <span class="s5">const </span><span class="s1">ignorePattern </span><span class="s5">= </span><span class="s2">ignorePatterns </span><span class="s5">&amp;&amp; new </span><span class="s3">IgnorePattern</span><span class="s1">(</span>
            <span class="s2">Array</span><span class="s1">.</span><span class="s3">isArray</span><span class="s1">(</span><span class="s2">ignorePatterns</span><span class="s1">) </span><span class="s5">? </span><span class="s2">ignorePatterns </span><span class="s5">: </span><span class="s1">[</span><span class="s2">ignorePatterns</span><span class="s1">],</span>
            <span class="s2">ctx</span><span class="s1">.</span><span class="s2">matchBasePath</span>
        <span class="s1">);</span>

        <span class="s6">// Flatten `extends`.</span>
        <span class="s5">for </span><span class="s1">(</span><span class="s5">const </span><span class="s1">extendName </span><span class="s5">of </span><span class="s2">extendList</span><span class="s1">.</span><span class="s3">filter</span><span class="s1">(</span><span class="s2">Boolean</span><span class="s1">)) {</span>
            <span class="s5">yield* </span><span class="s2">this</span><span class="s1">.</span><span class="s3">_loadExtends</span><span class="s1">(</span><span class="s2">extendName</span><span class="s1">, </span><span class="s2">ctx</span><span class="s1">);</span>
        <span class="s1">}</span>

        <span class="s6">// Load parser &amp; plugins.</span>
        <span class="s5">const </span><span class="s1">parser </span><span class="s5">= </span><span class="s2">parserName </span><span class="s5">&amp;&amp; </span><span class="s2">this</span><span class="s1">.</span><span class="s3">_loadParser</span><span class="s1">(</span><span class="s2">parserName</span><span class="s1">, </span><span class="s2">ctx</span><span class="s1">);</span>
        <span class="s5">const </span><span class="s1">plugins </span><span class="s5">= </span><span class="s2">pluginList </span><span class="s5">&amp;&amp; </span><span class="s2">this</span><span class="s1">.</span><span class="s3">_loadPlugins</span><span class="s1">(</span><span class="s2">pluginList</span><span class="s1">, </span><span class="s2">ctx</span><span class="s1">);</span>

        <span class="s6">// Yield pseudo config data for file extension processors.</span>
        <span class="s5">if </span><span class="s1">(</span><span class="s2">plugins</span><span class="s1">) {</span>
            <span class="s5">yield* </span><span class="s2">this</span><span class="s1">.</span><span class="s3">_takeFileExtensionProcessors</span><span class="s1">(</span><span class="s2">plugins</span><span class="s1">, </span><span class="s2">ctx</span><span class="s1">);</span>
        <span class="s1">}</span>

        <span class="s6">// Yield the config data except `extends` and `overrides`.</span>
        <span class="s5">yield </span><span class="s1">{</span>

            <span class="s6">// Debug information.</span>
            <span class="s1">type: </span><span class="s2">ctx</span><span class="s1">.</span><span class="s2">type</span><span class="s1">,</span>
            <span class="s1">name: </span><span class="s2">ctx</span><span class="s1">.</span><span class="s2">name</span><span class="s1">,</span>
            <span class="s1">filePath: </span><span class="s2">ctx</span><span class="s1">.</span><span class="s2">filePath</span><span class="s1">,</span>

            <span class="s6">// Config data.</span>
            <span class="s1">criteria: </span><span class="s4">null</span><span class="s1">,</span>
            <span class="s2">env</span><span class="s1">,</span>
            <span class="s2">globals</span><span class="s1">,</span>
            <span class="s2">ignorePattern</span><span class="s1">,</span>
            <span class="s2">noInlineConfig</span><span class="s1">,</span>
            <span class="s2">parser</span><span class="s1">,</span>
            <span class="s2">parserOptions</span><span class="s1">,</span>
            <span class="s2">plugins</span><span class="s1">,</span>
            <span class="s2">processor</span><span class="s1">,</span>
            <span class="s2">reportUnusedDisableDirectives</span><span class="s1">,</span>
            <span class="s2">root</span><span class="s1">,</span>
            <span class="s2">rules</span><span class="s1">,</span>
            <span class="s2">settings</span>
        <span class="s1">};</span>

        <span class="s6">// Flatten `overries`.</span>
        <span class="s5">for </span><span class="s1">(</span><span class="s5">let </span><span class="s1">i </span><span class="s5">= </span><span class="s7">0</span><span class="s1">; </span><span class="s2">i </span><span class="s5">&lt; </span><span class="s2">overrideList</span><span class="s1">.length; </span><span class="s5">++</span><span class="s2">i</span><span class="s1">) {</span>
            <span class="s5">yield* </span><span class="s2">this</span><span class="s1">.</span><span class="s3">_normalizeObjectConfigData</span><span class="s1">(</span>
                <span class="s2">overrideList</span><span class="s1">[</span><span class="s2">i</span><span class="s1">],</span>
                <span class="s1">{ </span><span class="s5">...</span><span class="s2">ctx</span><span class="s1">, name: </span><span class="s0">`${</span><span class="s2">ctx</span><span class="s0">.</span><span class="s2">name</span><span class="s0">}#overrides[${</span><span class="s2">i</span><span class="s0">}]` </span><span class="s1">}</span>
            <span class="s1">);</span>
        <span class="s1">}</span>
    <span class="s1">}</span>

    <span class="s6">/**</span>
     <span class="s6">* Load configs of an element in `extends`. 
     * </span><span class="s5">@param </span><span class="s2">{string} extendName </span><span class="s6">The name of a base config. 
     * </span><span class="s5">@param </span><span class="s2">{ConfigArrayFactoryLoadingContext} ctx </span><span class="s6">The loading context. 
     * </span><span class="s5">@returns </span><span class="s2">{IterableIterator&lt;ConfigArrayElement&gt;} </span><span class="s6">The normalized config. 
     * </span><span class="s5">@private</span>
     <span class="s6">*/</span>
    <span class="s1">_loadExtends(</span><span class="s2">extendName</span><span class="s1">, </span><span class="s2">ctx</span><span class="s1">) {</span>
        <span class="s3">debug$2</span><span class="s1">(</span><span class="s0">&quot;Loading {extends:%j} relative to %s&quot;</span><span class="s1">, </span><span class="s2">extendName</span><span class="s1">, </span><span class="s2">ctx</span><span class="s1">.</span><span class="s2">filePath</span><span class="s1">);</span>
        <span class="s5">try </span><span class="s1">{</span>
            <span class="s5">if </span><span class="s1">(</span><span class="s2">extendName</span><span class="s1">.</span><span class="s3">startsWith</span><span class="s1">(</span><span class="s0">&quot;eslint:&quot;</span><span class="s1">)) {</span>
                <span class="s5">return </span><span class="s2">this</span><span class="s1">.</span><span class="s3">_loadExtendedBuiltInConfig</span><span class="s1">(</span><span class="s2">extendName</span><span class="s1">, </span><span class="s2">ctx</span><span class="s1">);</span>
            <span class="s1">}</span>
            <span class="s5">if </span><span class="s1">(</span><span class="s2">extendName</span><span class="s1">.</span><span class="s3">startsWith</span><span class="s1">(</span><span class="s0">&quot;plugin:&quot;</span><span class="s1">)) {</span>
                <span class="s5">return </span><span class="s2">this</span><span class="s1">.</span><span class="s3">_loadExtendedPluginConfig</span><span class="s1">(</span><span class="s2">extendName</span><span class="s1">, </span><span class="s2">ctx</span><span class="s1">);</span>
            <span class="s1">}</span>
            <span class="s5">return </span><span class="s2">this</span><span class="s1">.</span><span class="s3">_loadExtendedShareableConfig</span><span class="s1">(</span><span class="s2">extendName</span><span class="s1">, </span><span class="s2">ctx</span><span class="s1">);</span>
        <span class="s1">} </span><span class="s5">catch </span><span class="s1">(</span><span class="s2">error</span><span class="s1">) {</span>
            <span class="s2">error</span><span class="s1">.</span><span class="s2">message </span><span class="s5">+= </span><span class="s0">`</span><span class="s8">\n</span><span class="s0">Referenced from: ${</span><span class="s2">ctx</span><span class="s0">.</span><span class="s2">filePath </span><span class="s5">|| </span><span class="s2">ctx</span><span class="s0">.</span><span class="s2">name</span><span class="s0">}`</span><span class="s1">;</span>
            <span class="s5">throw </span><span class="s2">error</span><span class="s1">;</span>
        <span class="s1">}</span>
    <span class="s1">}</span>

    <span class="s6">/**</span>
     <span class="s6">* Load configs of an element in `extends`. 
     * </span><span class="s5">@param </span><span class="s2">{string} extendName </span><span class="s6">The name of a base config. 
     * </span><span class="s5">@param </span><span class="s2">{ConfigArrayFactoryLoadingContext} ctx </span><span class="s6">The loading context. 
     * </span><span class="s5">@returns </span><span class="s2">{IterableIterator&lt;ConfigArrayElement&gt;} </span><span class="s6">The normalized config. 
     * </span><span class="s5">@private</span>
     <span class="s6">*/</span>
    <span class="s1">_loadExtendedBuiltInConfig(</span><span class="s2">extendName</span><span class="s1">, </span><span class="s2">ctx</span><span class="s1">) {</span>
        <span class="s5">const </span><span class="s1">{</span>
            <span class="s1">eslintAllPath,</span>
            <span class="s1">getEslintAllConfig,</span>
            <span class="s1">eslintRecommendedPath,</span>
            <span class="s1">getEslintRecommendedConfig</span>
        <span class="s1">} </span><span class="s5">= </span><span class="s2">internalSlotsMap$1</span><span class="s1">.</span><span class="s3">get</span><span class="s1">(</span><span class="s2">this</span><span class="s1">);</span>

        <span class="s5">if </span><span class="s1">(</span><span class="s2">extendName </span><span class="s5">=== </span><span class="s0">&quot;eslint:recommended&quot;</span><span class="s1">) {</span>
            <span class="s5">const </span><span class="s1">name </span><span class="s5">= </span><span class="s0">`${</span><span class="s2">ctx</span><span class="s0">.</span><span class="s2">name</span><span class="s0">}  ${</span><span class="s2">extendName</span><span class="s0">}`</span><span class="s1">;</span>

            <span class="s5">if </span><span class="s1">(</span><span class="s2">getEslintRecommendedConfig</span><span class="s1">) {</span>
                <span class="s5">if </span><span class="s1">(</span><span class="s5">typeof </span><span class="s2">getEslintRecommendedConfig </span><span class="s5">!== </span><span class="s0">&quot;function&quot;</span><span class="s1">) {</span>
                    <span class="s5">throw new </span><span class="s3">Error</span><span class="s1">(</span><span class="s0">`getEslintRecommendedConfig must be a function instead of '${</span><span class="s2">getEslintRecommendedConfig</span><span class="s0">}'`</span><span class="s1">);</span>
                <span class="s1">}</span>
                <span class="s5">return </span><span class="s2">this</span><span class="s1">.</span><span class="s3">_normalizeConfigData</span><span class="s1">(</span><span class="s3">getEslintRecommendedConfig</span><span class="s1">(), { </span><span class="s5">...</span><span class="s2">ctx</span><span class="s1">, </span><span class="s2">name</span><span class="s1">, filePath: </span><span class="s0">&quot;&quot; </span><span class="s1">});</span>
            <span class="s1">}</span>
            <span class="s5">return </span><span class="s2">this</span><span class="s1">.</span><span class="s3">_loadConfigData</span><span class="s1">({</span>
                <span class="s5">...</span><span class="s2">ctx</span><span class="s1">,</span>
                <span class="s2">name</span><span class="s1">,</span>
                <span class="s1">filePath: </span><span class="s2">eslintRecommendedPath</span>
            <span class="s1">});</span>
        <span class="s1">}</span>
        <span class="s5">if </span><span class="s1">(</span><span class="s2">extendName </span><span class="s5">=== </span><span class="s0">&quot;eslint:all&quot;</span><span class="s1">) {</span>
            <span class="s5">const </span><span class="s1">name </span><span class="s5">= </span><span class="s0">`${</span><span class="s2">ctx</span><span class="s0">.</span><span class="s2">name</span><span class="s0">}  ${</span><span class="s2">extendName</span><span class="s0">}`</span><span class="s1">;</span>

            <span class="s5">if </span><span class="s1">(</span><span class="s2">getEslintAllConfig</span><span class="s1">) {</span>
                <span class="s5">if </span><span class="s1">(</span><span class="s5">typeof </span><span class="s2">getEslintAllConfig </span><span class="s5">!== </span><span class="s0">&quot;function&quot;</span><span class="s1">) {</span>
                    <span class="s5">throw new </span><span class="s3">Error</span><span class="s1">(</span><span class="s0">`getEslintAllConfig must be a function instead of '${</span><span class="s2">getEslintAllConfig</span><span class="s0">}'`</span><span class="s1">);</span>
                <span class="s1">}</span>
                <span class="s5">return </span><span class="s2">this</span><span class="s1">.</span><span class="s3">_normalizeConfigData</span><span class="s1">(</span><span class="s3">getEslintAllConfig</span><span class="s1">(), { </span><span class="s5">...</span><span class="s2">ctx</span><span class="s1">, </span><span class="s2">name</span><span class="s1">, filePath: </span><span class="s0">&quot;&quot; </span><span class="s1">});</span>
            <span class="s1">}</span>
            <span class="s5">return </span><span class="s2">this</span><span class="s1">.</span><span class="s3">_loadConfigData</span><span class="s1">({</span>
                <span class="s5">...</span><span class="s2">ctx</span><span class="s1">,</span>
                <span class="s2">name</span><span class="s1">,</span>
                <span class="s1">filePath: </span><span class="s2">eslintAllPath</span>
            <span class="s1">});</span>
        <span class="s1">}</span>

        <span class="s5">throw </span><span class="s3">configInvalidError</span><span class="s1">(</span><span class="s2">extendName</span><span class="s1">, </span><span class="s2">ctx</span><span class="s1">.</span><span class="s2">name</span><span class="s1">, </span><span class="s0">&quot;extend-config-missing&quot;</span><span class="s1">);</span>
    <span class="s1">}</span>

    <span class="s6">/**</span>
     <span class="s6">* Load configs of an element in `extends`. 
     * </span><span class="s5">@param </span><span class="s2">{string} extendName </span><span class="s6">The name of a base config. 
     * </span><span class="s5">@param </span><span class="s2">{ConfigArrayFactoryLoadingContext} ctx </span><span class="s6">The loading context. 
     * </span><span class="s5">@returns </span><span class="s2">{IterableIterator&lt;ConfigArrayElement&gt;} </span><span class="s6">The normalized config. 
     * </span><span class="s5">@private</span>
     <span class="s6">*/</span>
    <span class="s1">_loadExtendedPluginConfig(</span><span class="s2">extendName</span><span class="s1">, </span><span class="s2">ctx</span><span class="s1">) {</span>
        <span class="s5">const </span><span class="s1">slashIndex </span><span class="s5">= </span><span class="s2">extendName</span><span class="s1">.</span><span class="s3">lastIndexOf</span><span class="s1">(</span><span class="s0">&quot;/&quot;</span><span class="s1">);</span>

        <span class="s5">if </span><span class="s1">(</span><span class="s2">slashIndex </span><span class="s5">=== -</span><span class="s7">1</span><span class="s1">) {</span>
            <span class="s5">throw </span><span class="s3">configInvalidError</span><span class="s1">(</span><span class="s2">extendName</span><span class="s1">, </span><span class="s2">ctx</span><span class="s1">.</span><span class="s2">filePath</span><span class="s1">, </span><span class="s0">&quot;plugin-invalid&quot;</span><span class="s1">);</span>
        <span class="s1">}</span>

        <span class="s5">const </span><span class="s1">pluginName </span><span class="s5">= </span><span class="s2">extendName</span><span class="s1">.</span><span class="s3">slice</span><span class="s1">(</span><span class="s0">&quot;plugin:&quot;</span><span class="s1">.length, </span><span class="s2">slashIndex</span><span class="s1">);</span>
        <span class="s5">const </span><span class="s1">configName </span><span class="s5">= </span><span class="s2">extendName</span><span class="s1">.</span><span class="s3">slice</span><span class="s1">(</span><span class="s2">slashIndex </span><span class="s5">+ </span><span class="s7">1</span><span class="s1">);</span>

        <span class="s5">if </span><span class="s1">(</span><span class="s3">isFilePath</span><span class="s1">(</span><span class="s2">pluginName</span><span class="s1">)) {</span>
            <span class="s5">throw new </span><span class="s3">Error</span><span class="s1">(</span><span class="s0">&quot;'extends' cannot use a file path for plugins.&quot;</span><span class="s1">);</span>
        <span class="s1">}</span>

        <span class="s5">const </span><span class="s1">plugin </span><span class="s5">= </span><span class="s2">this</span><span class="s1">.</span><span class="s3">_loadPlugin</span><span class="s1">(</span><span class="s2">pluginName</span><span class="s1">, </span><span class="s2">ctx</span><span class="s1">);</span>
        <span class="s5">const </span><span class="s1">configData </span><span class="s5">=</span>
            <span class="s2">plugin</span><span class="s1">.</span><span class="s2">definition </span><span class="s5">&amp;&amp;</span>
            <span class="s2">plugin</span><span class="s1">.</span><span class="s2">definition</span><span class="s1">.</span><span class="s2">configs</span><span class="s1">[</span><span class="s2">configName</span><span class="s1">];</span>

        <span class="s5">if </span><span class="s1">(</span><span class="s2">configData</span><span class="s1">) {</span>
            <span class="s5">return </span><span class="s2">this</span><span class="s1">.</span><span class="s3">_normalizeConfigData</span><span class="s1">(</span><span class="s2">configData</span><span class="s1">, {</span>
                <span class="s5">...</span><span class="s2">ctx</span><span class="s1">,</span>
                <span class="s1">filePath: </span><span class="s2">plugin</span><span class="s1">.</span><span class="s2">filePath </span><span class="s5">|| </span><span class="s2">ctx</span><span class="s1">.</span><span class="s2">filePath</span><span class="s1">,</span>
                <span class="s1">name: </span><span class="s0">`${</span><span class="s2">ctx</span><span class="s0">.</span><span class="s2">name</span><span class="s0">}  plugin:${</span><span class="s2">plugin</span><span class="s0">.</span><span class="s2">id</span><span class="s0">}/${</span><span class="s2">configName</span><span class="s0">}`</span>
            <span class="s1">});</span>
        <span class="s1">}</span>

        <span class="s5">throw </span><span class="s2">plugin</span><span class="s1">.</span><span class="s2">error </span><span class="s5">|| </span><span class="s3">configInvalidError</span><span class="s1">(</span><span class="s2">extendName</span><span class="s1">, </span><span class="s2">ctx</span><span class="s1">.</span><span class="s2">filePath</span><span class="s1">, </span><span class="s0">&quot;extend-config-missing&quot;</span><span class="s1">);</span>
    <span class="s1">}</span>

    <span class="s6">/**</span>
     <span class="s6">* Load configs of an element in `extends`. 
     * </span><span class="s5">@param </span><span class="s2">{string} extendName </span><span class="s6">The name of a base config. 
     * </span><span class="s5">@param </span><span class="s2">{ConfigArrayFactoryLoadingContext} ctx </span><span class="s6">The loading context. 
     * </span><span class="s5">@returns </span><span class="s2">{IterableIterator&lt;ConfigArrayElement&gt;} </span><span class="s6">The normalized config. 
     * </span><span class="s5">@private</span>
     <span class="s6">*/</span>
    <span class="s1">_loadExtendedShareableConfig(</span><span class="s2">extendName</span><span class="s1">, </span><span class="s2">ctx</span><span class="s1">) {</span>
        <span class="s5">const </span><span class="s1">{ cwd, resolver } </span><span class="s5">= </span><span class="s2">internalSlotsMap$1</span><span class="s1">.</span><span class="s3">get</span><span class="s1">(</span><span class="s2">this</span><span class="s1">);</span>
        <span class="s5">const </span><span class="s1">relativeTo </span><span class="s5">= </span><span class="s2">ctx</span><span class="s1">.</span><span class="s2">filePath </span><span class="s5">|| </span><span class="s2">path__default</span><span class="s1">[</span><span class="s0">&quot;default&quot;</span><span class="s1">].</span><span class="s3">join</span><span class="s1">(</span><span class="s2">cwd</span><span class="s1">, </span><span class="s0">&quot;__placeholder__.js&quot;</span><span class="s1">);</span>
        <span class="s5">let </span><span class="s1">request;</span>

        <span class="s5">if </span><span class="s1">(</span><span class="s3">isFilePath</span><span class="s1">(</span><span class="s2">extendName</span><span class="s1">)) {</span>
            <span class="s2">request </span><span class="s5">= </span><span class="s2">extendName</span><span class="s1">;</span>
        <span class="s1">} </span><span class="s5">else if </span><span class="s1">(</span><span class="s2">extendName</span><span class="s1">.</span><span class="s3">startsWith</span><span class="s1">(</span><span class="s0">&quot;.&quot;</span><span class="s1">)) {</span>
            <span class="s2">request </span><span class="s5">= </span><span class="s0">`./${</span><span class="s2">extendName</span><span class="s0">}`</span><span class="s1">; </span><span class="s6">// For backward compatibility. A ton of tests depended on this behavior.</span>
        <span class="s1">} </span><span class="s5">else </span><span class="s1">{</span>
            <span class="s2">request </span><span class="s5">= </span><span class="s3">normalizePackageName</span><span class="s1">(</span>
                <span class="s2">extendName</span><span class="s1">,</span>
                <span class="s0">&quot;eslint-config&quot;</span>
            <span class="s1">);</span>
        <span class="s1">}</span>

        <span class="s5">let </span><span class="s1">filePath;</span>

        <span class="s5">try </span><span class="s1">{</span>
            <span class="s2">filePath </span><span class="s5">= </span><span class="s2">resolver</span><span class="s1">.</span><span class="s3">resolve</span><span class="s1">(</span><span class="s2">request</span><span class="s1">, </span><span class="s2">relativeTo</span><span class="s1">);</span>
        <span class="s1">} </span><span class="s5">catch </span><span class="s1">(</span><span class="s2">error</span><span class="s1">) {</span>
            <span class="s6">/* istanbul ignore else */</span>
            <span class="s5">if </span><span class="s1">(</span><span class="s2">error </span><span class="s5">&amp;&amp; </span><span class="s2">error</span><span class="s1">.</span><span class="s2">code </span><span class="s5">=== </span><span class="s0">&quot;MODULE_NOT_FOUND&quot;</span><span class="s1">) {</span>
                <span class="s5">throw </span><span class="s3">configInvalidError</span><span class="s1">(</span><span class="s2">extendName</span><span class="s1">, </span><span class="s2">ctx</span><span class="s1">.</span><span class="s2">filePath</span><span class="s1">, </span><span class="s0">&quot;extend-config-missing&quot;</span><span class="s1">);</span>
            <span class="s1">}</span>
            <span class="s5">throw </span><span class="s2">error</span><span class="s1">;</span>
        <span class="s1">}</span>

        <span class="s3">writeDebugLogForLoading</span><span class="s1">(</span><span class="s2">request</span><span class="s1">, </span><span class="s2">relativeTo</span><span class="s1">, </span><span class="s2">filePath</span><span class="s1">);</span>
        <span class="s5">return </span><span class="s2">this</span><span class="s1">.</span><span class="s3">_loadConfigData</span><span class="s1">({</span>
            <span class="s5">...</span><span class="s2">ctx</span><span class="s1">,</span>
            <span class="s2">filePath</span><span class="s1">,</span>
            <span class="s1">name: </span><span class="s0">`${</span><span class="s2">ctx</span><span class="s0">.</span><span class="s2">name</span><span class="s0">}  ${</span><span class="s2">request</span><span class="s0">}`</span>
        <span class="s1">});</span>
    <span class="s1">}</span>

    <span class="s6">/**</span>
     <span class="s6">* Load given plugins. 
     * </span><span class="s5">@param </span><span class="s2">{string[]} names </span><span class="s6">The plugin names to load. 
     * </span><span class="s5">@param </span><span class="s2">{ConfigArrayFactoryLoadingContext} ctx </span><span class="s6">The loading context. 
     * </span><span class="s5">@returns </span><span class="s2">{Record&lt;string,DependentPlugin&gt;} </span><span class="s6">The loaded parser. 
     * </span><span class="s5">@private</span>
     <span class="s6">*/</span>
    <span class="s1">_loadPlugins(</span><span class="s2">names</span><span class="s1">, </span><span class="s2">ctx</span><span class="s1">) {</span>
        <span class="s5">return </span><span class="s2">names</span><span class="s1">.</span><span class="s3">reduce</span><span class="s1">((</span><span class="s2">map</span><span class="s1">, </span><span class="s2">name</span><span class="s1">) </span><span class="s5">=&gt; </span><span class="s1">{</span>
            <span class="s5">if </span><span class="s1">(</span><span class="s3">isFilePath</span><span class="s1">(</span><span class="s2">name</span><span class="s1">)) {</span>
                <span class="s5">throw new </span><span class="s3">Error</span><span class="s1">(</span><span class="s0">&quot;Plugins array cannot includes file paths.&quot;</span><span class="s1">);</span>
            <span class="s1">}</span>
            <span class="s5">const </span><span class="s1">plugin </span><span class="s5">= </span><span class="s2">this</span><span class="s1">.</span><span class="s3">_loadPlugin</span><span class="s1">(</span><span class="s2">name</span><span class="s1">, </span><span class="s2">ctx</span><span class="s1">);</span>

            <span class="s2">map</span><span class="s1">[</span><span class="s2">plugin</span><span class="s1">.</span><span class="s2">id</span><span class="s1">] </span><span class="s5">= </span><span class="s2">plugin</span><span class="s1">;</span>

            <span class="s5">return </span><span class="s2">map</span><span class="s1">;</span>
        <span class="s1">}, {}); 
    }</span>

    <span class="s6">/**</span>
     <span class="s6">* Load a given parser. 
     * </span><span class="s5">@param </span><span class="s2">{string} nameOrPath </span><span class="s6">The package name or the path to a parser file. 
     * </span><span class="s5">@param </span><span class="s2">{ConfigArrayFactoryLoadingContext} ctx </span><span class="s6">The loading context. 
     * </span><span class="s5">@returns </span><span class="s2">{DependentParser} </span><span class="s6">The loaded parser. 
     */</span>
    <span class="s1">_loadParser(</span><span class="s2">nameOrPath</span><span class="s1">, </span><span class="s2">ctx</span><span class="s1">) {</span>
        <span class="s3">debug$2</span><span class="s1">(</span><span class="s0">&quot;Loading parser %j from %s&quot;</span><span class="s1">, </span><span class="s2">nameOrPath</span><span class="s1">, </span><span class="s2">ctx</span><span class="s1">.</span><span class="s2">filePath</span><span class="s1">);</span>

        <span class="s5">const </span><span class="s1">{ cwd, resolver } </span><span class="s5">= </span><span class="s2">internalSlotsMap$1</span><span class="s1">.</span><span class="s3">get</span><span class="s1">(</span><span class="s2">this</span><span class="s1">);</span>
        <span class="s5">const </span><span class="s1">relativeTo </span><span class="s5">= </span><span class="s2">ctx</span><span class="s1">.</span><span class="s2">filePath </span><span class="s5">|| </span><span class="s2">path__default</span><span class="s1">[</span><span class="s0">&quot;default&quot;</span><span class="s1">].</span><span class="s3">join</span><span class="s1">(</span><span class="s2">cwd</span><span class="s1">, </span><span class="s0">&quot;__placeholder__.js&quot;</span><span class="s1">);</span>

        <span class="s5">try </span><span class="s1">{</span>
            <span class="s5">const </span><span class="s1">filePath </span><span class="s5">= </span><span class="s2">resolver</span><span class="s1">.</span><span class="s3">resolve</span><span class="s1">(</span><span class="s2">nameOrPath</span><span class="s1">, </span><span class="s2">relativeTo</span><span class="s1">);</span>

            <span class="s3">writeDebugLogForLoading</span><span class="s1">(</span><span class="s2">nameOrPath</span><span class="s1">, </span><span class="s2">relativeTo</span><span class="s1">, </span><span class="s2">filePath</span><span class="s1">);</span>

            <span class="s5">return new </span><span class="s3">ConfigDependency</span><span class="s1">({</span>
                <span class="s1">definition: </span><span class="s3">require$1</span><span class="s1">(</span><span class="s2">filePath</span><span class="s1">),</span>
                <span class="s2">filePath</span><span class="s1">,</span>
                <span class="s1">id: </span><span class="s2">nameOrPath</span><span class="s1">,</span>
                <span class="s1">importerName: </span><span class="s2">ctx</span><span class="s1">.</span><span class="s2">name</span><span class="s1">,</span>
                <span class="s1">importerPath: </span><span class="s2">ctx</span><span class="s1">.</span><span class="s2">filePath</span>
            <span class="s1">});</span>
        <span class="s1">} </span><span class="s5">catch </span><span class="s1">(</span><span class="s2">error</span><span class="s1">) {</span>

            <span class="s6">// If the parser name is &quot;espree&quot;, load the espree of ESLint.</span>
            <span class="s5">if </span><span class="s1">(</span><span class="s2">nameOrPath </span><span class="s5">=== </span><span class="s0">&quot;espree&quot;</span><span class="s1">) {</span>
                <span class="s3">debug$2</span><span class="s1">(</span><span class="s0">&quot;Fallback espree.&quot;</span><span class="s1">);</span>
                <span class="s5">return new </span><span class="s3">ConfigDependency</span><span class="s1">({</span>
                    <span class="s1">definition: </span><span class="s3">require$1</span><span class="s1">(</span><span class="s0">&quot;espree&quot;</span><span class="s1">),</span>
                    <span class="s1">filePath: </span><span class="s2">require$1</span><span class="s1">.</span><span class="s3">resolve</span><span class="s1">(</span><span class="s0">&quot;espree&quot;</span><span class="s1">),</span>
                    <span class="s1">id: </span><span class="s2">nameOrPath</span><span class="s1">,</span>
                    <span class="s1">importerName: </span><span class="s2">ctx</span><span class="s1">.</span><span class="s2">name</span><span class="s1">,</span>
                    <span class="s1">importerPath: </span><span class="s2">ctx</span><span class="s1">.</span><span class="s2">filePath</span>
                <span class="s1">});</span>
            <span class="s1">}</span>

            <span class="s3">debug$2</span><span class="s1">(</span><span class="s0">&quot;Failed to load parser '%s' declared in '%s'.&quot;</span><span class="s1">, </span><span class="s2">nameOrPath</span><span class="s1">, </span><span class="s2">ctx</span><span class="s1">.</span><span class="s2">name</span><span class="s1">);</span>
            <span class="s2">error</span><span class="s1">.</span><span class="s2">message </span><span class="s5">= </span><span class="s0">`Failed to load parser '${</span><span class="s2">nameOrPath</span><span class="s0">}' declared in '${</span><span class="s2">ctx</span><span class="s0">.</span><span class="s2">name</span><span class="s0">}': ${</span><span class="s2">error</span><span class="s0">.</span><span class="s2">message</span><span class="s0">}`</span><span class="s1">;</span>

            <span class="s5">return new </span><span class="s3">ConfigDependency</span><span class="s1">({</span>
                <span class="s2">error</span><span class="s1">,</span>
                <span class="s1">id: </span><span class="s2">nameOrPath</span><span class="s1">,</span>
                <span class="s1">importerName: </span><span class="s2">ctx</span><span class="s1">.</span><span class="s2">name</span><span class="s1">,</span>
                <span class="s1">importerPath: </span><span class="s2">ctx</span><span class="s1">.</span><span class="s2">filePath</span>
            <span class="s1">});</span>
        <span class="s1">}</span>
    <span class="s1">}</span>

    <span class="s6">/**</span>
     <span class="s6">* Load a given plugin. 
     * </span><span class="s5">@param </span><span class="s2">{string} name </span><span class="s6">The plugin name to load. 
     * </span><span class="s5">@param </span><span class="s2">{ConfigArrayFactoryLoadingContext} ctx </span><span class="s6">The loading context. 
     * </span><span class="s5">@returns </span><span class="s2">{DependentPlugin} </span><span class="s6">The loaded plugin. 
     * </span><span class="s5">@private</span>
     <span class="s6">*/</span>
    <span class="s1">_loadPlugin(</span><span class="s2">name</span><span class="s1">, </span><span class="s2">ctx</span><span class="s1">) {</span>
        <span class="s3">debug$2</span><span class="s1">(</span><span class="s0">&quot;Loading plugin %j from %s&quot;</span><span class="s1">, </span><span class="s2">name</span><span class="s1">, </span><span class="s2">ctx</span><span class="s1">.</span><span class="s2">filePath</span><span class="s1">);</span>

        <span class="s5">const </span><span class="s1">{ additionalPluginPool, resolver } </span><span class="s5">= </span><span class="s2">internalSlotsMap$1</span><span class="s1">.</span><span class="s3">get</span><span class="s1">(</span><span class="s2">this</span><span class="s1">);</span>
        <span class="s5">const </span><span class="s1">request </span><span class="s5">= </span><span class="s3">normalizePackageName</span><span class="s1">(</span><span class="s2">name</span><span class="s1">, </span><span class="s0">&quot;eslint-plugin&quot;</span><span class="s1">);</span>
        <span class="s5">const </span><span class="s1">id </span><span class="s5">= </span><span class="s3">getShorthandName</span><span class="s1">(</span><span class="s2">request</span><span class="s1">, </span><span class="s0">&quot;eslint-plugin&quot;</span><span class="s1">);</span>
        <span class="s5">const </span><span class="s1">relativeTo </span><span class="s5">= </span><span class="s2">path__default</span><span class="s1">[</span><span class="s0">&quot;default&quot;</span><span class="s1">].</span><span class="s3">join</span><span class="s1">(</span><span class="s2">ctx</span><span class="s1">.</span><span class="s2">pluginBasePath</span><span class="s1">, </span><span class="s0">&quot;__placeholder__.js&quot;</span><span class="s1">);</span>

        <span class="s5">if </span><span class="s1">(</span><span class="s2">name</span><span class="s1">.</span><span class="s3">match</span><span class="s1">(</span><span class="s0">/</span><span class="s4">\s</span><span class="s5">+</span><span class="s0">/</span><span class="s5">u</span><span class="s1">)) {</span>
            <span class="s5">const </span><span class="s1">error </span><span class="s5">= </span><span class="s2">Object</span><span class="s1">.</span><span class="s3">assign</span><span class="s1">(</span>
                <span class="s5">new </span><span class="s3">Error</span><span class="s1">(</span><span class="s0">`Whitespace found in plugin name '${</span><span class="s2">name</span><span class="s0">}'`</span><span class="s1">),</span>
                <span class="s1">{</span>
                    <span class="s1">messageTemplate: </span><span class="s0">&quot;whitespace-found&quot;</span><span class="s1">,</span>
                    <span class="s1">messageData: { pluginName: </span><span class="s2">request </span><span class="s1">}</span>
                <span class="s1">}</span>
            <span class="s1">);</span>

            <span class="s5">return new </span><span class="s3">ConfigDependency</span><span class="s1">({</span>
                <span class="s2">error</span><span class="s1">,</span>
                <span class="s2">id</span><span class="s1">,</span>
                <span class="s1">importerName: </span><span class="s2">ctx</span><span class="s1">.</span><span class="s2">name</span><span class="s1">,</span>
                <span class="s1">importerPath: </span><span class="s2">ctx</span><span class="s1">.</span><span class="s2">filePath</span>
            <span class="s1">});</span>
        <span class="s1">}</span>

        <span class="s6">// Check for additional pool.</span>
        <span class="s5">const </span><span class="s1">plugin </span><span class="s5">=</span>
            <span class="s2">additionalPluginPool</span><span class="s1">.</span><span class="s3">get</span><span class="s1">(</span><span class="s2">request</span><span class="s1">) </span><span class="s5">||</span>
            <span class="s2">additionalPluginPool</span><span class="s1">.</span><span class="s3">get</span><span class="s1">(</span><span class="s2">id</span><span class="s1">);</span>

        <span class="s5">if </span><span class="s1">(</span><span class="s2">plugin</span><span class="s1">) {</span>
            <span class="s5">return new </span><span class="s3">ConfigDependency</span><span class="s1">({</span>
                <span class="s1">definition: </span><span class="s3">normalizePlugin</span><span class="s1">(</span><span class="s2">plugin</span><span class="s1">),</span>
                <span class="s1">filePath: </span><span class="s0">&quot;&quot;</span><span class="s1">, </span><span class="s6">// It's unknown where the plugin came from.</span>
                <span class="s2">id</span><span class="s1">,</span>
                <span class="s1">importerName: </span><span class="s2">ctx</span><span class="s1">.</span><span class="s2">name</span><span class="s1">,</span>
                <span class="s1">importerPath: </span><span class="s2">ctx</span><span class="s1">.</span><span class="s2">filePath</span>
            <span class="s1">});</span>
        <span class="s1">}</span>

        <span class="s5">let </span><span class="s1">filePath;</span>
        <span class="s5">let </span><span class="s1">error;</span>

        <span class="s5">try </span><span class="s1">{</span>
            <span class="s2">filePath </span><span class="s5">= </span><span class="s2">resolver</span><span class="s1">.</span><span class="s3">resolve</span><span class="s1">(</span><span class="s2">request</span><span class="s1">, </span><span class="s2">relativeTo</span><span class="s1">);</span>
        <span class="s1">} </span><span class="s5">catch </span><span class="s1">(</span><span class="s2">resolveError</span><span class="s1">) {</span>
            <span class="s2">error </span><span class="s5">= </span><span class="s2">resolveError</span><span class="s1">;</span>
            <span class="s6">/* istanbul ignore else */</span>
            <span class="s5">if </span><span class="s1">(</span><span class="s2">error </span><span class="s5">&amp;&amp; </span><span class="s2">error</span><span class="s1">.</span><span class="s2">code </span><span class="s5">=== </span><span class="s0">&quot;MODULE_NOT_FOUND&quot;</span><span class="s1">) {</span>
                <span class="s2">error</span><span class="s1">.</span><span class="s2">messageTemplate </span><span class="s5">= </span><span class="s0">&quot;plugin-missing&quot;</span><span class="s1">;</span>
                <span class="s2">error</span><span class="s1">.</span><span class="s2">messageData </span><span class="s5">= </span><span class="s1">{</span>
                    <span class="s1">pluginName: </span><span class="s2">request</span><span class="s1">,</span>
                    <span class="s1">resolvePluginsRelativeTo: </span><span class="s2">ctx</span><span class="s1">.</span><span class="s2">pluginBasePath</span><span class="s1">,</span>
                    <span class="s1">importerName: </span><span class="s2">ctx</span><span class="s1">.</span><span class="s2">name</span>
                <span class="s1">};</span>
            <span class="s1">}</span>
        <span class="s1">}</span>

        <span class="s5">if </span><span class="s1">(</span><span class="s2">filePath</span><span class="s1">) {</span>
            <span class="s5">try </span><span class="s1">{</span>
                <span class="s3">writeDebugLogForLoading</span><span class="s1">(</span><span class="s2">request</span><span class="s1">, </span><span class="s2">relativeTo</span><span class="s1">, </span><span class="s2">filePath</span><span class="s1">);</span>

                <span class="s5">const </span><span class="s1">startTime </span><span class="s5">= </span><span class="s2">Date</span><span class="s1">.</span><span class="s3">now</span><span class="s1">();</span>
                <span class="s5">const </span><span class="s1">pluginDefinition </span><span class="s5">= </span><span class="s3">require$1</span><span class="s1">(</span><span class="s2">filePath</span><span class="s1">);</span>

                <span class="s3">debug$2</span><span class="s1">(</span><span class="s0">`Plugin ${</span><span class="s2">filePath</span><span class="s0">} loaded in: ${</span><span class="s2">Date</span><span class="s0">.</span><span class="s3">now</span><span class="s0">() </span><span class="s5">- </span><span class="s2">startTime</span><span class="s0">}ms`</span><span class="s1">);</span>

                <span class="s5">return new </span><span class="s3">ConfigDependency</span><span class="s1">({</span>
                    <span class="s1">definition: </span><span class="s3">normalizePlugin</span><span class="s1">(</span><span class="s2">pluginDefinition</span><span class="s1">),</span>
                    <span class="s2">filePath</span><span class="s1">,</span>
                    <span class="s2">id</span><span class="s1">,</span>
                    <span class="s1">importerName: </span><span class="s2">ctx</span><span class="s1">.</span><span class="s2">name</span><span class="s1">,</span>
                    <span class="s1">importerPath: </span><span class="s2">ctx</span><span class="s1">.</span><span class="s2">filePath</span>
                <span class="s1">});</span>
            <span class="s1">} </span><span class="s5">catch </span><span class="s1">(</span><span class="s2">loadError</span><span class="s1">) {</span>
                <span class="s2">error </span><span class="s5">= </span><span class="s2">loadError</span><span class="s1">;</span>
            <span class="s1">}</span>
        <span class="s1">}</span>

        <span class="s3">debug$2</span><span class="s1">(</span><span class="s0">&quot;Failed to load plugin '%s' declared in '%s'.&quot;</span><span class="s1">, </span><span class="s2">name</span><span class="s1">, </span><span class="s2">ctx</span><span class="s1">.</span><span class="s2">name</span><span class="s1">);</span>
        <span class="s2">error</span><span class="s1">.</span><span class="s2">message </span><span class="s5">= </span><span class="s0">`Failed to load plugin '${</span><span class="s2">name</span><span class="s0">}' declared in '${</span><span class="s2">ctx</span><span class="s0">.</span><span class="s2">name</span><span class="s0">}': ${</span><span class="s2">error</span><span class="s0">.</span><span class="s2">message</span><span class="s0">}`</span><span class="s1">;</span>
        <span class="s5">return new </span><span class="s3">ConfigDependency</span><span class="s1">({</span>
            <span class="s2">error</span><span class="s1">,</span>
            <span class="s2">id</span><span class="s1">,</span>
            <span class="s1">importerName: </span><span class="s2">ctx</span><span class="s1">.</span><span class="s2">name</span><span class="s1">,</span>
            <span class="s1">importerPath: </span><span class="s2">ctx</span><span class="s1">.</span><span class="s2">filePath</span>
        <span class="s1">});</span>
    <span class="s1">}</span>

    <span class="s6">/**</span>
     <span class="s6">* Take file expression processors as config array elements. 
     * </span><span class="s5">@param </span><span class="s2">{Record&lt;string,DependentPlugin&gt;} plugins </span><span class="s6">The plugin definitions. 
     * </span><span class="s5">@param </span><span class="s2">{ConfigArrayFactoryLoadingContext} ctx </span><span class="s6">The loading context. 
     * </span><span class="s5">@returns </span><span class="s2">{IterableIterator&lt;ConfigArrayElement&gt;} </span><span class="s6">The config array elements of file expression processors. 
     * </span><span class="s5">@private</span>
     <span class="s6">*/</span>
    <span class="s5">*</span><span class="s1">_takeFileExtensionProcessors(</span><span class="s2">plugins</span><span class="s1">, </span><span class="s2">ctx</span><span class="s1">) {</span>
        <span class="s5">for </span><span class="s1">(</span><span class="s5">const </span><span class="s1">pluginId </span><span class="s5">of </span><span class="s2">Object</span><span class="s1">.</span><span class="s3">keys</span><span class="s1">(</span><span class="s2">plugins</span><span class="s1">)) {</span>
            <span class="s5">const </span><span class="s1">processors </span><span class="s5">=</span>
                <span class="s2">plugins</span><span class="s1">[</span><span class="s2">pluginId</span><span class="s1">] </span><span class="s5">&amp;&amp;</span>
                <span class="s2">plugins</span><span class="s1">[</span><span class="s2">pluginId</span><span class="s1">].</span><span class="s2">definition </span><span class="s5">&amp;&amp;</span>
                <span class="s2">plugins</span><span class="s1">[</span><span class="s2">pluginId</span><span class="s1">].</span><span class="s2">definition</span><span class="s1">.</span><span class="s2">processors</span><span class="s1">;</span>

            <span class="s5">if </span><span class="s1">(</span><span class="s5">!</span><span class="s2">processors</span><span class="s1">) {</span>
                <span class="s5">continue</span><span class="s1">;</span>
            <span class="s1">}</span>

            <span class="s5">for </span><span class="s1">(</span><span class="s5">const </span><span class="s1">processorId </span><span class="s5">of </span><span class="s2">Object</span><span class="s1">.</span><span class="s3">keys</span><span class="s1">(</span><span class="s2">processors</span><span class="s1">)) {</span>
                <span class="s5">if </span><span class="s1">(</span><span class="s2">processorId</span><span class="s1">.</span><span class="s3">startsWith</span><span class="s1">(</span><span class="s0">&quot;.&quot;</span><span class="s1">)) {</span>
                    <span class="s5">yield* </span><span class="s2">this</span><span class="s1">.</span><span class="s3">_normalizeObjectConfigData</span><span class="s1">(</span>
                        <span class="s1">{</span>
                            <span class="s1">files: [</span><span class="s0">`*${</span><span class="s2">processorId</span><span class="s0">}`</span><span class="s1">],</span>
                            <span class="s1">processor: </span><span class="s0">`${</span><span class="s2">pluginId</span><span class="s0">}/${</span><span class="s2">processorId</span><span class="s0">}`</span>
                        <span class="s1">},</span>
                        <span class="s1">{</span>
                            <span class="s5">...</span><span class="s2">ctx</span><span class="s1">,</span>
                            <span class="s1">type: </span><span class="s0">&quot;implicit-processor&quot;</span><span class="s1">,</span>
                            <span class="s1">name: </span><span class="s0">`${</span><span class="s2">ctx</span><span class="s0">.</span><span class="s2">name</span><span class="s0">}#processors[&quot;${</span><span class="s2">pluginId</span><span class="s0">}/${</span><span class="s2">processorId</span><span class="s0">}&quot;]`</span>
                        <span class="s1">}</span>
                    <span class="s1">);</span>
                <span class="s1">}</span>
            <span class="s1">}</span>
        <span class="s1">}</span>
    <span class="s1">}</span>
<span class="s1">}</span>

<span class="s6">/**</span>
 <span class="s6">* </span><span class="s5">@fileoverview </span><span class="s6">`CascadingConfigArrayFactory` class. 
 * 
 * `CascadingConfigArrayFactory` class has a responsibility: 
 * 
 * 1. Handles cascading of config files. 
 * 
 * It provides two methods: 
 * 
 * - `getConfigArrayForFile(filePath)` 
 *     Get the corresponded configuration of a given file. This method doesn't 
 *     throw even if the given file didn't exist. 
 * - `clearCache()` 
 *     Clear the internal cache. You have to call this method when 
 *     `additionalPluginPool` was updated if `baseConfig` or `cliConfig` depends 
 *     on the additional plugins. (`CLIEngine#addPlugin()` method calls this.) 
 * 
 * </span><span class="s5">@author </span><span class="s2">Toru Nagashima </span><span class="s6">&lt;</span><span class="s4">https://github.com/mysticatea</span><span class="s6">&gt;</span>
 <span class="s6">*/</span>

<span class="s2">const </span><span class="s1">debug$1 </span><span class="s5">= </span><span class="s2">debugOrig__default</span><span class="s1">[</span><span class="s0">&quot;default&quot;</span><span class="s1">](</span><span class="s0">&quot;eslintrc:cascading-config-array-factory&quot;</span><span class="s1">);</span>

<span class="s6">//------------------------------------------------------------------------------</span>
<span class="s6">// Helpers</span>
<span class="s6">//------------------------------------------------------------------------------</span>

<span class="s6">// Define types for VSCode IntelliSense.</span>
<span class="s6">/** </span><span class="s5">@typedef </span><span class="s2">{import(&quot;./shared/types&quot;).ConfigData} ConfigData </span><span class="s6">*/</span>
<span class="s6">/** </span><span class="s5">@typedef </span><span class="s2">{import(&quot;./shared/types&quot;).Parser} Parser </span><span class="s6">*/</span>
<span class="s6">/** </span><span class="s5">@typedef </span><span class="s2">{import(&quot;./shared/types&quot;).Plugin} Plugin </span><span class="s6">*/</span>
<span class="s6">/** </span><span class="s5">@typedef </span><span class="s2">{import(&quot;./shared/types&quot;).Rule} Rule </span><span class="s6">*/</span>
<span class="s6">/** </span><span class="s5">@typedef </span><span class="s2">{ReturnType&lt;ConfigArrayFactory[&quot;create&quot;]&gt;} ConfigArray </span><span class="s6">*/</span>

<span class="s6">/**</span>
 <span class="s6">* </span><span class="s5">@typedef </span><span class="s2">{Object} CascadingConfigArrayFactoryOptions</span>
 <span class="s6">* </span><span class="s5">@property </span><span class="s2">{Map&lt;string,Plugin&gt;} [additionalPluginPool] </span><span class="s6">The map for additional plugins. 
 * </span><span class="s5">@property </span><span class="s2">{ConfigData} [baseConfig] </span><span class="s6">The config by `baseConfig` option. 
 * </span><span class="s5">@property </span><span class="s2">{ConfigData} [cliConfig] </span><span class="s6">The config by CLI options (`--env`, `--global`, `--ignore-pattern`, `--parser`, `--parser-options`, `--plugin`, and `--rule`). CLI options overwrite the setting in config files. 
 * </span><span class="s5">@property </span><span class="s2">{string} [cwd] </span><span class="s6">The base directory to start lookup. 
 * </span><span class="s5">@property </span><span class="s2">{string} [ignorePath] </span><span class="s6">The path to the alternative file of `.eslintignore`. 
 * </span><span class="s5">@property </span><span class="s2">{string[]} [rulePaths] </span><span class="s6">The value of `--rulesdir` option. 
 * </span><span class="s5">@property </span><span class="s2">{string} [specificConfigPath] </span><span class="s6">The value of `--config` option. 
 * </span><span class="s5">@property </span><span class="s2">{boolean} [useEslintrc] </span><span class="s6">if `false` then it doesn't load config files. 
 * </span><span class="s5">@property </span><span class="s2">{Function} loadRules </span><span class="s6">The function to use to load rules. 
 * </span><span class="s5">@property </span><span class="s2">{Map&lt;string,Rule&gt;} builtInRules </span><span class="s6">The rules that are built in to ESLint. 
 * </span><span class="s5">@property </span><span class="s2">{Object} [resolver</span><span class="s5">=</span><span class="s2">ModuleResolver] </span><span class="s6">The module resolver object. 
 * </span><span class="s5">@property </span><span class="s2">{string} eslintAllPath </span><span class="s6">The path to the definitions for eslint:all. 
 * </span><span class="s5">@property </span><span class="s2">{Function} getEslintAllConfig </span><span class="s6">Returns the config data for eslint:all. 
 * </span><span class="s5">@property </span><span class="s2">{string} eslintRecommendedPath </span><span class="s6">The path to the definitions for eslint:recommended. 
 * </span><span class="s5">@property </span><span class="s2">{Function} getEslintRecommendedConfig </span><span class="s6">Returns the config data for eslint:recommended. 
 */</span>

<span class="s6">/**</span>
 <span class="s6">* </span><span class="s5">@typedef </span><span class="s2">{Object} CascadingConfigArrayFactoryInternalSlots</span>
 <span class="s6">* </span><span class="s5">@property </span><span class="s2">{ConfigArray} baseConfigArray </span><span class="s6">The config array of `baseConfig` option. 
 * </span><span class="s5">@property </span><span class="s2">{ConfigData} baseConfigData </span><span class="s6">The config data of `baseConfig` option. This is used to reset `baseConfigArray`. 
 * </span><span class="s5">@property </span><span class="s2">{ConfigArray} cliConfigArray </span><span class="s6">The config array of CLI options. 
 * </span><span class="s5">@property </span><span class="s2">{ConfigData} cliConfigData </span><span class="s6">The config data of CLI options. This is used to reset `cliConfigArray`. 
 * </span><span class="s5">@property </span><span class="s2">{ConfigArrayFactory} configArrayFactory </span><span class="s6">The factory for config arrays. 
 * </span><span class="s5">@property </span><span class="s2">{Map&lt;string, ConfigArray&gt;} configCache </span><span class="s6">The cache from directory paths to config arrays. 
 * </span><span class="s5">@property </span><span class="s2">{string} cwd </span><span class="s6">The base directory to start lookup. 
 * </span><span class="s5">@property </span><span class="s2">{WeakMap&lt;ConfigArray, ConfigArray&gt;} finalizeCache </span><span class="s6">The cache from config arrays to finalized config arrays. 
 * </span><span class="s5">@property </span><span class="s2">{string} [ignorePath] </span><span class="s6">The path to the alternative file of `.eslintignore`. 
 * </span><span class="s5">@property </span><span class="s2">{string[]|null} rulePaths </span><span class="s6">The value of `--rulesdir` option. This is used to reset `baseConfigArray`. 
 * </span><span class="s5">@property </span><span class="s2">{string|null} specificConfigPath </span><span class="s6">The value of `--config` option. This is used to reset `cliConfigArray`. 
 * </span><span class="s5">@property </span><span class="s2">{boolean} useEslintrc </span><span class="s6">if `false` then it doesn't load config files. 
 * </span><span class="s5">@property </span><span class="s2">{Function} loadRules </span><span class="s6">The function to use to load rules. 
 * </span><span class="s5">@property </span><span class="s2">{Map&lt;string,Rule&gt;} builtInRules </span><span class="s6">The rules that are built in to ESLint. 
 * </span><span class="s5">@property </span><span class="s2">{Object} [resolver</span><span class="s5">=</span><span class="s2">ModuleResolver] </span><span class="s6">The module resolver object. 
 * </span><span class="s5">@property </span><span class="s2">{string} eslintAllPath </span><span class="s6">The path to the definitions for eslint:all. 
 * </span><span class="s5">@property </span><span class="s2">{Function} getEslintAllConfig </span><span class="s6">Returns the config data for eslint:all. 
 * </span><span class="s5">@property </span><span class="s2">{string} eslintRecommendedPath </span><span class="s6">The path to the definitions for eslint:recommended. 
 * </span><span class="s5">@property </span><span class="s2">{Function} getEslintRecommendedConfig </span><span class="s6">Returns the config data for eslint:recommended. 
 */</span>

<span class="s6">/** </span><span class="s5">@type </span><span class="s2">{WeakMap&lt;CascadingConfigArrayFactory, CascadingConfigArrayFactoryInternalSlots&gt;} </span><span class="s6">*/</span>
<span class="s2">const </span><span class="s1">internalSlotsMap </span><span class="s5">= new </span><span class="s3">WeakMap</span><span class="s1">();</span>

<span class="s6">/**</span>
 <span class="s6">* Create the config array from `baseConfig` and `rulePaths`. 
 * </span><span class="s5">@param </span><span class="s2">{CascadingConfigArrayFactoryInternalSlots} slots </span><span class="s6">The slots. 
 * </span><span class="s5">@returns </span><span class="s2">{ConfigArray} </span><span class="s6">The config array of the base configs. 
 */</span>
<span class="s5">function </span><span class="s1">createBaseConfigArray({</span>
    <span class="s2">configArrayFactory</span><span class="s1">,</span>
    <span class="s2">baseConfigData</span><span class="s1">,</span>
    <span class="s2">rulePaths</span><span class="s1">,</span>
    <span class="s2">cwd</span><span class="s1">,</span>
    <span class="s2">loadRules</span>
<span class="s1">}) {</span>
    <span class="s5">const </span><span class="s1">baseConfigArray </span><span class="s5">= </span><span class="s2">configArrayFactory</span><span class="s1">.</span><span class="s3">create</span><span class="s1">(</span>
        <span class="s2">baseConfigData</span><span class="s1">,</span>
        <span class="s1">{ name: </span><span class="s0">&quot;BaseConfig&quot; </span><span class="s1">}</span>
    <span class="s1">);</span>

    <span class="s6">/*</span>
     <span class="s6">* Create the config array element for the default ignore patterns. 
     * This element has `ignorePattern` property that ignores the default 
     * patterns in the current working directory. 
     */</span>
    <span class="s2">baseConfigArray</span><span class="s1">.</span><span class="s3">unshift</span><span class="s1">(</span><span class="s2">configArrayFactory</span><span class="s1">.</span><span class="s3">create</span><span class="s1">(</span>
        <span class="s1">{ ignorePatterns: </span><span class="s2">IgnorePattern</span><span class="s1">.</span><span class="s2">DefaultPatterns </span><span class="s1">},</span>
        <span class="s1">{ name: </span><span class="s0">&quot;DefaultIgnorePattern&quot; </span><span class="s1">}</span>
    <span class="s1">)[</span><span class="s7">0</span><span class="s1">]);</span>

    <span class="s6">/*</span>
     <span class="s6">* Load rules `--rulesdir` option as a pseudo plugin. 
     * Use a pseudo plugin to define rules of `--rulesdir`, so we can validate 
     * the rule's options with only information in the config array. 
     */</span>
    <span class="s5">if </span><span class="s1">(</span><span class="s2">rulePaths </span><span class="s5">&amp;&amp; </span><span class="s2">rulePaths</span><span class="s1">.length </span><span class="s5">&gt; </span><span class="s7">0</span><span class="s1">) {</span>
        <span class="s2">baseConfigArray</span><span class="s1">.</span><span class="s3">push</span><span class="s1">({</span>
            <span class="s1">type: </span><span class="s0">&quot;config&quot;</span><span class="s1">,</span>
            <span class="s1">name: </span><span class="s0">&quot;--rulesdir&quot;</span><span class="s1">,</span>
            <span class="s1">filePath: </span><span class="s0">&quot;&quot;</span><span class="s1">,</span>
            <span class="s1">plugins: {</span>
                <span class="s0">&quot;&quot;</span><span class="s1">: </span><span class="s5">new </span><span class="s3">ConfigDependency</span><span class="s1">({</span>
                    <span class="s1">definition: {</span>
                        <span class="s1">rules: </span><span class="s2">rulePaths</span><span class="s1">.</span><span class="s3">reduce</span><span class="s1">(</span>
                            <span class="s1">(</span><span class="s2">map</span><span class="s1">, </span><span class="s2">rulesPath</span><span class="s1">) </span><span class="s5">=&gt; </span><span class="s2">Object</span><span class="s1">.</span><span class="s3">assign</span><span class="s1">(</span>
                                <span class="s2">map</span><span class="s1">,</span>
                                <span class="s3">loadRules</span><span class="s1">(</span><span class="s2">rulesPath</span><span class="s1">, </span><span class="s2">cwd</span><span class="s1">)</span>
                            <span class="s1">),</span>
                            <span class="s1">{}</span>
                        <span class="s1">)</span>
                    <span class="s1">},</span>
                    <span class="s1">filePath: </span><span class="s0">&quot;&quot;</span><span class="s1">,</span>
                    <span class="s1">id: </span><span class="s0">&quot;&quot;</span><span class="s1">,</span>
                    <span class="s1">importerName: </span><span class="s0">&quot;--rulesdir&quot;</span><span class="s1">,</span>
                    <span class="s1">importerPath: </span><span class="s0">&quot;&quot;</span>
                <span class="s1">})</span>
            <span class="s1">}</span>
        <span class="s1">});</span>
    <span class="s1">}</span>

    <span class="s5">return </span><span class="s2">baseConfigArray</span><span class="s1">;</span>
<span class="s1">}</span>

<span class="s6">/**</span>
 <span class="s6">* Create the config array from CLI options. 
 * </span><span class="s5">@param </span><span class="s2">{CascadingConfigArrayFactoryInternalSlots} slots </span><span class="s6">The slots. 
 * </span><span class="s5">@returns </span><span class="s2">{ConfigArray} </span><span class="s6">The config array of the base configs. 
 */</span>
<span class="s5">function </span><span class="s1">createCLIConfigArray({</span>
    <span class="s2">cliConfigData</span><span class="s1">,</span>
    <span class="s2">configArrayFactory</span><span class="s1">,</span>
    <span class="s2">cwd</span><span class="s1">,</span>
    <span class="s2">ignorePath</span><span class="s1">,</span>
    <span class="s2">specificConfigPath</span>
<span class="s1">}) {</span>
    <span class="s5">const </span><span class="s1">cliConfigArray </span><span class="s5">= </span><span class="s2">configArrayFactory</span><span class="s1">.</span><span class="s3">create</span><span class="s1">(</span>
        <span class="s2">cliConfigData</span><span class="s1">,</span>
        <span class="s1">{ name: </span><span class="s0">&quot;CLIOptions&quot; </span><span class="s1">}</span>
    <span class="s1">);</span>

    <span class="s2">cliConfigArray</span><span class="s1">.</span><span class="s3">unshift</span><span class="s1">(</span>
        <span class="s5">...</span><span class="s1">(</span><span class="s2">ignorePath</span>
            <span class="s5">? </span><span class="s2">configArrayFactory</span><span class="s1">.</span><span class="s3">loadESLintIgnore</span><span class="s1">(</span><span class="s2">ignorePath</span><span class="s1">)</span>
            <span class="s5">: </span><span class="s2">configArrayFactory</span><span class="s1">.</span><span class="s3">loadDefaultESLintIgnore</span><span class="s1">())</span>
    <span class="s1">);</span>

    <span class="s5">if </span><span class="s1">(</span><span class="s2">specificConfigPath</span><span class="s1">) {</span>
        <span class="s2">cliConfigArray</span><span class="s1">.</span><span class="s3">unshift</span><span class="s1">(</span>
            <span class="s5">...</span><span class="s2">configArrayFactory</span><span class="s1">.</span><span class="s3">loadFile</span><span class="s1">(</span>
                <span class="s2">specificConfigPath</span><span class="s1">,</span>
                <span class="s1">{ name: </span><span class="s0">&quot;--config&quot;</span><span class="s1">, basePath: </span><span class="s2">cwd </span><span class="s1">}</span>
            <span class="s1">)</span>
        <span class="s1">);</span>
    <span class="s1">}</span>

    <span class="s5">return </span><span class="s2">cliConfigArray</span><span class="s1">;</span>
<span class="s1">}</span>

<span class="s6">/**</span>
 <span class="s6">* The error type when there are files matched by a glob, but all of them have been ignored. 
 */</span>
<span class="s5">class </span><span class="s2">ConfigurationNotFoundError </span><span class="s5">extends </span><span class="s2">Error </span><span class="s1">{</span>

    <span class="s6">// eslint-disable-next-line jsdoc/require-description</span>
    <span class="s6">/**</span>
     <span class="s6">* </span><span class="s5">@param </span><span class="s2">{string} directoryPath </span><span class="s6">The directory path. 
     */</span>
    <span class="s5">constructor</span><span class="s1">(</span><span class="s2">directoryPath</span><span class="s1">) {</span>
        <span class="s2">super</span><span class="s1">(</span><span class="s0">`No ESLint configuration found in ${</span><span class="s2">directoryPath</span><span class="s0">}.`</span><span class="s1">);</span>
        <span class="s2">this</span><span class="s1">.</span><span class="s2">messageTemplate </span><span class="s5">= </span><span class="s0">&quot;no-config-found&quot;</span><span class="s1">;</span>
        <span class="s2">this</span><span class="s1">.</span><span class="s2">messageData </span><span class="s5">= </span><span class="s1">{ </span><span class="s2">directoryPath </span><span class="s1">};</span>
    <span class="s1">}</span>
<span class="s1">}</span>

<span class="s6">/**</span>
 <span class="s6">* This class provides the functionality that enumerates every file which is 
 * matched by given glob patterns and that configuration. 
 */</span>
<span class="s5">class </span><span class="s2">CascadingConfigArrayFactory </span><span class="s1">{</span>

    <span class="s6">/**</span>
     <span class="s6">* Initialize this enumerator. 
     * </span><span class="s5">@param </span><span class="s2">{CascadingConfigArrayFactoryOptions} options </span><span class="s6">The options. 
     */</span>
    <span class="s5">constructor</span><span class="s1">({</span>
        <span class="s2">additionalPluginPool </span><span class="s5">= new </span><span class="s3">Map</span><span class="s1">(),</span>
        <span class="s2">baseConfig</span><span class="s1">: </span><span class="s2">baseConfigData </span><span class="s5">= </span><span class="s4">null</span><span class="s1">,</span>
        <span class="s2">cliConfig</span><span class="s1">: </span><span class="s2">cliConfigData </span><span class="s5">= </span><span class="s4">null</span><span class="s1">,</span>
        <span class="s2">cwd </span><span class="s5">= </span><span class="s2">process</span><span class="s1">.</span><span class="s3">cwd</span><span class="s1">(),</span>
        <span class="s2">ignorePath</span><span class="s1">,</span>
        <span class="s2">resolvePluginsRelativeTo</span><span class="s1">,</span>
        <span class="s2">rulePaths </span><span class="s5">= </span><span class="s1">[],</span>
        <span class="s2">specificConfigPath </span><span class="s5">= </span><span class="s4">null</span><span class="s1">,</span>
        <span class="s2">useEslintrc </span><span class="s5">= </span><span class="s4">true</span><span class="s1">,</span>
        <span class="s2">builtInRules </span><span class="s5">= new </span><span class="s3">Map</span><span class="s1">(),</span>
        <span class="s2">loadRules</span><span class="s1">,</span>
        <span class="s2">resolver</span><span class="s1">,</span>
        <span class="s2">eslintRecommendedPath</span><span class="s1">,</span>
        <span class="s2">getEslintRecommendedConfig</span><span class="s1">,</span>
        <span class="s2">eslintAllPath</span><span class="s1">,</span>
        <span class="s2">getEslintAllConfig</span>
    <span class="s1">} </span><span class="s5">= </span><span class="s1">{}) {</span>
        <span class="s5">const </span><span class="s1">configArrayFactory </span><span class="s5">= new </span><span class="s3">ConfigArrayFactory</span><span class="s1">({</span>
            <span class="s2">additionalPluginPool</span><span class="s1">,</span>
            <span class="s2">cwd</span><span class="s1">,</span>
            <span class="s2">resolvePluginsRelativeTo</span><span class="s1">,</span>
            <span class="s2">builtInRules</span><span class="s1">,</span>
            <span class="s2">resolver</span><span class="s1">,</span>
            <span class="s2">eslintRecommendedPath</span><span class="s1">,</span>
            <span class="s2">getEslintRecommendedConfig</span><span class="s1">,</span>
            <span class="s2">eslintAllPath</span><span class="s1">,</span>
            <span class="s2">getEslintAllConfig</span>
        <span class="s1">});</span>

        <span class="s2">internalSlotsMap</span><span class="s1">.</span><span class="s3">set</span><span class="s1">(</span><span class="s2">this</span><span class="s1">, {</span>
            <span class="s1">baseConfigArray: </span><span class="s3">createBaseConfigArray</span><span class="s1">({</span>
                <span class="s2">baseConfigData</span><span class="s1">,</span>
                <span class="s2">configArrayFactory</span><span class="s1">,</span>
                <span class="s2">cwd</span><span class="s1">,</span>
                <span class="s2">rulePaths</span><span class="s1">,</span>
                <span class="s2">loadRules</span>
            <span class="s1">}),</span>
            <span class="s2">baseConfigData</span><span class="s1">,</span>
            <span class="s1">cliConfigArray: </span><span class="s3">createCLIConfigArray</span><span class="s1">({</span>
                <span class="s2">cliConfigData</span><span class="s1">,</span>
                <span class="s2">configArrayFactory</span><span class="s1">,</span>
                <span class="s2">cwd</span><span class="s1">,</span>
                <span class="s2">ignorePath</span><span class="s1">,</span>
                <span class="s2">specificConfigPath</span>
            <span class="s1">}),</span>
            <span class="s2">cliConfigData</span><span class="s1">,</span>
            <span class="s2">configArrayFactory</span><span class="s1">,</span>
            <span class="s1">configCache: </span><span class="s5">new </span><span class="s3">Map</span><span class="s1">(),</span>
            <span class="s2">cwd</span><span class="s1">,</span>
            <span class="s1">finalizeCache: </span><span class="s5">new </span><span class="s3">WeakMap</span><span class="s1">(),</span>
            <span class="s2">ignorePath</span><span class="s1">,</span>
            <span class="s2">rulePaths</span><span class="s1">,</span>
            <span class="s2">specificConfigPath</span><span class="s1">,</span>
            <span class="s2">useEslintrc</span><span class="s1">,</span>
            <span class="s2">builtInRules</span><span class="s1">,</span>
            <span class="s2">loadRules</span>
        <span class="s1">});</span>
    <span class="s1">}</span>

    <span class="s6">/**</span>
     <span class="s6">* The path to the current working directory. 
     * This is used by tests. 
     * </span><span class="s5">@type </span><span class="s2">{string}</span>
     <span class="s6">*/ 
    get cwd() { 
        const { cwd } = internalSlotsMap.get(this); 
</span>
        <span class="s6">return cwd; 
    } 
</span>
    <span class="s6">/** 
     * Get the config array of a given file. 
     * If `filePath` was not given, it returns the config which contains only 
     * `baseConfigData` and `cliConfigData`. 
     * </span><span class="s5">@param </span><span class="s2">{string} [filePath] </span><span class="s6">The file path to a file. 
     * </span><span class="s5">@param </span><span class="s2">{Object} [options] </span><span class="s6">The options. 
     * </span><span class="s5">@param </span><span class="s2">{boolean} [options.ignoreNotFoundError] </span><span class="s6">If `true` then it doesn't throw `ConfigurationNotFoundError`. 
     * </span><span class="s5">@returns </span><span class="s2">{ConfigArray} </span><span class="s6">The config array of the file. 
     */</span>
    <span class="s1">getConfigArrayForFile(</span><span class="s2">filePath</span><span class="s1">, { </span><span class="s2">ignoreNotFoundError </span><span class="s5">= </span><span class="s4">false </span><span class="s1">} </span><span class="s5">= </span><span class="s1">{}) {</span>
        <span class="s5">const </span><span class="s1">{</span>
            <span class="s1">baseConfigArray,</span>
            <span class="s1">cliConfigArray,</span>
            <span class="s1">cwd</span>
        <span class="s1">} </span><span class="s5">= </span><span class="s2">internalSlotsMap</span><span class="s1">.</span><span class="s3">get</span><span class="s1">(</span><span class="s2">this</span><span class="s1">);</span>

        <span class="s5">if </span><span class="s1">(</span><span class="s5">!</span><span class="s2">filePath</span><span class="s1">) {</span>
            <span class="s5">return new </span><span class="s3">ConfigArray</span><span class="s1">(</span><span class="s5">...</span><span class="s2">baseConfigArray</span><span class="s1">, </span><span class="s5">...</span><span class="s2">cliConfigArray</span><span class="s1">);</span>
        <span class="s1">}</span>

        <span class="s5">const </span><span class="s1">directoryPath </span><span class="s5">= </span><span class="s2">path__default</span><span class="s1">[</span><span class="s0">&quot;default&quot;</span><span class="s1">].</span><span class="s3">dirname</span><span class="s1">(</span><span class="s2">path__default</span><span class="s1">[</span><span class="s0">&quot;default&quot;</span><span class="s1">].</span><span class="s3">resolve</span><span class="s1">(</span><span class="s2">cwd</span><span class="s1">, </span><span class="s2">filePath</span><span class="s1">));</span>

        <span class="s3">debug$1</span><span class="s1">(</span><span class="s0">`Load config files for ${</span><span class="s2">directoryPath</span><span class="s0">}.`</span><span class="s1">);</span>

        <span class="s5">return </span><span class="s2">this</span><span class="s1">.</span><span class="s3">_finalizeConfigArray</span><span class="s1">(</span>
            <span class="s2">this</span><span class="s1">.</span><span class="s3">_loadConfigInAncestors</span><span class="s1">(</span><span class="s2">directoryPath</span><span class="s1">),</span>
            <span class="s2">directoryPath</span><span class="s1">,</span>
            <span class="s2">ignoreNotFoundError</span>
        <span class="s1">);</span>
    <span class="s1">}</span>

    <span class="s6">/**</span>
     <span class="s6">* Set the config data to override all configs. 
     * Require to call `clearCache()` method after this method is called. 
     * </span><span class="s5">@param </span><span class="s2">{ConfigData} configData </span><span class="s6">The config data to override all configs. 
     * </span><span class="s5">@returns </span><span class="s2">{void}</span>
     <span class="s6">*/ 
    setOverrideConfig(configData) { 
        const slots = internalSlotsMap.get(this); 
</span>
        <span class="s6">slots.cliConfigData = configData; 
    } 
</span>
    <span class="s6">/** 
     * Clear config cache. 
     * </span><span class="s5">@returns </span><span class="s2">{void}</span>
     <span class="s6">*/ 
    clearCache() { 
        const slots = internalSlotsMap.get(this); 
</span>
        <span class="s6">slots.baseConfigArray = createBaseConfigArray(slots); 
        slots.cliConfigArray = createCLIConfigArray(slots); 
        slots.configCache.clear(); 
    } 
</span>
    <span class="s6">/** 
     * Load and normalize config files from the ancestor directories. 
     * </span><span class="s5">@param </span><span class="s2">{string} directoryPath </span><span class="s6">The path to a leaf directory. 
     * </span><span class="s5">@param </span><span class="s2">{boolean} configsExistInSubdirs </span><span class="s6">`true` if configurations exist in subdirectories. 
     * </span><span class="s5">@returns </span><span class="s2">{ConfigArray} </span><span class="s6">The loaded config. 
     * </span><span class="s5">@private</span>
     <span class="s6">*/</span>
    <span class="s1">_loadConfigInAncestors(</span><span class="s2">directoryPath</span><span class="s1">, </span><span class="s2">configsExistInSubdirs </span><span class="s5">= </span><span class="s4">false</span><span class="s1">) {</span>
        <span class="s5">const </span><span class="s1">{</span>
            <span class="s1">baseConfigArray,</span>
            <span class="s1">configArrayFactory,</span>
            <span class="s1">configCache,</span>
            <span class="s1">cwd,</span>
            <span class="s1">useEslintrc</span>
        <span class="s1">} </span><span class="s5">= </span><span class="s2">internalSlotsMap</span><span class="s1">.</span><span class="s3">get</span><span class="s1">(</span><span class="s2">this</span><span class="s1">);</span>

        <span class="s5">if </span><span class="s1">(</span><span class="s5">!</span><span class="s2">useEslintrc</span><span class="s1">) {</span>
            <span class="s5">return </span><span class="s2">baseConfigArray</span><span class="s1">;</span>
        <span class="s1">}</span>

        <span class="s5">let </span><span class="s1">configArray </span><span class="s5">= </span><span class="s2">configCache</span><span class="s1">.</span><span class="s3">get</span><span class="s1">(</span><span class="s2">directoryPath</span><span class="s1">);</span>

        <span class="s6">// Hit cache.</span>
        <span class="s5">if </span><span class="s1">(</span><span class="s2">configArray</span><span class="s1">) {</span>
            <span class="s3">debug$1</span><span class="s1">(</span><span class="s0">`Cache hit: ${</span><span class="s2">directoryPath</span><span class="s0">}.`</span><span class="s1">);</span>
            <span class="s5">return </span><span class="s2">configArray</span><span class="s1">;</span>
        <span class="s1">}</span>
        <span class="s3">debug$1</span><span class="s1">(</span><span class="s0">`No cache found: ${</span><span class="s2">directoryPath</span><span class="s0">}.`</span><span class="s1">);</span>

        <span class="s5">const </span><span class="s1">homePath </span><span class="s5">= </span><span class="s2">os__default</span><span class="s1">[</span><span class="s0">&quot;default&quot;</span><span class="s1">].</span><span class="s3">homedir</span><span class="s1">();</span>

        <span class="s6">// Consider this is root.</span>
        <span class="s5">if </span><span class="s1">(</span><span class="s2">directoryPath </span><span class="s5">=== </span><span class="s2">homePath </span><span class="s5">&amp;&amp; </span><span class="s2">cwd </span><span class="s5">!== </span><span class="s2">homePath</span><span class="s1">) {</span>
            <span class="s3">debug$1</span><span class="s1">(</span><span class="s0">&quot;Stop traversing because of considered root.&quot;</span><span class="s1">);</span>
            <span class="s5">if </span><span class="s1">(</span><span class="s2">configsExistInSubdirs</span><span class="s1">) {</span>
                <span class="s5">const </span><span class="s1">filePath </span><span class="s5">= </span><span class="s2">ConfigArrayFactory</span><span class="s1">.</span><span class="s3">getPathToConfigFileInDirectory</span><span class="s1">(</span><span class="s2">directoryPath</span><span class="s1">);</span>

                <span class="s5">if </span><span class="s1">(</span><span class="s2">filePath</span><span class="s1">) {</span>
                    <span class="s3">emitDeprecationWarning</span><span class="s1">(</span>
                        <span class="s2">filePath</span><span class="s1">,</span>
                        <span class="s0">&quot;ESLINT_PERSONAL_CONFIG_SUPPRESS&quot;</span>
                    <span class="s1">);</span>
                <span class="s1">}</span>
            <span class="s1">}</span>
            <span class="s5">return </span><span class="s2">this</span><span class="s1">.</span><span class="s3">_cacheConfig</span><span class="s1">(</span><span class="s2">directoryPath</span><span class="s1">, </span><span class="s2">baseConfigArray</span><span class="s1">);</span>
        <span class="s1">}</span>

        <span class="s6">// Load the config on this directory.</span>
        <span class="s5">try </span><span class="s1">{</span>
            <span class="s2">configArray </span><span class="s5">= </span><span class="s2">configArrayFactory</span><span class="s1">.</span><span class="s3">loadInDirectory</span><span class="s1">(</span><span class="s2">directoryPath</span><span class="s1">);</span>
        <span class="s1">} </span><span class="s5">catch </span><span class="s1">(</span><span class="s2">error</span><span class="s1">) {</span>
            <span class="s6">/* istanbul ignore next */</span>
            <span class="s5">if </span><span class="s1">(</span><span class="s2">error</span><span class="s1">.</span><span class="s2">code </span><span class="s5">=== </span><span class="s0">&quot;EACCES&quot;</span><span class="s1">) {</span>
                <span class="s3">debug$1</span><span class="s1">(</span><span class="s0">&quot;Stop traversing because of 'EACCES' error.&quot;</span><span class="s1">);</span>
                <span class="s5">return </span><span class="s2">this</span><span class="s1">.</span><span class="s3">_cacheConfig</span><span class="s1">(</span><span class="s2">directoryPath</span><span class="s1">, </span><span class="s2">baseConfigArray</span><span class="s1">);</span>
            <span class="s1">}</span>
            <span class="s5">throw </span><span class="s2">error</span><span class="s1">;</span>
        <span class="s1">}</span>

        <span class="s5">if </span><span class="s1">(</span><span class="s2">configArray</span><span class="s1">.length </span><span class="s5">&gt; </span><span class="s7">0 </span><span class="s5">&amp;&amp; </span><span class="s2">configArray</span><span class="s1">.</span><span class="s3">isRoot</span><span class="s1">()) {</span>
            <span class="s3">debug$1</span><span class="s1">(</span><span class="s0">&quot;Stop traversing because of 'root:true'.&quot;</span><span class="s1">);</span>
            <span class="s2">configArray</span><span class="s1">.</span><span class="s3">unshift</span><span class="s1">(</span><span class="s5">...</span><span class="s2">baseConfigArray</span><span class="s1">);</span>
            <span class="s5">return </span><span class="s2">this</span><span class="s1">.</span><span class="s3">_cacheConfig</span><span class="s1">(</span><span class="s2">directoryPath</span><span class="s1">, </span><span class="s2">configArray</span><span class="s1">);</span>
        <span class="s1">}</span>

        <span class="s6">// Load from the ancestors and merge it.</span>
        <span class="s5">const </span><span class="s1">parentPath </span><span class="s5">= </span><span class="s2">path__default</span><span class="s1">[</span><span class="s0">&quot;default&quot;</span><span class="s1">].</span><span class="s3">dirname</span><span class="s1">(</span><span class="s2">directoryPath</span><span class="s1">);</span>
        <span class="s5">const </span><span class="s1">parentConfigArray </span><span class="s5">= </span><span class="s2">parentPath </span><span class="s5">&amp;&amp; </span><span class="s2">parentPath </span><span class="s5">!== </span><span class="s2">directoryPath</span>
            <span class="s5">? </span><span class="s2">this</span><span class="s1">.</span><span class="s3">_loadConfigInAncestors</span><span class="s1">(</span>
                <span class="s2">parentPath</span><span class="s1">,</span>
                <span class="s2">configsExistInSubdirs </span><span class="s5">|| </span><span class="s2">configArray</span><span class="s1">.length </span><span class="s5">&gt; </span><span class="s7">0</span>
            <span class="s1">)</span>
            <span class="s5">: </span><span class="s2">baseConfigArray</span><span class="s1">;</span>

        <span class="s5">if </span><span class="s1">(</span><span class="s2">configArray</span><span class="s1">.length </span><span class="s5">&gt; </span><span class="s7">0</span><span class="s1">) {</span>
            <span class="s2">configArray</span><span class="s1">.</span><span class="s3">unshift</span><span class="s1">(</span><span class="s5">...</span><span class="s2">parentConfigArray</span><span class="s1">);</span>
        <span class="s1">} </span><span class="s5">else </span><span class="s1">{</span>
            <span class="s2">configArray </span><span class="s5">= </span><span class="s2">parentConfigArray</span><span class="s1">;</span>
        <span class="s1">}</span>

        <span class="s6">// Cache and return.</span>
        <span class="s5">return </span><span class="s2">this</span><span class="s1">.</span><span class="s3">_cacheConfig</span><span class="s1">(</span><span class="s2">directoryPath</span><span class="s1">, </span><span class="s2">configArray</span><span class="s1">);</span>
    <span class="s1">}</span>

    <span class="s6">/**</span>
     <span class="s6">* Freeze and cache a given config. 
     * </span><span class="s5">@param </span><span class="s2">{string} directoryPath </span><span class="s6">The path to a directory as a cache key. 
     * </span><span class="s5">@param </span><span class="s2">{ConfigArray} configArray </span><span class="s6">The config array as a cache value. 
     * </span><span class="s5">@returns </span><span class="s2">{ConfigArray} </span><span class="s6">The `configArray` (frozen). 
     */</span>
    <span class="s1">_cacheConfig(</span><span class="s2">directoryPath</span><span class="s1">, </span><span class="s2">configArray</span><span class="s1">) {</span>
        <span class="s5">const </span><span class="s1">{ configCache } </span><span class="s5">= </span><span class="s2">internalSlotsMap</span><span class="s1">.</span><span class="s3">get</span><span class="s1">(</span><span class="s2">this</span><span class="s1">);</span>

        <span class="s2">Object</span><span class="s1">.</span><span class="s3">freeze</span><span class="s1">(</span><span class="s2">configArray</span><span class="s1">);</span>
        <span class="s2">configCache</span><span class="s1">.</span><span class="s3">set</span><span class="s1">(</span><span class="s2">directoryPath</span><span class="s1">, </span><span class="s2">configArray</span><span class="s1">);</span>

        <span class="s5">return </span><span class="s2">configArray</span><span class="s1">;</span>
    <span class="s1">}</span>

    <span class="s6">/**</span>
     <span class="s6">* Finalize a given config array. 
     * Concatenate `--config` and other CLI options. 
     * </span><span class="s5">@param </span><span class="s2">{ConfigArray} configArray </span><span class="s6">The parent config array. 
     * </span><span class="s5">@param </span><span class="s2">{string} directoryPath </span><span class="s6">The path to the leaf directory to find config files. 
     * </span><span class="s5">@param </span><span class="s2">{boolean} ignoreNotFoundError </span><span class="s6">If `true` then it doesn't throw `ConfigurationNotFoundError`. 
     * </span><span class="s5">@returns </span><span class="s2">{ConfigArray} </span><span class="s6">The loaded config. 
     * </span><span class="s5">@private</span>
     <span class="s6">*/</span>
    <span class="s1">_finalizeConfigArray(</span><span class="s2">configArray</span><span class="s1">, </span><span class="s2">directoryPath</span><span class="s1">, </span><span class="s2">ignoreNotFoundError</span><span class="s1">) {</span>
        <span class="s5">const </span><span class="s1">{</span>
            <span class="s1">cliConfigArray,</span>
            <span class="s1">configArrayFactory,</span>
            <span class="s1">finalizeCache,</span>
            <span class="s1">useEslintrc,</span>
            <span class="s1">builtInRules</span>
        <span class="s1">} </span><span class="s5">= </span><span class="s2">internalSlotsMap</span><span class="s1">.</span><span class="s3">get</span><span class="s1">(</span><span class="s2">this</span><span class="s1">);</span>

        <span class="s5">let </span><span class="s1">finalConfigArray </span><span class="s5">= </span><span class="s2">finalizeCache</span><span class="s1">.</span><span class="s3">get</span><span class="s1">(</span><span class="s2">configArray</span><span class="s1">);</span>

        <span class="s5">if </span><span class="s1">(</span><span class="s5">!</span><span class="s2">finalConfigArray</span><span class="s1">) {</span>
            <span class="s2">finalConfigArray </span><span class="s5">= </span><span class="s2">configArray</span><span class="s1">;</span>

            <span class="s6">// Load the personal config if there are no regular config files.</span>
            <span class="s5">if </span><span class="s1">(</span>
                <span class="s2">useEslintrc </span><span class="s5">&amp;&amp;</span>
                <span class="s2">configArray</span><span class="s1">.</span><span class="s3">every</span><span class="s1">(</span><span class="s2">c </span><span class="s5">=&gt; !</span><span class="s2">c</span><span class="s1">.</span><span class="s2">filePath</span><span class="s1">) </span><span class="s5">&amp;&amp;</span>
                <span class="s2">cliConfigArray</span><span class="s1">.</span><span class="s3">every</span><span class="s1">(</span><span class="s2">c </span><span class="s5">=&gt; !</span><span class="s2">c</span><span class="s1">.</span><span class="s2">filePath</span><span class="s1">) </span><span class="s6">// `--config` option can be a file.</span>
            <span class="s1">) {</span>
                <span class="s5">const </span><span class="s1">homePath </span><span class="s5">= </span><span class="s2">os__default</span><span class="s1">[</span><span class="s0">&quot;default&quot;</span><span class="s1">].</span><span class="s3">homedir</span><span class="s1">();</span>

                <span class="s3">debug$1</span><span class="s1">(</span><span class="s0">&quot;Loading the config file of the home directory:&quot;</span><span class="s1">, </span><span class="s2">homePath</span><span class="s1">);</span>

                <span class="s5">const </span><span class="s1">personalConfigArray </span><span class="s5">= </span><span class="s2">configArrayFactory</span><span class="s1">.</span><span class="s3">loadInDirectory</span><span class="s1">(</span>
                    <span class="s2">homePath</span><span class="s1">,</span>
                    <span class="s1">{ name: </span><span class="s0">&quot;PersonalConfig&quot; </span><span class="s1">}</span>
                <span class="s1">);</span>

                <span class="s5">if </span><span class="s1">(</span>
                    <span class="s2">personalConfigArray</span><span class="s1">.length </span><span class="s5">&gt; </span><span class="s7">0 </span><span class="s5">&amp;&amp;</span>
                    <span class="s5">!</span><span class="s2">directoryPath</span><span class="s1">.</span><span class="s3">startsWith</span><span class="s1">(</span><span class="s2">homePath</span><span class="s1">)</span>
                <span class="s1">) {</span>
                    <span class="s5">const </span><span class="s1">lastElement </span><span class="s5">=</span>
                        <span class="s2">personalConfigArray</span><span class="s1">[</span><span class="s2">personalConfigArray</span><span class="s1">.length </span><span class="s5">- </span><span class="s7">1</span><span class="s1">];</span>

                    <span class="s3">emitDeprecationWarning</span><span class="s1">(</span>
                        <span class="s2">lastElement</span><span class="s1">.</span><span class="s2">filePath</span><span class="s1">,</span>
                        <span class="s0">&quot;ESLINT_PERSONAL_CONFIG_LOAD&quot;</span>
                    <span class="s1">);</span>
                <span class="s1">}</span>

                <span class="s2">finalConfigArray </span><span class="s5">= </span><span class="s2">finalConfigArray</span><span class="s1">.</span><span class="s3">concat</span><span class="s1">(</span><span class="s2">personalConfigArray</span><span class="s1">);</span>
            <span class="s1">}</span>

            <span class="s6">// Apply CLI options.</span>
            <span class="s5">if </span><span class="s1">(</span><span class="s2">cliConfigArray</span><span class="s1">.length </span><span class="s5">&gt; </span><span class="s7">0</span><span class="s1">) {</span>
                <span class="s2">finalConfigArray </span><span class="s5">= </span><span class="s2">finalConfigArray</span><span class="s1">.</span><span class="s3">concat</span><span class="s1">(</span><span class="s2">cliConfigArray</span><span class="s1">);</span>
            <span class="s1">}</span>

            <span class="s6">// Validate rule settings and environments.</span>
            <span class="s5">const </span><span class="s1">validator </span><span class="s5">= new </span><span class="s3">ConfigValidator</span><span class="s1">({</span>
                <span class="s2">builtInRules</span>
            <span class="s1">});</span>

            <span class="s2">validator</span><span class="s1">.</span><span class="s3">validateConfigArray</span><span class="s1">(</span><span class="s2">finalConfigArray</span><span class="s1">);</span>

            <span class="s6">// Cache it.</span>
            <span class="s2">Object</span><span class="s1">.</span><span class="s3">freeze</span><span class="s1">(</span><span class="s2">finalConfigArray</span><span class="s1">);</span>
            <span class="s2">finalizeCache</span><span class="s1">.</span><span class="s3">set</span><span class="s1">(</span><span class="s2">configArray</span><span class="s1">, </span><span class="s2">finalConfigArray</span><span class="s1">);</span>

            <span class="s3">debug$1</span><span class="s1">(</span>
                <span class="s0">&quot;Configuration was determined: %o on %s&quot;</span><span class="s1">,</span>
                <span class="s2">finalConfigArray</span><span class="s1">,</span>
                <span class="s2">directoryPath</span>
            <span class="s1">);</span>
        <span class="s1">}</span>

        <span class="s6">// At least one element (the default ignore patterns) exists.</span>
        <span class="s5">if </span><span class="s1">(</span><span class="s5">!</span><span class="s2">ignoreNotFoundError </span><span class="s5">&amp;&amp; </span><span class="s2">useEslintrc </span><span class="s5">&amp;&amp; </span><span class="s2">finalConfigArray</span><span class="s1">.length </span><span class="s5">&lt;= </span><span class="s7">1</span><span class="s1">) {</span>
            <span class="s5">throw new </span><span class="s3">ConfigurationNotFoundError</span><span class="s1">(</span><span class="s2">directoryPath</span><span class="s1">);</span>
        <span class="s1">}</span>

        <span class="s5">return </span><span class="s2">finalConfigArray</span><span class="s1">;</span>
    <span class="s1">}</span>
<span class="s1">}</span>

<span class="s6">/**</span>
 <span class="s6">* </span><span class="s5">@fileoverview </span><span class="s6">Compatibility class for flat config. 
 * </span><span class="s5">@author </span><span class="s2">Nicholas C. Zakas 
 </span><span class="s6">*/</span>

<span class="s6">//-----------------------------------------------------------------------------</span>
<span class="s6">// Helpers</span>
<span class="s6">//-----------------------------------------------------------------------------</span>

<span class="s6">/** </span><span class="s5">@typedef </span><span class="s2">{import(&quot;../../shared/types&quot;).Environment} Environment </span><span class="s6">*/</span>
<span class="s6">/** </span><span class="s5">@typedef </span><span class="s2">{import(&quot;../../shared/types&quot;).Processor} Processor </span><span class="s6">*/</span>

<span class="s2">const </span><span class="s1">debug </span><span class="s5">= </span><span class="s2">debugOrig__default</span><span class="s1">[</span><span class="s0">&quot;default&quot;</span><span class="s1">](</span><span class="s0">&quot;eslintrc:flat-compat&quot;</span><span class="s1">);</span>
<span class="s2">const </span><span class="s1">cafactory </span><span class="s5">= </span><span class="s3">Symbol</span><span class="s1">(</span><span class="s0">&quot;cafactory&quot;</span><span class="s1">);</span>

<span class="s6">/**</span>
 <span class="s6">* Translates an ESLintRC-style config object into a flag-config-style config 
 * object. 
 * </span><span class="s5">@param </span><span class="s2">{Object} eslintrcConfig </span><span class="s6">An ESLintRC-style config object. 
 * </span><span class="s5">@param </span><span class="s2">{Object} options </span><span class="s6">Options to help translate the config. 
 * </span><span class="s5">@param </span><span class="s2">{string} options.resolveConfigRelativeTo </span><span class="s6">To the directory to resolve 
 *      configs from. 
 * </span><span class="s5">@param </span><span class="s2">{string} options.resolvePluginsRelativeTo </span><span class="s6">The directory to resolve 
 *      plugins from. 
 * </span><span class="s5">@param </span><span class="s2">{ReadOnlyMap&lt;string,Environment&gt;} options.pluginEnvironments </span><span class="s6">A map of plugin environment 
 *      names to objects. 
 * </span><span class="s5">@param </span><span class="s2">{ReadOnlyMap&lt;string,Processor&gt;} options.pluginProcessors </span><span class="s6">A map of plugin processor 
 *      names to objects. 
 * </span><span class="s5">@returns </span><span class="s2">{Object} </span><span class="s6">A flag-config-style config object. 
 */</span>
<span class="s5">function </span><span class="s1">translateESLintRC(</span><span class="s2">eslintrcConfig</span><span class="s1">, {</span>
    <span class="s2">resolveConfigRelativeTo</span><span class="s1">,</span>
    <span class="s2">resolvePluginsRelativeTo</span><span class="s1">,</span>
    <span class="s2">pluginEnvironments</span><span class="s1">,</span>
    <span class="s2">pluginProcessors</span>
<span class="s1">}) {</span>

    <span class="s5">const </span><span class="s1">flatConfig </span><span class="s5">= </span><span class="s1">{};</span>
    <span class="s5">const </span><span class="s1">configs </span><span class="s5">= </span><span class="s1">[];</span>
    <span class="s5">const </span><span class="s1">languageOptions </span><span class="s5">= </span><span class="s1">{};</span>
    <span class="s5">const </span><span class="s1">linterOptions </span><span class="s5">= </span><span class="s1">{};</span>
    <span class="s5">const </span><span class="s1">keysToCopy </span><span class="s5">= </span><span class="s1">[</span><span class="s0">&quot;settings&quot;</span><span class="s1">, </span><span class="s0">&quot;rules&quot;</span><span class="s1">, </span><span class="s0">&quot;processor&quot;</span><span class="s1">];</span>
    <span class="s5">const </span><span class="s1">languageOptionsKeysToCopy </span><span class="s5">= </span><span class="s1">[</span><span class="s0">&quot;globals&quot;</span><span class="s1">, </span><span class="s0">&quot;parser&quot;</span><span class="s1">, </span><span class="s0">&quot;parserOptions&quot;</span><span class="s1">];</span>
    <span class="s5">const </span><span class="s1">linterOptionsKeysToCopy </span><span class="s5">= </span><span class="s1">[</span><span class="s0">&quot;noInlineConfig&quot;</span><span class="s1">, </span><span class="s0">&quot;reportUnusedDisableDirectives&quot;</span><span class="s1">];</span>

    <span class="s6">// copy over simple translations</span>
    <span class="s5">for </span><span class="s1">(</span><span class="s5">const </span><span class="s1">key </span><span class="s5">of </span><span class="s2">keysToCopy</span><span class="s1">) {</span>
        <span class="s5">if </span><span class="s1">(</span><span class="s2">key </span><span class="s5">in </span><span class="s2">eslintrcConfig </span><span class="s5">&amp;&amp; typeof </span><span class="s2">eslintrcConfig</span><span class="s1">[</span><span class="s2">key</span><span class="s1">] </span><span class="s5">!== </span><span class="s0">&quot;undefined&quot;</span><span class="s1">) {</span>
            <span class="s2">flatConfig</span><span class="s1">[</span><span class="s2">key</span><span class="s1">] </span><span class="s5">= </span><span class="s2">eslintrcConfig</span><span class="s1">[</span><span class="s2">key</span><span class="s1">];</span>
        <span class="s1">}</span>
    <span class="s1">}</span>

    <span class="s6">// copy over languageOptions</span>
    <span class="s5">for </span><span class="s1">(</span><span class="s5">const </span><span class="s1">key </span><span class="s5">of </span><span class="s2">languageOptionsKeysToCopy</span><span class="s1">) {</span>
        <span class="s5">if </span><span class="s1">(</span><span class="s2">key </span><span class="s5">in </span><span class="s2">eslintrcConfig </span><span class="s5">&amp;&amp; typeof </span><span class="s2">eslintrcConfig</span><span class="s1">[</span><span class="s2">key</span><span class="s1">] </span><span class="s5">!== </span><span class="s0">&quot;undefined&quot;</span><span class="s1">) {</span>

            <span class="s6">// create the languageOptions key in the flat config</span>
            <span class="s2">flatConfig</span><span class="s1">.</span><span class="s2">languageOptions </span><span class="s5">= </span><span class="s2">languageOptions</span><span class="s1">;</span>

            <span class="s5">if </span><span class="s1">(</span><span class="s2">key </span><span class="s5">=== </span><span class="s0">&quot;parser&quot;</span><span class="s1">) {</span>
                <span class="s3">debug</span><span class="s1">(</span><span class="s0">`Resolving parser '${</span><span class="s2">languageOptions</span><span class="s0">[</span><span class="s2">key</span><span class="s0">]}' relative to ${</span><span class="s2">resolveConfigRelativeTo</span><span class="s0">}`</span><span class="s1">);</span>

                <span class="s5">if </span><span class="s1">(</span><span class="s2">eslintrcConfig</span><span class="s1">[</span><span class="s2">key</span><span class="s1">].</span><span class="s2">error</span><span class="s1">) {</span>
                    <span class="s5">throw </span><span class="s2">eslintrcConfig</span><span class="s1">[</span><span class="s2">key</span><span class="s1">].</span><span class="s2">error</span><span class="s1">;</span>
                <span class="s1">}</span>

                <span class="s2">languageOptions</span><span class="s1">[</span><span class="s2">key</span><span class="s1">] </span><span class="s5">= </span><span class="s2">eslintrcConfig</span><span class="s1">[</span><span class="s2">key</span><span class="s1">].</span><span class="s2">definition</span><span class="s1">;</span>
                <span class="s5">continue</span><span class="s1">;</span>
            <span class="s1">}</span>

            <span class="s6">// clone any object values that are in the eslintrc config</span>
            <span class="s5">if </span><span class="s1">(</span><span class="s2">eslintrcConfig</span><span class="s1">[</span><span class="s2">key</span><span class="s1">] </span><span class="s5">&amp;&amp; typeof </span><span class="s2">eslintrcConfig</span><span class="s1">[</span><span class="s2">key</span><span class="s1">] </span><span class="s5">=== </span><span class="s0">&quot;object&quot;</span><span class="s1">) {</span>
                <span class="s2">languageOptions</span><span class="s1">[</span><span class="s2">key</span><span class="s1">] </span><span class="s5">= </span><span class="s1">{</span>
                    <span class="s5">...</span><span class="s2">eslintrcConfig</span><span class="s1">[</span><span class="s2">key</span><span class="s1">]</span>
                <span class="s1">};</span>
            <span class="s1">} </span><span class="s5">else </span><span class="s1">{</span>
                <span class="s2">languageOptions</span><span class="s1">[</span><span class="s2">key</span><span class="s1">] </span><span class="s5">= </span><span class="s2">eslintrcConfig</span><span class="s1">[</span><span class="s2">key</span><span class="s1">];</span>
            <span class="s1">}</span>
        <span class="s1">}</span>
    <span class="s1">}</span>

    <span class="s6">// copy over linterOptions</span>
    <span class="s5">for </span><span class="s1">(</span><span class="s5">const </span><span class="s1">key </span><span class="s5">of </span><span class="s2">linterOptionsKeysToCopy</span><span class="s1">) {</span>
        <span class="s5">if </span><span class="s1">(</span><span class="s2">key </span><span class="s5">in </span><span class="s2">eslintrcConfig </span><span class="s5">&amp;&amp; typeof </span><span class="s2">eslintrcConfig</span><span class="s1">[</span><span class="s2">key</span><span class="s1">] </span><span class="s5">!== </span><span class="s0">&quot;undefined&quot;</span><span class="s1">) {</span>
            <span class="s2">flatConfig</span><span class="s1">.</span><span class="s2">linterOptions </span><span class="s5">= </span><span class="s2">linterOptions</span><span class="s1">;</span>
            <span class="s2">linterOptions</span><span class="s1">[</span><span class="s2">key</span><span class="s1">] </span><span class="s5">= </span><span class="s2">eslintrcConfig</span><span class="s1">[</span><span class="s2">key</span><span class="s1">];</span>
        <span class="s1">}</span>
    <span class="s1">}</span>

    <span class="s6">// move ecmaVersion a level up</span>
    <span class="s5">if </span><span class="s1">(</span><span class="s2">languageOptions</span><span class="s1">.</span><span class="s2">parserOptions</span><span class="s1">) {</span>

        <span class="s5">if </span><span class="s1">(</span><span class="s0">&quot;ecmaVersion&quot; </span><span class="s5">in </span><span class="s2">languageOptions</span><span class="s1">.</span><span class="s2">parserOptions</span><span class="s1">) {</span>
            <span class="s2">languageOptions</span><span class="s1">.</span><span class="s2">ecmaVersion </span><span class="s5">= </span><span class="s2">languageOptions</span><span class="s1">.</span><span class="s2">parserOptions</span><span class="s1">.</span><span class="s2">ecmaVersion</span><span class="s1">;</span>
            <span class="s5">delete </span><span class="s2">languageOptions</span><span class="s1">.</span><span class="s2">parserOptions</span><span class="s1">.</span><span class="s2">ecmaVersion</span><span class="s1">;</span>
        <span class="s1">}</span>

        <span class="s5">if </span><span class="s1">(</span><span class="s0">&quot;sourceType&quot; </span><span class="s5">in </span><span class="s2">languageOptions</span><span class="s1">.</span><span class="s2">parserOptions</span><span class="s1">) {</span>
            <span class="s2">languageOptions</span><span class="s1">.</span><span class="s2">sourceType </span><span class="s5">= </span><span class="s2">languageOptions</span><span class="s1">.</span><span class="s2">parserOptions</span><span class="s1">.</span><span class="s2">sourceType</span><span class="s1">;</span>
            <span class="s5">delete </span><span class="s2">languageOptions</span><span class="s1">.</span><span class="s2">parserOptions</span><span class="s1">.</span><span class="s2">sourceType</span><span class="s1">;</span>
        <span class="s1">}</span>

        <span class="s6">// check to see if we even need parserOptions anymore and remove it if not</span>
        <span class="s5">if </span><span class="s1">(</span><span class="s2">Object</span><span class="s1">.</span><span class="s3">keys</span><span class="s1">(</span><span class="s2">languageOptions</span><span class="s1">.</span><span class="s2">parserOptions</span><span class="s1">).length </span><span class="s5">=== </span><span class="s7">0</span><span class="s1">) {</span>
            <span class="s5">delete </span><span class="s2">languageOptions</span><span class="s1">.</span><span class="s2">parserOptions</span><span class="s1">;</span>
        <span class="s1">}</span>
    <span class="s1">}</span>

    <span class="s6">// overrides</span>
    <span class="s5">if </span><span class="s1">(</span><span class="s2">eslintrcConfig</span><span class="s1">.</span><span class="s2">criteria</span><span class="s1">) {</span>
        <span class="s2">flatConfig</span><span class="s1">.</span><span class="s2">files </span><span class="s5">= </span><span class="s1">[</span><span class="s2">absoluteFilePath </span><span class="s5">=&gt; </span><span class="s2">eslintrcConfig</span><span class="s1">.</span><span class="s2">criteria</span><span class="s1">.</span><span class="s3">test</span><span class="s1">(</span><span class="s2">absoluteFilePath</span><span class="s1">)];</span>
    <span class="s1">}</span>

    <span class="s6">// translate plugins</span>
    <span class="s5">if </span><span class="s1">(</span><span class="s2">eslintrcConfig</span><span class="s1">.</span><span class="s2">plugins </span><span class="s5">&amp;&amp; typeof </span><span class="s2">eslintrcConfig</span><span class="s1">.</span><span class="s2">plugins </span><span class="s5">=== </span><span class="s0">&quot;object&quot;</span><span class="s1">) {</span>
        <span class="s3">debug</span><span class="s1">(</span><span class="s0">`Translating plugins: ${</span><span class="s2">eslintrcConfig</span><span class="s0">.</span><span class="s2">plugins</span><span class="s0">}`</span><span class="s1">);</span>

        <span class="s2">flatConfig</span><span class="s1">.</span><span class="s2">plugins </span><span class="s5">= </span><span class="s1">{};</span>

        <span class="s5">for </span><span class="s1">(</span><span class="s5">const </span><span class="s1">pluginName </span><span class="s5">of </span><span class="s2">Object</span><span class="s1">.</span><span class="s3">keys</span><span class="s1">(</span><span class="s2">eslintrcConfig</span><span class="s1">.</span><span class="s2">plugins</span><span class="s1">)) {</span>

            <span class="s3">debug</span><span class="s1">(</span><span class="s0">`Translating plugin: ${</span><span class="s2">pluginName</span><span class="s0">}`</span><span class="s1">);</span>
            <span class="s3">debug</span><span class="s1">(</span><span class="s0">`Resolving plugin '${</span><span class="s2">pluginName</span><span class="s0">} relative to ${</span><span class="s2">resolvePluginsRelativeTo</span><span class="s0">}`</span><span class="s1">);</span>

            <span class="s5">const </span><span class="s1">{ </span><span class="s2">definition</span><span class="s1">: plugin, error } </span><span class="s5">= </span><span class="s2">eslintrcConfig</span><span class="s1">.</span><span class="s2">plugins</span><span class="s1">[</span><span class="s2">pluginName</span><span class="s1">];</span>

            <span class="s5">if </span><span class="s1">(</span><span class="s2">error</span><span class="s1">) {</span>
                <span class="s5">throw </span><span class="s2">error</span><span class="s1">;</span>
            <span class="s1">}</span>

            <span class="s2">flatConfig</span><span class="s1">.</span><span class="s2">plugins</span><span class="s1">[</span><span class="s2">pluginName</span><span class="s1">] </span><span class="s5">= </span><span class="s2">plugin</span><span class="s1">;</span>

            <span class="s6">// create a config for any processors</span>
            <span class="s5">if </span><span class="s1">(</span><span class="s2">plugin</span><span class="s1">.</span><span class="s2">processors</span><span class="s1">) {</span>
                <span class="s5">for </span><span class="s1">(</span><span class="s5">const </span><span class="s1">processorName </span><span class="s5">of </span><span class="s2">Object</span><span class="s1">.</span><span class="s3">keys</span><span class="s1">(</span><span class="s2">plugin</span><span class="s1">.</span><span class="s2">processors</span><span class="s1">)) {</span>
                    <span class="s5">if </span><span class="s1">(</span><span class="s2">processorName</span><span class="s1">.</span><span class="s3">startsWith</span><span class="s1">(</span><span class="s0">&quot;.&quot;</span><span class="s1">)) {</span>
                        <span class="s3">debug</span><span class="s1">(</span><span class="s0">`Assigning processor: ${</span><span class="s2">pluginName</span><span class="s0">}/${</span><span class="s2">processorName</span><span class="s0">}`</span><span class="s1">);</span>

                        <span class="s2">configs</span><span class="s1">.</span><span class="s3">unshift</span><span class="s1">({</span>
                            <span class="s1">files: [</span><span class="s0">`**/*${</span><span class="s2">processorName</span><span class="s0">}`</span><span class="s1">],</span>
                            <span class="s1">processor: </span><span class="s2">pluginProcessors</span><span class="s1">.</span><span class="s3">get</span><span class="s1">(</span><span class="s0">`${</span><span class="s2">pluginName</span><span class="s0">}/${</span><span class="s2">processorName</span><span class="s0">}`</span><span class="s1">)</span>
                        <span class="s1">});</span>
                    <span class="s1">}</span>

                <span class="s1">}</span>
            <span class="s1">}</span>
        <span class="s1">}</span>
    <span class="s1">}</span>

    <span class="s6">// translate env - must come after plugins</span>
    <span class="s5">if </span><span class="s1">(</span><span class="s2">eslintrcConfig</span><span class="s1">.</span><span class="s2">env </span><span class="s5">&amp;&amp; typeof </span><span class="s2">eslintrcConfig</span><span class="s1">.</span><span class="s2">env </span><span class="s5">=== </span><span class="s0">&quot;object&quot;</span><span class="s1">) {</span>
        <span class="s5">for </span><span class="s1">(</span><span class="s5">const </span><span class="s1">envName </span><span class="s5">of </span><span class="s2">Object</span><span class="s1">.</span><span class="s3">keys</span><span class="s1">(</span><span class="s2">eslintrcConfig</span><span class="s1">.</span><span class="s2">env</span><span class="s1">)) {</span>

            <span class="s6">// only add environments that are true</span>
            <span class="s5">if </span><span class="s1">(</span><span class="s2">eslintrcConfig</span><span class="s1">.</span><span class="s2">env</span><span class="s1">[</span><span class="s2">envName</span><span class="s1">]) {</span>
                <span class="s3">debug</span><span class="s1">(</span><span class="s0">`Translating environment: ${</span><span class="s2">envName</span><span class="s0">}`</span><span class="s1">);</span>

                <span class="s5">if </span><span class="s1">(</span><span class="s2">environments</span><span class="s1">.</span><span class="s3">has</span><span class="s1">(</span><span class="s2">envName</span><span class="s1">)) {</span>

                    <span class="s6">// built-in environments should be defined first</span>
                    <span class="s2">configs</span><span class="s1">.</span><span class="s3">unshift</span><span class="s1">(</span><span class="s5">...</span><span class="s3">translateESLintRC</span><span class="s1">(</span><span class="s2">environments</span><span class="s1">.</span><span class="s3">get</span><span class="s1">(</span><span class="s2">envName</span><span class="s1">), {</span>
                        <span class="s2">resolveConfigRelativeTo</span><span class="s1">,</span>
                        <span class="s2">resolvePluginsRelativeTo</span>
                    <span class="s1">}));</span>
                <span class="s1">} </span><span class="s5">else if </span><span class="s1">(</span><span class="s2">pluginEnvironments</span><span class="s1">.</span><span class="s3">has</span><span class="s1">(</span><span class="s2">envName</span><span class="s1">)) {</span>

                    <span class="s6">// if the environment comes from a plugin, it should come after the plugin config</span>
                    <span class="s2">configs</span><span class="s1">.</span><span class="s3">push</span><span class="s1">(</span><span class="s5">...</span><span class="s3">translateESLintRC</span><span class="s1">(</span><span class="s2">pluginEnvironments</span><span class="s1">.</span><span class="s3">get</span><span class="s1">(</span><span class="s2">envName</span><span class="s1">), {</span>
                        <span class="s2">resolveConfigRelativeTo</span><span class="s1">,</span>
                        <span class="s2">resolvePluginsRelativeTo</span>
                    <span class="s1">}));</span>
                <span class="s1">}</span>
            <span class="s1">}</span>
        <span class="s1">}</span>
    <span class="s1">}</span>

    <span class="s6">// only add if there are actually keys in the config</span>
    <span class="s5">if </span><span class="s1">(</span><span class="s2">Object</span><span class="s1">.</span><span class="s3">keys</span><span class="s1">(</span><span class="s2">flatConfig</span><span class="s1">).length </span><span class="s5">&gt; </span><span class="s7">0</span><span class="s1">) {</span>
        <span class="s2">configs</span><span class="s1">.</span><span class="s3">push</span><span class="s1">(</span><span class="s2">flatConfig</span><span class="s1">);</span>
    <span class="s1">}</span>

    <span class="s5">return </span><span class="s2">configs</span><span class="s1">;</span>
<span class="s1">}</span>


<span class="s6">//-----------------------------------------------------------------------------</span>
<span class="s6">// Exports</span>
<span class="s6">//-----------------------------------------------------------------------------</span>

<span class="s6">/**</span>
 <span class="s6">* A compatibility class for working with configs. 
 */</span>
<span class="s5">class </span><span class="s2">FlatCompat </span><span class="s1">{</span>

    <span class="s5">constructor</span><span class="s1">({</span>
        <span class="s2">baseDirectory </span><span class="s5">= </span><span class="s2">process</span><span class="s1">.</span><span class="s3">cwd</span><span class="s1">(),</span>
        <span class="s2">resolvePluginsRelativeTo </span><span class="s5">= </span><span class="s2">baseDirectory</span><span class="s1">,</span>
        <span class="s2">recommendedConfig</span><span class="s1">,</span>
        <span class="s2">allConfig</span>
    <span class="s1">} </span><span class="s5">= </span><span class="s1">{}) {</span>
        <span class="s2">this</span><span class="s1">.</span><span class="s2">baseDirectory </span><span class="s5">= </span><span class="s2">baseDirectory</span><span class="s1">;</span>
        <span class="s2">this</span><span class="s1">.</span><span class="s2">resolvePluginsRelativeTo </span><span class="s5">= </span><span class="s2">resolvePluginsRelativeTo</span><span class="s1">;</span>
        <span class="s2">this</span><span class="s1">[</span><span class="s2">cafactory</span><span class="s1">] </span><span class="s5">= new </span><span class="s3">ConfigArrayFactory</span><span class="s1">({</span>
            <span class="s1">cwd: </span><span class="s2">baseDirectory</span><span class="s1">,</span>
            <span class="s2">resolvePluginsRelativeTo</span><span class="s1">,</span>
            <span class="s3">getEslintAllConfig</span><span class="s1">: () </span><span class="s5">=&gt; </span><span class="s1">{</span>

                <span class="s5">if </span><span class="s1">(</span><span class="s5">!</span><span class="s2">allConfig</span><span class="s1">) {</span>
                    <span class="s5">throw new </span><span class="s3">TypeError</span><span class="s1">(</span><span class="s0">&quot;Missing parameter 'allConfig' in FlatCompat constructor.&quot;</span><span class="s1">);</span>
                <span class="s1">}</span>

                <span class="s5">return </span><span class="s2">allConfig</span><span class="s1">;</span>
            <span class="s1">},</span>
            <span class="s3">getEslintRecommendedConfig</span><span class="s1">: () </span><span class="s5">=&gt; </span><span class="s1">{</span>

                <span class="s5">if </span><span class="s1">(</span><span class="s5">!</span><span class="s2">recommendedConfig</span><span class="s1">) {</span>
                    <span class="s5">throw new </span><span class="s3">TypeError</span><span class="s1">(</span><span class="s0">&quot;Missing parameter 'recommendedConfig' in FlatCompat constructor.&quot;</span><span class="s1">);</span>
                <span class="s1">}</span>

                <span class="s5">return </span><span class="s2">recommendedConfig</span><span class="s1">;</span>
            <span class="s1">}</span>
        <span class="s1">});</span>
    <span class="s1">}</span>

    <span class="s6">/**</span>
     <span class="s6">* Translates an ESLintRC-style config into a flag-config-style config. 
     * </span><span class="s5">@param </span><span class="s2">{Object} eslintrcConfig </span><span class="s6">The ESLintRC-style config object. 
     * </span><span class="s5">@returns </span><span class="s2">{Object} </span><span class="s6">A flag-config-style config object. 
     */</span>
    <span class="s1">config(</span><span class="s2">eslintrcConfig</span><span class="s1">) {</span>
        <span class="s5">const </span><span class="s1">eslintrcArray </span><span class="s5">= </span><span class="s2">this</span><span class="s1">[</span><span class="s2">cafactory</span><span class="s1">].</span><span class="s3">create</span><span class="s1">(</span><span class="s2">eslintrcConfig</span><span class="s1">, {</span>
            <span class="s1">basePath: </span><span class="s2">this</span><span class="s1">.</span><span class="s2">baseDirectory</span>
        <span class="s1">});</span>

        <span class="s5">const </span><span class="s1">flatArray </span><span class="s5">= </span><span class="s1">[];</span>
        <span class="s5">let </span><span class="s1">hasIgnorePatterns </span><span class="s5">= </span><span class="s4">false</span><span class="s1">;</span>

        <span class="s2">eslintrcArray</span><span class="s1">.</span><span class="s3">forEach</span><span class="s1">(</span><span class="s2">configData </span><span class="s5">=&gt; </span><span class="s1">{</span>
            <span class="s5">if </span><span class="s1">(</span><span class="s2">configData</span><span class="s1">.</span><span class="s2">type </span><span class="s5">=== </span><span class="s0">&quot;config&quot;</span><span class="s1">) {</span>
                <span class="s2">hasIgnorePatterns </span><span class="s5">= </span><span class="s2">hasIgnorePatterns </span><span class="s5">|| </span><span class="s2">configData</span><span class="s1">.</span><span class="s2">ignorePattern</span><span class="s1">;</span>
                <span class="s2">flatArray</span><span class="s1">.</span><span class="s3">push</span><span class="s1">(</span><span class="s5">...</span><span class="s3">translateESLintRC</span><span class="s1">(</span><span class="s2">configData</span><span class="s1">, {</span>
                    <span class="s1">resolveConfigRelativeTo: </span><span class="s2">path__default</span><span class="s1">[</span><span class="s0">&quot;default&quot;</span><span class="s1">].</span><span class="s3">join</span><span class="s1">(</span><span class="s2">this</span><span class="s1">.</span><span class="s2">baseDirectory</span><span class="s1">, </span><span class="s0">&quot;__placeholder.js&quot;</span><span class="s1">),</span>
                    <span class="s1">resolvePluginsRelativeTo: </span><span class="s2">path__default</span><span class="s1">[</span><span class="s0">&quot;default&quot;</span><span class="s1">].</span><span class="s3">join</span><span class="s1">(</span><span class="s2">this</span><span class="s1">.</span><span class="s2">resolvePluginsRelativeTo</span><span class="s1">, </span><span class="s0">&quot;__placeholder.js&quot;</span><span class="s1">),</span>
                    <span class="s1">pluginEnvironments: </span><span class="s2">eslintrcArray</span><span class="s1">.</span><span class="s2">pluginEnvironments</span><span class="s1">,</span>
                    <span class="s1">pluginProcessors: </span><span class="s2">eslintrcArray</span><span class="s1">.</span><span class="s2">pluginProcessors</span>
                <span class="s1">}));</span>
            <span class="s1">}</span>
        <span class="s1">});</span>

        <span class="s6">// combine ignorePatterns to emulate ESLintRC behavior better</span>
        <span class="s5">if </span><span class="s1">(</span><span class="s2">hasIgnorePatterns</span><span class="s1">) {</span>
            <span class="s2">flatArray</span><span class="s1">.</span><span class="s3">unshift</span><span class="s1">({</span>
                <span class="s1">ignores: [</span><span class="s2">filePath </span><span class="s5">=&gt; </span><span class="s1">{</span>

                    <span class="s6">// Compute the final config for this file.</span>
                    <span class="s6">// This filters config array elements by `files`/`excludedFiles` then merges the elements.</span>
                    <span class="s5">const </span><span class="s1">finalConfig </span><span class="s5">= </span><span class="s2">eslintrcArray</span><span class="s1">.</span><span class="s3">extractConfig</span><span class="s1">(</span><span class="s2">filePath</span><span class="s1">);</span>

                    <span class="s6">// Test the `ignorePattern` properties of the final config.</span>
                    <span class="s5">return </span><span class="s3">Boolean</span><span class="s1">(</span><span class="s2">finalConfig</span><span class="s1">.</span><span class="s2">ignores</span><span class="s1">) </span><span class="s5">&amp;&amp; </span><span class="s2">finalConfig</span><span class="s1">.</span><span class="s3">ignores</span><span class="s1">(</span><span class="s2">filePath</span><span class="s1">);</span>
                <span class="s1">}]</span>
            <span class="s1">});</span>
        <span class="s1">}</span>

        <span class="s5">return </span><span class="s2">flatArray</span><span class="s1">;</span>
    <span class="s1">}</span>

    <span class="s6">/**</span>
     <span class="s6">* Translates the `env` section of an ESLintRC-style config. 
     * </span><span class="s5">@param </span><span class="s2">{Object} envConfig </span><span class="s6">The `env` section of an ESLintRC config. 
     * </span><span class="s5">@returns </span><span class="s2">{Object[]} </span><span class="s6">An array of flag-config objects representing the environments. 
     */</span>
    <span class="s1">env(</span><span class="s2">envConfig</span><span class="s1">) {</span>
        <span class="s5">return </span><span class="s2">this</span><span class="s1">.</span><span class="s3">config</span><span class="s1">({</span>
            <span class="s1">env: </span><span class="s2">envConfig</span>
        <span class="s1">});</span>
    <span class="s1">}</span>

    <span class="s6">/**</span>
     <span class="s6">* Translates the `extends` section of an ESLintRC-style config. 
     * </span><span class="s5">@param </span><span class="s2">{...string} configsToExtend </span><span class="s6">The names of the configs to load. 
     * </span><span class="s5">@returns </span><span class="s2">{Object[]} </span><span class="s6">An array of flag-config objects representing the config. 
     */</span>
    <span class="s1">extends(</span><span class="s5">...</span><span class="s2">configsToExtend</span><span class="s1">) {</span>
        <span class="s5">return </span><span class="s2">this</span><span class="s1">.</span><span class="s3">config</span><span class="s1">({</span>
            <span class="s1">extends: </span><span class="s2">configsToExtend</span>
        <span class="s1">});</span>
    <span class="s1">}</span>

    <span class="s6">/**</span>
     <span class="s6">* Translates the `plugins` section of an ESLintRC-style config. 
     * </span><span class="s5">@param </span><span class="s2">{...string} plugins </span><span class="s6">The names of the plugins to load. 
     * </span><span class="s5">@returns </span><span class="s2">{Object[]} </span><span class="s6">An array of flag-config objects representing the plugins. 
     */</span>
    <span class="s1">plugins(</span><span class="s5">...</span><span class="s2">plugins</span><span class="s1">) {</span>
        <span class="s5">return </span><span class="s2">this</span><span class="s1">.</span><span class="s3">config</span><span class="s1">({</span>
            <span class="s2">plugins</span>
        <span class="s1">});</span>
    <span class="s1">}</span>
<span class="s1">}</span>

<span class="s6">/**</span>
 <span class="s6">* </span><span class="s5">@fileoverview </span><span class="s6">Package exports for @eslint/eslintrc 
 * </span><span class="s5">@author </span><span class="s2">Nicholas C. Zakas 
 </span><span class="s6">*/</span>

<span class="s6">//-----------------------------------------------------------------------------</span>
<span class="s6">// Exports</span>
<span class="s6">//-----------------------------------------------------------------------------</span>

<span class="s2">const </span><span class="s1">Legacy </span><span class="s5">= </span><span class="s1">{</span>
    <span class="s2">ConfigArray</span><span class="s1">,</span>
    <span class="s1">createConfigArrayFactoryContext: </span><span class="s2">createContext</span><span class="s1">,</span>
    <span class="s2">CascadingConfigArrayFactory</span><span class="s1">,</span>
    <span class="s2">ConfigArrayFactory</span><span class="s1">,</span>
    <span class="s2">ConfigDependency</span><span class="s1">,</span>
    <span class="s2">ExtractedConfig</span><span class="s1">,</span>
    <span class="s2">IgnorePattern</span><span class="s1">,</span>
    <span class="s2">OverrideTester</span><span class="s1">,</span>
    <span class="s2">getUsedExtractedConfigs</span><span class="s1">,</span>
    <span class="s2">environments</span><span class="s1">,</span>

    <span class="s6">// shared</span>
    <span class="s2">ConfigOps</span><span class="s1">,</span>
    <span class="s2">ConfigValidator</span><span class="s1">,</span>
    <span class="s2">ModuleResolver</span><span class="s1">,</span>
    <span class="s2">naming</span>
<span class="s1">};</span>

<span class="s2">exports</span><span class="s1">.</span><span class="s2">FlatCompat </span><span class="s5">= </span><span class="s2">FlatCompat</span><span class="s1">;</span>
<span class="s2">exports</span><span class="s1">.</span><span class="s2">Legacy </span><span class="s5">= </span><span class="s2">Legacy</span><span class="s1">;</span>
<span class="s6">//# sourceMappingURL=eslintrc.cjs.map</span>
</pre>
</body>
</html>