<html>
<head>
<title>getAndroidProject.js.map</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<style type="text/css">
.s0 { color: #a9b7c6;}
.s1 { color: #6a8759;}
.s2 { color: #6897bb; font-style: italic;}
.s3 { color: #cc7832; font-style: italic;}
</style>
</head>
<body bgcolor="#2b2b2b">
<table CELLSPACING=0 CELLPADDING=5 COLS=1 WIDTH="100%" BGCOLOR="#606060" >
<tr><td><center>
<font face="Arial, Helvetica" color="#000000">
getAndroidProject.js.map</font>
</center></td></tr></table>
<pre><span class="s0">{</span><span class="s1">&quot;version&quot;</span><span class="s0">:</span><span class="s2">3</span><span class="s0">,</span><span class="s1">&quot;names&quot;</span><span class="s0">:[</span><span class="s1">&quot;getAndroidProject&quot;</span><span class="s0">,</span><span class="s1">&quot;config&quot;</span><span class="s0">,</span><span class="s1">&quot;androidProject&quot;</span><span class="s0">,</span><span class="s1">&quot;project&quot;</span><span class="s0">,</span><span class="s1">&quot;android&quot;</span><span class="s0">,</span><span class="s1">&quot;CLIError&quot;</span><span class="s0">,</span><span class="s1">&quot;discoverPackageName&quot;</span><span class="s0">,</span><span class="s1">&quot;manifestPath&quot;</span><span class="s0">,</span><span class="s1">&quot;buildGradlePath&quot;</span><span class="s0">,</span><span class="s1">&quot;androidManifest&quot;</span><span class="s0">,</span><span class="s1">&quot;fs&quot;</span><span class="s0">,</span><span class="s1">&quot;readFileSync&quot;</span><span class="s0">,</span><span class="s1">&quot;packageNameFromManifest&quot;</span><span class="s0">,</span><span class="s1">&quot;parsePackageNameFromAndroidManifestFile&quot;</span><span class="s0">,</span><span class="s1">&quot;buildGradle&quot;</span><span class="s0">,</span><span class="s1">&quot;namespace&quot;</span><span class="s0">,</span><span class="s1">&quot;parseNamespaceFromBuildGradleFile&quot;</span><span class="s0">,</span><span class="s1">&quot;chalk&quot;</span><span class="s0">,</span><span class="s1">&quot;underline&quot;</span><span class="s0">,</span><span class="s1">&quot;dim&quot;</span><span class="s0">,</span><span class="s1">&quot;getPackageName&quot;</span><span class="s0">,</span><span class="s1">&quot;packageName&quot;</span><span class="s0">,</span><span class="s1">&quot;validatePackageName&quot;</span><span class="s0">,</span><span class="s1">&quot;logger&quot;</span><span class="s0">,</span><span class="s1">&quot;warn&quot;</span><span class="s0">,</span><span class="s1">&quot;bgRed&quot;</span><span class="s0">,</span><span class="s1">&quot;matchArray&quot;</span><span class="s0">,</span><span class="s1">&quot;match&quot;</span><span class="s0">,</span><span class="s1">&quot;length&quot;</span><span class="s0">,</span><span class="s1">&quot;test&quot;</span><span class="s0">],</span><span class="s1">&quot;sources&quot;</span><span class="s0">:[</span><span class="s1">&quot;../../src/config/getAndroidProject.ts&quot;</span><span class="s0">],</span><span class="s1">&quot;sourcesContent&quot;</span><span class="s0">:[</span><span class="s1">&quot;import {Config} from '@react-native-community/cli-types';</span><span class="s3">\n</span><span class="s1">import {logger, CLIError} from '@react-native-community/cli-tools';</span><span class="s3">\n</span><span class="s1">import fs from 'fs';</span><span class="s3">\n</span><span class="s1">import chalk from 'chalk';</span><span class="s3">\n\n</span><span class="s1">export function getAndroidProject(config: Config) {</span><span class="s3">\n  </span><span class="s1">const androidProject = config.project.android;</span><span class="s3">\n\n  </span><span class="s1">if (!androidProject) {</span><span class="s3">\n    </span><span class="s1">throw new CLIError(`</span><span class="s3">\n      </span><span class="s1">Android project not found. Are you sure this is a React Native project?</span><span class="s3">\n      </span><span class="s1">If your Android files are located in a non-standard location (e.g. not inside 'android' folder), consider setting</span><span class="s3">\n      \\</span><span class="s1">`project.android.sourceDir</span><span class="s3">\\</span><span class="s1">` option to point to a new location.</span><span class="s3">\n    </span><span class="s1">`);</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">return androidProject;</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">/**</span><span class="s3">\n </span><span class="s1">* Util function to discover the package name from either the Manifest file or the build.gradle file.</span><span class="s3">\n </span><span class="s1">* @param manifestPath The path to the AndroidManifest.xml</span><span class="s3">\n </span><span class="s1">* @param buildGradlePath The path to the build.gradle[.kts] file.</span><span class="s3">\n </span><span class="s1">*/</span><span class="s3">\n</span><span class="s1">function discoverPackageName(</span><span class="s3">\n  </span><span class="s1">manifestPath: string | null,</span><span class="s3">\n  </span><span class="s1">buildGradlePath: string | null,</span><span class="s3">\n</span><span class="s1">) {</span><span class="s3">\n  </span><span class="s1">if (manifestPath) {</span><span class="s3">\n    </span><span class="s1">const androidManifest = fs.readFileSync(manifestPath, 'utf8');</span><span class="s3">\n    </span><span class="s1">const packageNameFromManifest = parsePackageNameFromAndroidManifestFile(</span><span class="s3">\n      </span><span class="s1">androidManifest,</span><span class="s3">\n    </span><span class="s1">);</span><span class="s3">\n    </span><span class="s1">// We got the package from the AndroidManifest.xml</span><span class="s3">\n    </span><span class="s1">if (packageNameFromManifest) {</span><span class="s3">\n      </span><span class="s1">return packageNameFromManifest;</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">if (buildGradlePath) {</span><span class="s3">\n    </span><span class="s1">// We didn't get the package from the AndroidManifest.xml,</span><span class="s3">\n    </span><span class="s1">// so we'll try to get it from the build.gradle[.kts] file</span><span class="s3">\n    </span><span class="s1">// via the namespace field.</span><span class="s3">\n    </span><span class="s1">const buildGradle = fs.readFileSync(buildGradlePath, 'utf8');</span><span class="s3">\n    </span><span class="s1">const namespace = parseNamespaceFromBuildGradleFile(buildGradle);</span><span class="s3">\n    </span><span class="s1">if (namespace) {</span><span class="s3">\n      </span><span class="s1">return namespace;</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">throw new CLIError(</span><span class="s3">\n    </span><span class="s1">`Failed to build the app: No package name found. </span><span class="s3">\n    </span><span class="s1">We couldn't parse the namespace from neither your build.gradle[.kts] file at ${chalk.underline.dim(</span><span class="s3">\n      </span><span class="s1">`${buildGradlePath}`,</span><span class="s3">\n    </span><span class="s1">)} </span><span class="s3">\n    </span><span class="s1">nor your package in the AndroidManifest at ${chalk.underline.dim(</span><span class="s3">\n      </span><span class="s1">`${manifestPath}`,</span><span class="s3">\n    </span><span class="s1">)}</span><span class="s3">\n    </span><span class="s1">`,</span><span class="s3">\n  </span><span class="s1">);</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">/**</span><span class="s3">\n </span><span class="s1">* Get the package name/namespace of the running React Native app</span><span class="s3">\n </span><span class="s1">* @param manifestPath The path to the AndroidManifest.xml</span><span class="s3">\n </span><span class="s1">* @param buildGradlePath The path to the build.gradle[.kts] file.</span><span class="s3">\n </span><span class="s1">*/</span><span class="s3">\n</span><span class="s1">export function getPackageName(</span><span class="s3">\n  </span><span class="s1">manifestPath: string | null,</span><span class="s3">\n  </span><span class="s1">buildGradlePath: string | null,</span><span class="s3">\n</span><span class="s1">) {</span><span class="s3">\n  </span><span class="s1">let packageName = discoverPackageName(manifestPath, buildGradlePath);</span><span class="s3">\n  </span><span class="s1">if (!validatePackageName(packageName)) {</span><span class="s3">\n    </span><span class="s1">logger.warn(</span><span class="s3">\n      </span><span class="s1">`Invalid application's package name </span><span class="s3">\&quot;</span><span class="s1">${chalk.bgRed(</span><span class="s3">\n        </span><span class="s1">packageName,</span><span class="s3">\n      </span><span class="s1">)}</span><span class="s3">\&quot; </span><span class="s1">in either 'AndroidManifest.xml' or 'build.gradle'. Read guidelines for setting the package name here: ${chalk.underline.dim(</span><span class="s3">\n        </span><span class="s1">'https://developer.android.com/studio/build/application-id',</span><span class="s3">\n      </span><span class="s1">)}`,</span><span class="s3">\n    </span><span class="s1">);</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">return packageName;</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">export function parsePackageNameFromAndroidManifestFile(</span><span class="s3">\n  </span><span class="s1">androidManifest: string,</span><span class="s3">\n</span><span class="s1">) {</span><span class="s3">\n  </span><span class="s1">const matchArray = androidManifest.match(/package=</span><span class="s3">\&quot;</span><span class="s1">(.+?)</span><span class="s3">\&quot;</span><span class="s1">/);</span><span class="s3">\n  </span><span class="s1">if (matchArray &amp;&amp; matchArray.length &gt; 0) {</span><span class="s3">\n    </span><span class="s1">return matchArray[1];</span><span class="s3">\n  </span><span class="s1">} else {</span><span class="s3">\n    </span><span class="s1">return null;</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">export function parseNamespaceFromBuildGradleFile(buildGradle: string) {</span><span class="s3">\n  </span><span class="s1">// search for namespace = inside the build.gradle file via regex</span><span class="s3">\n  </span><span class="s1">const matchArray = buildGradle.match(/namespace</span><span class="s3">\\</span><span class="s1">s*[=]*</span><span class="s3">\\</span><span class="s1">s*[</span><span class="s3">\&quot;</span><span class="s1">'](.+?)[</span><span class="s3">\&quot;</span><span class="s1">']/);</span><span class="s3">\n  </span><span class="s1">if (matchArray &amp;&amp; matchArray.length &gt; 0) {</span><span class="s3">\n    </span><span class="s1">return matchArray[1];</span><span class="s3">\n  </span><span class="s1">} else {</span><span class="s3">\n    </span><span class="s1">return null;</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">// Validates that the package name is correct</span><span class="s3">\n</span><span class="s1">export function validatePackageName(packageName: string) {</span><span class="s3">\n  </span><span class="s1">return /^[a-z][a-z0-9_]*(</span><span class="s3">\\</span><span class="s1">.[a-z][a-z0-9_]*)+$/i.test(packageName);</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n</span><span class="s1">&quot;</span><span class="s0">],</span><span class="s1">&quot;mappings&quot;</span><span class="s0">:</span><span class="s1">&quot;;;;;;;;;;;AACA;EAAA;EAAA;IAAA;EAAA;EAAA;AAAA;AACA;EAAA;EAAA;IAAA;EAAA;EAAA;AAAA;AACA;EAAA;EAAA;IAAA;EAAA;EAAA;AAAA;AAA0B;AAEnB,SAASA,iBAAiB,CAACC,MAAc,EAAE;EAChD,MAAMC,cAAc,GAAGD,MAAM,CAACE,OAAO,CAACC,OAAO;EAE7C,IAAI,CAACF,cAAc,EAAE;IACnB,MAAM,KAAIG,oBAAQ,EAAE;AACxB;AACA;AACA;AACA,KAAK,CAAC;EACJ;EACA,OAAOH,cAAc;AACvB;;AAEA;AACA;AACA;AACA;AACA;AACA,SAASI,mBAAmB,CAC1BC,YAA2B,EAC3BC,eAA8B,EAC9B;EACA,IAAID,YAAY,EAAE;IAChB,MAAME,eAAe,GAAGC,aAAE,CAACC,YAAY,CAACJ,YAAY,EAAE,MAAM,CAAC;IAC7D,MAAMK,uBAAuB,GAAGC,uCAAuC,CACrEJ,eAAe,CAChB;IACD;IACA,IAAIG,uBAAuB,EAAE;MAC3B,OAAOA,uBAAuB;IAChC;EACF;EAEA,IAAIJ,eAAe,EAAE;IACnB;IACA;IACA;IACA,MAAMM,WAAW,GAAGJ,aAAE,CAACC,YAAY,CAACH,eAAe,EAAE,MAAM,CAAC;IAC5D,MAAMO,SAAS,GAAGC,iCAAiC,CAACF,WAAW,CAAC;IAChE,IAAIC,SAAS,EAAE;MACb,OAAOA,SAAS;IAClB;EACF;EAEA,MAAM,KAAIV,oBAAQ,EACf;AACL,mFAAmFY,gBAAK,CAACC,SAAS,CAACC,GAAG,CAC/F,GAAEX,eAAgB,EAAC,CACpB;AACN,iDAAiDS,gBAAK,CAACC,SAAS,CAACC,GAAG,CAC7D,GAAEZ,YAAa,EAAC,CACjB;AACN,KAAK,CACF;AACH;;AAEA;AACA;AACA;AACA;AACA;AACO,SAASa,cAAc,CAC5Bb,YAA2B,EAC3BC,eAA8B,EAC9B;EACA,IAAIa,WAAW,GAAGf,mBAAmB,CAACC,YAAY,EAAEC,eAAe,CAAC;EACpE,IAAI,CAACc,mBAAmB,CAACD,WAAW,CAAC,EAAE;IACrCE,kBAAM,CAACC,IAAI,CACR,uCAAsCP,gBAAK,CAACQ,KAAK,CAChDJ,WAAW,CACX,2GAA0GJ,gBAAK,CAACC,SAAS,CAACC,GAAG,CAC7H,2DAA2D,CAC3D,EAAC,CACJ;EACH;EACA,OAAOE,WAAW;AACpB;AAEO,SAASR,uCAAuC,CACrDJ,eAAuB,EACvB;EACA,MAAMiB,UAAU,GAAGjB,eAAe,CAACkB,KAAK,CAAC,iBAAiB,CAAC;EAC3D,IAAID,UAAU,IAAIA,UAAU,CAACE,MAAM,GAAG,CAAC,EAAE;IACvC,OAAOF,UAAU,CAAC,CAAC,CAAC;EACtB,CAAC,MAAM;IACL,OAAO,IAAI;EACb;AACF;AAEO,SAASV,iCAAiC,CAACF,WAAmB,EAAE;EACrE;EACA,MAAMY,UAAU,GAAGZ,WAAW,CAACa,KAAK,CAAC,kCAAkC,CAAC;EACxE,IAAID,UAAU,IAAIA,UAAU,CAACE,MAAM,GAAG,CAAC,EAAE;IACvC,OAAOF,UAAU,CAAC,CAAC,CAAC;EACtB,CAAC,MAAM;IACL,OAAO,IAAI;EACb;AACF;;AAEA;AACO,SAASJ,mBAAmB,CAACD,WAAmB,EAAE;EACvD,OAAO,wCAAwC,CAACQ,IAAI,CAACR,WAAW,CAAC;AACnE&quot;</span><span class="s0">}</span></pre>
</body>
</html>