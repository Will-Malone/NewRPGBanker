<html>
<head>
<title>TextAttributeProps.java</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<style type="text/css">
.s0 { color: #808080;}
.s1 { color: #a9b7c6;}
.s2 { color: #cc7832;}
.s3 { color: #6897bb;}
.s4 { color: #6a8759;}
.s5 { color: #629755; font-style: italic;}
.s6 { color: #77b767; font-style: italic;}
.s7 { color: #629755; font-weight: bold; font-style: italic;}
</style>
</head>
<body bgcolor="#2b2b2b">
<table CELLSPACING=0 CELLPADDING=5 COLS=1 WIDTH="100%" BGCOLOR="#606060" >
<tr><td><center>
<font face="Arial, Helvetica" color="#000000">
TextAttributeProps.java</font>
</center></td></tr></table>
<pre><span class="s0">/* 
 * Copyright (c) Meta Platforms, Inc. and affiliates. 
 * 
 * This source code is licensed under the MIT license found in the 
 * LICENSE file in the root directory of this source tree. 
 */</span>

<span class="s2">package </span><span class="s1">com.facebook.react.views.text</span><span class="s2">;</span>

<span class="s2">import </span><span class="s1">android.os.Build</span><span class="s2">;</span>
<span class="s2">import </span><span class="s1">android.text.Layout</span><span class="s2">;</span>
<span class="s2">import </span><span class="s1">android.text.TextUtils</span><span class="s2">;</span>
<span class="s2">import </span><span class="s1">android.util.LayoutDirection</span><span class="s2">;</span>
<span class="s2">import </span><span class="s1">android.view.Gravity</span><span class="s2">;</span>
<span class="s2">import </span><span class="s1">androidx.annotation.Nullable</span><span class="s2">;</span>
<span class="s2">import </span><span class="s1">com.facebook.common.logging.FLog</span><span class="s2">;</span>
<span class="s2">import </span><span class="s1">com.facebook.react.bridge.ReadableArray</span><span class="s2">;</span>
<span class="s2">import </span><span class="s1">com.facebook.react.bridge.ReadableMap</span><span class="s2">;</span>
<span class="s2">import </span><span class="s1">com.facebook.react.common.ReactConstants</span><span class="s2">;</span>
<span class="s2">import </span><span class="s1">com.facebook.react.common.mapbuffer.MapBuffer</span><span class="s2">;</span>
<span class="s2">import </span><span class="s1">com.facebook.react.uimanager.PixelUtil</span><span class="s2">;</span>
<span class="s2">import </span><span class="s1">com.facebook.react.uimanager.ReactAccessibilityDelegate</span><span class="s2">;</span>
<span class="s2">import </span><span class="s1">com.facebook.react.uimanager.ReactStylesDiffMap</span><span class="s2">;</span>
<span class="s2">import </span><span class="s1">com.facebook.react.uimanager.ViewProps</span><span class="s2">;</span>
<span class="s2">import </span><span class="s1">java.util.ArrayList</span><span class="s2">;</span>
<span class="s2">import </span><span class="s1">java.util.Iterator</span><span class="s2">;</span>
<span class="s2">import </span><span class="s1">java.util.List</span><span class="s2">;</span>

<span class="s0">// TODO: T63643819 refactor naming of TextAttributeProps to make explicit that this represents</span>
<span class="s0">// TextAttributes and not TextProps. As part of this refactor extract methods that don't belong to</span>
<span class="s0">// TextAttributeProps (e.g. TextAlign)</span>
<span class="s2">public class </span><span class="s1">TextAttributeProps {</span>

  <span class="s0">// constants for Text Attributes serialization</span>
  <span class="s2">public static final short </span><span class="s1">TA_KEY_FOREGROUND_COLOR = </span><span class="s3">0</span><span class="s2">;</span>
  <span class="s2">public static final short </span><span class="s1">TA_KEY_BACKGROUND_COLOR = </span><span class="s3">1</span><span class="s2">;</span>
  <span class="s2">public static final short </span><span class="s1">TA_KEY_OPACITY = </span><span class="s3">2</span><span class="s2">;</span>
  <span class="s2">public static final short </span><span class="s1">TA_KEY_FONT_FAMILY = </span><span class="s3">3</span><span class="s2">;</span>
  <span class="s2">public static final short </span><span class="s1">TA_KEY_FONT_SIZE = </span><span class="s3">4</span><span class="s2">;</span>
  <span class="s2">public static final short </span><span class="s1">TA_KEY_FONT_SIZE_MULTIPLIER = </span><span class="s3">5</span><span class="s2">;</span>
  <span class="s2">public static final short </span><span class="s1">TA_KEY_FONT_WEIGHT = </span><span class="s3">6</span><span class="s2">;</span>
  <span class="s2">public static final short </span><span class="s1">TA_KEY_FONT_STYLE = </span><span class="s3">7</span><span class="s2">;</span>
  <span class="s2">public static final short </span><span class="s1">TA_KEY_FONT_VARIANT = </span><span class="s3">8</span><span class="s2">;</span>
  <span class="s2">public static final short </span><span class="s1">TA_KEY_ALLOW_FONT_SCALING = </span><span class="s3">9</span><span class="s2">;</span>
  <span class="s2">public static final short </span><span class="s1">TA_KEY_LETTER_SPACING = </span><span class="s3">10</span><span class="s2">;</span>
  <span class="s2">public static final short </span><span class="s1">TA_KEY_LINE_HEIGHT = </span><span class="s3">11</span><span class="s2">;</span>
  <span class="s2">public static final short </span><span class="s1">TA_KEY_ALIGNMENT = </span><span class="s3">12</span><span class="s2">;</span>
  <span class="s2">public static final short </span><span class="s1">TA_KEY_BEST_WRITING_DIRECTION = </span><span class="s3">13</span><span class="s2">;</span>
  <span class="s2">public static final short </span><span class="s1">TA_KEY_TEXT_DECORATION_COLOR = </span><span class="s3">14</span><span class="s2">;</span>
  <span class="s2">public static final short </span><span class="s1">TA_KEY_TEXT_DECORATION_LINE = </span><span class="s3">15</span><span class="s2">;</span>
  <span class="s2">public static final short </span><span class="s1">TA_KEY_TEXT_DECORATION_STYLE = </span><span class="s3">16</span><span class="s2">;</span>
  <span class="s2">public static final short </span><span class="s1">TA_KEY_TEXT_SHADOW_RADIUS = </span><span class="s3">18</span><span class="s2">;</span>
  <span class="s2">public static final short </span><span class="s1">TA_KEY_TEXT_SHADOW_COLOR = </span><span class="s3">19</span><span class="s2">;</span>
  <span class="s2">public static final short </span><span class="s1">TA_KEY_IS_HIGHLIGHTED = </span><span class="s3">20</span><span class="s2">;</span>
  <span class="s2">public static final short </span><span class="s1">TA_KEY_LAYOUT_DIRECTION = </span><span class="s3">21</span><span class="s2">;</span>
  <span class="s2">public static final short </span><span class="s1">TA_KEY_ACCESSIBILITY_ROLE = </span><span class="s3">22</span><span class="s2">;</span>

  <span class="s2">public static final int </span><span class="s1">UNSET = -</span><span class="s3">1</span><span class="s2">;</span>

  <span class="s2">private static final </span><span class="s1">String PROP_SHADOW_OFFSET = </span><span class="s4">&quot;textShadowOffset&quot;</span><span class="s2">;</span>
  <span class="s2">private static final </span><span class="s1">String PROP_SHADOW_OFFSET_WIDTH = </span><span class="s4">&quot;width&quot;</span><span class="s2">;</span>
  <span class="s2">private static final </span><span class="s1">String PROP_SHADOW_OFFSET_HEIGHT = </span><span class="s4">&quot;height&quot;</span><span class="s2">;</span>
  <span class="s2">private static final </span><span class="s1">String PROP_SHADOW_RADIUS = </span><span class="s4">&quot;textShadowRadius&quot;</span><span class="s2">;</span>
  <span class="s2">private static final </span><span class="s1">String PROP_SHADOW_COLOR = </span><span class="s4">&quot;textShadowColor&quot;</span><span class="s2">;</span>

  <span class="s2">private static final </span><span class="s1">String PROP_TEXT_TRANSFORM = </span><span class="s4">&quot;textTransform&quot;</span><span class="s2">;</span>

  <span class="s2">private static final int </span><span class="s1">DEFAULT_TEXT_SHADOW_COLOR = </span><span class="s3">0x55000000</span><span class="s2">;</span>
  <span class="s2">private static final int </span><span class="s1">DEFAULT_JUSTIFICATION_MODE =</span>
      <span class="s1">(Build.VERSION.SDK_INT &lt; Build.VERSION_CODES.O) ? </span><span class="s3">0 </span><span class="s1">: Layout.JUSTIFICATION_MODE_NONE</span><span class="s2">;</span>
  <span class="s2">private static final int </span><span class="s1">DEFAULT_BREAK_STRATEGY =</span>
      <span class="s1">(Build.VERSION.SDK_INT &lt; Build.VERSION_CODES.M) ? </span><span class="s3">0 </span><span class="s1">: Layout.BREAK_STRATEGY_HIGH_QUALITY</span><span class="s2">;</span>
  <span class="s2">private static final int </span><span class="s1">DEFAULT_HYPHENATION_FREQUENCY =</span>
      <span class="s1">(Build.VERSION.SDK_INT &lt; Build.VERSION_CODES.M) ? </span><span class="s3">0 </span><span class="s1">: Layout.HYPHENATION_FREQUENCY_NONE</span><span class="s2">;</span>

  <span class="s2">protected float </span><span class="s1">mLineHeight = Float.NaN</span><span class="s2">;</span>
  <span class="s2">protected boolean </span><span class="s1">mIsColorSet = </span><span class="s2">false;</span>
  <span class="s2">protected boolean </span><span class="s1">mAllowFontScaling = </span><span class="s2">true;</span>
  <span class="s2">protected int </span><span class="s1">mColor</span><span class="s2">;</span>
  <span class="s2">protected boolean </span><span class="s1">mIsBackgroundColorSet = </span><span class="s2">false;</span>
  <span class="s2">protected int </span><span class="s1">mBackgroundColor</span><span class="s2">;</span>

  <span class="s2">protected int </span><span class="s1">mNumberOfLines = UNSET</span><span class="s2">;</span>
  <span class="s2">protected int </span><span class="s1">mFontSize = UNSET</span><span class="s2">;</span>
  <span class="s2">protected float </span><span class="s1">mFontSizeInput = UNSET</span><span class="s2">;</span>
  <span class="s2">protected float </span><span class="s1">mLineHeightInput = UNSET</span><span class="s2">;</span>
  <span class="s2">protected float </span><span class="s1">mLetterSpacingInput = Float.NaN</span><span class="s2">;</span>
  <span class="s2">protected int </span><span class="s1">mTextAlign = Gravity.NO_GRAVITY</span><span class="s2">;</span>

  <span class="s0">// `UNSET` is -1 and is the same as `LayoutDirection.UNDEFINED` but the symbol isn't available.</span>
  <span class="s2">protected int </span><span class="s1">mLayoutDirection = UNSET</span><span class="s2">;</span>

  <span class="s2">protected </span><span class="s1">TextTransform mTextTransform = TextTransform.NONE</span><span class="s2">;</span>

  <span class="s2">protected float </span><span class="s1">mTextShadowOffsetDx = </span><span class="s3">0</span><span class="s2">;</span>
  <span class="s2">protected float </span><span class="s1">mTextShadowOffsetDy = </span><span class="s3">0</span><span class="s2">;</span>
  <span class="s2">protected float </span><span class="s1">mTextShadowRadius = </span><span class="s3">1</span><span class="s2">;</span>
  <span class="s2">protected int </span><span class="s1">mTextShadowColor = DEFAULT_TEXT_SHADOW_COLOR</span><span class="s2">;</span>

  <span class="s2">protected boolean </span><span class="s1">mIsUnderlineTextDecorationSet = </span><span class="s2">false;</span>
  <span class="s2">protected boolean </span><span class="s1">mIsLineThroughTextDecorationSet = </span><span class="s2">false;</span>
  <span class="s2">protected boolean </span><span class="s1">mIncludeFontPadding = </span><span class="s2">true;</span>

  <span class="s2">protected </span><span class="s1">@Nullable ReactAccessibilityDelegate.AccessibilityRole mAccessibilityRole = </span><span class="s2">null;</span>
  <span class="s2">protected boolean </span><span class="s1">mIsAccessibilityRoleSet = </span><span class="s2">false;</span>
  <span class="s2">protected boolean </span><span class="s1">mIsAccessibilityLink = </span><span class="s2">false;</span>

  <span class="s2">protected int </span><span class="s1">mFontStyle = UNSET</span><span class="s2">;</span>
  <span class="s2">protected int </span><span class="s1">mFontWeight = UNSET</span><span class="s2">;</span>
  <span class="s5">/**</span>
   <span class="s5">* NB: If a font family is used that does not have a style in a certain Android version (ie.</span>
   <span class="s5">* monospace bold pre Android 5.0), that style (ie. bold) will not be inherited by nested Text</span>
   <span class="s5">* nodes. To retain that style, you have to add it to those nodes explicitly.</span>
   <span class="s5">*</span>
   <span class="s5">* </span><span class="s6">&lt;p&gt;</span><span class="s5">Example, Android 4.4:</span>
   <span class="s5">*</span>
   <span class="s5">* </span><span class="s6">&lt;pre&gt;</span>
   <span class="s5">* </span><span class="s6">&lt;Text style=</span><span class="s5">{{fontFamily=&quot;serif&quot; fontWeight=&quot;bold&quot;}}&gt;Bold Text</span><span class="s6">&lt;/Text&gt;</span>
   <span class="s5">*   </span><span class="s6">&lt;Text style=</span><span class="s5">{{fontFamily=&quot;sans-serif&quot;}}&gt;Bold Text</span><span class="s6">&lt;/Text&gt;</span>
   <span class="s5">*     </span><span class="s6">&lt;Text style=</span><span class="s5">{{fontFamily=&quot;serif}}&gt;Bold Text</span><span class="s6">&lt;/Text&gt;</span>
   <span class="s5">*</span>
   <span class="s5">* </span><span class="s6">&lt;Text style=</span><span class="s5">{{fontFamily=&quot;monospace&quot; fontWeight=&quot;bold&quot;}}&gt;Not Bold Text</span><span class="s6">&lt;/Text&gt;</span>
   <span class="s5">*   </span><span class="s6">&lt;Text style=</span><span class="s5">{{fontFamily=&quot;sans-serif&quot;}}&gt;Not Bold Text</span><span class="s6">&lt;/Text&gt;</span>
   <span class="s5">*     </span><span class="s6">&lt;Text style=</span><span class="s5">{{fontFamily=&quot;serif}}&gt;Not Bold Text</span><span class="s6">&lt;/Text&gt;</span>
   <span class="s5">*</span>
   <span class="s5">* </span><span class="s6">&lt;Text style=</span><span class="s5">{{fontFamily=&quot;monospace&quot; fontWeight=&quot;bold&quot;}}&gt;Not Bold Text</span><span class="s6">&lt;/Text&gt;</span>
   <span class="s5">*   </span><span class="s6">&lt;Text style=</span><span class="s5">{{fontFamily=&quot;sans-serif&quot; fontWeight=&quot;bold&quot;}}&gt;Bold Text</span><span class="s6">&lt;/Text&gt;</span>
   <span class="s5">*     </span><span class="s6">&lt;Text style=</span><span class="s5">{{fontFamily=&quot;serif}}&gt;Bold Text</span><span class="s6">&lt;/Text&gt;</span>
   <span class="s5">* </span><span class="s6">&lt;/pre&gt;</span>
   <span class="s5">*/</span>
  <span class="s2">protected </span><span class="s1">@Nullable String mFontFamily = </span><span class="s2">null;</span>

  <span class="s5">/** </span><span class="s7">@see </span><span class="s5">android.graphics.Paint#setFontFeatureSettings */</span>
  <span class="s2">protected </span><span class="s1">@Nullable String mFontFeatureSettings = </span><span class="s2">null;</span>

  <span class="s2">protected boolean </span><span class="s1">mContainsImages = </span><span class="s2">false;</span>
  <span class="s2">protected float </span><span class="s1">mHeightOfTallestInlineImage = Float.NaN</span><span class="s2">;</span>

  <span class="s2">private </span><span class="s1">TextAttributeProps() {}</span>

  <span class="s5">/** Build a TextAttributeProps using data from the {</span><span class="s7">@link </span><span class="s5">MapBuffer} received as a parameter. */</span>
  <span class="s2">public static </span><span class="s1">TextAttributeProps fromMapBuffer(MapBuffer props) {</span>
    <span class="s1">TextAttributeProps result = </span><span class="s2">new </span><span class="s1">TextAttributeProps()</span><span class="s2">;</span>

    <span class="s0">// TODO T83483191: Review constants that are not being set!</span>
    <span class="s1">Iterator&lt;MapBuffer.Entry&gt; iterator = props.iterator()</span><span class="s2">;</span>
    <span class="s2">while </span><span class="s1">(iterator.hasNext()) {</span>
      <span class="s1">MapBuffer.Entry entry = iterator.next()</span><span class="s2">;</span>
      <span class="s2">switch </span><span class="s1">(entry.getKey()) {</span>
        <span class="s2">case </span><span class="s1">TA_KEY_FOREGROUND_COLOR:</span>
          <span class="s1">result.setColor(entry.getIntValue())</span><span class="s2">;</span>
          <span class="s2">break;</span>
        <span class="s2">case </span><span class="s1">TA_KEY_BACKGROUND_COLOR:</span>
          <span class="s1">result.setBackgroundColor(entry.getIntValue())</span><span class="s2">;</span>
          <span class="s2">break;</span>
        <span class="s2">case </span><span class="s1">TA_KEY_OPACITY:</span>
          <span class="s2">break;</span>
        <span class="s2">case </span><span class="s1">TA_KEY_FONT_FAMILY:</span>
          <span class="s1">result.setFontFamily(entry.getStringValue())</span><span class="s2">;</span>
          <span class="s2">break;</span>
        <span class="s2">case </span><span class="s1">TA_KEY_FONT_SIZE:</span>
          <span class="s1">result.setFontSize((</span><span class="s2">float</span><span class="s1">) entry.getDoubleValue())</span><span class="s2">;</span>
          <span class="s2">break;</span>
        <span class="s2">case </span><span class="s1">TA_KEY_FONT_SIZE_MULTIPLIER:</span>
          <span class="s2">break;</span>
        <span class="s2">case </span><span class="s1">TA_KEY_FONT_WEIGHT:</span>
          <span class="s1">result.setFontWeight(entry.getStringValue())</span><span class="s2">;</span>
          <span class="s2">break;</span>
        <span class="s2">case </span><span class="s1">TA_KEY_FONT_STYLE:</span>
          <span class="s1">result.setFontStyle(entry.getStringValue())</span><span class="s2">;</span>
          <span class="s2">break;</span>
        <span class="s2">case </span><span class="s1">TA_KEY_FONT_VARIANT:</span>
          <span class="s1">result.setFontVariant(entry.getMapBufferValue())</span><span class="s2">;</span>
          <span class="s2">break;</span>
        <span class="s2">case </span><span class="s1">TA_KEY_ALLOW_FONT_SCALING:</span>
          <span class="s1">result.setAllowFontScaling(entry.getBooleanValue())</span><span class="s2">;</span>
          <span class="s2">break;</span>
        <span class="s2">case </span><span class="s1">TA_KEY_LETTER_SPACING:</span>
          <span class="s1">result.setLetterSpacing((</span><span class="s2">float</span><span class="s1">) entry.getDoubleValue())</span><span class="s2">;</span>
          <span class="s2">break;</span>
        <span class="s2">case </span><span class="s1">TA_KEY_LINE_HEIGHT:</span>
          <span class="s1">result.setLineHeight((</span><span class="s2">float</span><span class="s1">) entry.getDoubleValue())</span><span class="s2">;</span>
          <span class="s2">break;</span>
        <span class="s2">case </span><span class="s1">TA_KEY_ALIGNMENT:</span>
          <span class="s2">break;</span>
        <span class="s2">case </span><span class="s1">TA_KEY_BEST_WRITING_DIRECTION:</span>
          <span class="s2">break;</span>
        <span class="s2">case </span><span class="s1">TA_KEY_TEXT_DECORATION_COLOR:</span>
          <span class="s2">break;</span>
        <span class="s2">case </span><span class="s1">TA_KEY_TEXT_DECORATION_LINE:</span>
          <span class="s1">result.setTextDecorationLine(entry.getStringValue())</span><span class="s2">;</span>
          <span class="s2">break;</span>
        <span class="s2">case </span><span class="s1">TA_KEY_TEXT_DECORATION_STYLE:</span>
          <span class="s2">break;</span>
        <span class="s2">case </span><span class="s1">TA_KEY_TEXT_SHADOW_RADIUS:</span>
          <span class="s1">result.setTextShadowRadius((</span><span class="s2">float</span><span class="s1">) entry.getDoubleValue())</span><span class="s2">;</span>
          <span class="s2">break;</span>
        <span class="s2">case </span><span class="s1">TA_KEY_TEXT_SHADOW_COLOR:</span>
          <span class="s1">result.setTextShadowColor(entry.getIntValue())</span><span class="s2">;</span>
          <span class="s2">break;</span>
        <span class="s2">case </span><span class="s1">TA_KEY_IS_HIGHLIGHTED:</span>
          <span class="s2">break;</span>
        <span class="s2">case </span><span class="s1">TA_KEY_LAYOUT_DIRECTION:</span>
          <span class="s1">result.setLayoutDirection(entry.getStringValue())</span><span class="s2">;</span>
          <span class="s2">break;</span>
        <span class="s2">case </span><span class="s1">TA_KEY_ACCESSIBILITY_ROLE:</span>
          <span class="s1">result.setAccessibilityRole(entry.getStringValue())</span><span class="s2">;</span>
          <span class="s2">break;</span>
      <span class="s1">}</span>
    <span class="s1">}</span>

    <span class="s0">// TODO T83483191: Review why the following props are not serialized:</span>
    <span class="s0">// setNumberOfLines</span>
    <span class="s0">// setColor</span>
    <span class="s0">// setIncludeFontPadding</span>
    <span class="s0">// setTextShadowOffset</span>
    <span class="s0">// setTextTransform</span>
    <span class="s2">return </span><span class="s1">result</span><span class="s2">;</span>
  <span class="s1">}</span>

  <span class="s2">public static </span><span class="s1">TextAttributeProps fromReadableMap(ReactStylesDiffMap props) {</span>
    <span class="s1">TextAttributeProps result = </span><span class="s2">new </span><span class="s1">TextAttributeProps()</span><span class="s2">;</span>
    <span class="s1">result.setNumberOfLines(getIntProp(props</span><span class="s2">, </span><span class="s1">ViewProps.NUMBER_OF_LINES</span><span class="s2">, </span><span class="s1">UNSET))</span><span class="s2">;</span>
    <span class="s1">result.setLineHeight(getFloatProp(props</span><span class="s2">, </span><span class="s1">ViewProps.LINE_HEIGHT</span><span class="s2">, </span><span class="s1">UNSET))</span><span class="s2">;</span>
    <span class="s1">result.setLetterSpacing(getFloatProp(props</span><span class="s2">, </span><span class="s1">ViewProps.LETTER_SPACING</span><span class="s2">, </span><span class="s1">Float.NaN))</span><span class="s2">;</span>
    <span class="s1">result.setAllowFontScaling(getBooleanProp(props</span><span class="s2">, </span><span class="s1">ViewProps.ALLOW_FONT_SCALING</span><span class="s2">, true</span><span class="s1">))</span><span class="s2">;</span>
    <span class="s1">result.setFontSize(getFloatProp(props</span><span class="s2">, </span><span class="s1">ViewProps.FONT_SIZE</span><span class="s2">, </span><span class="s1">UNSET))</span><span class="s2">;</span>
    <span class="s1">result.setColor(props.hasKey(ViewProps.COLOR) ? props.getInt(ViewProps.COLOR</span><span class="s2">, </span><span class="s3">0</span><span class="s1">) : </span><span class="s2">null</span><span class="s1">)</span><span class="s2">;</span>
    <span class="s1">result.setColor(</span>
        <span class="s1">props.hasKey(ViewProps.FOREGROUND_COLOR)</span>
            <span class="s1">? props.getInt(ViewProps.FOREGROUND_COLOR</span><span class="s2">, </span><span class="s3">0</span><span class="s1">)</span>
            <span class="s1">: </span><span class="s2">null</span><span class="s1">)</span><span class="s2">;</span>
    <span class="s1">result.setBackgroundColor(</span>
        <span class="s1">props.hasKey(ViewProps.BACKGROUND_COLOR)</span>
            <span class="s1">? props.getInt(ViewProps.BACKGROUND_COLOR</span><span class="s2">, </span><span class="s3">0</span><span class="s1">)</span>
            <span class="s1">: </span><span class="s2">null</span><span class="s1">)</span><span class="s2">;</span>
    <span class="s1">result.setFontFamily(getStringProp(props</span><span class="s2">, </span><span class="s1">ViewProps.FONT_FAMILY))</span><span class="s2">;</span>
    <span class="s1">result.setFontWeight(getStringProp(props</span><span class="s2">, </span><span class="s1">ViewProps.FONT_WEIGHT))</span><span class="s2">;</span>
    <span class="s1">result.setFontStyle(getStringProp(props</span><span class="s2">, </span><span class="s1">ViewProps.FONT_STYLE))</span><span class="s2">;</span>
    <span class="s1">result.setFontVariant(getArrayProp(props</span><span class="s2">, </span><span class="s1">ViewProps.FONT_VARIANT))</span><span class="s2">;</span>
    <span class="s1">result.setIncludeFontPadding(getBooleanProp(props</span><span class="s2">, </span><span class="s1">ViewProps.INCLUDE_FONT_PADDING</span><span class="s2">, true</span><span class="s1">))</span><span class="s2">;</span>
    <span class="s1">result.setTextDecorationLine(getStringProp(props</span><span class="s2">, </span><span class="s1">ViewProps.TEXT_DECORATION_LINE))</span><span class="s2">;</span>
    <span class="s1">result.setTextShadowOffset(</span>
        <span class="s1">props.hasKey(PROP_SHADOW_OFFSET) ? props.getMap(PROP_SHADOW_OFFSET) : </span><span class="s2">null</span><span class="s1">)</span><span class="s2">;</span>
    <span class="s1">result.setTextShadowRadius(getFloatProp(props</span><span class="s2">, </span><span class="s1">PROP_SHADOW_RADIUS</span><span class="s2">, </span><span class="s3">1</span><span class="s1">))</span><span class="s2">;</span>
    <span class="s1">result.setTextShadowColor(getIntProp(props</span><span class="s2">, </span><span class="s1">PROP_SHADOW_COLOR</span><span class="s2">, </span><span class="s1">DEFAULT_TEXT_SHADOW_COLOR))</span><span class="s2">;</span>
    <span class="s1">result.setTextTransform(getStringProp(props</span><span class="s2">, </span><span class="s1">PROP_TEXT_TRANSFORM))</span><span class="s2">;</span>
    <span class="s1">result.setLayoutDirection(getStringProp(props</span><span class="s2">, </span><span class="s1">ViewProps.LAYOUT_DIRECTION))</span><span class="s2">;</span>
    <span class="s1">result.setAccessibilityRole(getStringProp(props</span><span class="s2">, </span><span class="s1">ViewProps.ACCESSIBILITY_ROLE))</span><span class="s2">;</span>
    <span class="s2">return </span><span class="s1">result</span><span class="s2">;</span>
  <span class="s1">}</span>

  <span class="s2">public static int </span><span class="s1">getTextAlignment(ReactStylesDiffMap props</span><span class="s2">, boolean </span><span class="s1">isRTL</span><span class="s2">, int </span><span class="s1">defaultValue) {</span>
    <span class="s2">if </span><span class="s1">(!props.hasKey(ViewProps.TEXT_ALIGN)) {</span>
      <span class="s2">return </span><span class="s1">defaultValue</span><span class="s2">;</span>
    <span class="s1">}</span>

    <span class="s1">String textAlignPropValue = props.getString(ViewProps.TEXT_ALIGN)</span><span class="s2">;</span>
    <span class="s2">if </span><span class="s1">(</span><span class="s4">&quot;justify&quot;</span><span class="s1">.equals(textAlignPropValue)) {</span>
      <span class="s2">return </span><span class="s1">Gravity.LEFT</span><span class="s2">;</span>
    <span class="s1">} </span><span class="s2">else </span><span class="s1">{</span>
      <span class="s2">if </span><span class="s1">(textAlignPropValue == </span><span class="s2">null </span><span class="s1">|| </span><span class="s4">&quot;auto&quot;</span><span class="s1">.equals(textAlignPropValue)) {</span>
        <span class="s2">return </span><span class="s1">Gravity.NO_GRAVITY</span><span class="s2">;</span>
      <span class="s1">} </span><span class="s2">else if </span><span class="s1">(</span><span class="s4">&quot;left&quot;</span><span class="s1">.equals(textAlignPropValue)) {</span>
        <span class="s2">return </span><span class="s1">isRTL ? Gravity.RIGHT : Gravity.LEFT</span><span class="s2">;</span>
      <span class="s1">} </span><span class="s2">else if </span><span class="s1">(</span><span class="s4">&quot;right&quot;</span><span class="s1">.equals(textAlignPropValue)) {</span>
        <span class="s2">return </span><span class="s1">isRTL ? Gravity.LEFT : Gravity.RIGHT</span><span class="s2">;</span>
      <span class="s1">} </span><span class="s2">else if </span><span class="s1">(</span><span class="s4">&quot;center&quot;</span><span class="s1">.equals(textAlignPropValue)) {</span>
        <span class="s2">return </span><span class="s1">Gravity.CENTER_HORIZONTAL</span><span class="s2">;</span>
      <span class="s1">} </span><span class="s2">else </span><span class="s1">{</span>
        <span class="s1">FLog.w(ReactConstants.TAG</span><span class="s2">, </span><span class="s4">&quot;Invalid textAlign: &quot; </span><span class="s1">+ textAlignPropValue)</span><span class="s2">;</span>
        <span class="s2">return </span><span class="s1">Gravity.NO_GRAVITY</span><span class="s2">;</span>
      <span class="s1">}</span>
    <span class="s1">}</span>
  <span class="s1">}</span>

  <span class="s2">public static int </span><span class="s1">getJustificationMode(ReactStylesDiffMap props</span><span class="s2">, int </span><span class="s1">defaultValue) {</span>
    <span class="s2">if </span><span class="s1">(!props.hasKey(ViewProps.TEXT_ALIGN)) {</span>
      <span class="s2">return </span><span class="s1">defaultValue</span><span class="s2">;</span>
    <span class="s1">}</span>

    <span class="s1">String textAlignPropValue = props.getString(ViewProps.TEXT_ALIGN)</span><span class="s2">;</span>
    <span class="s2">if </span><span class="s1">(</span><span class="s4">&quot;justify&quot;</span><span class="s1">.equals(textAlignPropValue) &amp;&amp; Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.O) {</span>
      <span class="s2">return </span><span class="s1">Layout.JUSTIFICATION_MODE_INTER_WORD</span><span class="s2">;</span>
    <span class="s1">}</span>
    <span class="s2">return </span><span class="s1">DEFAULT_JUSTIFICATION_MODE</span><span class="s2">;</span>
  <span class="s1">}</span>

  <span class="s2">private static boolean </span><span class="s1">getBooleanProp(</span>
      <span class="s1">ReactStylesDiffMap mProps</span><span class="s2">, </span><span class="s1">String name</span><span class="s2">, boolean </span><span class="s1">defaultValue) {</span>
    <span class="s2">if </span><span class="s1">(mProps.hasKey(name)) {</span>
      <span class="s2">return </span><span class="s1">mProps.getBoolean(name</span><span class="s2">, </span><span class="s1">defaultValue)</span><span class="s2">;</span>
    <span class="s1">} </span><span class="s2">else </span><span class="s1">{</span>
      <span class="s2">return </span><span class="s1">defaultValue</span><span class="s2">;</span>
    <span class="s1">}</span>
  <span class="s1">}</span>

  <span class="s2">private static </span><span class="s1">String getStringProp(ReactStylesDiffMap mProps</span><span class="s2">, </span><span class="s1">String name) {</span>
    <span class="s2">if </span><span class="s1">(mProps.hasKey(name)) {</span>
      <span class="s2">return </span><span class="s1">mProps.getString(name)</span><span class="s2">;</span>
    <span class="s1">} </span><span class="s2">else </span><span class="s1">{</span>
      <span class="s2">return null;</span>
    <span class="s1">}</span>
  <span class="s1">}</span>

  <span class="s2">private static int </span><span class="s1">getIntProp(ReactStylesDiffMap mProps</span><span class="s2">, </span><span class="s1">String name</span><span class="s2">, int </span><span class="s1">defaultvalue) {</span>
    <span class="s2">if </span><span class="s1">(mProps.hasKey(name)) {</span>
      <span class="s2">return </span><span class="s1">mProps.getInt(name</span><span class="s2">, </span><span class="s1">defaultvalue)</span><span class="s2">;</span>
    <span class="s1">} </span><span class="s2">else </span><span class="s1">{</span>
      <span class="s2">return </span><span class="s1">defaultvalue</span><span class="s2">;</span>
    <span class="s1">}</span>
  <span class="s1">}</span>

  <span class="s2">private static float </span><span class="s1">getFloatProp(ReactStylesDiffMap mProps</span><span class="s2">, </span><span class="s1">String name</span><span class="s2">, float </span><span class="s1">defaultvalue) {</span>
    <span class="s2">if </span><span class="s1">(mProps.hasKey(name)) {</span>
      <span class="s2">return </span><span class="s1">mProps.getFloat(name</span><span class="s2">, </span><span class="s1">defaultvalue)</span><span class="s2">;</span>
    <span class="s1">} </span><span class="s2">else </span><span class="s1">{</span>
      <span class="s2">return </span><span class="s1">defaultvalue</span><span class="s2">;</span>
    <span class="s1">}</span>
  <span class="s1">}</span>

  <span class="s2">private static </span><span class="s1">@Nullable ReadableArray getArrayProp(ReactStylesDiffMap mProps</span><span class="s2">, </span><span class="s1">String name) {</span>
    <span class="s2">if </span><span class="s1">(mProps.hasKey(name)) {</span>
      <span class="s2">return </span><span class="s1">mProps.getArray(name)</span><span class="s2">;</span>
    <span class="s1">} </span><span class="s2">else </span><span class="s1">{</span>
      <span class="s2">return null;</span>
    <span class="s1">}</span>
  <span class="s1">}</span>

  <span class="s0">// Returns a line height which takes into account the requested line height</span>
  <span class="s0">// and the height of the inline images.</span>
  <span class="s2">public float </span><span class="s1">getEffectiveLineHeight() {</span>
    <span class="s2">boolean </span><span class="s1">useInlineViewHeight =</span>
        <span class="s1">!Float.isNaN(mLineHeight)</span>
            <span class="s1">&amp;&amp; !Float.isNaN(mHeightOfTallestInlineImage)</span>
            <span class="s1">&amp;&amp; mHeightOfTallestInlineImage &gt; mLineHeight</span><span class="s2">;</span>
    <span class="s2">return </span><span class="s1">useInlineViewHeight ? mHeightOfTallestInlineImage : mLineHeight</span><span class="s2">;</span>
  <span class="s1">}</span>

  <span class="s2">private void </span><span class="s1">setNumberOfLines(</span><span class="s2">int </span><span class="s1">numberOfLines) {</span>
    <span class="s1">mNumberOfLines = numberOfLines == </span><span class="s3">0 </span><span class="s1">? UNSET : numberOfLines</span><span class="s2">;</span>
  <span class="s1">}</span>

  <span class="s2">private void </span><span class="s1">setLineHeight(</span><span class="s2">float </span><span class="s1">lineHeight) {</span>
    <span class="s1">mLineHeightInput = lineHeight</span><span class="s2">;</span>
    <span class="s2">if </span><span class="s1">(lineHeight == UNSET) {</span>
      <span class="s1">mLineHeight = Float.NaN</span><span class="s2">;</span>
    <span class="s1">} </span><span class="s2">else </span><span class="s1">{</span>
      <span class="s1">mLineHeight =</span>
          <span class="s1">mAllowFontScaling</span>
              <span class="s1">? PixelUtil.toPixelFromSP(lineHeight)</span>
              <span class="s1">: PixelUtil.toPixelFromDIP(lineHeight)</span><span class="s2">;</span>
    <span class="s1">}</span>
  <span class="s1">}</span>

  <span class="s2">private void </span><span class="s1">setLetterSpacing(</span><span class="s2">float </span><span class="s1">letterSpacing) {</span>
    <span class="s1">mLetterSpacingInput = letterSpacing</span><span class="s2">;</span>
  <span class="s1">}</span>

  <span class="s2">public float </span><span class="s1">getLetterSpacing() {</span>
    <span class="s2">float </span><span class="s1">letterSpacingPixels =</span>
        <span class="s1">mAllowFontScaling</span>
            <span class="s1">? PixelUtil.toPixelFromSP(mLetterSpacingInput)</span>
            <span class="s1">: PixelUtil.toPixelFromDIP(mLetterSpacingInput)</span><span class="s2">;</span>

    <span class="s2">if </span><span class="s1">(mFontSize &lt;= </span><span class="s3">0</span><span class="s1">) {</span>
      <span class="s2">throw new </span><span class="s1">IllegalArgumentException(</span>
          <span class="s4">&quot;FontSize should be a positive value. Current value: &quot; </span><span class="s1">+ mFontSize)</span><span class="s2">;</span>
    <span class="s1">}</span>
    <span class="s0">// `letterSpacingPixels` and `mFontSize` are both in pixels,</span>
    <span class="s0">// yielding an accurate em value.</span>
    <span class="s2">return </span><span class="s1">letterSpacingPixels / mFontSize</span><span class="s2">;</span>
  <span class="s1">}</span>

  <span class="s2">private void </span><span class="s1">setAllowFontScaling(</span><span class="s2">boolean </span><span class="s1">allowFontScaling) {</span>
    <span class="s2">if </span><span class="s1">(allowFontScaling != mAllowFontScaling) {</span>
      <span class="s1">mAllowFontScaling = allowFontScaling</span><span class="s2">;</span>
      <span class="s1">setFontSize(mFontSizeInput)</span><span class="s2">;</span>
      <span class="s1">setLineHeight(mLineHeightInput)</span><span class="s2">;</span>
      <span class="s1">setLetterSpacing(mLetterSpacingInput)</span><span class="s2">;</span>
    <span class="s1">}</span>
  <span class="s1">}</span>

  <span class="s2">private void </span><span class="s1">setFontSize(</span><span class="s2">float </span><span class="s1">fontSize) {</span>
    <span class="s1">mFontSizeInput = fontSize</span><span class="s2">;</span>
    <span class="s2">if </span><span class="s1">(fontSize != UNSET) {</span>
      <span class="s1">fontSize =</span>
          <span class="s1">mAllowFontScaling</span>
              <span class="s1">? (</span><span class="s2">float</span><span class="s1">) Math.ceil(PixelUtil.toPixelFromSP(fontSize))</span>
              <span class="s1">: (</span><span class="s2">float</span><span class="s1">) Math.ceil(PixelUtil.toPixelFromDIP(fontSize))</span><span class="s2">;</span>
    <span class="s1">}</span>
    <span class="s1">mFontSize = (</span><span class="s2">int</span><span class="s1">) fontSize</span><span class="s2">;</span>
  <span class="s1">}</span>

  <span class="s2">private void </span><span class="s1">setColor(@Nullable Integer color) {</span>
    <span class="s1">mIsColorSet = (color != </span><span class="s2">null</span><span class="s1">)</span><span class="s2">;</span>
    <span class="s2">if </span><span class="s1">(mIsColorSet) {</span>
      <span class="s1">mColor = color</span><span class="s2">;</span>
    <span class="s1">}</span>
  <span class="s1">}</span>

  <span class="s2">private void </span><span class="s1">setBackgroundColor(Integer color) {</span>
    <span class="s0">// TODO: Don't apply background color to anchor TextView since it will be applied on the View</span>
    <span class="s0">// directly</span>
    <span class="s0">// if (!isVirtualAnchor()) {</span>
    <span class="s1">mIsBackgroundColorSet = (color != </span><span class="s2">null</span><span class="s1">)</span><span class="s2">;</span>
    <span class="s2">if </span><span class="s1">(mIsBackgroundColorSet) {</span>
      <span class="s1">mBackgroundColor = color</span><span class="s2">;</span>
    <span class="s1">}</span>
    <span class="s0">// }</span>
  <span class="s1">}</span>

  <span class="s2">private void </span><span class="s1">setFontFamily(@Nullable String fontFamily) {</span>
    <span class="s1">mFontFamily = fontFamily</span><span class="s2">;</span>
  <span class="s1">}</span>

  <span class="s2">private void </span><span class="s1">setFontVariant(@Nullable ReadableArray fontVariant) {</span>
    <span class="s1">mFontFeatureSettings = ReactTypefaceUtils.parseFontVariant(fontVariant)</span><span class="s2">;</span>
  <span class="s1">}</span>

  <span class="s2">private void </span><span class="s1">setFontVariant(@Nullable MapBuffer fontVariant) {</span>
    <span class="s2">if </span><span class="s1">(fontVariant == </span><span class="s2">null </span><span class="s1">|| fontVariant.getCount() == </span><span class="s3">0</span><span class="s1">) {</span>
      <span class="s1">mFontFeatureSettings = </span><span class="s2">null;</span>
      <span class="s2">return;</span>
    <span class="s1">}</span>

    <span class="s1">List&lt;String&gt; features = </span><span class="s2">new </span><span class="s1">ArrayList&lt;&gt;()</span><span class="s2">;</span>
    <span class="s1">Iterator&lt;MapBuffer.Entry&gt; iterator = fontVariant.iterator()</span><span class="s2">;</span>
    <span class="s2">while </span><span class="s1">(iterator.hasNext()) {</span>
      <span class="s1">MapBuffer.Entry entry = iterator.next()</span><span class="s2">;</span>
      <span class="s1">String value = entry.getStringValue()</span><span class="s2">;</span>
      <span class="s2">if </span><span class="s1">(value != </span><span class="s2">null</span><span class="s1">) {</span>
        <span class="s2">switch </span><span class="s1">(value) {</span>
          <span class="s2">case </span><span class="s4">&quot;small-caps&quot;</span><span class="s1">:</span>
            <span class="s1">features.add(</span><span class="s4">&quot;'smcp'&quot;</span><span class="s1">)</span><span class="s2">;</span>
            <span class="s2">break;</span>
          <span class="s2">case </span><span class="s4">&quot;oldstyle-nums&quot;</span><span class="s1">:</span>
            <span class="s1">features.add(</span><span class="s4">&quot;'onum'&quot;</span><span class="s1">)</span><span class="s2">;</span>
            <span class="s2">break;</span>
          <span class="s2">case </span><span class="s4">&quot;lining-nums&quot;</span><span class="s1">:</span>
            <span class="s1">features.add(</span><span class="s4">&quot;'lnum'&quot;</span><span class="s1">)</span><span class="s2">;</span>
            <span class="s2">break;</span>
          <span class="s2">case </span><span class="s4">&quot;tabular-nums&quot;</span><span class="s1">:</span>
            <span class="s1">features.add(</span><span class="s4">&quot;'tnum'&quot;</span><span class="s1">)</span><span class="s2">;</span>
            <span class="s2">break;</span>
          <span class="s2">case </span><span class="s4">&quot;proportional-nums&quot;</span><span class="s1">:</span>
            <span class="s1">features.add(</span><span class="s4">&quot;'pnum'&quot;</span><span class="s1">)</span><span class="s2">;</span>
            <span class="s2">break;</span>
          <span class="s2">case </span><span class="s4">&quot;stylistic-one&quot;</span><span class="s1">:</span>
            <span class="s1">features.add(</span><span class="s4">&quot;'ss01'&quot;</span><span class="s1">)</span><span class="s2">;</span>
            <span class="s2">break;</span>
          <span class="s2">case </span><span class="s4">&quot;stylistic-two&quot;</span><span class="s1">:</span>
            <span class="s1">features.add(</span><span class="s4">&quot;'ss02'&quot;</span><span class="s1">)</span><span class="s2">;</span>
            <span class="s2">break;</span>
          <span class="s2">case </span><span class="s4">&quot;stylistic-three&quot;</span><span class="s1">:</span>
            <span class="s1">features.add(</span><span class="s4">&quot;'ss03'&quot;</span><span class="s1">)</span><span class="s2">;</span>
            <span class="s2">break;</span>
          <span class="s2">case </span><span class="s4">&quot;stylistic-four&quot;</span><span class="s1">:</span>
            <span class="s1">features.add(</span><span class="s4">&quot;'ss04'&quot;</span><span class="s1">)</span><span class="s2">;</span>
            <span class="s2">break;</span>
          <span class="s2">case </span><span class="s4">&quot;stylistic-five&quot;</span><span class="s1">:</span>
            <span class="s1">features.add(</span><span class="s4">&quot;'ss05'&quot;</span><span class="s1">)</span><span class="s2">;</span>
            <span class="s2">break;</span>
          <span class="s2">case </span><span class="s4">&quot;stylistic-six&quot;</span><span class="s1">:</span>
            <span class="s1">features.add(</span><span class="s4">&quot;'ss06'&quot;</span><span class="s1">)</span><span class="s2">;</span>
            <span class="s2">break;</span>
          <span class="s2">case </span><span class="s4">&quot;stylistic-seven&quot;</span><span class="s1">:</span>
            <span class="s1">features.add(</span><span class="s4">&quot;'ss07'&quot;</span><span class="s1">)</span><span class="s2">;</span>
            <span class="s2">break;</span>
          <span class="s2">case </span><span class="s4">&quot;stylistic-eight&quot;</span><span class="s1">:</span>
            <span class="s1">features.add(</span><span class="s4">&quot;'ss08'&quot;</span><span class="s1">)</span><span class="s2">;</span>
            <span class="s2">break;</span>
          <span class="s2">case </span><span class="s4">&quot;stylistic-nine&quot;</span><span class="s1">:</span>
            <span class="s1">features.add(</span><span class="s4">&quot;'ss09'&quot;</span><span class="s1">)</span><span class="s2">;</span>
            <span class="s2">break;</span>
          <span class="s2">case </span><span class="s4">&quot;stylistic-ten&quot;</span><span class="s1">:</span>
            <span class="s1">features.add(</span><span class="s4">&quot;'ss10'&quot;</span><span class="s1">)</span><span class="s2">;</span>
            <span class="s2">break;</span>
          <span class="s2">case </span><span class="s4">&quot;stylistic-eleven&quot;</span><span class="s1">:</span>
            <span class="s1">features.add(</span><span class="s4">&quot;'ss11'&quot;</span><span class="s1">)</span><span class="s2">;</span>
            <span class="s2">break;</span>
          <span class="s2">case </span><span class="s4">&quot;stylistic-twelve&quot;</span><span class="s1">:</span>
            <span class="s1">features.add(</span><span class="s4">&quot;'ss12'&quot;</span><span class="s1">)</span><span class="s2">;</span>
            <span class="s2">break;</span>
          <span class="s2">case </span><span class="s4">&quot;stylistic-thirteen&quot;</span><span class="s1">:</span>
            <span class="s1">features.add(</span><span class="s4">&quot;'ss13'&quot;</span><span class="s1">)</span><span class="s2">;</span>
            <span class="s2">break;</span>
          <span class="s2">case </span><span class="s4">&quot;stylistic-fourteen&quot;</span><span class="s1">:</span>
            <span class="s1">features.add(</span><span class="s4">&quot;'ss14'&quot;</span><span class="s1">)</span><span class="s2">;</span>
            <span class="s2">break;</span>
          <span class="s2">case </span><span class="s4">&quot;stylistic-fifteen&quot;</span><span class="s1">:</span>
            <span class="s1">features.add(</span><span class="s4">&quot;'ss15'&quot;</span><span class="s1">)</span><span class="s2">;</span>
            <span class="s2">break;</span>
          <span class="s2">case </span><span class="s4">&quot;stylistic-sixteen&quot;</span><span class="s1">:</span>
            <span class="s1">features.add(</span><span class="s4">&quot;'ss16'&quot;</span><span class="s1">)</span><span class="s2">;</span>
            <span class="s2">break;</span>
          <span class="s2">case </span><span class="s4">&quot;stylistic-seventeen&quot;</span><span class="s1">:</span>
            <span class="s1">features.add(</span><span class="s4">&quot;'ss17'&quot;</span><span class="s1">)</span><span class="s2">;</span>
            <span class="s2">break;</span>
          <span class="s2">case </span><span class="s4">&quot;stylistic-eighteen&quot;</span><span class="s1">:</span>
            <span class="s1">features.add(</span><span class="s4">&quot;'ss18'&quot;</span><span class="s1">)</span><span class="s2">;</span>
            <span class="s2">break;</span>
          <span class="s2">case </span><span class="s4">&quot;stylistic-nineteen&quot;</span><span class="s1">:</span>
            <span class="s1">features.add(</span><span class="s4">&quot;'ss19'&quot;</span><span class="s1">)</span><span class="s2">;</span>
            <span class="s2">break;</span>
          <span class="s2">case </span><span class="s4">&quot;stylistic-twenty&quot;</span><span class="s1">:</span>
            <span class="s1">features.add(</span><span class="s4">&quot;'ss20'&quot;</span><span class="s1">)</span><span class="s2">;</span>
            <span class="s2">break;</span>
        <span class="s1">}</span>
      <span class="s1">}</span>
    <span class="s1">}</span>
    <span class="s1">mFontFeatureSettings = TextUtils.join(</span><span class="s4">&quot;, &quot;</span><span class="s2">, </span><span class="s1">features)</span><span class="s2">;</span>
  <span class="s1">}</span>

  <span class="s2">private void </span><span class="s1">setFontWeight(@Nullable String fontWeightString) {</span>
    <span class="s1">mFontWeight = ReactTypefaceUtils.parseFontWeight(fontWeightString)</span><span class="s2">;</span>
  <span class="s1">}</span>

  <span class="s2">private void </span><span class="s1">setFontStyle(@Nullable String fontStyleString) {</span>
    <span class="s1">mFontStyle = ReactTypefaceUtils.parseFontStyle(fontStyleString)</span><span class="s2">;</span>
  <span class="s1">}</span>

  <span class="s2">private void </span><span class="s1">setIncludeFontPadding(</span><span class="s2">boolean </span><span class="s1">includepad) {</span>
    <span class="s1">mIncludeFontPadding = includepad</span><span class="s2">;</span>
  <span class="s1">}</span>

  <span class="s2">private void </span><span class="s1">setTextDecorationLine(@Nullable String textDecorationLineString) {</span>
    <span class="s1">mIsUnderlineTextDecorationSet = </span><span class="s2">false;</span>
    <span class="s1">mIsLineThroughTextDecorationSet = </span><span class="s2">false;</span>
    <span class="s2">if </span><span class="s1">(textDecorationLineString != </span><span class="s2">null</span><span class="s1">) {</span>
      <span class="s2">for </span><span class="s1">(String textDecorationLineSubString : textDecorationLineString.split(</span><span class="s4">&quot;-&quot;</span><span class="s1">)) {</span>
        <span class="s2">if </span><span class="s1">(</span><span class="s4">&quot;underline&quot;</span><span class="s1">.equals(textDecorationLineSubString)) {</span>
          <span class="s1">mIsUnderlineTextDecorationSet = </span><span class="s2">true;</span>
        <span class="s1">} </span><span class="s2">else if </span><span class="s1">(</span><span class="s4">&quot;strikethrough&quot;</span><span class="s1">.equals(textDecorationLineSubString)) {</span>
          <span class="s1">mIsLineThroughTextDecorationSet = </span><span class="s2">true;</span>
        <span class="s1">}</span>
      <span class="s1">}</span>
    <span class="s1">}</span>
  <span class="s1">}</span>

  <span class="s2">private void </span><span class="s1">setTextShadowOffset(ReadableMap offsetMap) {</span>
    <span class="s1">mTextShadowOffsetDx = </span><span class="s3">0</span><span class="s2">;</span>
    <span class="s1">mTextShadowOffsetDy = </span><span class="s3">0</span><span class="s2">;</span>

    <span class="s2">if </span><span class="s1">(offsetMap != </span><span class="s2">null</span><span class="s1">) {</span>
      <span class="s2">if </span><span class="s1">(offsetMap.hasKey(PROP_SHADOW_OFFSET_WIDTH)</span>
          <span class="s1">&amp;&amp; !offsetMap.isNull(PROP_SHADOW_OFFSET_WIDTH)) {</span>
        <span class="s1">mTextShadowOffsetDx =</span>
            <span class="s1">PixelUtil.toPixelFromDIP(offsetMap.getDouble(PROP_SHADOW_OFFSET_WIDTH))</span><span class="s2">;</span>
      <span class="s1">}</span>
      <span class="s2">if </span><span class="s1">(offsetMap.hasKey(PROP_SHADOW_OFFSET_HEIGHT)</span>
          <span class="s1">&amp;&amp; !offsetMap.isNull(PROP_SHADOW_OFFSET_HEIGHT)) {</span>
        <span class="s1">mTextShadowOffsetDy =</span>
            <span class="s1">PixelUtil.toPixelFromDIP(offsetMap.getDouble(PROP_SHADOW_OFFSET_HEIGHT))</span><span class="s2">;</span>
      <span class="s1">}</span>
    <span class="s1">}</span>
  <span class="s1">}</span>

  <span class="s2">public static int </span><span class="s1">getLayoutDirection(@Nullable String layoutDirection) {</span>
    <span class="s2">int </span><span class="s1">androidLayoutDirection</span><span class="s2">;</span>
    <span class="s2">if </span><span class="s1">(layoutDirection == </span><span class="s2">null </span><span class="s1">|| </span><span class="s4">&quot;undefined&quot;</span><span class="s1">.equals(layoutDirection)) {</span>
      <span class="s1">androidLayoutDirection = UNSET</span><span class="s2">;</span>
    <span class="s1">} </span><span class="s2">else if </span><span class="s1">(</span><span class="s4">&quot;rtl&quot;</span><span class="s1">.equals(layoutDirection)) {</span>
      <span class="s1">androidLayoutDirection = LayoutDirection.RTL</span><span class="s2">;</span>
    <span class="s1">} </span><span class="s2">else if </span><span class="s1">(</span><span class="s4">&quot;ltr&quot;</span><span class="s1">.equals(layoutDirection)) {</span>
      <span class="s1">androidLayoutDirection = LayoutDirection.LTR</span><span class="s2">;</span>
    <span class="s1">} </span><span class="s2">else </span><span class="s1">{</span>
      <span class="s1">FLog.w(ReactConstants.TAG</span><span class="s2">, </span><span class="s4">&quot;Invalid layoutDirection: &quot; </span><span class="s1">+ layoutDirection)</span><span class="s2">;</span>
      <span class="s1">androidLayoutDirection = UNSET</span><span class="s2">;</span>
    <span class="s1">}</span>
    <span class="s2">return </span><span class="s1">androidLayoutDirection</span><span class="s2">;</span>
  <span class="s1">}</span>

  <span class="s2">private void </span><span class="s1">setLayoutDirection(@Nullable String layoutDirection) {</span>
    <span class="s1">mLayoutDirection = getLayoutDirection(layoutDirection)</span><span class="s2">;</span>
  <span class="s1">}</span>

  <span class="s2">private void </span><span class="s1">setTextShadowRadius(</span><span class="s2">float </span><span class="s1">textShadowRadius) {</span>
    <span class="s2">if </span><span class="s1">(textShadowRadius != mTextShadowRadius) {</span>
      <span class="s1">mTextShadowRadius = textShadowRadius</span><span class="s2">;</span>
    <span class="s1">}</span>
  <span class="s1">}</span>

  <span class="s2">private void </span><span class="s1">setTextShadowColor(</span><span class="s2">int </span><span class="s1">textShadowColor) {</span>
    <span class="s2">if </span><span class="s1">(textShadowColor != mTextShadowColor) {</span>
      <span class="s1">mTextShadowColor = textShadowColor</span><span class="s2">;</span>
    <span class="s1">}</span>
  <span class="s1">}</span>

  <span class="s2">private void </span><span class="s1">setTextTransform(@Nullable String textTransform) {</span>
    <span class="s2">if </span><span class="s1">(textTransform == </span><span class="s2">null </span><span class="s1">|| </span><span class="s4">&quot;none&quot;</span><span class="s1">.equals(textTransform)) {</span>
      <span class="s1">mTextTransform = TextTransform.NONE</span><span class="s2">;</span>
    <span class="s1">} </span><span class="s2">else if </span><span class="s1">(</span><span class="s4">&quot;uppercase&quot;</span><span class="s1">.equals(textTransform)) {</span>
      <span class="s1">mTextTransform = TextTransform.UPPERCASE</span><span class="s2">;</span>
    <span class="s1">} </span><span class="s2">else if </span><span class="s1">(</span><span class="s4">&quot;lowercase&quot;</span><span class="s1">.equals(textTransform)) {</span>
      <span class="s1">mTextTransform = TextTransform.LOWERCASE</span><span class="s2">;</span>
    <span class="s1">} </span><span class="s2">else if </span><span class="s1">(</span><span class="s4">&quot;capitalize&quot;</span><span class="s1">.equals(textTransform)) {</span>
      <span class="s1">mTextTransform = TextTransform.CAPITALIZE</span><span class="s2">;</span>
    <span class="s1">} </span><span class="s2">else </span><span class="s1">{</span>
      <span class="s1">FLog.w(ReactConstants.TAG</span><span class="s2">, </span><span class="s4">&quot;Invalid textTransform: &quot; </span><span class="s1">+ textTransform)</span><span class="s2">;</span>
      <span class="s1">mTextTransform = TextTransform.NONE</span><span class="s2">;</span>
    <span class="s1">}</span>
  <span class="s1">}</span>

  <span class="s2">private void </span><span class="s1">setAccessibilityRole(@Nullable String accessibilityRole) {</span>
    <span class="s2">if </span><span class="s1">(accessibilityRole != </span><span class="s2">null</span><span class="s1">) {</span>
      <span class="s1">mIsAccessibilityRoleSet = </span><span class="s2">true;</span>
      <span class="s1">mAccessibilityRole =</span>
          <span class="s1">ReactAccessibilityDelegate.AccessibilityRole.fromValue(accessibilityRole)</span><span class="s2">;</span>
      <span class="s1">mIsAccessibilityLink =</span>
          <span class="s1">mAccessibilityRole.equals(ReactAccessibilityDelegate.AccessibilityRole.LINK)</span><span class="s2">;</span>
    <span class="s1">}</span>
  <span class="s1">}</span>

  <span class="s2">public static int </span><span class="s1">getTextBreakStrategy(@Nullable String textBreakStrategy) {</span>
    <span class="s2">int </span><span class="s1">androidTextBreakStrategy = DEFAULT_BREAK_STRATEGY</span><span class="s2">;</span>
    <span class="s2">if </span><span class="s1">(textBreakStrategy != </span><span class="s2">null</span><span class="s1">) {</span>
      <span class="s2">switch </span><span class="s1">(textBreakStrategy) {</span>
        <span class="s2">case </span><span class="s4">&quot;simple&quot;</span><span class="s1">:</span>
          <span class="s1">androidTextBreakStrategy = Layout.BREAK_STRATEGY_SIMPLE</span><span class="s2">;</span>
          <span class="s2">break;</span>
        <span class="s2">case </span><span class="s4">&quot;balanced&quot;</span><span class="s1">:</span>
          <span class="s1">androidTextBreakStrategy = Layout.BREAK_STRATEGY_BALANCED</span><span class="s2">;</span>
          <span class="s2">break;</span>
        <span class="s2">default</span><span class="s1">:</span>
          <span class="s1">androidTextBreakStrategy = Layout.BREAK_STRATEGY_HIGH_QUALITY</span><span class="s2">;</span>
          <span class="s2">break;</span>
      <span class="s1">}</span>
    <span class="s1">}</span>
    <span class="s2">return </span><span class="s1">androidTextBreakStrategy</span><span class="s2">;</span>
  <span class="s1">}</span>

  <span class="s2">public static int </span><span class="s1">getHyphenationFrequency(@Nullable String hyphenationFrequency) {</span>
    <span class="s2">int </span><span class="s1">androidHyphenationFrequency = DEFAULT_HYPHENATION_FREQUENCY</span><span class="s2">;</span>
    <span class="s2">if </span><span class="s1">(hyphenationFrequency != </span><span class="s2">null</span><span class="s1">) {</span>
      <span class="s2">switch </span><span class="s1">(hyphenationFrequency) {</span>
        <span class="s2">case </span><span class="s4">&quot;none&quot;</span><span class="s1">:</span>
          <span class="s1">androidHyphenationFrequency = Layout.HYPHENATION_FREQUENCY_NONE</span><span class="s2">;</span>
          <span class="s2">break;</span>
        <span class="s2">case </span><span class="s4">&quot;normal&quot;</span><span class="s1">:</span>
          <span class="s1">androidHyphenationFrequency = Layout.HYPHENATION_FREQUENCY_NORMAL</span><span class="s2">;</span>
          <span class="s2">break;</span>
        <span class="s2">default</span><span class="s1">:</span>
          <span class="s1">androidHyphenationFrequency = Layout.HYPHENATION_FREQUENCY_FULL</span><span class="s2">;</span>
          <span class="s2">break;</span>
      <span class="s1">}</span>
    <span class="s1">}</span>
    <span class="s2">return </span><span class="s1">androidHyphenationFrequency</span><span class="s2">;</span>
  <span class="s1">}</span>
<span class="s1">}</span>
</pre>
</body>
</html>