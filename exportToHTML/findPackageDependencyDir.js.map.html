<html>
<head>
<title>findPackageDependencyDir.js.map</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<style type="text/css">
.s0 { color: #a9b7c6;}
.s1 { color: #6a8759;}
.s2 { color: #6897bb; font-style: italic;}
.s3 { color: #cc7832; font-style: italic;}
</style>
</head>
<body bgcolor="#2b2b2b">
<table CELLSPACING=0 CELLPADDING=5 COLS=1 WIDTH="100%" BGCOLOR="#606060" >
<tr><td><center>
<font face="Arial, Helvetica" color="#000000">
findPackageDependencyDir.js.map</font>
</center></td></tr></table>
<pre><span class="s0">{</span><span class="s1">&quot;version&quot;</span><span class="s0">:</span><span class="s2">3</span><span class="s0">,</span><span class="s1">&quot;names&quot;</span><span class="s0">:[</span><span class="s1">&quot;pickValues&quot;</span><span class="s0">,</span><span class="s1">&quot;obj&quot;</span><span class="s0">,</span><span class="s1">&quot;keys&quot;</span><span class="s0">,</span><span class="s1">&quot;names&quot;</span><span class="s0">,</span><span class="s1">&quot;finalNames&quot;</span><span class="s0">,</span><span class="s1">&quot;results&quot;</span><span class="s0">,</span><span class="s1">&quot;pickedValue&quot;</span><span class="s0">,</span><span class="s1">&quot;index&quot;</span><span class="s0">,</span><span class="s1">&quot;length&quot;</span><span class="s0">,</span><span class="s1">&quot;value&quot;</span><span class="s0">,</span><span class="s1">&quot;toString&quot;</span><span class="s0">,</span><span class="s1">&quot;undefined&quot;</span><span class="s0">,</span><span class="s1">&quot;findPackageDependencyDir&quot;</span><span class="s0">,</span><span class="s1">&quot;ref&quot;</span><span class="s0">,</span><span class="s1">&quot;options&quot;</span><span class="s0">,</span><span class="s1">&quot;pkgName&quot;</span><span class="s0">,</span><span class="s1">&quot;path&quot;</span><span class="s0">,</span><span class="s1">&quot;join&quot;</span><span class="s0">,</span><span class="s1">&quot;scope&quot;</span><span class="s0">,</span><span class="s1">&quot;name&quot;</span><span class="s0">,</span><span class="s1">&quot;packageDir&quot;</span><span class="s0">,</span><span class="s1">&quot;findUp&quot;</span><span class="s0">,</span><span class="s1">&quot;sync&quot;</span><span class="s0">,</span><span class="s1">&quot;type&quot;</span><span class="s0">,</span><span class="s1">&quot;resolveSymlinks&quot;</span><span class="s0">,</span><span class="s1">&quot;fs&quot;</span><span class="s0">,</span><span class="s1">&quot;lstatSync&quot;</span><span class="s0">,</span><span class="s1">&quot;isSymbolicLink&quot;</span><span class="s0">,</span><span class="s1">&quot;resolve&quot;</span><span class="s0">,</span><span class="s1">&quot;dirname&quot;</span><span class="s0">,</span><span class="s1">&quot;readlinkSync&quot;</span><span class="s0">],</span><span class="s1">&quot;sources&quot;</span><span class="s0">:[</span><span class="s1">&quot;../src/findPackageDependencyDir.ts&quot;</span><span class="s0">],</span><span class="s1">&quot;sourcesContent&quot;</span><span class="s0">:[</span><span class="s1">&quot;/**</span><span class="s3">\n </span><span class="s1">* Source vendored from:</span><span class="s3">\n </span><span class="s1">* https://github.com/microsoft/rnx-kit/blob/f37adca5161eba66fc27de25d48f72973fff9e8e/packages/tools-node/src/package.ts#L213-L234</span><span class="s3">\n </span><span class="s1">*/</span><span class="s3">\n</span><span class="s1">import findUp from 'find-up';</span><span class="s3">\n</span><span class="s1">import * as fs from 'fs';</span><span class="s3">\n</span><span class="s1">import * as path from 'path';</span><span class="s3">\n\n</span><span class="s1">/**</span><span class="s3">\n </span><span class="s1">* Pick the value for each `key` property from `obj` and return each one in a new object.</span><span class="s3">\n </span><span class="s1">* If `names` are given, use them in the new object, instead of `keys`.</span><span class="s3">\n </span><span class="s1">*</span><span class="s3">\n </span><span class="s1">* If any `key` was not found or its value was `undefined`, nothing will be picked for that key.</span><span class="s3">\n </span><span class="s1">*</span><span class="s3">\n </span><span class="s1">* @param obj Object to pick from</span><span class="s3">\n </span><span class="s1">* @param keys Keys to pick</span><span class="s3">\n </span><span class="s1">* @param names Optional names to use in the output object</span><span class="s3">\n </span><span class="s1">* @returns A new object containing a each `name` property and the picked value, or `undefined` if no keys were picked.</span><span class="s3">\n </span><span class="s1">*/</span><span class="s3">\n</span><span class="s1">export function pickValues&lt;T&gt;(</span><span class="s3">\n  </span><span class="s1">obj: T,</span><span class="s3">\n  </span><span class="s1">keys: (keyof T)[],</span><span class="s3">\n  </span><span class="s1">names?: string[],</span><span class="s3">\n</span><span class="s1">): Record&lt;string, unknown&gt; | undefined {</span><span class="s3">\n  </span><span class="s1">const finalNames = names ?? keys;</span><span class="s3">\n  </span><span class="s1">const results: Record&lt;string, unknown&gt; = {};</span><span class="s3">\n\n  </span><span class="s1">let pickedValue = false;</span><span class="s3">\n  </span><span class="s1">for (let index = 0; index &lt; keys.length; ++index) {</span><span class="s3">\n    </span><span class="s1">const value = obj[keys[index]];</span><span class="s3">\n    </span><span class="s1">if (typeof value !== 'undefined') {</span><span class="s3">\n      </span><span class="s1">results[finalNames[index].toString()] = value;</span><span class="s3">\n      </span><span class="s1">pickedValue = true;</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">return pickedValue ? results : undefined;</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">/**</span><span class="s3">\n </span><span class="s1">* Components of a package reference.</span><span class="s3">\n </span><span class="s1">*/</span><span class="s3">\n</span><span class="s1">export type PackageRef = {</span><span class="s3">\n  </span><span class="s1">scope?: string;</span><span class="s3">\n  </span><span class="s1">name: string;</span><span class="s3">\n</span><span class="s1">};</span><span class="s3">\n\n</span><span class="s1">/**</span><span class="s3">\n </span><span class="s1">* Options which control how package dependecies are located.</span><span class="s3">\n </span><span class="s1">*/</span><span class="s3">\n</span><span class="s1">export type FindPackageDependencyOptions = {</span><span class="s3">\n  </span><span class="s1">/**</span><span class="s3">\n   </span><span class="s1">* Optional starting directory for the search. Defaults to `process.cwd()`.</span><span class="s3">\n   </span><span class="s1">*/</span><span class="s3">\n  </span><span class="s1">startDir?: string;</span><span class="s3">\n\n  </span><span class="s1">/**</span><span class="s3">\n   </span><span class="s1">* Optional flag controlling whether symlinks can be found. Defaults to `true`.</span><span class="s3">\n   </span><span class="s1">* When `false`, and the package dependency directory is a symlink, it will not</span><span class="s3">\n   </span><span class="s1">* be found.</span><span class="s3">\n   </span><span class="s1">*/</span><span class="s3">\n  </span><span class="s1">allowSymlinks?: boolean;</span><span class="s3">\n\n  </span><span class="s1">/**</span><span class="s3">\n   </span><span class="s1">* Optional flag controlling whether to resolve symlinks. Defaults to `false`.</span><span class="s3">\n   </span><span class="s1">* Note that this flag has no effect if `allowSymlinks` is `false`.</span><span class="s3">\n   </span><span class="s1">*/</span><span class="s3">\n  </span><span class="s1">resolveSymlinks?: boolean;</span><span class="s3">\n</span><span class="s1">};</span><span class="s3">\n\n</span><span class="s1">/**</span><span class="s3">\n </span><span class="s1">* Find the package dependency's directory, starting from the given directory</span><span class="s3">\n </span><span class="s1">* and moving outward, through all parent directories.</span><span class="s3">\n </span><span class="s1">*</span><span class="s3">\n </span><span class="s1">* Package dependencies exist under 'node_modules/[`scope`]/[`name`]'.</span><span class="s3">\n </span><span class="s1">*</span><span class="s3">\n </span><span class="s1">* @param ref Package dependency reference</span><span class="s3">\n </span><span class="s1">* @param options Options which control the search</span><span class="s3">\n </span><span class="s1">* @returns Path to the package dependency's directory, or `undefined` if not found.</span><span class="s3">\n </span><span class="s1">*/</span><span class="s3">\n</span><span class="s1">export function findPackageDependencyDir(</span><span class="s3">\n  </span><span class="s1">ref: string | PackageRef,</span><span class="s3">\n  </span><span class="s1">options?: FindPackageDependencyOptions,</span><span class="s3">\n</span><span class="s1">): string | undefined {</span><span class="s3">\n  </span><span class="s1">const pkgName =</span><span class="s3">\n    </span><span class="s1">typeof ref === 'string' ? ref : path.join(ref.scope ?? '', ref.name);</span><span class="s3">\n  </span><span class="s1">const packageDir = findUp.sync(path.join('node_modules', pkgName), {</span><span class="s3">\n    </span><span class="s1">...pickValues(</span><span class="s3">\n      </span><span class="s1">options ?? {},</span><span class="s3">\n      </span><span class="s1">['startDir', 'allowSymlinks'],</span><span class="s3">\n      </span><span class="s1">['cwd', 'allowSymlinks'],</span><span class="s3">\n    </span><span class="s1">),</span><span class="s3">\n    </span><span class="s1">type: 'directory',</span><span class="s3">\n  </span><span class="s1">});</span><span class="s3">\n  </span><span class="s1">if (!packageDir || !options?.resolveSymlinks) {</span><span class="s3">\n    </span><span class="s1">return packageDir;</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">return fs.lstatSync(packageDir).isSymbolicLink()</span><span class="s3">\n    </span><span class="s1">? path.resolve(path.dirname(packageDir), fs.readlinkSync(packageDir))</span><span class="s3">\n    </span><span class="s1">: packageDir;</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n</span><span class="s1">&quot;</span><span class="s0">],</span><span class="s1">&quot;mappings&quot;</span><span class="s0">:</span><span class="s1">&quot;;;;;;;;AAIA;EAAA;EAAA;IAAA;EAAA;EAAA;AAAA;AACA;EAAA;EAAA;IAAA;EAAA;EAAA;AAAA;AACA;EAAA;EAAA;IAAA;EAAA;EAAA;AAAA;AAA6B;AAAA;AAAA;AAN7B;AACA;AACA;AACA;;AAKA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACO,SAASA,UAAU,CACxBC,GAAM,EACNC,IAAiB,EACjBC,KAAgB,EACqB;EACrC,MAAMC,UAAU,GAAGD,KAAK,IAAID,IAAI;EAChC,MAAMG,OAAgC,GAAG,CAAC,CAAC;EAE3C,IAAIC,WAAW,GAAG,KAAK;EACvB,KAAK,IAAIC,KAAK,GAAG,CAAC,EAAEA,KAAK,GAAGL,IAAI,CAACM,MAAM,EAAE,EAAED,KAAK,EAAE;IAChD,MAAME,KAAK,GAAGR,GAAG,CAACC,IAAI,CAACK,KAAK,CAAC,CAAC;IAC9B,IAAI,OAAOE,KAAK,KAAK,WAAW,EAAE;MAChCJ,OAAO,CAACD,UAAU,CAACG,KAAK,CAAC,CAACG,QAAQ,EAAE,CAAC,GAAGD,KAAK;MAC7CH,WAAW,GAAG,IAAI;IACpB;EACF;EAEA,OAAOA,WAAW,GAAGD,OAAO,GAAGM,SAAS;AAC1C;;AAEA;AACA;AACA;;AA6BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACO,SAASC,wBAAwB,CACtCC,GAAwB,EACxBC,OAAsC,EAClB;EACpB,MAAMC,OAAO,GACX,OAAOF,GAAG,KAAK,QAAQ,GAAGA,GAAG,GAAGG,IAAI,GAACC,IAAI,CAACJ,GAAG,CAACK,KAAK,IAAI,EAAE,EAAEL,GAAG,CAACM,IAAI,CAAC;EACtE,MAAMC,UAAU,GAAGC,iBAAM,CAACC,IAAI,CAACN,IAAI,GAACC,IAAI,CAAC,cAAc,EAAEF,OAAO,CAAC,EAAE;IACjE,GAAGf,UAAU,CACXc,OAAO,IAAI,CAAC,CAAC,EACb,CAAC,UAAU,EAAE,eAAe,CAAC,EAC7B,CAAC,KAAK,EAAE,eAAe,CAAC,CACzB;IACDS,IAAI,EAAE;EACR,CAAC,CAAC;EACF,IAAI,CAACH,UAAU,IAAI,EAACN,OAAO,aAAPA,OAAO,uBAAPA,OAAO,CAAEU,eAAe,GAAE;IAC5C,OAAOJ,UAAU;EACnB;EAEA,OAAOK,EAAE,GAACC,SAAS,CAACN,UAAU,CAAC,CAACO,cAAc,EAAE,GAC5CX,IAAI,GAACY,OAAO,CAACZ,IAAI,GAACa,OAAO,CAACT,UAAU,CAAC,EAAEK,EAAE,GAACK,YAAY,CAACV,UAAU,CAAC,CAAC,GACnEA,UAAU;AAChB&quot;</span><span class="s0">}</span></pre>
</body>
</html>