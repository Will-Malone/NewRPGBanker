<html>
<head>
<title>runAutomaticFix.js.map</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<style type="text/css">
.s0 { color: #a9b7c6;}
.s1 { color: #6a8759;}
.s2 { color: #6897bb; font-style: italic;}
.s3 { color: #cc7832; font-style: italic;}
</style>
</head>
<body bgcolor="#2b2b2b">
<table CELLSPACING=0 CELLPADDING=5 COLS=1 WIDTH="100%" BGCOLOR="#606060" >
<tr><td><center>
<font face="Arial, Helvetica" color="#000000">
runAutomaticFix.js.map</font>
</center></td></tr></table>
<pre><span class="s0">{</span><span class="s1">&quot;version&quot;</span><span class="s0">:</span><span class="s2">3</span><span class="s0">,</span><span class="s1">&quot;names&quot;</span><span class="s0">:[</span><span class="s1">&quot;AUTOMATIC_FIX_LEVELS&quot;</span><span class="s0">,</span><span class="s1">&quot;healthchecks&quot;</span><span class="s0">,</span><span class="s1">&quot;automaticFixLevel&quot;</span><span class="s0">,</span><span class="s1">&quot;stats&quot;</span><span class="s0">,</span><span class="s1">&quot;environmentInfo&quot;</span><span class="s0">,</span><span class="s1">&quot;config&quot;</span><span class="s0">,</span><span class="s1">&quot;process&quot;</span><span class="s0">,</span><span class="s1">&quot;stdout&quot;</span><span class="s0">,</span><span class="s1">&quot;isTTY&quot;</span><span class="s0">,</span><span class="s1">&quot;moveCursor&quot;</span><span class="s0">,</span><span class="s1">&quot;clearScreenDown&quot;</span><span class="s0">,</span><span class="s1">&quot;totalIssuesBasedOnFixLevel&quot;</span><span class="s0">,</span><span class="s1">&quot;ALL_ISSUES&quot;</span><span class="s0">,</span><span class="s1">&quot;errors&quot;</span><span class="s0">,</span><span class="s1">&quot;warnings&quot;</span><span class="s0">,</span><span class="s1">&quot;ERRORS&quot;</span><span class="s0">,</span><span class="s1">&quot;WARNINGS&quot;</span><span class="s0">,</span><span class="s1">&quot;issuesCount&quot;</span><span class="s0">,</span><span class="s1">&quot;logger&quot;</span><span class="s0">,</span><span class="s1">&quot;log&quot;</span><span class="s0">,</span><span class="s1">&quot;chalk&quot;</span><span class="s0">,</span><span class="s1">&quot;bold&quot;</span><span class="s0">,</span><span class="s1">&quot;toString&quot;</span><span class="s0">,</span><span class="s1">&quot;category&quot;</span><span class="s0">,</span><span class="s1">&quot;healthchecksToRun&quot;</span><span class="s0">,</span><span class="s1">&quot;filter&quot;</span><span class="s0">,</span><span class="s1">&quot;healthcheck&quot;</span><span class="s0">,</span><span class="s1">&quot;needsToBeFixed&quot;</span><span class="s0">,</span><span class="s1">&quot;type&quot;</span><span class="s0">,</span><span class="s1">&quot;HEALTHCHECK_TYPES&quot;</span><span class="s0">,</span><span class="s1">&quot;ERROR&quot;</span><span class="s0">,</span><span class="s1">&quot;WARNING&quot;</span><span class="s0">,</span><span class="s1">&quot;length&quot;</span><span class="s0">,</span><span class="s1">&quot;dim&quot;</span><span class="s0">,</span><span class="s1">&quot;label&quot;</span><span class="s0">,</span><span class="s1">&quot;healthcheckToRun&quot;</span><span class="s0">,</span><span class="s1">&quot;spinner&quot;</span><span class="s0">,</span><span class="s1">&quot;ora&quot;</span><span class="s0">,</span><span class="s1">&quot;prefixText&quot;</span><span class="s0">,</span><span class="s1">&quot;text&quot;</span><span class="s0">,</span><span class="s1">&quot;start&quot;</span><span class="s0">,</span><span class="s1">&quot;runAutomaticFix&quot;</span><span class="s0">,</span><span class="s1">&quot;loader&quot;</span><span class="s0">,</span><span class="s1">&quot;logManualInstallation&quot;</span><span class="s0">,</span><span class="s1">&quot;error&quot;</span><span class="s0">],</span><span class="s1">&quot;sources&quot;</span><span class="s0">:[</span><span class="s1">&quot;../../src/tools/runAutomaticFix.ts&quot;</span><span class="s0">],</span><span class="s1">&quot;sourcesContent&quot;</span><span class="s0">:[</span><span class="s1">&quot;import {logger} from '@react-native-community/cli-tools';</span><span class="s3">\n</span><span class="s1">import type {Config} from '@react-native-community/cli-types';</span><span class="s3">\n</span><span class="s1">import chalk from 'chalk';</span><span class="s3">\n</span><span class="s1">import ora from 'ora';</span><span class="s3">\n</span><span class="s1">import {EnvironmentInfo, HealthCheckCategoryResult, Loader} from '../types';</span><span class="s3">\n</span><span class="s1">import {HEALTHCHECK_TYPES} from './healthchecks';</span><span class="s3">\n</span><span class="s1">import {logManualInstallation} from './healthchecks/common';</span><span class="s3">\n\n</span><span class="s1">export enum AUTOMATIC_FIX_LEVELS {</span><span class="s3">\n  </span><span class="s1">ALL_ISSUES = 'ALL_ISSUES',</span><span class="s3">\n  </span><span class="s1">ERRORS = 'ERRORS',</span><span class="s3">\n  </span><span class="s1">WARNINGS = 'WARNINGS',</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">interface RunAutomaticFixArgs {</span><span class="s3">\n  </span><span class="s1">healthchecks: HealthCheckCategoryResult[];</span><span class="s3">\n  </span><span class="s1">automaticFixLevel: AUTOMATIC_FIX_LEVELS;</span><span class="s3">\n  </span><span class="s1">stats: {</span><span class="s3">\n    </span><span class="s1">errors: number;</span><span class="s3">\n    </span><span class="s1">warnings: number;</span><span class="s3">\n  </span><span class="s1">};</span><span class="s3">\n  </span><span class="s1">loader: Loader;</span><span class="s3">\n  </span><span class="s1">environmentInfo: EnvironmentInfo;</span><span class="s3">\n  </span><span class="s1">config?: Config;</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">export default async function ({</span><span class="s3">\n  </span><span class="s1">healthchecks,</span><span class="s3">\n  </span><span class="s1">automaticFixLevel,</span><span class="s3">\n  </span><span class="s1">stats,</span><span class="s3">\n  </span><span class="s1">environmentInfo,</span><span class="s3">\n  </span><span class="s1">config,</span><span class="s3">\n</span><span class="s1">}: RunAutomaticFixArgs) {</span><span class="s3">\n  </span><span class="s1">// Remove the fix options from screen</span><span class="s3">\n  </span><span class="s1">if (process.stdout.isTTY) {</span><span class="s3">\n    </span><span class="s1">process.stdout.moveCursor(0, -6);</span><span class="s3">\n    </span><span class="s1">process.stdout.clearScreenDown();</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">const totalIssuesBasedOnFixLevel: {[x in AUTOMATIC_FIX_LEVELS]: number} = {</span><span class="s3">\n    </span><span class="s1">[AUTOMATIC_FIX_LEVELS.ALL_ISSUES]: stats.errors + stats.warnings,</span><span class="s3">\n    </span><span class="s1">[AUTOMATIC_FIX_LEVELS.ERRORS]: stats.errors,</span><span class="s3">\n    </span><span class="s1">[AUTOMATIC_FIX_LEVELS.WARNINGS]: stats.warnings,</span><span class="s3">\n  </span><span class="s1">};</span><span class="s3">\n  </span><span class="s1">const issuesCount = totalIssuesBasedOnFixLevel[automaticFixLevel];</span><span class="s3">\n\n  </span><span class="s1">logger.log(</span><span class="s3">\n    </span><span class="s1">`</span><span class="s3">\\</span><span class="s1">nAttempting to fix ${chalk.bold(issuesCount.toString())} issue${</span><span class="s3">\n      </span><span class="s1">issuesCount &gt; 1 ? 's' : ''</span><span class="s3">\n    </span><span class="s1">}...`,</span><span class="s3">\n  </span><span class="s1">);</span><span class="s3">\n\n  </span><span class="s1">for (const category of healthchecks) {</span><span class="s3">\n    </span><span class="s1">const healthchecksToRun = category.healthchecks.filter((healthcheck) =&gt; {</span><span class="s3">\n      </span><span class="s1">if (automaticFixLevel === AUTOMATIC_FIX_LEVELS.ALL_ISSUES) {</span><span class="s3">\n        </span><span class="s1">return healthcheck.needsToBeFixed;</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n\n      </span><span class="s1">if (automaticFixLevel === AUTOMATIC_FIX_LEVELS.ERRORS) {</span><span class="s3">\n        </span><span class="s1">return (</span><span class="s3">\n          </span><span class="s1">healthcheck.needsToBeFixed &amp;&amp;</span><span class="s3">\n          </span><span class="s1">healthcheck.type === HEALTHCHECK_TYPES.ERROR</span><span class="s3">\n        </span><span class="s1">);</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n\n      </span><span class="s1">if (automaticFixLevel === AUTOMATIC_FIX_LEVELS.WARNINGS) {</span><span class="s3">\n        </span><span class="s1">return (</span><span class="s3">\n          </span><span class="s1">healthcheck.needsToBeFixed &amp;&amp;</span><span class="s3">\n          </span><span class="s1">healthcheck.type === HEALTHCHECK_TYPES.WARNING</span><span class="s3">\n        </span><span class="s1">);</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n\n      </span><span class="s1">return;</span><span class="s3">\n    </span><span class="s1">});</span><span class="s3">\n\n    </span><span class="s1">if (!healthchecksToRun.length) {</span><span class="s3">\n      </span><span class="s1">continue;</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n\n    </span><span class="s1">logger.log(`</span><span class="s3">\\</span><span class="s1">n${chalk.dim(category.label)}`);</span><span class="s3">\n\n    </span><span class="s1">for (const healthcheckToRun of healthchecksToRun) {</span><span class="s3">\n      </span><span class="s1">// @todo replace this with `getLoader` from `tools`</span><span class="s3">\n      </span><span class="s1">const spinner = ora({</span><span class="s3">\n        </span><span class="s1">prefixText: '',</span><span class="s3">\n        </span><span class="s1">text: healthcheckToRun.label,</span><span class="s3">\n      </span><span class="s1">}).start();</span><span class="s3">\n\n      </span><span class="s1">try {</span><span class="s3">\n        </span><span class="s1">await healthcheckToRun.runAutomaticFix({</span><span class="s3">\n          </span><span class="s1">loader: spinner,</span><span class="s3">\n          </span><span class="s1">logManualInstallation,</span><span class="s3">\n          </span><span class="s1">environmentInfo,</span><span class="s3">\n          </span><span class="s1">config,</span><span class="s3">\n        </span><span class="s1">});</span><span class="s3">\n      </span><span class="s1">} catch (error) {</span><span class="s3">\n        </span><span class="s1">// TODO: log the error in a meaningful way</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n</span><span class="s1">&quot;</span><span class="s0">],</span><span class="s1">&quot;mappings&quot;</span><span class="s0">:</span><span class="s1">&quot;;;;;;;;AAAA;EAAA;EAAA;IAAA;EAAA;EAAA;AAAA;AAEA;EAAA;EAAA;IAAA;EAAA;EAAA;AAAA;AACA;EAAA;EAAA;IAAA;EAAA;EAAA;AAAA;AAEA;AACA;AAA4D;AAAA,IAEhDA,oBAAoB;AAAA;AAAA,WAApBA,oBAAoB;EAApBA,oBAAoB;EAApBA,oBAAoB;EAApBA,oBAAoB;AAAA,GAApBA,oBAAoB,oCAApBA,oBAAoB;AAkBjB,wBAAgB;EAC7BC,YAAY;EACZC,iBAAiB;EACjBC,KAAK;EACLC,eAAe;EACfC;AACmB,CAAC,EAAE;EACtB;EACA,IAAIC,OAAO,CAACC,MAAM,CAACC,KAAK,EAAE;IACxBF,OAAO,CAACC,MAAM,CAACE,UAAU,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;IAChCH,OAAO,CAACC,MAAM,CAACG,eAAe,EAAE;EAClC;EAEA,MAAMC,0BAAiE,GAAG;IACxE,CAACX,oBAAoB,CAACY,UAAU,GAAGT,KAAK,CAACU,MAAM,GAAGV,KAAK,CAACW,QAAQ;IAChE,CAACd,oBAAoB,CAACe,MAAM,GAAGZ,KAAK,CAACU,MAAM;IAC3C,CAACb,oBAAoB,CAACgB,QAAQ,GAAGb,KAAK,CAACW;EACzC,CAAC;EACD,MAAMG,WAAW,GAAGN,0BAA0B,CAACT,iBAAiB,CAAC;EAEjEgB,kBAAM,CAACC,GAAG,CACP,uBAAsBC,gBAAK,CAACC,IAAI,CAACJ,WAAW,CAACK,QAAQ,EAAE,CAAE,SACxDL,WAAW,GAAG,CAAC,GAAG,GAAG,GAAG,EACzB,KAAI,CACN;EAED,KAAK,MAAMM,QAAQ,IAAItB,YAAY,EAAE;IACnC,MAAMuB,iBAAiB,GAAGD,QAAQ,CAACtB,YAAY,CAACwB,MAAM,CAAEC,WAAW,IAAK;MACtE,IAAIxB,iBAAiB,KAAKF,oBAAoB,CAACY,UAAU,EAAE;QACzD,OAAOc,WAAW,CAACC,cAAc;MACnC;MAEA,IAAIzB,iBAAiB,KAAKF,oBAAoB,CAACe,MAAM,EAAE;QACrD,OACEW,WAAW,CAACC,cAAc,IAC1BD,WAAW,CAACE,IAAI,KAAKC,+BAAiB,CAACC,KAAK;MAEhD;MAEA,IAAI5B,iBAAiB,KAAKF,oBAAoB,CAACgB,QAAQ,EAAE;QACvD,OACEU,WAAW,CAACC,cAAc,IAC1BD,WAAW,CAACE,IAAI,KAAKC,+BAAiB,CAACE,OAAO;MAElD;MAEA;IACF,CAAC,CAAC;IAEF,IAAI,CAACP,iBAAiB,CAACQ,MAAM,EAAE;MAC7B;IACF;IAEAd,kBAAM,CAACC,GAAG,CAAE,KAAIC,gBAAK,CAACa,GAAG,CAACV,QAAQ,CAACW,KAAK,CAAE,EAAC,CAAC;IAE5C,KAAK,MAAMC,gBAAgB,IAAIX,iBAAiB,EAAE;MAChD;MACA,MAAMY,OAAO,GAAG,IAAAC,cAAG,EAAC;QAClBC,UAAU,EAAE,EAAE;QACdC,IAAI,EAAEJ,gBAAgB,CAACD;MACzB,CAAC,CAAC,CAACM,KAAK,EAAE;MAEV,IAAI;QACF,MAAML,gBAAgB,CAACM,eAAe,CAAC;UACrCC,MAAM,EAAEN,OAAO;UACfO,qBAAqB,EAArBA,6BAAqB;UACrBvC,eAAe;UACfC;QACF,CAAC,CAAC;MACJ,CAAC,CAAC,OAAOuC,KAAK,EAAE;QACd;MAAA;IAEJ;EACF;AACF&quot;</span><span class="s0">}</span></pre>
</body>
</html>