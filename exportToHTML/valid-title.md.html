<html>
<head>
<title>valid-title.md</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<style type="text/css">
.s0 { color: #cc7832;}
.s1 { color: #a9b7c6;}
.s2 { color: #a9b7c6;}
.s3 { color: #9876aa; font-style: italic;}
.s4 { color: #6a8759;}
</style>
</head>
<body bgcolor="#2b2b2b">
<table CELLSPACING=0 CELLPADDING=5 COLS=1 WIDTH="100%" BGCOLOR="#606060" >
<tr><td><center>
<font face="Arial, Helvetica" color="#000000">
valid-title.md</font>
</center></td></tr></table>
<pre><span class="s0"># </span><span class="s2">Enforce valid titles </span><span class="s1">(</span><span class="s2">`valid-title`</span><span class="s1">)</span>

<span class="s2">Checks that the title of Jest blocks are valid by ensuring that titles are</span><span class="s1">:</span>

<span class="s0">- </span><span class="s2">not empty,</span>
<span class="s0">- </span><span class="s2">is a string,</span>
<span class="s0">- </span><span class="s2">not prefixed with their block name,</span>
<span class="s0">- </span><span class="s2">have no leading or trailing spaces</span>

<span class="s0">## </span><span class="s2">Rule Details</span>

<span class="s1">**</span><span class="s2">emptyTitle</span><span class="s1">**</span>

<span class="s2">An empty title is not informative, and serves little purpose.</span>

<span class="s2">Examples of </span><span class="s1">**</span><span class="s2">incorrect</span><span class="s1">** </span><span class="s2">code for this rule</span><span class="s1">:</span>

<span class="s0">```</span><span class="s3">js</span>
<span class="s4">describe('', () =&gt; {});</span>
<span class="s4">describe('foo', () =&gt; {</span>
  <span class="s4">it('', () =&gt; {});</span>
<span class="s4">});</span>
<span class="s4">it('', () =&gt; {});</span>
<span class="s4">test('', () =&gt; {});</span>
<span class="s4">xdescribe('', () =&gt; {});</span>
<span class="s4">xit('', () =&gt; {});</span>
<span class="s4">xtest('', () =&gt; {});</span>
<span class="s0">```</span>

<span class="s2">Examples of </span><span class="s1">**</span><span class="s2">correct</span><span class="s1">** </span><span class="s2">code for this rule</span><span class="s1">:</span>

<span class="s0">```</span><span class="s3">js</span>
<span class="s4">describe('foo', () =&gt; {});</span>
<span class="s4">describe('foo', () =&gt; {</span>
  <span class="s4">it('bar', () =&gt; {});</span>
<span class="s4">});</span>
<span class="s4">test('foo', () =&gt; {});</span>
<span class="s4">it('foo', () =&gt; {});</span>
<span class="s4">xdescribe('foo', () =&gt; {});</span>
<span class="s4">xit('foo', () =&gt; {});</span>
<span class="s4">xtest('foo', () =&gt; {});</span>
<span class="s0">```</span>

<span class="s1">**</span><span class="s2">titleMustBeString</span><span class="s1">**</span>

<span class="s2">Titles for test blocks should always be a string.</span>

<span class="s2">This is also applied to `describe` blocks by default, but can be turned off via</span>
<span class="s2">the `ignoreTypeOfDescribeName` option</span><span class="s1">:</span>

<span class="s2">Examples of </span><span class="s1">**</span><span class="s2">incorrect</span><span class="s1">** </span><span class="s2">code for this rule</span><span class="s1">:</span>

<span class="s0">```</span><span class="s3">js</span>
<span class="s4">it(123, () =&gt; {});</span>
<span class="s4">describe(String(/.+/), () =&gt; {});</span>
<span class="s4">describe(myFunction, () =&gt; {});</span>
<span class="s4">xdescribe(myFunction, () =&gt; {});</span>
<span class="s4">describe(6, function () {});</span>
<span class="s0">```</span>

<span class="s2">Examples of </span><span class="s1">**</span><span class="s2">correct</span><span class="s1">** </span><span class="s2">code for this rule</span><span class="s1">:</span>

<span class="s0">```</span><span class="s3">js</span>
<span class="s4">it('is a string', () =&gt; {});</span>
<span class="s4">test('is a string', () =&gt; {});</span>
<span class="s4">xtest('is a string', () =&gt; {});</span>
<span class="s4">describe('is a string', () =&gt; {});</span>
<span class="s4">describe.skip('is a string', () =&gt; {});</span>
<span class="s4">fdescribe('is a string', () =&gt; {});</span>
<span class="s0">```</span>

<span class="s2">Examples of </span><span class="s1">**</span><span class="s2">correct</span><span class="s1">** </span><span class="s2">code when `ignoreTypeOfDescribeName` is `true`</span><span class="s1">:</span>

<span class="s0">```</span><span class="s3">js</span>
<span class="s4">it('is a string', () =&gt; {});</span>
<span class="s4">test('is a string', () =&gt; {});</span>
<span class="s4">xtest('is a string', () =&gt; {});</span>
<span class="s4">describe('is a string', () =&gt; {});</span>
<span class="s4">describe.skip('is a string', () =&gt; {});</span>
<span class="s4">fdescribe('is a string', () =&gt; {});</span>

<span class="s4">describe(String(/.+/), () =&gt; {});</span>
<span class="s4">describe(myFunction, () =&gt; {});</span>
<span class="s4">xdescribe(myFunction, () =&gt; {});</span>
<span class="s4">describe(6, function () {});</span>
<span class="s0">```</span>

<span class="s1">**</span><span class="s2">duplicatePrefix</span><span class="s1">**</span>

<span class="s2">A `describe` / `test` block should not start with `duplicatePrefix`</span>

<span class="s2">Examples of </span><span class="s1">**</span><span class="s2">incorrect</span><span class="s1">** </span><span class="s2">code for this rule</span>

<span class="s0">```</span><span class="s3">js</span>
<span class="s4">test('test foo', () =&gt; {});</span>
<span class="s4">it('it foo', () =&gt; {});</span>

<span class="s4">describe('foo', () =&gt; {</span>
  <span class="s4">test('test bar', () =&gt; {});</span>
<span class="s4">});</span>

<span class="s4">describe('describe foo', () =&gt; {</span>
  <span class="s4">test('bar', () =&gt; {});</span>
<span class="s4">});</span>
<span class="s0">```</span>

<span class="s2">Examples of </span><span class="s1">**</span><span class="s2">correct</span><span class="s1">** </span><span class="s2">code for this rule</span>

<span class="s0">```</span><span class="s3">js</span>
<span class="s4">test('foo', () =&gt; {});</span>
<span class="s4">it('foo', () =&gt; {});</span>

<span class="s4">describe('foo', () =&gt; {</span>
  <span class="s4">test('bar', () =&gt; {});</span>
<span class="s4">});</span>
<span class="s0">```</span>

<span class="s1">**</span><span class="s2">accidentalSpace</span><span class="s1">**</span>

<span class="s2">A `describe` / `test` block should not contain accidentalSpace</span>

<span class="s2">Examples of </span><span class="s1">**</span><span class="s2">incorrect</span><span class="s1">** </span><span class="s2">code for this rule</span>

<span class="s0">```</span><span class="s3">js</span>
<span class="s4">test(' foo', () =&gt; {});</span>
<span class="s4">it(' foo', () =&gt; {});</span>

<span class="s4">describe('foo', () =&gt; {</span>
  <span class="s4">test(' bar', () =&gt; {});</span>
<span class="s4">});</span>

<span class="s4">describe(' foo', () =&gt; {</span>
  <span class="s4">test('bar', () =&gt; {});</span>
<span class="s4">});</span>

<span class="s4">describe('foo  ', () =&gt; {</span>
  <span class="s4">test('bar', () =&gt; {});</span>
<span class="s4">});</span>
<span class="s0">```</span>

<span class="s2">Examples of </span><span class="s1">**</span><span class="s2">correct</span><span class="s1">** </span><span class="s2">code for this rule</span>

<span class="s0">```</span><span class="s3">js</span>
<span class="s4">test('foo', () =&gt; {});</span>
<span class="s4">it('foo', () =&gt; {});</span>

<span class="s4">describe('foo', () =&gt; {</span>
  <span class="s4">test('bar', () =&gt; {});</span>
<span class="s4">});</span>
<span class="s0">```</span>

<span class="s0">## </span><span class="s2">Options</span>

<span class="s0">```</span><span class="s3">ts</span>
<span class="s4">interface Options {</span>
  <span class="s4">ignoreTypeOfDescribeName?: boolean;</span>
  <span class="s4">disallowedWords?: string[];</span>
  <span class="s4">mustNotMatch?: Partial&lt;Record&lt;'describe' | 'test' | 'it', string&gt;&gt; | string;</span>
  <span class="s4">mustMatch?: Partial&lt;Record&lt;'describe' | 'test' | 'it', string&gt;&gt; | string;</span>
<span class="s4">}</span>
<span class="s0">```</span>

<span class="s0">#### </span><span class="s2">`ignoreTypeOfDescribeName`</span>

<span class="s2">Default</span><span class="s1">: </span><span class="s2">`false`</span>

<span class="s2">When enabled, the type of the first argument to `describe` blocks won't be</span>
<span class="s2">checked.</span>

<span class="s0">#### </span><span class="s2">`disallowedWords`</span>

<span class="s2">Default</span><span class="s1">: </span><span class="s2">`</span><span class="s1">[]</span><span class="s2">`</span>

<span class="s2">A string array of words that are not allowed to be used in test titles. Matching</span>
<span class="s2">is not case-sensitive, and looks for complete words</span><span class="s1">:</span>

<span class="s2">Examples of </span><span class="s1">**</span><span class="s2">incorrect</span><span class="s1">** </span><span class="s2">code when using `disallowedWords`</span><span class="s1">:</span>

<span class="s0">```</span><span class="s3">js</span>
<span class="s4">// with disallowedWords: ['correct', 'all', 'every', 'properly']</span>
<span class="s4">describe('the correct way to do things', () =&gt; {});</span>
<span class="s4">it('has ALL the things', () =&gt; {});</span>
<span class="s4">xdescribe('every single one of them', () =&gt; {});</span>
<span class="s4">test(`that the value is set properly`, () =&gt; {});</span>
<span class="s0">```</span>

<span class="s2">Examples of </span><span class="s1">**</span><span class="s2">correct</span><span class="s1">** </span><span class="s2">code when using `disallowedWords`</span><span class="s1">:</span>

<span class="s0">```</span><span class="s3">js</span>
<span class="s4">// with disallowedWords: ['correct', 'all', 'every', 'properly']</span>
<span class="s4">it('correctly sets the value', () =&gt; {});</span>
<span class="s4">test('that everything is as it should be', () =&gt; {});</span>
<span class="s4">describe('the proper way to handle things', () =&gt; {});</span>
<span class="s0">```</span>

<span class="s0">#### </span><span class="s2">`mustMatch` &amp; `mustNotMatch`</span>

<span class="s2">Defaults</span><span class="s1">: </span><span class="s2">`{}`</span>

<span class="s2">Allows enforcing that titles must match or must not match a given Regular</span>
<span class="s2">Expression, with an optional message. An object can be provided to apply</span>
<span class="s2">different Regular Expressions </span><span class="s1">(</span><span class="s2">with optional messages</span><span class="s1">) </span><span class="s2">to specific Jest test</span>
<span class="s2">function groups </span><span class="s1">(</span><span class="s2">`describe`, `test`, and `it`</span><span class="s1">)</span><span class="s2">.</span>

<span class="s2">Examples of </span><span class="s1">**</span><span class="s2">incorrect</span><span class="s1">** </span><span class="s2">code when using `mustMatch`</span><span class="s1">:</span>

<span class="s0">```</span><span class="s3">js</span>
<span class="s4">// with mustMatch: '^that'</span>
<span class="s4">describe('the correct way to do things', () =&gt; {});</span>
<span class="s4">fit('this there!', () =&gt; {});</span>

<span class="s4">// with mustMatch: { test: '^that' }</span>
<span class="s4">describe('the tests that will be run', () =&gt; {});</span>
<span class="s4">test('the stuff works', () =&gt; {});</span>
<span class="s4">xtest('errors that are thrown have messages', () =&gt; {});</span>
<span class="s0">```</span>

<span class="s2">Examples of </span><span class="s1">**</span><span class="s2">correct</span><span class="s1">** </span><span class="s2">code when using `mustMatch`</span><span class="s1">:</span>

<span class="s0">```</span><span class="s3">js</span>
<span class="s4">// with mustMatch: '^that'</span>
<span class="s4">describe('that thing that needs to be done', () =&gt; {});</span>
<span class="s4">fit('that this there!', () =&gt; {});</span>

<span class="s4">// with mustMatch: { test: '^that' }</span>
<span class="s4">describe('the tests that will be run', () =&gt; {});</span>
<span class="s4">test('that the stuff works', () =&gt; {});</span>
<span class="s4">xtest('that errors that thrown have messages', () =&gt; {});</span>
<span class="s0">```</span>

<span class="s2">Optionally you can provide a custom message to show for a particular matcher by</span>
<span class="s2">using a tuple at any level where you can provide a matcher</span><span class="s1">:</span>

<span class="s0">```</span><span class="s3">js</span>
<span class="s4">const prefixes = ['when', 'with', 'without', 'if', 'unless', 'for'];</span>
<span class="s4">const prefixesList = prefixes.join('  - \n');</span>

<span class="s4">module.exports = {</span>
  <span class="s4">rules: {</span>
    <span class="s4">'jest/valid-title': [</span>
      <span class="s4">'error',</span>
      <span class="s4">{</span>
        <span class="s4">mustNotMatch: ['\\.$', 'Titles should not end with a full-stop'],</span>
        <span class="s4">mustMatch: {</span>
          <span class="s4">describe: [</span>
            <span class="s4">new RegExp(`^(?:[A-Z]|\\b(${prefixes.join('|')})\\b`, 'u').source,</span>
            <span class="s4">`Describe titles should either start with a capital letter or one of the following prefixes: ${prefixesList}`,</span>
          <span class="s4">],</span>
          <span class="s4">test: [/[^A-Z]/u.source],</span>
          <span class="s4">it: /[^A-Z]/u.source,</span>
        <span class="s4">},</span>
      <span class="s4">},</span>
    <span class="s4">],</span>
  <span class="s4">},</span>
<span class="s4">};</span>
<span class="s0">```</span>
</pre>
</body>
</html>