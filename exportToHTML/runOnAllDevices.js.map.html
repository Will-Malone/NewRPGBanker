<html>
<head>
<title>runOnAllDevices.js.map</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<style type="text/css">
.s0 { color: #a9b7c6;}
.s1 { color: #6a8759;}
.s2 { color: #6897bb; font-style: italic;}
.s3 { color: #cc7832; font-style: italic;}
</style>
</head>
<body bgcolor="#2b2b2b">
<table CELLSPACING=0 CELLPADDING=5 COLS=1 WIDTH="100%" BGCOLOR="#606060" >
<tr><td><center>
<font face="Arial, Helvetica" color="#000000">
runOnAllDevices.js.map</font>
</center></td></tr></table>
<pre><span class="s0">{</span><span class="s1">&quot;version&quot;</span><span class="s0">:</span><span class="s2">3</span><span class="s0">,</span><span class="s1">&quot;names&quot;</span><span class="s0">:[</span><span class="s1">&quot;runOnAllDevices&quot;</span><span class="s0">,</span><span class="s1">&quot;args&quot;</span><span class="s0">,</span><span class="s1">&quot;cmd&quot;</span><span class="s0">,</span><span class="s1">&quot;adbPath&quot;</span><span class="s0">,</span><span class="s1">&quot;androidProject&quot;</span><span class="s0">,</span><span class="s1">&quot;devices&quot;</span><span class="s0">,</span><span class="s1">&quot;adb&quot;</span><span class="s0">,</span><span class="s1">&quot;getDevices&quot;</span><span class="s0">,</span><span class="s1">&quot;length&quot;</span><span class="s0">,</span><span class="s1">&quot;logger&quot;</span><span class="s0">,</span><span class="s1">&quot;info&quot;</span><span class="s0">,</span><span class="s1">&quot;result&quot;</span><span class="s0">,</span><span class="s1">&quot;tryLaunchEmulator&quot;</span><span class="s0">,</span><span class="s1">&quot;success&quot;</span><span class="s0">,</span><span class="s1">&quot;error&quot;</span><span class="s0">,</span><span class="s1">&quot;chalk&quot;</span><span class="s0">,</span><span class="s1">&quot;dim&quot;</span><span class="s0">,</span><span class="s1">&quot;warn&quot;</span><span class="s0">,</span><span class="s1">&quot;variant&quot;</span><span class="s0">,</span><span class="s1">&quot;binaryPath&quot;</span><span class="s0">,</span><span class="s1">&quot;gradleArgs&quot;</span><span class="s0">,</span><span class="s1">&quot;getTaskNames&quot;</span><span class="s0">,</span><span class="s1">&quot;appName&quot;</span><span class="s0">,</span><span class="s1">&quot;mode&quot;</span><span class="s0">,</span><span class="s1">&quot;tasks&quot;</span><span class="s0">,</span><span class="s1">&quot;sourceDir&quot;</span><span class="s0">,</span><span class="s1">&quot;extraParams&quot;</span><span class="s0">,</span><span class="s1">&quot;push&quot;</span><span class="s0">,</span><span class="s1">&quot;port&quot;</span><span class="s0">,</span><span class="s1">&quot;activeArchOnly&quot;</span><span class="s0">,</span><span class="s1">&quot;architectures&quot;</span><span class="s0">,</span><span class="s1">&quot;map&quot;</span><span class="s0">,</span><span class="s1">&quot;device&quot;</span><span class="s0">,</span><span class="s1">&quot;getCPU&quot;</span><span class="s0">,</span><span class="s1">&quot;filter&quot;</span><span class="s0">,</span><span class="s1">&quot;arch&quot;</span><span class="s0">,</span><span class="s1">&quot;index&quot;</span><span class="s0">,</span><span class="s1">&quot;array&quot;</span><span class="s0">,</span><span class="s1">&quot;indexOf&quot;</span><span class="s0">,</span><span class="s1">&quot;join&quot;</span><span class="s0">,</span><span class="s1">&quot;debug&quot;</span><span class="s0">,</span><span class="s1">&quot;execa&quot;</span><span class="s0">,</span><span class="s1">&quot;stdio&quot;</span><span class="s0">,</span><span class="s1">&quot;cwd&quot;</span><span class="s0">,</span><span class="s1">&quot;printRunDoctorTip&quot;</span><span class="s0">,</span><span class="s1">&quot;createInstallError&quot;</span><span class="s0">,</span><span class="s1">&quot;undefined&quot;</span><span class="s0">,</span><span class="s1">&quot;forEach&quot;</span><span class="s0">,</span><span class="s1">&quot;tryRunAdbReverse&quot;</span><span class="s0">,</span><span class="s1">&quot;tryInstallAppOnDevice&quot;</span><span class="s0">,</span><span class="s1">&quot;tryLaunchAppOnDevice&quot;</span><span class="s0">,</span><span class="s1">&quot;packageName&quot;</span><span class="s0">,</span><span class="s1">&quot;stderr&quot;</span><span class="s0">,</span><span class="s1">&quot;toString&quot;</span><span class="s0">,</span><span class="s1">&quot;message&quot;</span><span class="s0">,</span><span class="s1">&quot;log&quot;</span><span class="s0">,</span><span class="s1">&quot;includes&quot;</span><span class="s0">,</span><span class="s1">&quot;bold&quot;</span><span class="s0">,</span><span class="s1">&quot;CLIError&quot;</span><span class="s0">],</span><span class="s1">&quot;sources&quot;</span><span class="s0">:[</span><span class="s1">&quot;../../../src/commands/runAndroid/runOnAllDevices.ts&quot;</span><span class="s0">],</span><span class="s1">&quot;sourcesContent&quot;</span><span class="s0">:[</span><span class="s1">&quot;/**</span><span class="s3">\n </span><span class="s1">* Copyright (c) Facebook, Inc. and its affiliates.</span><span class="s3">\n </span><span class="s1">*</span><span class="s3">\n </span><span class="s1">* This source code is licensed under the MIT license found in the</span><span class="s3">\n </span><span class="s1">* LICENSE file in the root directory of this source tree.</span><span class="s3">\n </span><span class="s1">*</span><span class="s3">\n </span><span class="s1">*/</span><span class="s3">\n\n</span><span class="s1">import chalk from 'chalk';</span><span class="s3">\n</span><span class="s1">import execa from 'execa';</span><span class="s3">\n</span><span class="s1">import {Config} from '@react-native-community/cli-types';</span><span class="s3">\n</span><span class="s1">import {</span><span class="s3">\n  </span><span class="s1">logger,</span><span class="s3">\n  </span><span class="s1">CLIError,</span><span class="s3">\n  </span><span class="s1">printRunDoctorTip,</span><span class="s3">\n</span><span class="s1">} from '@react-native-community/cli-tools';</span><span class="s3">\n</span><span class="s1">import adb from './adb';</span><span class="s3">\n</span><span class="s1">import tryRunAdbReverse from './tryRunAdbReverse';</span><span class="s3">\n</span><span class="s1">import tryLaunchAppOnDevice from './tryLaunchAppOnDevice';</span><span class="s3">\n</span><span class="s1">import tryLaunchEmulator from './tryLaunchEmulator';</span><span class="s3">\n</span><span class="s1">import tryInstallAppOnDevice from './tryInstallAppOnDevice';</span><span class="s3">\n</span><span class="s1">import {getTaskNames} from './getTaskNames';</span><span class="s3">\n</span><span class="s1">import type {Flags} from '.';</span><span class="s3">\n\n</span><span class="s1">type AndroidProject = NonNullable&lt;Config['project']['android']&gt;;</span><span class="s3">\n\n</span><span class="s1">async function runOnAllDevices(</span><span class="s3">\n  </span><span class="s1">args: Flags,</span><span class="s3">\n  </span><span class="s1">cmd: string,</span><span class="s3">\n  </span><span class="s1">adbPath: string,</span><span class="s3">\n  </span><span class="s1">androidProject: AndroidProject,</span><span class="s3">\n</span><span class="s1">) {</span><span class="s3">\n  </span><span class="s1">let devices = adb.getDevices(adbPath);</span><span class="s3">\n  </span><span class="s1">if (devices.length === 0) {</span><span class="s3">\n    </span><span class="s1">logger.info('Launching emulator...');</span><span class="s3">\n    </span><span class="s1">const result = await tryLaunchEmulator(adbPath);</span><span class="s3">\n    </span><span class="s1">if (result.success) {</span><span class="s3">\n      </span><span class="s1">logger.info('Successfully launched emulator.');</span><span class="s3">\n      </span><span class="s1">devices = adb.getDevices(adbPath);</span><span class="s3">\n    </span><span class="s1">} else {</span><span class="s3">\n      </span><span class="s1">logger.error(</span><span class="s3">\n        </span><span class="s1">`Failed to launch emulator. Reason: ${chalk.dim(result.error || '')}.`,</span><span class="s3">\n      </span><span class="s1">);</span><span class="s3">\n      </span><span class="s1">logger.warn(</span><span class="s3">\n        </span><span class="s1">'Please launch an emulator manually or connect a device. Otherwise app may fail to launch.',</span><span class="s3">\n      </span><span class="s1">);</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">if (args.variant) {</span><span class="s3">\n    </span><span class="s1">logger.warn(</span><span class="s3">\n      </span><span class="s1">'</span><span class="s3">\&quot;</span><span class="s1">variant</span><span class="s3">\&quot; </span><span class="s1">flag is deprecated and will be removed in future release. Please switch to </span><span class="s3">\&quot;</span><span class="s1">mode</span><span class="s3">\&quot; </span><span class="s1">flag.',</span><span class="s3">\n    </span><span class="s1">);</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">try {</span><span class="s3">\n    </span><span class="s1">if (!args.binaryPath) {</span><span class="s3">\n      </span><span class="s1">let gradleArgs = getTaskNames(</span><span class="s3">\n        </span><span class="s1">androidProject.appName,</span><span class="s3">\n        </span><span class="s1">args.mode || args.variant,</span><span class="s3">\n        </span><span class="s1">args.tasks,</span><span class="s3">\n        </span><span class="s1">'install',</span><span class="s3">\n        </span><span class="s1">androidProject.sourceDir,</span><span class="s3">\n      </span><span class="s1">);</span><span class="s3">\n\n      </span><span class="s1">if (args.extraParams) {</span><span class="s3">\n        </span><span class="s1">gradleArgs.push(...args.extraParams);</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n\n      </span><span class="s1">if (args.port != null) {</span><span class="s3">\n        </span><span class="s1">gradleArgs.push('-PreactNativeDevServerPort=' + args.port);</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n\n      </span><span class="s1">if (args.activeArchOnly) {</span><span class="s3">\n        </span><span class="s1">const architectures = devices</span><span class="s3">\n          </span><span class="s1">.map((device) =&gt; {</span><span class="s3">\n            </span><span class="s1">return adb.getCPU(adbPath, device);</span><span class="s3">\n          </span><span class="s1">})</span><span class="s3">\n          </span><span class="s1">.filter(</span><span class="s3">\n            </span><span class="s1">(arch, index, array) =&gt;</span><span class="s3">\n              </span><span class="s1">arch != null &amp;&amp; array.indexOf(arch) === index,</span><span class="s3">\n          </span><span class="s1">);</span><span class="s3">\n\n        </span><span class="s1">if (architectures.length &gt; 0) {</span><span class="s3">\n          </span><span class="s1">logger.info(`Detected architectures ${architectures.join(', ')}`);</span><span class="s3">\n          </span><span class="s1">// `reactNativeDebugArchitectures` was renamed to `reactNativeArchitectures` in 0.68.</span><span class="s3">\n          </span><span class="s1">// Can be removed when 0.67 no longer needs to be supported.</span><span class="s3">\n          </span><span class="s1">gradleArgs.push(</span><span class="s3">\n            </span><span class="s1">'-PreactNativeDebugArchitectures=' + architectures.join(','),</span><span class="s3">\n          </span><span class="s1">);</span><span class="s3">\n          </span><span class="s1">gradleArgs.push(</span><span class="s3">\n            </span><span class="s1">'-PreactNativeArchitectures=' + architectures.join(','),</span><span class="s3">\n          </span><span class="s1">);</span><span class="s3">\n        </span><span class="s1">}</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n\n      </span><span class="s1">logger.info('Installing the app...');</span><span class="s3">\n      </span><span class="s1">logger.debug(</span><span class="s3">\n        </span><span class="s1">`Running command </span><span class="s3">\&quot;</span><span class="s1">cd android &amp;&amp; ${cmd} ${gradleArgs.join(' ')}</span><span class="s3">\&quot;</span><span class="s1">`,</span><span class="s3">\n      </span><span class="s1">);</span><span class="s3">\n\n      </span><span class="s1">await execa(cmd, gradleArgs, {</span><span class="s3">\n        </span><span class="s1">stdio: ['inherit', 'inherit', 'pipe'],</span><span class="s3">\n        </span><span class="s1">cwd: androidProject.sourceDir,</span><span class="s3">\n      </span><span class="s1">});</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">} catch (error) {</span><span class="s3">\n    </span><span class="s1">printRunDoctorTip();</span><span class="s3">\n    </span><span class="s1">throw createInstallError(error as any);</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">(devices.length &gt; 0 ? devices : [undefined]).forEach(</span><span class="s3">\n    </span><span class="s1">(device: string | void) =&gt; {</span><span class="s3">\n      </span><span class="s1">tryRunAdbReverse(args.port, device);</span><span class="s3">\n      </span><span class="s1">if (args.binaryPath &amp;&amp; device) {</span><span class="s3">\n        </span><span class="s1">tryInstallAppOnDevice(args, adbPath, device, androidProject);</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n      </span><span class="s1">tryLaunchAppOnDevice(device, androidProject.packageName, adbPath, args);</span><span class="s3">\n    </span><span class="s1">},</span><span class="s3">\n  </span><span class="s1">);</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">function createInstallError(error: Error &amp; {stderr: string}) {</span><span class="s3">\n  </span><span class="s1">const stderr = (error.stderr || '').toString();</span><span class="s3">\n  </span><span class="s1">let message = error.message ?? '';</span><span class="s3">\n  </span><span class="s1">// Pass the error message from the command to stdout because we pipe it to</span><span class="s3">\n  </span><span class="s1">// parent process so it's not visible</span><span class="s3">\n  </span><span class="s1">logger.log(stderr);</span><span class="s3">\n\n  </span><span class="s1">// Handle some common failures and make the errors more helpful</span><span class="s3">\n  </span><span class="s1">if (stderr.includes('No connected devices')) {</span><span class="s3">\n    </span><span class="s1">message =</span><span class="s3">\n      </span><span class="s1">'Make sure you have an Android emulator running or a device connected.';</span><span class="s3">\n  </span><span class="s1">} else if (</span><span class="s3">\n    </span><span class="s1">stderr.includes('licences have not been accepted') ||</span><span class="s3">\n    </span><span class="s1">stderr.includes('accept the SDK license')</span><span class="s3">\n  </span><span class="s1">) {</span><span class="s3">\n    </span><span class="s1">message = `Please accept all necessary Android SDK licenses using Android SDK Manager: </span><span class="s3">\&quot;</span><span class="s1">${chalk.bold(</span><span class="s3">\n      </span><span class="s1">'$ANDROID_HOME/tools/bin/sdkmanager --licenses',</span><span class="s3">\n    </span><span class="s1">)}.</span><span class="s3">\&quot;</span><span class="s1">`;</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">return new CLIError(</span><span class="s3">\n    </span><span class="s1">`Failed to install the app. ${message}`,</span><span class="s3">\n    </span><span class="s1">message.length &gt; 0 ? undefined : error,</span><span class="s3">\n  </span><span class="s1">);</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">export default runOnAllDevices;</span><span class="s3">\n</span><span class="s1">&quot;</span><span class="s0">],</span><span class="s1">&quot;mappings&quot;</span><span class="s0">:</span><span class="s1">&quot;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&quot;</span><span class="s0">}</span></pre>
</body>
</html>