<html>
<head>
<title>NativeStackView.tsx</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<style type="text/css">
.s0 { color: #cc7832;}
.s1 { color: #a9b7c6;}
.s2 { color: #9876aa; font-style: italic;}
.s3 { color: #a9b7c6;}
.s4 { color: #6a8759;}
.s5 { color: #808080;}
.s6 { color: #a9b7c6;}
.s7 { color: #e8bf6a;}
.s8 { color: #bbb529;}
.s9 { color: #ffc66d;}
.s10 { color: #d0d0ff;}
.s11 { color: #6897bb; font-style: italic;}
</style>
</head>
<body bgcolor="#2b2b2b">
<table CELLSPACING=0 CELLPADDING=5 COLS=1 WIDTH="100%" BGCOLOR="#606060" >
<tr><td><center>
<font face="Arial, Helvetica" color="#000000">
NativeStackView.tsx</font>
</center></td></tr></table>
<pre><span class="s0">import </span><span class="s2">* </span><span class="s0">as </span><span class="s3">React </span><span class="s0">from </span><span class="s4">'react'</span><span class="s1">;</span>
<span class="s0">import </span><span class="s1">{ </span><span class="s3">Platform</span><span class="s1">, </span><span class="s3">StyleSheet</span><span class="s1">, </span><span class="s3">View</span><span class="s1">, </span><span class="s3">ViewProps </span><span class="s1">} </span><span class="s0">from </span><span class="s4">'react-native'</span><span class="s1">;</span>
<span class="s5">// @ts-ignore Getting private component</span>
<span class="s5">// eslint-disable-next-line import/no-named-as-default, import/default, import/no-named-as-default-member, import/namespace</span>
<span class="s0">import </span><span class="s3">AppContainer </span><span class="s0">from </span><span class="s4">'react-native/Libraries/ReactNative/AppContainer'</span><span class="s1">;</span>
<span class="s0">import </span><span class="s3">warnOnce </span><span class="s0">from </span><span class="s4">'warn-once'</span><span class="s1">;</span>
<span class="s0">import </span><span class="s1">{</span>
  <span class="s3">ScreenStack</span><span class="s1">,</span>
  <span class="s3">StackPresentationTypes</span><span class="s1">,</span>
  <span class="s3">ScreenContext</span><span class="s1">,</span>
<span class="s1">} </span><span class="s0">from </span><span class="s4">'react-native-screens'</span><span class="s1">;</span>
<span class="s0">import </span><span class="s1">{</span>
  <span class="s3">ParamListBase</span><span class="s1">,</span>
  <span class="s3">StackActions</span><span class="s1">,</span>
  <span class="s3">StackNavigationState</span><span class="s1">,</span>
  <span class="s3">useTheme</span><span class="s1">,</span>
  <span class="s3">Route</span><span class="s1">,</span>
  <span class="s3">NavigationState</span><span class="s1">,</span>
  <span class="s3">PartialState</span><span class="s1">,</span>
<span class="s1">} </span><span class="s0">from </span><span class="s4">'@react-navigation/native'</span><span class="s1">;</span>
<span class="s0">import </span><span class="s1">{</span>
  <span class="s3">useSafeAreaFrame</span><span class="s1">,</span>
  <span class="s3">useSafeAreaInsets</span><span class="s1">,</span>
<span class="s1">} </span><span class="s0">from </span><span class="s4">'react-native-safe-area-context'</span><span class="s1">;</span>

<span class="s0">import </span><span class="s1">{</span>
  <span class="s3">NativeStackDescriptorMap</span><span class="s1">,</span>
  <span class="s3">NativeStackNavigationHelpers</span><span class="s1">,</span>
  <span class="s3">NativeStackNavigationOptions</span><span class="s1">,</span>
<span class="s1">} </span><span class="s0">from </span><span class="s4">'../types'</span><span class="s1">;</span>
<span class="s0">import </span><span class="s3">HeaderConfig </span><span class="s0">from </span><span class="s4">'./HeaderConfig'</span><span class="s1">;</span>
<span class="s0">import </span><span class="s3">SafeAreaProviderCompat </span><span class="s0">from </span><span class="s4">'../utils/SafeAreaProviderCompat'</span><span class="s1">;</span>
<span class="s0">import </span><span class="s3">getDefaultHeaderHeight </span><span class="s0">from </span><span class="s4">'../utils/getDefaultHeaderHeight'</span><span class="s1">;</span>
<span class="s0">import </span><span class="s3">HeaderHeightContext </span><span class="s0">from </span><span class="s4">'../utils/HeaderHeightContext'</span><span class="s1">;</span>

<span class="s0">const </span><span class="s1">isAndroid </span><span class="s0">= </span><span class="s3">Platform</span><span class="s1">.</span><span class="s3">OS </span><span class="s0">=== </span><span class="s4">'android'</span><span class="s1">;</span>

<span class="s0">let </span><span class="s1">Container </span><span class="s0">= </span><span class="s3">View</span><span class="s1">;</span>

<span class="s0">if </span><span class="s1">(</span><span class="s3">__DEV__</span><span class="s1">) {</span>
  <span class="s0">const </span><span class="s1">DebugContainer </span><span class="s0">= </span><span class="s1">(</span>
    <span class="s3">props</span><span class="s0">: </span><span class="s3">ViewProps </span><span class="s0">&amp; </span><span class="s1">{ stackPresentation</span><span class="s0">: </span><span class="s3">StackPresentationTypes </span><span class="s1">}</span>
  <span class="s1">) </span><span class="s0">=&gt; </span><span class="s1">{</span>
    <span class="s0">const </span><span class="s1">{ stackPresentation, </span><span class="s0">...</span><span class="s1">rest } </span><span class="s0">= </span><span class="s3">props</span><span class="s1">;</span>
    <span class="s0">if </span><span class="s1">(</span><span class="s3">Platform</span><span class="s1">.</span><span class="s3">OS </span><span class="s0">=== </span><span class="s4">'ios' </span><span class="s0">&amp;&amp; </span><span class="s3">stackPresentation </span><span class="s0">!== </span><span class="s4">'push'</span><span class="s1">) {</span>
      <span class="s0">return </span><span class="s1">(</span>
        <span class="s6">&lt;</span><span class="s7">AppContainer</span><span class="s6">&gt;</span>
          <span class="s6">&lt;</span><span class="s7">View </span><span class="s8">{</span><span class="s0">...</span><span class="s3">rest</span><span class="s8">} </span><span class="s6">/&gt;</span>
        <span class="s6">&lt;/</span><span class="s7">AppContainer</span><span class="s6">&gt;</span>
      <span class="s1">);</span>
    <span class="s1">}</span>
    <span class="s0">return </span><span class="s6">&lt;</span><span class="s7">View </span><span class="s8">{</span><span class="s0">...</span><span class="s3">rest</span><span class="s8">} </span><span class="s6">/&gt;</span><span class="s1">;</span>
  <span class="s1">}; 
  </span><span class="s5">// @ts-ignore Wrong props</span>
  <span class="s3">Container </span><span class="s0">= </span><span class="s3">DebugContainer</span><span class="s1">;</span>
<span class="s1">}</span>

<span class="s0">const </span><span class="s1">MaybeNestedStack </span><span class="s0">= </span><span class="s1">({</span>
  <span class="s3">options</span><span class="s1">,</span>
  <span class="s3">route</span><span class="s1">,</span>
  <span class="s3">stackPresentation</span><span class="s1">,</span>
  <span class="s3">children</span><span class="s1">,</span>
<span class="s1">}</span><span class="s0">: </span><span class="s1">{</span>
  <span class="s1">options</span><span class="s0">: </span><span class="s3">NativeStackNavigationOptions</span><span class="s1">;</span>
  <span class="s1">route</span><span class="s0">: </span><span class="s3">Route</span><span class="s1">&lt;</span><span class="s3">string</span><span class="s1">&gt;;</span>
  <span class="s1">stackPresentation</span><span class="s0">: </span><span class="s3">StackPresentationTypes</span><span class="s1">;</span>
  <span class="s1">children</span><span class="s0">: </span><span class="s3">React</span><span class="s1">.</span><span class="s3">ReactNode</span><span class="s1">;</span>
<span class="s1">}) =&gt; { 
  </span><span class="s3">const </span><span class="s1">{ </span><span class="s3">colors </span><span class="s1">} </span><span class="s0">= </span><span class="s9">useTheme</span><span class="s1">(); 
  </span><span class="s3">const </span><span class="s1">{ </span><span class="s3">headerShown </span><span class="s0">= </span><span class="s2">true</span><span class="s1">, </span><span class="s3">contentStyle </span><span class="s1">} </span><span class="s0">= </span><span class="s3">options</span><span class="s1">; 
</span>
  <span class="s3">const Screen </span><span class="s0">= </span><span class="s3">React</span><span class="s1">.</span><span class="s9">useContext</span><span class="s1">(</span><span class="s3">ScreenContext</span><span class="s1">); 
</span>
  <span class="s3">const isHeaderInModal </span><span class="s0">= </span><span class="s3">isAndroid</span>
    <span class="s0">? </span><span class="s2">false</span>
    <span class="s0">: </span><span class="s3">stackPresentation </span><span class="s0">!== </span><span class="s4">'push' </span><span class="s0">&amp;&amp; </span><span class="s3">headerShown </span><span class="s0">=== </span><span class="s2">true</span><span class="s1">; 
</span>
  <span class="s3">const headerShownPreviousRef </span><span class="s0">= </span><span class="s3">React</span><span class="s1">.</span><span class="s9">useRef</span><span class="s1">(</span><span class="s3">headerShown</span><span class="s1">); 
</span>
  <span class="s3">React</span><span class="s1">.</span><span class="s9">useEffect</span><span class="s1">(() </span><span class="s0">=&gt; </span><span class="s1">{</span>
    <span class="s9">warnOnce</span><span class="s1">(</span>
      <span class="s0">!</span><span class="s3">isAndroid </span><span class="s0">&amp;&amp;</span>
        <span class="s3">stackPresentation </span><span class="s0">!== </span><span class="s4">'push' </span><span class="s0">&amp;&amp;</span>
        <span class="s3">headerShownPreviousRef</span><span class="s1">.</span><span class="s3">current </span><span class="s0">!== </span><span class="s3">headerShown</span><span class="s1">,</span>
      <span class="s4">`Dynamically changing 'headerShown' in modals will result in remounting the screen and losing all local state. See options for the screen '${</span><span class="s3">route</span><span class="s4">.</span><span class="s3">name</span><span class="s4">}'.`</span>
    <span class="s1">);</span>

    <span class="s3">headerShownPreviousRef</span><span class="s1">.</span><span class="s3">current </span><span class="s0">= </span><span class="s3">headerShown</span><span class="s1">;</span>
  <span class="s1">}, [</span><span class="s3">headerShown</span><span class="s1">, </span><span class="s3">stackPresentation</span><span class="s1">, </span><span class="s3">route</span><span class="s1">.</span><span class="s3">name</span><span class="s1">]); 
</span>
  <span class="s3">const </span><span class="s9">content </span><span class="s0">= </span><span class="s1">(</span>
    <span class="s6">&lt;</span><span class="s7">Container</span>
      <span class="s10">style</span><span class="s0">=</span><span class="s8">{[</span>
        <span class="s3">styles</span><span class="s8">.</span><span class="s3">container</span><span class="s8">,</span>
        <span class="s3">stackPresentation </span><span class="s0">!== </span><span class="s4">'transparentModal' </span><span class="s0">&amp;&amp;</span>
          <span class="s3">stackPresentation </span><span class="s0">!== </span><span class="s4">'containedTransparentModal' </span><span class="s0">&amp;&amp; </span><span class="s8">{</span>
            <span class="s8">backgroundColor: </span><span class="s3">colors</span><span class="s8">.</span><span class="s3">background</span><span class="s8">,</span>
          <span class="s8">},</span>
        <span class="s3">contentStyle</span><span class="s8">,</span>
      <span class="s8">]}</span>
      <span class="s5">// @ts-ignore Wrong props passed to View</span>
      <span class="s10">stackPresentation</span><span class="s0">=</span><span class="s8">{</span><span class="s3">stackPresentation</span><span class="s8">}</span>
    <span class="s8">&gt; 
      {children} 
    </span><span class="s6">&lt;/</span><span class="s7">Container</span><span class="s6">&gt;</span>
  <span class="s1">); 
</span>
  <span class="s3">const topInset </span><span class="s0">= </span><span class="s9">useSafeAreaInsets</span><span class="s1">().</span><span class="s3">top</span><span class="s1">; 
  </span><span class="s3">const dimensions </span><span class="s0">= </span><span class="s9">useSafeAreaFrame</span><span class="s1">(); 
  </span><span class="s3">const headerHeight </span><span class="s0">= </span><span class="s9">getDefaultHeaderHeight</span><span class="s1">(</span>
    <span class="s3">dimensions</span><span class="s1">,</span>
    <span class="s3">topInset</span><span class="s1">,</span>
    <span class="s3">stackPresentation</span>
  <span class="s1">); 
</span>
  <span class="s9">if </span><span class="s1">(</span><span class="s3">isHeaderInModal</span><span class="s1">) {</span>
    <span class="s3">return </span><span class="s1">( 
      &lt;</span><span class="s3">ScreenStack style</span><span class="s0">=</span><span class="s1">{styles.</span><span class="s3">container</span><span class="s1">}</span><span class="s0">&gt;</span>
        <span class="s1">&lt;</span><span class="s3">Screen enabled isNativeStack style</span><span class="s0">=</span><span class="s1">{StyleSheet.</span><span class="s3">absoluteFill</span><span class="s1">}</span><span class="s0">&gt;</span>
          <span class="s1">&lt;</span><span class="s3">HeaderHeightContext</span><span class="s1">.</span><span class="s3">Provider value</span><span class="s0">=</span><span class="s1">{</span><span class="s3">headerHeight</span><span class="s1">}</span><span class="s0">&gt;</span>
            <span class="s1">&lt;</span><span class="s3">HeaderConfig </span><span class="s1">{</span><span class="s0">...</span><span class="s3">options</span><span class="s1">} </span><span class="s3">route</span><span class="s0">=</span><span class="s1">{</span><span class="s3">route</span><span class="s1">} </span><span class="s0">/&gt;</span>
            <span class="s1">{</span><span class="s3">content</span><span class="s1">}</span>
          <span class="s1">&lt;/</span><span class="s3">HeaderHeightContext</span><span class="s1">.</span><span class="s3">Provider</span><span class="s1">&gt; 
        &lt;/</span><span class="s3">Screen</span><span class="s1">&gt; 
      &lt;/</span><span class="s3">ScreenStack</span><span class="s1">&gt; 
    ); 
  }</span>
  <span class="s3">return content</span><span class="s1">; 
}; 
</span>
<span class="s3">type NavigationRoute</span><span class="s0">&lt;</span>
  <span class="s3">ParamList extends ParamListBase</span><span class="s1">,</span>
  <span class="s3">RouteName extends keyof ParamList</span>
<span class="s0">&gt; = </span><span class="s3">Route</span><span class="s0">&lt;</span><span class="s3">Extract</span><span class="s0">&lt;</span><span class="s3">RouteName</span><span class="s1">, </span><span class="s3">string</span><span class="s0">&gt;</span><span class="s1">, </span><span class="s3">ParamList</span><span class="s1">[</span><span class="s3">RouteName</span><span class="s1">]</span><span class="s0">&gt; &amp; </span><span class="s1">{</span>
  <span class="s3">state</span><span class="s1">?: </span><span class="s3">NavigationState </span><span class="s1">| </span><span class="s3">PartialState</span><span class="s1">&lt;</span><span class="s3">NavigationState</span><span class="s1">&gt;; 
}; 
</span>
<span class="s3">const </span><span class="s9">RouteView </span><span class="s0">= </span><span class="s1">({</span>
  <span class="s3">descriptors</span><span class="s1">,</span>
  <span class="s3">route</span><span class="s1">,</span>
  <span class="s3">index</span><span class="s1">,</span>
  <span class="s3">navigation</span><span class="s1">,</span>
  <span class="s3">stateKey</span><span class="s1">,</span>
<span class="s1">}</span><span class="s0">: </span><span class="s1">{</span>
  <span class="s1">descriptors</span><span class="s0">: </span><span class="s3">NativeStackDescriptorMap</span><span class="s1">;</span>
  <span class="s1">route</span><span class="s0">: </span><span class="s3">NavigationRoute</span><span class="s1">&lt;</span><span class="s3">ParamListBase</span><span class="s1">, </span><span class="s3">string</span><span class="s1">&gt;;</span>
  <span class="s1">index</span><span class="s0">: </span><span class="s3">number</span><span class="s1">;</span>
  <span class="s1">navigation</span><span class="s0">: </span><span class="s3">NativeStackNavigationHelpers</span><span class="s1">;</span>
  <span class="s1">stateKey</span><span class="s0">: </span><span class="s3">string</span><span class="s1">;</span>
<span class="s1">}) =&gt; { 
  </span><span class="s3">const </span><span class="s1">{ </span><span class="s3">options</span><span class="s1">, </span><span class="s3">render</span><span class="s1">: </span><span class="s3">renderScene </span><span class="s1">} </span><span class="s0">= </span><span class="s3">descriptors</span><span class="s1">[</span><span class="s3">route</span><span class="s1">.</span><span class="s3">key</span><span class="s1">]; 
  </span><span class="s3">const </span><span class="s1">{</span>
    <span class="s3">gestureEnabled</span><span class="s1">,</span>
    <span class="s3">headerShown</span><span class="s1">,</span>
    <span class="s3">hideKeyboardOnSwipe</span><span class="s1">,</span>
    <span class="s3">homeIndicatorHidden</span><span class="s1">,</span>
    <span class="s3">sheetAllowedDetents </span><span class="s0">= </span><span class="s4">'large'</span><span class="s1">,</span>
    <span class="s3">sheetLargestUndimmedDetent </span><span class="s0">= </span><span class="s4">'all'</span><span class="s1">,</span>
    <span class="s3">sheetGrabberVisible </span><span class="s0">= </span><span class="s2">false</span><span class="s1">,</span>
    <span class="s3">sheetCornerRadius </span><span class="s0">= -</span><span class="s11">1.0</span><span class="s1">,</span>
    <span class="s3">sheetExpandsWhenScrolledToEdge </span><span class="s0">= </span><span class="s2">true</span><span class="s1">,</span>
    <span class="s3">nativeBackButtonDismissalEnabled </span><span class="s0">= </span><span class="s2">false</span><span class="s1">,</span>
    <span class="s3">navigationBarColor</span><span class="s1">,</span>
    <span class="s3">navigationBarHidden</span><span class="s1">,</span>
    <span class="s3">replaceAnimation </span><span class="s0">= </span><span class="s4">'pop'</span><span class="s1">,</span>
    <span class="s3">screenOrientation</span><span class="s1">,</span>
    <span class="s3">statusBarAnimation</span><span class="s1">,</span>
    <span class="s3">statusBarColor</span><span class="s1">,</span>
    <span class="s3">statusBarHidden</span><span class="s1">,</span>
    <span class="s3">statusBarStyle</span><span class="s1">,</span>
    <span class="s3">statusBarTranslucent</span><span class="s1">,</span>
    <span class="s3">swipeDirection </span><span class="s0">= </span><span class="s4">'horizontal'</span><span class="s1">,</span>
    <span class="s3">transitionDuration</span><span class="s1">,</span>
    <span class="s3">freezeOnBlur</span><span class="s1">,</span>
  <span class="s1">} </span><span class="s0">= </span><span class="s3">options</span><span class="s1">; 
</span>
  <span class="s3">let </span><span class="s1">{</span>
    <span class="s3">customAnimationOnSwipe</span><span class="s1">,</span>
    <span class="s3">fullScreenSwipeEnabled</span><span class="s1">,</span>
    <span class="s3">gestureResponseDistance</span><span class="s1">,</span>
    <span class="s3">stackAnimation</span><span class="s1">,</span>
    <span class="s3">stackPresentation </span><span class="s0">= </span><span class="s4">'push'</span><span class="s1">,</span>
  <span class="s1">} </span><span class="s0">= </span><span class="s3">options</span><span class="s1">; 
</span>
  <span class="s9">if </span><span class="s1">(</span><span class="s3">swipeDirection </span><span class="s0">=== </span><span class="s4">'vertical'</span><span class="s1">) {</span>
    <span class="s5">// for `vertical` direction to work, we need to set `fullScreenSwipeEnabled` to `true`</span>
    <span class="s5">// so the screen can be dismissed from any point on screen.</span>
    <span class="s5">// `customAnimationOnSwipe` needs to be set to `true` so the `stackAnimation` set by user can be used,</span>
    <span class="s5">// otherwise `simple_push` will be used.</span>
    <span class="s5">// Also, the default animation for this direction seems to be `slide_from_bottom`.</span>
    <span class="s3">if </span><span class="s1">(</span><span class="s3">fullScreenSwipeEnabled </span><span class="s1">=== </span><span class="s3">undefined</span><span class="s1">) {</span>
      <span class="s3">fullScreenSwipeEnabled </span><span class="s0">= </span><span class="s2">true</span><span class="s1">; 
    }</span>
    <span class="s3">if </span><span class="s1">(</span><span class="s3">customAnimationOnSwipe </span><span class="s1">=== </span><span class="s3">undefined</span><span class="s1">) {</span>
      <span class="s3">customAnimationOnSwipe </span><span class="s0">= </span><span class="s2">true</span><span class="s1">; 
    }</span>
    <span class="s3">if </span><span class="s1">(</span><span class="s3">stackAnimation </span><span class="s1">=== </span><span class="s3">undefined</span><span class="s1">) {</span>
      <span class="s3">stackAnimation </span><span class="s0">= </span><span class="s4">'slide_from_bottom'</span><span class="s1">; 
    }</span>
  <span class="s1">}</span>

  <span class="s9">if </span><span class="s1">(</span><span class="s3">index </span><span class="s0">=== </span><span class="s11">0</span><span class="s1">) {</span>
    <span class="s5">// first screen should always be treated as `push`, it resolves problems with no header animation</span>
    <span class="s5">// for navigator with first screen as `modal` and the next as `push`</span>
    <span class="s3">stackPresentation </span><span class="s0">= </span><span class="s4">'push'</span><span class="s1">; 
  }</span>

  <span class="s3">const isHeaderInPush </span><span class="s0">= </span><span class="s3">isAndroid</span>
    <span class="s0">? </span><span class="s3">headerShown</span>
    <span class="s0">: </span><span class="s3">stackPresentation </span><span class="s0">=== </span><span class="s4">'push' </span><span class="s0">&amp;&amp; </span><span class="s3">headerShown </span><span class="s0">!== </span><span class="s2">false</span><span class="s1">; 
</span>
  <span class="s3">const dimensions </span><span class="s0">= </span><span class="s9">useSafeAreaFrame</span><span class="s1">(); 
  </span><span class="s3">const topInset </span><span class="s0">= </span><span class="s9">useSafeAreaInsets</span><span class="s1">().</span><span class="s3">top</span><span class="s1">; 
  </span><span class="s3">const headerHeight </span><span class="s0">= </span><span class="s9">getDefaultHeaderHeight</span><span class="s1">(</span>
    <span class="s3">dimensions</span><span class="s1">,</span>
    <span class="s3">topInset</span><span class="s1">,</span>
    <span class="s3">stackPresentation</span>
  <span class="s1">); 
  </span><span class="s3">const parentHeaderHeight </span><span class="s0">= </span><span class="s3">React</span><span class="s1">.</span><span class="s9">useContext</span><span class="s1">(</span><span class="s3">HeaderHeightContext</span><span class="s1">); 
  </span><span class="s3">const Screen </span><span class="s0">= </span><span class="s3">React</span><span class="s1">.</span><span class="s9">useContext</span><span class="s1">(</span><span class="s3">ScreenContext</span><span class="s1">); 
</span>
  <span class="s3">const </span><span class="s1">{ </span><span class="s3">dark </span><span class="s1">} </span><span class="s0">= </span><span class="s9">useTheme</span><span class="s1">(); 
</span>
  <span class="s9">return </span><span class="s1">(</span>
    <span class="s6">&lt;</span><span class="s7">Screen</span>
      <span class="s10">key</span><span class="s0">=</span><span class="s8">{</span><span class="s3">route</span><span class="s8">.</span><span class="s3">key</span><span class="s8">}</span>
      <span class="s10">enabled</span>
      <span class="s10">isNativeStack</span>
      <span class="s10">style</span><span class="s0">=</span><span class="s8">{</span><span class="s3">StyleSheet</span><span class="s8">.</span><span class="s3">absoluteFill</span><span class="s8">}</span>
      <span class="s10">sheetAllowedDetents</span><span class="s0">=</span><span class="s8">{</span><span class="s3">sheetAllowedDetents</span><span class="s8">}</span>
      <span class="s10">sheetLargestUndimmedDetent</span><span class="s0">=</span><span class="s8">{</span><span class="s3">sheetLargestUndimmedDetent</span><span class="s8">}</span>
      <span class="s10">sheetGrabberVisible</span><span class="s0">=</span><span class="s8">{</span><span class="s3">sheetGrabberVisible</span><span class="s8">}</span>
      <span class="s10">sheetCornerRadius</span><span class="s0">=</span><span class="s8">{</span><span class="s3">sheetCornerRadius</span><span class="s8">}</span>
      <span class="s10">sheetExpandsWhenScrolledToEdge</span><span class="s0">=</span><span class="s8">{</span><span class="s3">sheetExpandsWhenScrolledToEdge</span><span class="s8">}</span>
      <span class="s10">customAnimationOnSwipe</span><span class="s0">=</span><span class="s8">{</span><span class="s3">customAnimationOnSwipe</span><span class="s8">}</span>
      <span class="s10">freezeOnBlur</span><span class="s0">=</span><span class="s8">{</span><span class="s3">freezeOnBlur</span><span class="s8">}</span>
      <span class="s10">fullScreenSwipeEnabled</span><span class="s0">=</span><span class="s8">{</span><span class="s3">fullScreenSwipeEnabled</span><span class="s8">}</span>
      <span class="s10">hideKeyboardOnSwipe</span><span class="s0">=</span><span class="s8">{</span><span class="s3">hideKeyboardOnSwipe</span><span class="s8">}</span>
      <span class="s10">homeIndicatorHidden</span><span class="s0">=</span><span class="s8">{</span><span class="s3">homeIndicatorHidden</span><span class="s8">}</span>
      <span class="s10">gestureEnabled</span><span class="s0">=</span><span class="s8">{</span><span class="s3">isAndroid </span><span class="s0">? </span><span class="s2">false </span><span class="s0">: </span><span class="s3">gestureEnabled</span><span class="s8">}</span>
      <span class="s10">gestureResponseDistance</span><span class="s0">=</span><span class="s8">{</span><span class="s3">gestureResponseDistance</span><span class="s8">}</span>
      <span class="s10">nativeBackButtonDismissalEnabled</span><span class="s0">=</span><span class="s8">{</span><span class="s3">nativeBackButtonDismissalEnabled</span><span class="s8">}</span>
      <span class="s10">navigationBarColor</span><span class="s0">=</span><span class="s8">{</span><span class="s3">navigationBarColor</span><span class="s8">}</span>
      <span class="s10">navigationBarHidden</span><span class="s0">=</span><span class="s8">{</span><span class="s3">navigationBarHidden</span><span class="s8">}</span>
      <span class="s10">replaceAnimation</span><span class="s0">=</span><span class="s8">{</span><span class="s3">replaceAnimation</span><span class="s8">}</span>
      <span class="s10">screenOrientation</span><span class="s0">=</span><span class="s8">{</span><span class="s3">screenOrientation</span><span class="s8">}</span>
      <span class="s10">stackAnimation</span><span class="s0">=</span><span class="s8">{</span><span class="s3">stackAnimation</span><span class="s8">}</span>
      <span class="s10">stackPresentation</span><span class="s0">=</span><span class="s8">{</span><span class="s3">stackPresentation</span><span class="s8">}</span>
      <span class="s10">statusBarAnimation</span><span class="s0">=</span><span class="s8">{</span><span class="s3">statusBarAnimation</span><span class="s8">}</span>
      <span class="s10">statusBarColor</span><span class="s0">=</span><span class="s8">{</span><span class="s3">statusBarColor</span><span class="s8">}</span>
      <span class="s10">statusBarHidden</span><span class="s0">=</span><span class="s8">{</span><span class="s3">statusBarHidden</span><span class="s8">}</span>
      <span class="s10">statusBarStyle</span><span class="s0">=</span><span class="s8">{</span><span class="s3">statusBarStyle </span><span class="s0">?? </span><span class="s8">(</span><span class="s3">dark </span><span class="s0">? </span><span class="s4">'light' </span><span class="s0">: </span><span class="s4">'dark'</span><span class="s8">)}</span>
      <span class="s10">statusBarTranslucent</span><span class="s0">=</span><span class="s8">{</span><span class="s3">statusBarTranslucent</span><span class="s8">}</span>
      <span class="s10">swipeDirection</span><span class="s0">=</span><span class="s8">{</span><span class="s3">swipeDirection</span><span class="s8">}</span>
      <span class="s10">transitionDuration</span><span class="s0">=</span><span class="s8">{</span><span class="s3">transitionDuration</span><span class="s8">}</span>
      <span class="s10">onHeaderBackButtonClicked</span><span class="s0">=</span><span class="s8">{() </span><span class="s0">=&gt; </span><span class="s8">{</span>
        <span class="s3">navigation</span><span class="s8">.</span><span class="s9">dispatch</span><span class="s8">({</span>
          <span class="s0">...</span><span class="s3">StackActions</span><span class="s8">.</span><span class="s9">pop</span><span class="s8">(),</span>
          <span class="s8">source: </span><span class="s3">route</span><span class="s8">.</span><span class="s3">key</span><span class="s8">,</span>
          <span class="s8">target: </span><span class="s3">stateKey</span><span class="s8">,</span>
        <span class="s8">});</span>
      <span class="s8">}}</span>
      <span class="s10">onWillAppear</span><span class="s0">=</span><span class="s8">{() </span><span class="s0">=&gt; </span><span class="s8">{</span>
        <span class="s3">navigation</span><span class="s8">.</span><span class="s9">emit</span><span class="s8">({</span>
          <span class="s8">type: </span><span class="s4">'transitionStart'</span><span class="s8">,</span>
          <span class="s8">data: { closing: </span><span class="s2">false </span><span class="s8">},</span>
          <span class="s8">target: </span><span class="s3">route</span><span class="s8">.</span><span class="s3">key</span><span class="s8">,</span>
        <span class="s8">});</span>
      <span class="s8">}}</span>
      <span class="s10">onWillDisappear</span><span class="s0">=</span><span class="s8">{() </span><span class="s0">=&gt; </span><span class="s8">{</span>
        <span class="s3">navigation</span><span class="s8">.</span><span class="s9">emit</span><span class="s8">({</span>
          <span class="s8">type: </span><span class="s4">'transitionStart'</span><span class="s8">,</span>
          <span class="s8">data: { closing: </span><span class="s2">true </span><span class="s8">},</span>
          <span class="s8">target: </span><span class="s3">route</span><span class="s8">.</span><span class="s3">key</span><span class="s8">,</span>
        <span class="s8">});</span>
      <span class="s8">}}</span>
      <span class="s10">onAppear</span><span class="s0">=</span><span class="s8">{() </span><span class="s0">=&gt; </span><span class="s8">{</span>
        <span class="s3">navigation</span><span class="s8">.</span><span class="s9">emit</span><span class="s8">({</span>
          <span class="s8">type: </span><span class="s4">'appear'</span><span class="s8">,</span>
          <span class="s8">target: </span><span class="s3">route</span><span class="s8">.</span><span class="s3">key</span><span class="s8">,</span>
        <span class="s8">});</span>
        <span class="s3">navigation</span><span class="s8">.</span><span class="s9">emit</span><span class="s8">({</span>
          <span class="s8">type: </span><span class="s4">'transitionEnd'</span><span class="s8">,</span>
          <span class="s8">data: { closing: </span><span class="s2">false </span><span class="s8">},</span>
          <span class="s8">target: </span><span class="s3">route</span><span class="s8">.</span><span class="s3">key</span><span class="s8">,</span>
        <span class="s8">});</span>
      <span class="s8">}}</span>
      <span class="s10">onDisappear</span><span class="s0">=</span><span class="s8">{() </span><span class="s0">=&gt; </span><span class="s8">{</span>
        <span class="s3">navigation</span><span class="s8">.</span><span class="s9">emit</span><span class="s8">({</span>
          <span class="s8">type: </span><span class="s4">'transitionEnd'</span><span class="s8">,</span>
          <span class="s8">data: { closing: </span><span class="s2">true </span><span class="s8">},</span>
          <span class="s8">target: </span><span class="s3">route</span><span class="s8">.</span><span class="s3">key</span><span class="s8">,</span>
        <span class="s8">});</span>
      <span class="s8">}}</span>
      <span class="s10">onDismissed</span><span class="s0">=</span><span class="s8">{(</span><span class="s3">e</span><span class="s8">) </span><span class="s0">=&gt; </span><span class="s8">{</span>
        <span class="s3">navigation</span><span class="s8">.</span><span class="s9">emit</span><span class="s8">({</span>
          <span class="s8">type: </span><span class="s4">'dismiss'</span><span class="s8">,</span>
          <span class="s8">target: </span><span class="s3">route</span><span class="s8">.</span><span class="s3">key</span><span class="s8">,</span>
        <span class="s8">});</span>

        <span class="s0">const </span><span class="s8">dismissCount </span><span class="s0">=</span>
          <span class="s3">e</span><span class="s8">.</span><span class="s3">nativeEvent</span><span class="s8">.</span><span class="s3">dismissCount </span><span class="s0">&gt; </span><span class="s11">0 </span><span class="s0">? </span><span class="s3">e</span><span class="s8">.</span><span class="s3">nativeEvent</span><span class="s8">.</span><span class="s3">dismissCount </span><span class="s0">: </span><span class="s11">1</span><span class="s8">;</span>

        <span class="s3">navigation</span><span class="s8">.</span><span class="s9">dispatch</span><span class="s8">({</span>
          <span class="s0">...</span><span class="s3">StackActions</span><span class="s8">.</span><span class="s9">pop</span><span class="s8">(</span><span class="s3">dismissCount</span><span class="s8">),</span>
          <span class="s8">source: </span><span class="s3">route</span><span class="s8">.</span><span class="s3">key</span><span class="s8">,</span>
          <span class="s8">target: </span><span class="s3">stateKey</span><span class="s8">,</span>
        <span class="s8">});</span>
      <span class="s8">}}</span>
    <span class="s8">&gt; 
      </span><span class="s6">&lt;</span><span class="s7">HeaderHeightContext.Provider</span>
        <span class="s10">value</span><span class="s0">=</span><span class="s8">{</span>
          <span class="s3">isHeaderInPush </span><span class="s0">!== </span><span class="s2">false </span><span class="s0">? </span><span class="s3">headerHeight </span><span class="s0">: </span><span class="s3">parentHeaderHeight </span><span class="s0">?? </span><span class="s11">0</span>
        <span class="s8">}</span>
      <span class="s6">&gt;</span>
        <span class="s6">&lt;</span><span class="s7">HeaderConfig </span><span class="s8">{</span><span class="s0">...</span><span class="s3">options</span><span class="s8">} </span><span class="s10">route</span><span class="s0">=</span><span class="s8">{</span><span class="s3">route</span><span class="s8">} </span><span class="s10">headerShown</span><span class="s0">=</span><span class="s8">{</span><span class="s3">isHeaderInPush</span><span class="s8">} </span><span class="s6">/&gt;</span>
        <span class="s6">&lt;</span><span class="s7">MaybeNestedStack</span>
          <span class="s10">options</span><span class="s0">=</span><span class="s8">{</span><span class="s3">options</span><span class="s8">}</span>
          <span class="s10">route</span><span class="s0">=</span><span class="s8">{</span><span class="s3">route</span><span class="s8">}</span>
          <span class="s10">stackPresentation</span><span class="s0">=</span><span class="s8">{</span><span class="s3">stackPresentation</span><span class="s8">}</span>
        <span class="s8">&gt; 
          {renderScene()} 
        </span><span class="s6">&lt;/</span><span class="s7">MaybeNestedStack</span><span class="s6">&gt;</span>
      <span class="s6">&lt;/</span><span class="s7">HeaderHeightContext.Provider</span><span class="s6">&gt;</span>
    <span class="s0">&lt;/</span><span class="s3">Screen</span><span class="s0">&gt;</span>
  <span class="s1">); 
}; 
</span>
<span class="s3">type Props </span><span class="s0">= </span><span class="s1">{</span>
  <span class="s1">state: </span><span class="s3">StackNavigationState</span><span class="s0">&lt;</span><span class="s3">ParamListBase</span><span class="s0">&gt;</span><span class="s1">; 
  </span><span class="s3">navigation</span><span class="s1">: </span><span class="s3">NativeStackNavigationHelpers</span><span class="s1">; 
  </span><span class="s3">descriptors</span><span class="s1">: </span><span class="s3">NativeStackDescriptorMap</span><span class="s1">; 
}; 
</span>
<span class="s0">function </span><span class="s1">NativeStackViewInner({</span>
  <span class="s3">state</span><span class="s1">,</span>
  <span class="s3">navigation</span><span class="s1">,</span>
  <span class="s3">descriptors</span><span class="s1">,</span>
<span class="s1">}</span><span class="s0">: </span><span class="s3">Props</span><span class="s1">)</span><span class="s0">: </span><span class="s3">JSX</span><span class="s1">.</span><span class="s3">Element </span><span class="s1">{</span>
  <span class="s0">const </span><span class="s1">{ key, routes } </span><span class="s0">= </span><span class="s3">state</span><span class="s1">;</span>

  <span class="s0">return </span><span class="s1">(</span>
    <span class="s6">&lt;</span><span class="s7">ScreenStack </span><span class="s10">style</span><span class="s0">=</span><span class="s8">{</span><span class="s3">styles</span><span class="s8">.</span><span class="s3">container</span><span class="s8">}</span><span class="s6">&gt;</span>
      <span class="s8">{</span><span class="s3">routes</span><span class="s8">.</span><span class="s9">map</span><span class="s8">((</span><span class="s3">route</span><span class="s8">, </span><span class="s3">index</span><span class="s8">) </span><span class="s0">=&gt; </span><span class="s8">(</span>
        <span class="s6">&lt;</span><span class="s7">RouteView</span>
          <span class="s10">key</span><span class="s0">=</span><span class="s8">{</span><span class="s3">route</span><span class="s8">.</span><span class="s3">key</span><span class="s8">}</span>
          <span class="s10">descriptors</span><span class="s0">=</span><span class="s8">{</span><span class="s3">descriptors</span><span class="s8">}</span>
          <span class="s10">route</span><span class="s0">=</span><span class="s8">{</span><span class="s3">route</span><span class="s8">}</span>
          <span class="s10">index</span><span class="s0">=</span><span class="s8">{</span><span class="s3">index</span><span class="s8">}</span>
          <span class="s10">navigation</span><span class="s0">=</span><span class="s8">{</span><span class="s3">navigation</span><span class="s8">}</span>
          <span class="s10">stateKey</span><span class="s0">=</span><span class="s8">{</span><span class="s3">key</span><span class="s8">}</span>
        <span class="s8">/&gt; 
      ))} 
    </span><span class="s6">&lt;/</span><span class="s7">ScreenStack</span><span class="s6">&gt;</span>
  <span class="s8">); 
} 
</span>
<span class="s3">export default </span><span class="s0">function </span><span class="s8">NativeStackView(</span><span class="s3">props</span><span class="s0">: </span><span class="s3">Props</span><span class="s8">) {</span>
  <span class="s0">return </span><span class="s8">(</span>
    <span class="s6">&lt;</span><span class="s7">SafeAreaProviderCompat</span><span class="s6">&gt;</span>
      <span class="s6">&lt;</span><span class="s7">NativeStackViewInner </span><span class="s8">{</span><span class="s0">...</span><span class="s3">props</span><span class="s8">} </span><span class="s6">/&gt;</span>
    <span class="s6">&lt;/</span><span class="s7">SafeAreaProviderCompat</span><span class="s6">&gt;</span>
  <span class="s8">);</span>
<span class="s8">}</span>

<span class="s3">const styles </span><span class="s0">= </span><span class="s3">StyleSheet</span><span class="s8">.</span><span class="s9">create</span><span class="s8">({</span>
  <span class="s8">container: {</span>
    <span class="s8">flex: </span><span class="s11">1</span><span class="s8">,</span>
  <span class="s8">},</span>
<span class="s8">}); 
</span></pre>
</body>
</html>