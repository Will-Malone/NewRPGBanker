<html>
<head>
<title>abort-controller.js.map</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<style type="text/css">
.s0 { color: #a9b7c6;}
.s1 { color: #6a8759;}
.s2 { color: #6897bb; font-style: italic;}
.s3 { color: #cc7832; font-style: italic;}
</style>
</head>
<body bgcolor="#2b2b2b">
<table CELLSPACING=0 CELLPADDING=5 COLS=1 WIDTH="100%" BGCOLOR="#606060" >
<tr><td><center>
<font face="Arial, Helvetica" color="#000000">
abort-controller.js.map</font>
</center></td></tr></table>
<pre><span class="s0">{</span><span class="s1">&quot;version&quot;</span><span class="s0">:</span><span class="s2">3</span><span class="s0">,</span><span class="s1">&quot;file&quot;</span><span class="s0">:</span><span class="s1">&quot;abort-controller.js&quot;</span><span class="s0">,</span><span class="s1">&quot;sources&quot;</span><span class="s0">:[</span><span class="s1">&quot;../src/abort-signal.ts&quot;</span><span class="s0">,</span><span class="s1">&quot;../src/abort-controller.ts&quot;</span><span class="s0">],</span><span class="s1">&quot;sourcesContent&quot;</span><span class="s0">:[</span><span class="s1">&quot;import {</span><span class="s3">\n    </span><span class="s1">// Event,</span><span class="s3">\n    </span><span class="s1">EventTarget,</span><span class="s3">\n    </span><span class="s1">// Type,</span><span class="s3">\n    </span><span class="s1">defineEventAttribute,</span><span class="s3">\n</span><span class="s1">} from </span><span class="s3">\&quot;</span><span class="s1">event-target-shim</span><span class="s3">\&quot;\n\n</span><span class="s1">// Known Limitation</span><span class="s3">\n</span><span class="s1">//   Use `any` because the type of `AbortSignal` in `lib.dom.d.ts` is wrong and</span><span class="s3">\n</span><span class="s1">//   to make assignable our `AbortSignal` into that.</span><span class="s3">\n</span><span class="s1">//   https://github.com/Microsoft/TSJS-lib-generator/pull/623</span><span class="s3">\n</span><span class="s1">type Events = {</span><span class="s3">\n    </span><span class="s1">abort: any // Event &amp; Type&lt;</span><span class="s3">\&quot;</span><span class="s1">abort</span><span class="s3">\&quot;</span><span class="s1">&gt;</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n</span><span class="s1">type EventAttributes = {</span><span class="s3">\n    </span><span class="s1">onabort: any // Event &amp; Type&lt;</span><span class="s3">\&quot;</span><span class="s1">abort</span><span class="s3">\&quot;</span><span class="s1">&gt;</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">/**</span><span class="s3">\n </span><span class="s1">* The signal class.</span><span class="s3">\n </span><span class="s1">* @see https://dom.spec.whatwg.org/#abortsignal</span><span class="s3">\n </span><span class="s1">*/</span><span class="s3">\n</span><span class="s1">export default class AbortSignal extends EventTarget&lt;Events, EventAttributes&gt; {</span><span class="s3">\n    </span><span class="s1">/**</span><span class="s3">\n     </span><span class="s1">* AbortSignal cannot be constructed directly.</span><span class="s3">\n     </span><span class="s1">*/</span><span class="s3">\n    </span><span class="s1">public constructor() {</span><span class="s3">\n        </span><span class="s1">super()</span><span class="s3">\n        </span><span class="s1">throw new TypeError(</span><span class="s3">\&quot;</span><span class="s1">AbortSignal cannot be constructed directly</span><span class="s3">\&quot;</span><span class="s1">)</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n\n    </span><span class="s1">/**</span><span class="s3">\n     </span><span class="s1">* Returns `true` if this `AbortSignal`'s `AbortController` has signaled to abort, and `false` otherwise.</span><span class="s3">\n     </span><span class="s1">*/</span><span class="s3">\n    </span><span class="s1">public get aborted(): boolean {</span><span class="s3">\n        </span><span class="s1">const aborted = abortedFlags.get(this)</span><span class="s3">\n        </span><span class="s1">if (typeof aborted !== </span><span class="s3">\&quot;</span><span class="s1">boolean</span><span class="s3">\&quot;</span><span class="s1">) {</span><span class="s3">\n            </span><span class="s1">throw new TypeError(</span><span class="s3">\n                </span><span class="s1">`Expected 'this' to be an 'AbortSignal' object, but got ${</span><span class="s3">\n                    </span><span class="s1">this === null ? </span><span class="s3">\&quot;</span><span class="s1">null</span><span class="s3">\&quot; </span><span class="s1">: typeof this</span><span class="s3">\n                </span><span class="s1">}`,</span><span class="s3">\n            </span><span class="s1">)</span><span class="s3">\n        </span><span class="s1">}</span><span class="s3">\n        </span><span class="s1">return aborted</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n</span><span class="s1">defineEventAttribute(AbortSignal.prototype, </span><span class="s3">\&quot;</span><span class="s1">abort</span><span class="s3">\&quot;</span><span class="s1">)</span><span class="s3">\n\n</span><span class="s1">/**</span><span class="s3">\n </span><span class="s1">* Create an AbortSignal object.</span><span class="s3">\n </span><span class="s1">*/</span><span class="s3">\n</span><span class="s1">export function createAbortSignal(): AbortSignal {</span><span class="s3">\n    </span><span class="s1">const signal = Object.create(AbortSignal.prototype)</span><span class="s3">\n    </span><span class="s1">EventTarget.call(signal)</span><span class="s3">\n    </span><span class="s1">abortedFlags.set(signal, false)</span><span class="s3">\n    </span><span class="s1">return signal</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">/**</span><span class="s3">\n </span><span class="s1">* Abort a given signal.</span><span class="s3">\n </span><span class="s1">*/</span><span class="s3">\n</span><span class="s1">export function abortSignal(signal: AbortSignal): void {</span><span class="s3">\n    </span><span class="s1">if (abortedFlags.get(signal) !== false) {</span><span class="s3">\n        </span><span class="s1">return</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n\n    </span><span class="s1">abortedFlags.set(signal, true)</span><span class="s3">\n    </span><span class="s1">signal.dispatchEvent&lt;</span><span class="s3">\&quot;</span><span class="s1">abort</span><span class="s3">\&quot;</span><span class="s1">&gt;({ type: </span><span class="s3">\&quot;</span><span class="s1">abort</span><span class="s3">\&quot; </span><span class="s1">})</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">/**</span><span class="s3">\n </span><span class="s1">* Aborted flag for each instances.</span><span class="s3">\n </span><span class="s1">*/</span><span class="s3">\n</span><span class="s1">const abortedFlags = new WeakMap&lt;AbortSignal, boolean&gt;()</span><span class="s3">\n\n</span><span class="s1">// Properties should be enumerable.</span><span class="s3">\n</span><span class="s1">Object.defineProperties(AbortSignal.prototype, {</span><span class="s3">\n    </span><span class="s1">aborted: { enumerable: true },</span><span class="s3">\n</span><span class="s1">})</span><span class="s3">\n\n</span><span class="s1">// `toString()` should return `</span><span class="s3">\&quot;</span><span class="s1">[object AbortSignal]</span><span class="s3">\&quot;</span><span class="s1">`</span><span class="s3">\n</span><span class="s1">if (typeof Symbol === </span><span class="s3">\&quot;</span><span class="s1">function</span><span class="s3">\&quot; </span><span class="s1">&amp;&amp; typeof Symbol.toStringTag === </span><span class="s3">\&quot;</span><span class="s1">symbol</span><span class="s3">\&quot;</span><span class="s1">) {</span><span class="s3">\n    </span><span class="s1">Object.defineProperty(AbortSignal.prototype, Symbol.toStringTag, {</span><span class="s3">\n        </span><span class="s1">configurable: true,</span><span class="s3">\n        </span><span class="s1">value: </span><span class="s3">\&quot;</span><span class="s1">AbortSignal</span><span class="s3">\&quot;</span><span class="s1">,</span><span class="s3">\n    </span><span class="s1">})</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n</span><span class="s1">&quot;</span><span class="s0">,</span><span class="s1">&quot;import AbortSignal, { abortSignal, createAbortSignal } from </span><span class="s3">\&quot;</span><span class="s1">./abort-signal</span><span class="s3">\&quot;\n\n</span><span class="s1">/**</span><span class="s3">\n </span><span class="s1">* The AbortController.</span><span class="s3">\n </span><span class="s1">* @see https://dom.spec.whatwg.org/#abortcontroller</span><span class="s3">\n </span><span class="s1">*/</span><span class="s3">\n</span><span class="s1">export default class AbortController {</span><span class="s3">\n    </span><span class="s1">/**</span><span class="s3">\n     </span><span class="s1">* Initialize this controller.</span><span class="s3">\n     </span><span class="s1">*/</span><span class="s3">\n    </span><span class="s1">public constructor() {</span><span class="s3">\n        </span><span class="s1">signals.set(this, createAbortSignal())</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n\n    </span><span class="s1">/**</span><span class="s3">\n     </span><span class="s1">* Returns the `AbortSignal` object associated with this object.</span><span class="s3">\n     </span><span class="s1">*/</span><span class="s3">\n    </span><span class="s1">public get signal(): AbortSignal {</span><span class="s3">\n        </span><span class="s1">return getSignal(this)</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n\n    </span><span class="s1">/**</span><span class="s3">\n     </span><span class="s1">* Abort and signal to any observers that the associated activity is to be aborted.</span><span class="s3">\n     </span><span class="s1">*/</span><span class="s3">\n    </span><span class="s1">public abort(): void {</span><span class="s3">\n        </span><span class="s1">abortSignal(getSignal(this))</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">/**</span><span class="s3">\n </span><span class="s1">* Associated signals.</span><span class="s3">\n </span><span class="s1">*/</span><span class="s3">\n</span><span class="s1">const signals = new WeakMap&lt;AbortController, AbortSignal&gt;()</span><span class="s3">\n\n</span><span class="s1">/**</span><span class="s3">\n </span><span class="s1">* Get the associated signal of a given controller.</span><span class="s3">\n </span><span class="s1">*/</span><span class="s3">\n</span><span class="s1">function getSignal(controller: AbortController): AbortSignal {</span><span class="s3">\n    </span><span class="s1">const signal = signals.get(controller)</span><span class="s3">\n    </span><span class="s1">if (signal == null) {</span><span class="s3">\n        </span><span class="s1">throw new TypeError(</span><span class="s3">\n            </span><span class="s1">`Expected 'this' to be an 'AbortController' object, but got ${</span><span class="s3">\n                </span><span class="s1">controller === null ? </span><span class="s3">\&quot;</span><span class="s1">null</span><span class="s3">\&quot; </span><span class="s1">: typeof controller</span><span class="s3">\n            </span><span class="s1">}`,</span><span class="s3">\n        </span><span class="s1">)</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">return signal</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">// Properties should be enumerable.</span><span class="s3">\n</span><span class="s1">Object.defineProperties(AbortController.prototype, {</span><span class="s3">\n    </span><span class="s1">signal: { enumerable: true },</span><span class="s3">\n    </span><span class="s1">abort: { enumerable: true },</span><span class="s3">\n</span><span class="s1">})</span><span class="s3">\n\n</span><span class="s1">if (typeof Symbol === </span><span class="s3">\&quot;</span><span class="s1">function</span><span class="s3">\&quot; </span><span class="s1">&amp;&amp; typeof Symbol.toStringTag === </span><span class="s3">\&quot;</span><span class="s1">symbol</span><span class="s3">\&quot;</span><span class="s1">) {</span><span class="s3">\n    </span><span class="s1">Object.defineProperty(AbortController.prototype, Symbol.toStringTag, {</span><span class="s3">\n        </span><span class="s1">configurable: true,</span><span class="s3">\n        </span><span class="s1">value: </span><span class="s3">\&quot;</span><span class="s1">AbortController</span><span class="s3">\&quot;</span><span class="s1">,</span><span class="s3">\n    </span><span class="s1">})</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">export { AbortController, AbortSignal }</span><span class="s3">\n</span><span class="s1">&quot;</span><span class="s0">],</span><span class="s1">&quot;names&quot;</span><span class="s0">:[</span><span class="s1">&quot;EventTarget&quot;</span><span class="s0">,</span><span class="s1">&quot;defineEventAttribute&quot;</span><span class="s0">],</span><span class="s1">&quot;mappings&quot;</span><span class="s0">:</span><span class="s1">&quot;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&quot;</span><span class="s0">}</span></pre>
</body>
</html>