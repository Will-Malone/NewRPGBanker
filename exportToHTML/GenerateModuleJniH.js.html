<html>
<head>
<title>GenerateModuleJniH.js</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<style type="text/css">
.s0 { color: #808080;}
.s1 { color: #a9b7c6;}
.s2 { color: #6a8759;}
.s3 { color: #cc7832;}
.s4 { color: #6897bb;}
</style>
</head>
<body bgcolor="#2b2b2b">
<table CELLSPACING=0 CELLPADDING=5 COLS=1 WIDTH="100%" BGCOLOR="#606060" >
<tr><td><center>
<font face="Arial, Helvetica" color="#000000">
GenerateModuleJniH.js</font>
</center></td></tr></table>
<pre><span class="s0">/** 
 * Copyright (c) Meta Platforms, Inc. and affiliates. 
 * 
 * This source code is licensed under the MIT license found in the 
 * LICENSE file in the root directory of this source tree. 
 * 
 * 
 * @format 
 */</span>

<span class="s2">'use strict'</span><span class="s1">;</span>

<span class="s1">const _require = require(</span><span class="s2">'./Utils'</span><span class="s1">),</span>
  <span class="s1">getModules = _require.getModules;</span>
<span class="s1">const ModuleClassDeclarationTemplate = ({hasteModuleName}) =&gt; {</span>
  <span class="s3">return </span><span class="s1">`</span><span class="s0">/** 
 * JNI C++ class for module '${hasteModuleName}' 
 */</span>
<span class="s1">class JSI_EXPORT ${hasteModuleName}SpecJSI : public JavaTurboModule {</span>
<span class="s1">public:</span>
  <span class="s1">${hasteModuleName}SpecJSI(const JavaTurboModule::InitParams &amp;params);</span>
<span class="s1">};</span>
<span class="s1">`;</span>
<span class="s1">};</span>
<span class="s1">const HeaderFileTemplate = ({modules, libraryName}) =&gt; {</span>
  <span class="s3">return </span><span class="s1">`</span>
<span class="s0">/** 
 * This code was generated by [react-native-codegen](https://www.npmjs.com/package/react-native-codegen). 
 * 
 * Do not edit this file as changes may cause incorrect behavior and will be lost 
 * once the code is regenerated. 
 * 
 * ${'@'}generated by codegen project: GenerateModuleJniH.js 
 */</span>

<span class="s1">#pragma once</span>

<span class="s1">#include &lt;ReactCommon/JavaTurboModule.h&gt;</span>
<span class="s1">#include &lt;ReactCommon/TurboModule.h&gt;</span>
<span class="s1">#include &lt;jsi/jsi.h&gt;</span>

<span class="s1">namespace facebook {</span>
<span class="s1">namespace react {</span>

<span class="s1">${modules}</span>

<span class="s1">JSI_EXPORT</span>
<span class="s1">std::shared_ptr&lt;TurboModule&gt; ${libraryName}_ModuleProvider(const std::string &amp;moduleName, const JavaTurboModule::InitParams &amp;params);</span>

<span class="s1">} </span><span class="s0">// namespace react</span>
<span class="s1">} </span><span class="s0">// namespace facebook</span>
<span class="s1">`;</span>
<span class="s1">};</span>

<span class="s0">// Note: this CMakeLists.txt template includes dependencies for both NativeModule and components.</span>
<span class="s1">const CMakeListsTemplate = ({libraryName}) =&gt; {</span>
  <span class="s3">return </span><span class="s1">`# Copyright (c) Meta Platforms, Inc. and affiliates.</span>
<span class="s1">#</span>
<span class="s1"># This source code is licensed under the MIT license found </span><span class="s3">in </span><span class="s1">the</span>
<span class="s1"># LICENSE file </span><span class="s3">in </span><span class="s1">the root directory of </span><span class="s3">this </span><span class="s1">source tree.</span>

<span class="s1">cmake_minimum_required(VERSION </span><span class="s4">3.13</span><span class="s1">)</span>
<span class="s1">set(CMAKE_VERBOSE_MAKEFILE on)</span>

<span class="s1">file(GLOB react_codegen_SRCS CONFIGURE_DEPENDS *.cpp react/renderer/components/${libraryName}</span><span class="s0">/*.cpp) 
 
add_library( 
  react_codegen_${libraryName} 
  SHARED 
  \${react_codegen_SRCS} 
) 
 
target_include_directories(react_codegen_${libraryName} PUBLIC . react/renderer/components/${libraryName}) 
 
target_link_libraries( 
  react_codegen_${libraryName} 
  fbjni 
  folly_runtime 
  glog 
  jsi 
  ${libraryName !== 'rncore' ? 'react_codegen_rncore' : ''} 
  react_debug 
  react_nativemodule_core 
  react_render_core 
  react_render_debug 
  react_render_graphics 
  react_render_imagemanager 
  rrc_image 
  rrc_view 
  turbomodulejsijni 
  yoga 
) 
 
target_compile_options( 
  react_codegen_${libraryName} 
  PRIVATE 
  -DLOG_TAG=\\&quot;ReactNative\\&quot; 
  -fexceptions 
  -frtti 
  -std=c++17 
  -Wall 
) 
`; 
}; 
module.exports = { 
  generate(libraryName, schema, packageName, assumeNonnull = false) { 
    const nativeModules = getModules(schema); 
    const modules = Object.keys(nativeModules) 
      .filter(hasteModuleName =&gt; { 
        const module = nativeModules[hasteModuleName]; 
        return !( 
          module.excludedPlatforms != null &amp;&amp; 
          module.excludedPlatforms.includes('android') 
        ); 
      }) 
      .sort() 
      .map(hasteModuleName =&gt; 
        ModuleClassDeclarationTemplate({ 
          hasteModuleName, 
        }), 
      ) 
      .join('\n'); 
    const fileName = `${libraryName}.h`; 
    const replacedTemplate = HeaderFileTemplate({ 
      modules: modules, 
      libraryName: libraryName.replace(/-/g, '_'), 
    }); 
    return new Map([ 
      [`jni/${fileName}`, replacedTemplate], 
      [ 
        'jni/CMakeLists.txt', 
        CMakeListsTemplate({ 
          libraryName: libraryName, 
        }), 
      ], 
    ]); 
  }, 
}; 
</span></pre>
</body>
</html>