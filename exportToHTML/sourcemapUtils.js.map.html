<html>
<head>
<title>sourcemapUtils.js.map</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<style type="text/css">
.s0 { color: #a9b7c6;}
.s1 { color: #6a8759;}
.s2 { color: #6897bb; font-style: italic;}
.s3 { color: #cc7832; font-style: italic;}
</style>
</head>
<body bgcolor="#2b2b2b">
<table CELLSPACING=0 CELLPADDING=5 COLS=1 WIDTH="100%" BGCOLOR="#606060" >
<tr><td><center>
<font face="Arial, Helvetica" color="#000000">
sourcemapUtils.js.map</font>
</center></td></tr></table>
<pre><span class="s0">{</span><span class="s1">&quot;version&quot;</span><span class="s0">:</span><span class="s2">3</span><span class="s0">,</span><span class="s1">&quot;names&quot;</span><span class="s0">:[</span><span class="s1">&quot;getTempFilePath&quot;</span><span class="s0">,</span><span class="s1">&quot;filename&quot;</span><span class="s0">,</span><span class="s1">&quot;path&quot;</span><span class="s0">,</span><span class="s1">&quot;join&quot;</span><span class="s0">,</span><span class="s1">&quot;os&quot;</span><span class="s0">,</span><span class="s1">&quot;tmpdir&quot;</span><span class="s0">,</span><span class="s1">&quot;writeJsonSync&quot;</span><span class="s0">,</span><span class="s1">&quot;targetPath&quot;</span><span class="s0">,</span><span class="s1">&quot;data&quot;</span><span class="s0">,</span><span class="s1">&quot;json&quot;</span><span class="s0">,</span><span class="s1">&quot;JSON&quot;</span><span class="s0">,</span><span class="s1">&quot;stringify&quot;</span><span class="s0">,</span><span class="s1">&quot;e&quot;</span><span class="s0">,</span><span class="s1">&quot;CLIError&quot;</span><span class="s0">,</span><span class="s1">&quot;fs&quot;</span><span class="s0">,</span><span class="s1">&quot;writeFileSync&quot;</span><span class="s0">,</span><span class="s1">&quot;getSourcemapFromServer&quot;</span><span class="s0">,</span><span class="s1">&quot;port&quot;</span><span class="s0">,</span><span class="s1">&quot;logger&quot;</span><span class="s0">,</span><span class="s1">&quot;debug&quot;</span><span class="s0">,</span><span class="s1">&quot;DEBUG_SERVER_PORT&quot;</span><span class="s0">,</span><span class="s1">&quot;IP_ADDRESS&quot;</span><span class="s0">,</span><span class="s1">&quot;ip&quot;</span><span class="s0">,</span><span class="s1">&quot;address&quot;</span><span class="s0">,</span><span class="s1">&quot;PLATFORM&quot;</span><span class="s0">,</span><span class="s1">&quot;requestURL&quot;</span><span class="s0">,</span><span class="s1">&quot;fetch&quot;</span><span class="s0">,</span><span class="s1">&quot;undefined&quot;</span><span class="s0">,</span><span class="s1">&quot;generateSourcemap&quot;</span><span class="s0">,</span><span class="s1">&quot;sourceMapPath&quot;</span><span class="s0">,</span><span class="s1">&quot;sourceMapResult&quot;</span><span class="s0">,</span><span class="s1">&quot;error&quot;</span><span class="s0">,</span><span class="s1">&quot;findSourcemap&quot;</span><span class="s0">,</span><span class="s1">&quot;ctx&quot;</span><span class="s0">,</span><span class="s1">&quot;intermediateBuildPath&quot;</span><span class="s0">,</span><span class="s1">&quot;root&quot;</span><span class="s0">,</span><span class="s1">&quot;generatedBuildPath&quot;</span><span class="s0">,</span><span class="s1">&quot;existsSync&quot;</span><span class="s0">],</span><span class="s1">&quot;sources&quot;</span><span class="s0">:[</span><span class="s1">&quot;../../src/profileHermes/sourcemapUtils.ts&quot;</span><span class="s0">],</span><span class="s1">&quot;sourcesContent&quot;</span><span class="s0">:[</span><span class="s1">&quot;import {Config} from '@react-native-community/cli-types';</span><span class="s3">\n</span><span class="s1">import {logger, CLIError, fetch} from '@react-native-community/cli-tools';</span><span class="s3">\n</span><span class="s1">import fs from 'fs';</span><span class="s3">\n</span><span class="s1">import path from 'path';</span><span class="s3">\n</span><span class="s1">import os from 'os';</span><span class="s3">\n</span><span class="s1">import {SourceMap} from 'hermes-profile-transformer';</span><span class="s3">\n</span><span class="s1">import ip from 'ip';</span><span class="s3">\n\n</span><span class="s1">function getTempFilePath(filename: string) {</span><span class="s3">\n  </span><span class="s1">return path.join(os.tmpdir(), filename);</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">function writeJsonSync(targetPath: string, data: any) {</span><span class="s3">\n  </span><span class="s1">let json;</span><span class="s3">\n  </span><span class="s1">try {</span><span class="s3">\n    </span><span class="s1">json = JSON.stringify(data);</span><span class="s3">\n  </span><span class="s1">} catch (e) {</span><span class="s3">\n    </span><span class="s1">throw new CLIError(</span><span class="s3">\n      </span><span class="s1">`Failed to serialize data to json before writing to ${targetPath}`,</span><span class="s3">\n      </span><span class="s1">e as Error,</span><span class="s3">\n    </span><span class="s1">);</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">try {</span><span class="s3">\n    </span><span class="s1">fs.writeFileSync(targetPath, json, 'utf-8');</span><span class="s3">\n  </span><span class="s1">} catch (e) {</span><span class="s3">\n    </span><span class="s1">throw new CLIError(`Failed to write json to ${targetPath}`, e as Error);</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">async function getSourcemapFromServer(</span><span class="s3">\n  </span><span class="s1">port?: string,</span><span class="s3">\n</span><span class="s1">): Promise&lt;SourceMap | undefined&gt; {</span><span class="s3">\n  </span><span class="s1">logger.debug('Getting source maps from Metro packager server');</span><span class="s3">\n  </span><span class="s1">const DEBUG_SERVER_PORT = port || '8081';</span><span class="s3">\n  </span><span class="s1">const IP_ADDRESS = ip.address();</span><span class="s3">\n  </span><span class="s1">const PLATFORM = 'android';</span><span class="s3">\n\n  </span><span class="s1">const requestURL = `http://${IP_ADDRESS}:${DEBUG_SERVER_PORT}/index.map?platform=${PLATFORM}&amp;dev=true`;</span><span class="s3">\n  </span><span class="s1">try {</span><span class="s3">\n    </span><span class="s1">const {data} = await fetch(requestURL);</span><span class="s3">\n    </span><span class="s1">return data as SourceMap;</span><span class="s3">\n  </span><span class="s1">} catch (e) {</span><span class="s3">\n    </span><span class="s1">logger.debug(`Failed to fetch source map from </span><span class="s3">\&quot;</span><span class="s1">${requestURL}</span><span class="s3">\&quot;</span><span class="s1">`);</span><span class="s3">\n    </span><span class="s1">return undefined;</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">/**</span><span class="s3">\n </span><span class="s1">* Generate a sourcemap by fetching it from a running metro server</span><span class="s3">\n </span><span class="s1">*/</span><span class="s3">\n</span><span class="s1">export async function generateSourcemap(</span><span class="s3">\n  </span><span class="s1">port?: string,</span><span class="s3">\n</span><span class="s1">): Promise&lt;string | undefined&gt; {</span><span class="s3">\n  </span><span class="s1">// Fetch the source map to a temp directory</span><span class="s3">\n  </span><span class="s1">const sourceMapPath = getTempFilePath('index.map');</span><span class="s3">\n  </span><span class="s1">const sourceMapResult = await getSourcemapFromServer(port);</span><span class="s3">\n\n  </span><span class="s1">if (sourceMapResult) {</span><span class="s3">\n    </span><span class="s1">logger.debug('Using source maps from Metro packager server');</span><span class="s3">\n    </span><span class="s1">writeJsonSync(sourceMapPath, sourceMapResult);</span><span class="s3">\n    </span><span class="s1">logger.debug(</span><span class="s3">\n      </span><span class="s1">`Successfully obtained the source map and stored it in ${sourceMapPath}`,</span><span class="s3">\n    </span><span class="s1">);</span><span class="s3">\n    </span><span class="s1">return sourceMapPath;</span><span class="s3">\n  </span><span class="s1">} else {</span><span class="s3">\n    </span><span class="s1">logger.error('Cannot obtain source maps from Metro packager server');</span><span class="s3">\n    </span><span class="s1">return undefined;</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">/**</span><span class="s3">\n </span><span class="s1">*</span><span class="s3">\n </span><span class="s1">* @param ctx</span><span class="s3">\n </span><span class="s1">*/</span><span class="s3">\n</span><span class="s1">export async function findSourcemap(</span><span class="s3">\n  </span><span class="s1">ctx: Config,</span><span class="s3">\n  </span><span class="s1">port?: string,</span><span class="s3">\n</span><span class="s1">): Promise&lt;string | undefined&gt; {</span><span class="s3">\n  </span><span class="s1">const intermediateBuildPath = path.join(</span><span class="s3">\n    </span><span class="s1">ctx.root,</span><span class="s3">\n    </span><span class="s1">'android',</span><span class="s3">\n    </span><span class="s1">'app',</span><span class="s3">\n    </span><span class="s1">'build',</span><span class="s3">\n    </span><span class="s1">'intermediates',</span><span class="s3">\n    </span><span class="s1">'sourcemaps',</span><span class="s3">\n    </span><span class="s1">'react',</span><span class="s3">\n    </span><span class="s1">'debug',</span><span class="s3">\n    </span><span class="s1">'index.android.bundle.packager.map',</span><span class="s3">\n  </span><span class="s1">);</span><span class="s3">\n\n  </span><span class="s1">const generatedBuildPath = path.join(</span><span class="s3">\n    </span><span class="s1">ctx.root,</span><span class="s3">\n    </span><span class="s1">'android',</span><span class="s3">\n    </span><span class="s1">'app',</span><span class="s3">\n    </span><span class="s1">'build',</span><span class="s3">\n    </span><span class="s1">'generated',</span><span class="s3">\n    </span><span class="s1">'sourcemaps',</span><span class="s3">\n    </span><span class="s1">'react',</span><span class="s3">\n    </span><span class="s1">'debug',</span><span class="s3">\n    </span><span class="s1">'index.android.bundle.map',</span><span class="s3">\n  </span><span class="s1">);</span><span class="s3">\n\n  </span><span class="s1">if (fs.existsSync(generatedBuildPath)) {</span><span class="s3">\n    </span><span class="s1">logger.debug(`Getting the source map from ${generateSourcemap}`);</span><span class="s3">\n    </span><span class="s1">return generatedBuildPath;</span><span class="s3">\n  </span><span class="s1">} else if (fs.existsSync(intermediateBuildPath)) {</span><span class="s3">\n    </span><span class="s1">logger.debug(`Getting the source map from ${intermediateBuildPath}`);</span><span class="s3">\n    </span><span class="s1">return intermediateBuildPath;</span><span class="s3">\n  </span><span class="s1">} else {</span><span class="s3">\n    </span><span class="s1">return generateSourcemap(port);</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n</span><span class="s1">&quot;</span><span class="s0">],</span><span class="s1">&quot;mappings&quot;</span><span class="s0">:</span><span class="s1">&quot;;;;;;;;AACA;EAAA;EAAA;IAAA;EAAA;EAAA;AAAA;AACA;EAAA;EAAA;IAAA;EAAA;EAAA;AAAA;AACA;EAAA;EAAA;IAAA;EAAA;EAAA;AAAA;AACA;EAAA;EAAA;IAAA;EAAA;EAAA;AAAA;AAEA;EAAA;EAAA;IAAA;EAAA;EAAA;AAAA;AAAoB;AAEpB,SAASA,eAAe,CAACC,QAAgB,EAAE;EACzC,OAAOC,eAAI,CAACC,IAAI,CAACC,aAAE,CAACC,MAAM,EAAE,EAAEJ,QAAQ,CAAC;AACzC;AAEA,SAASK,aAAa,CAACC,UAAkB,EAAEC,IAAS,EAAE;EACpD,IAAIC,IAAI;EACR,IAAI;IACFA,IAAI,GAAGC,IAAI,CAACC,SAAS,CAACH,IAAI,CAAC;EAC7B,CAAC,CAAC,OAAOI,CAAC,EAAE;IACV,MAAM,KAAIC,oBAAQ,EACf,sDAAqDN,UAAW,EAAC,EAClEK,CAAC,CACF;EACH;EAEA,IAAI;IACFE,aAAE,CAACC,aAAa,CAACR,UAAU,EAAEE,IAAI,EAAE,OAAO,CAAC;EAC7C,CAAC,CAAC,OAAOG,CAAC,EAAE;IACV,MAAM,KAAIC,oBAAQ,EAAE,2BAA0BN,UAAW,EAAC,EAAEK,CAAC,CAAU;EACzE;AACF;AAEA,eAAeI,sBAAsB,CACnCC,IAAa,EACmB;EAChCC,kBAAM,CAACC,KAAK,CAAC,gDAAgD,CAAC;EAC9D,MAAMC,iBAAiB,GAAGH,IAAI,IAAI,MAAM;EACxC,MAAMI,UAAU,GAAGC,aAAE,CAACC,OAAO,EAAE;EAC/B,MAAMC,QAAQ,GAAG,SAAS;EAE1B,MAAMC,UAAU,GAAI,UAASJ,UAAW,IAAGD,iBAAkB,uBAAsBI,QAAS,WAAU;EACtG,IAAI;IACF,MAAM;MAAChB;IAAI,CAAC,GAAG,MAAM,IAAAkB,iBAAK,EAACD,UAAU,CAAC;IACtC,OAAOjB,IAAI;EACb,CAAC,CAAC,OAAOI,CAAC,EAAE;IACVM,kBAAM,CAACC,KAAK,CAAE,oCAAmCM,UAAW,GAAE,CAAC;IAC/D,OAAOE,SAAS;EAClB;AACF;;AAEA;AACA;AACA;AACO,eAAeC,iBAAiB,CACrCX,IAAa,EACgB;EAC7B;EACA,MAAMY,aAAa,GAAG7B,eAAe,CAAC,WAAW,CAAC;EAClD,MAAM8B,eAAe,GAAG,MAAMd,sBAAsB,CAACC,IAAI,CAAC;EAE1D,IAAIa,eAAe,EAAE;IACnBZ,kBAAM,CAACC,KAAK,CAAC,8CAA8C,CAAC;IAC5Db,aAAa,CAACuB,aAAa,EAAEC,eAAe,CAAC;IAC7CZ,kBAAM,CAACC,KAAK,CACT,yDAAwDU,aAAc,EAAC,CACzE;IACD,OAAOA,aAAa;EACtB,CAAC,MAAM;IACLX,kBAAM,CAACa,KAAK,CAAC,sDAAsD,CAAC;IACpE,OAAOJ,SAAS;EAClB;AACF;;AAEA;AACA;AACA;AACA;AACO,eAAeK,aAAa,CACjCC,GAAW,EACXhB,IAAa,EACgB;EAC7B,MAAMiB,qBAAqB,GAAGhC,eAAI,CAACC,IAAI,CACrC8B,GAAG,CAACE,IAAI,EACR,SAAS,EACT,KAAK,EACL,OAAO,EACP,eAAe,EACf,YAAY,EACZ,OAAO,EACP,OAAO,EACP,mCAAmC,CACpC;EAED,MAAMC,kBAAkB,GAAGlC,eAAI,CAACC,IAAI,CAClC8B,GAAG,CAACE,IAAI,EACR,SAAS,EACT,KAAK,EACL,OAAO,EACP,WAAW,EACX,YAAY,EACZ,OAAO,EACP,OAAO,EACP,0BAA0B,CAC3B;EAED,IAAIrB,aAAE,CAACuB,UAAU,CAACD,kBAAkB,CAAC,EAAE;IACrClB,kBAAM,CAACC,KAAK,CAAE,+BAA8BS,iBAAkB,EAAC,CAAC;IAChE,OAAOQ,kBAAkB;EAC3B,CAAC,MAAM,IAAItB,aAAE,CAACuB,UAAU,CAACH,qBAAqB,CAAC,EAAE;IAC/ChB,kBAAM,CAACC,KAAK,CAAE,+BAA8Be,qBAAsB,EAAC,CAAC;IACpE,OAAOA,qBAAqB;EAC9B,CAAC,MAAM;IACL,OAAON,iBAAiB,CAACX,IAAI,CAAC;EAChC;AACF&quot;</span><span class="s0">}</span></pre>
</body>
</html>