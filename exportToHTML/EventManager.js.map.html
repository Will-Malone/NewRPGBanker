<html>
<head>
<title>EventManager.js.map</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<style type="text/css">
.s0 { color: #a9b7c6;}
.s1 { color: #6a8759;}
.s2 { color: #6897bb; font-style: italic;}
.s3 { color: #cc7832; font-style: italic;}
</style>
</head>
<body bgcolor="#2b2b2b">
<table CELLSPACING=0 CELLPADDING=5 COLS=1 WIDTH="100%" BGCOLOR="#606060" >
<tr><td><center>
<font face="Arial, Helvetica" color="#000000">
EventManager.js.map</font>
</center></td></tr></table>
<pre><span class="s0">{</span><span class="s1">&quot;version&quot;</span><span class="s0">:</span><span class="s2">3</span><span class="s0">,</span><span class="s1">&quot;sources&quot;</span><span class="s0">:[</span><span class="s1">&quot;EventManager.ts&quot;</span><span class="s0">],</span><span class="s1">&quot;names&quot;</span><span class="s0">:[</span><span class="s1">&quot;EventManager&quot;</span><span class="s0">,</span><span class="s1">&quot;constructor&quot;</span><span class="s0">,</span><span class="s1">&quot;view&quot;</span><span class="s0">,</span><span class="s1">&quot;activePointersCounter&quot;</span><span class="s0">,</span><span class="s1">&quot;onPointerDown&quot;</span><span class="s0">,</span><span class="s1">&quot;_event&quot;</span><span class="s0">,</span><span class="s1">&quot;onPointerAdd&quot;</span><span class="s0">,</span><span class="s1">&quot;onPointerUp&quot;</span><span class="s0">,</span><span class="s1">&quot;onPointerRemove&quot;</span><span class="s0">,</span><span class="s1">&quot;onPointerMove&quot;</span><span class="s0">,</span><span class="s1">&quot;onPointerOut&quot;</span><span class="s0">,</span><span class="s1">&quot;onPointerEnter&quot;</span><span class="s0">,</span><span class="s1">&quot;onPointerCancel&quot;</span><span class="s0">,</span><span class="s1">&quot;onPointerOutOfBounds&quot;</span><span class="s0">,</span><span class="s1">&quot;setOnPointerDown&quot;</span><span class="s0">,</span><span class="s1">&quot;callback&quot;</span><span class="s0">,</span><span class="s1">&quot;setOnPointerAdd&quot;</span><span class="s0">,</span><span class="s1">&quot;setOnPointerUp&quot;</span><span class="s0">,</span><span class="s1">&quot;setOnPointerRemove&quot;</span><span class="s0">,</span><span class="s1">&quot;setOnPointerMove&quot;</span><span class="s0">,</span><span class="s1">&quot;setOnPointerOut&quot;</span><span class="s0">,</span><span class="s1">&quot;setOnPointerEnter&quot;</span><span class="s0">,</span><span class="s1">&quot;setOnPointerCancel&quot;</span><span class="s0">,</span><span class="s1">&quot;setOnPointerOutOfBounds&quot;</span><span class="s0">,</span><span class="s1">&quot;markAsInBounds&quot;</span><span class="s0">,</span><span class="s1">&quot;pointerId&quot;</span><span class="s0">,</span><span class="s1">&quot;pointersInBounds&quot;</span><span class="s0">,</span><span class="s1">&quot;indexOf&quot;</span><span class="s0">,</span><span class="s1">&quot;push&quot;</span><span class="s0">,</span><span class="s1">&quot;markAsOutOfBounds&quot;</span><span class="s0">,</span><span class="s1">&quot;index&quot;</span><span class="s0">,</span><span class="s1">&quot;splice&quot;</span><span class="s0">,</span><span class="s1">&quot;resetManager&quot;</span><span class="s0">],</span><span class="s1">&quot;mappings&quot;</span><span class="s0">:</span><span class="s1">&quot;;;;;;;;;;AAAA;AAGe,MAAeA,YAAf,CAA4B;AAKzCC,EAAAA,WAAW,CAACC,IAAD,EAAoB;AAAA;;AAAA,8CAHQ,EAGR;;AAAA;;AAC7B,SAAKA,IAAL,GAAYA,IAAZ;AACA,SAAKC,qBAAL,GAA6B,CAA7B;AACD;;AAUSC,EAAAA,aAAa,CAACC,MAAD,EAA6B,CAAE;;AAC5CC,EAAAA,YAAY,CAACD,MAAD,EAA6B,CAAE;;AAC3CE,EAAAA,WAAW,CAACF,MAAD,EAA6B,CAAE;;AAC1CG,EAAAA,eAAe,CAACH,MAAD,EAA6B,CAAE;;AAC9CI,EAAAA,aAAa,CAACJ,MAAD,EAA6B,CAAE;;AAC5CK,EAAAA,YAAY,CAACL,MAAD,EAA6B,CAAE;;AAC3CM,EAAAA,cAAc,CAACN,MAAD,EAA6B,CAAE;;AAC7CO,EAAAA,eAAe,CAACP,MAAD,EAA6B,CACpD;AACA;AACA;AACA;AACD;;AACSQ,EAAAA,oBAAoB,CAACR,MAAD,EAA6B,CAAE;;AAEtDS,EAAAA,gBAAgB,CAACC,QAAD,EAAgD;AACrE,SAAKX,aAAL,GAAqBW,QAArB;AACD;;AACMC,EAAAA,eAAe,CAACD,QAAD,EAAgD;AACpE,SAAKT,YAAL,GAAoBS,QAApB;AACD;;AACME,EAAAA,cAAc,CAACF,QAAD,EAAgD;AACnE,SAAKR,WAAL,GAAmBQ,QAAnB;AACD;;AACMG,EAAAA,kBAAkB,CAACH,QAAD,EAAgD;AACvE,SAAKP,eAAL,GAAuBO,QAAvB;AACD;;AACMI,EAAAA,gBAAgB,CAACJ,QAAD,EAAgD;AACrE,SAAKN,aAAL,GAAqBM,QAArB;AACD;;AACMK,EAAAA,eAAe,CAACL,QAAD,EAAgD;AACpE,SAAKL,YAAL,GAAoBK,QAApB;AACD;;AACMM,EAAAA,iBAAiB,CAACN,QAAD,EAAgD;AACtE,SAAKJ,cAAL,GAAsBI,QAAtB;AACD;;AACMO,EAAAA,kBAAkB,CAACP,QAAD,EAAgD;AACvE,SAAKH,eAAL,GAAuBG,QAAvB;AACD;;AACMQ,EAAAA,uBAAuB,CAC5BR,QAD4B,EAEtB;AACN,SAAKF,oBAAL,GAA4BE,QAA5B;AACD;;AAESS,EAAAA,cAAc,CAACC,SAAD,EAA0B;AAChD,QAAI,KAAKC,gBAAL,CAAsBC,OAAtB,CAA8BF,SAA9B,KAA4C,CAAhD,EAAmD;AACjD;AACD;;AAED,SAAKC,gBAAL,CAAsBE,IAAtB,CAA2BH,SAA3B;AACD;;AAESI,EAAAA,iBAAiB,CAACJ,SAAD,EAA0B;AACnD,UAAMK,KAAa,GAAG,KAAKJ,gBAAL,CAAsBC,OAAtB,CAA8BF,SAA9B,CAAtB;;AAEA,QAAIK,KAAK,GAAG,CAAZ,EAAe;AACb;AACD;;AAED,SAAKJ,gBAAL,CAAsBK,MAAtB,CAA6BD,KAA7B,EAAoC,CAApC;AACD;;AAEME,EAAAA,YAAY,GAAS;AAC1B;AACA;AACA;AACA;AACA;AACA;AAEA,SAAK7B,qBAAL,GAA6B,CAA7B;AACA,SAAKuB,gBAAL,GAAwB,EAAxB;AACD;;AA3FwC&quot;</span><span class="s0">,</span><span class="s1">&quot;sourcesContent&quot;</span><span class="s0">:[</span><span class="s1">&quot;/* eslint-disable @typescript-eslint/no-empty-function */</span><span class="s3">\n</span><span class="s1">import { AdaptedEvent, EventTypes, TouchEventType } from '../interfaces';</span><span class="s3">\n\n</span><span class="s1">export default abstract class EventManager {</span><span class="s3">\n  </span><span class="s1">protected readonly view: HTMLElement;</span><span class="s3">\n  </span><span class="s1">protected pointersInBounds: number[] = [];</span><span class="s3">\n  </span><span class="s1">protected activePointersCounter: number;</span><span class="s3">\n\n  </span><span class="s1">constructor(view: HTMLElement) {</span><span class="s3">\n    </span><span class="s1">this.view = view;</span><span class="s3">\n    </span><span class="s1">this.activePointersCounter = 0;</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">public abstract setListeners(): void;</span><span class="s3">\n  </span><span class="s1">protected abstract mapEvent(</span><span class="s3">\n    </span><span class="s1">event: Event,</span><span class="s3">\n    </span><span class="s1">eventType: EventTypes,</span><span class="s3">\n    </span><span class="s1">index?: number,</span><span class="s3">\n    </span><span class="s1">touchEventType?: TouchEventType</span><span class="s3">\n  </span><span class="s1">): AdaptedEvent;</span><span class="s3">\n\n  </span><span class="s1">protected onPointerDown(_event: AdaptedEvent): void {}</span><span class="s3">\n  </span><span class="s1">protected onPointerAdd(_event: AdaptedEvent): void {}</span><span class="s3">\n  </span><span class="s1">protected onPointerUp(_event: AdaptedEvent): void {}</span><span class="s3">\n  </span><span class="s1">protected onPointerRemove(_event: AdaptedEvent): void {}</span><span class="s3">\n  </span><span class="s1">protected onPointerMove(_event: AdaptedEvent): void {}</span><span class="s3">\n  </span><span class="s1">protected onPointerOut(_event: AdaptedEvent): void {}</span><span class="s3">\n  </span><span class="s1">protected onPointerEnter(_event: AdaptedEvent): void {}</span><span class="s3">\n  </span><span class="s1">protected onPointerCancel(_event: AdaptedEvent): void {</span><span class="s3">\n    </span><span class="s1">// When pointer cancel is triggered and there are more pointers on the view, only one pointer is cancelled</span><span class="s3">\n    </span><span class="s1">// Because we want all pointers to be cancelled by that event, we are doing it manually by reseting handler and changing activePointersCounter to 0</span><span class="s3">\n    </span><span class="s1">// Events that correspond to removing the pointer (pointerup, touchend) have condition, that they don't perform any action when activePointersCounter</span><span class="s3">\n    </span><span class="s1">// is equal to 0. This prevents counter from going to negative values, when pointers are removed from view after one of them has been cancelled</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">protected onPointerOutOfBounds(_event: AdaptedEvent): void {}</span><span class="s3">\n\n  </span><span class="s1">public setOnPointerDown(callback: (event: AdaptedEvent) =&gt; void): void {</span><span class="s3">\n    </span><span class="s1">this.onPointerDown = callback;</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">public setOnPointerAdd(callback: (event: AdaptedEvent) =&gt; void): void {</span><span class="s3">\n    </span><span class="s1">this.onPointerAdd = callback;</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">public setOnPointerUp(callback: (event: AdaptedEvent) =&gt; void): void {</span><span class="s3">\n    </span><span class="s1">this.onPointerUp = callback;</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">public setOnPointerRemove(callback: (event: AdaptedEvent) =&gt; void): void {</span><span class="s3">\n    </span><span class="s1">this.onPointerRemove = callback;</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">public setOnPointerMove(callback: (event: AdaptedEvent) =&gt; void): void {</span><span class="s3">\n    </span><span class="s1">this.onPointerMove = callback;</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">public setOnPointerOut(callback: (event: AdaptedEvent) =&gt; void): void {</span><span class="s3">\n    </span><span class="s1">this.onPointerOut = callback;</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">public setOnPointerEnter(callback: (event: AdaptedEvent) =&gt; void): void {</span><span class="s3">\n    </span><span class="s1">this.onPointerEnter = callback;</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">public setOnPointerCancel(callback: (event: AdaptedEvent) =&gt; void): void {</span><span class="s3">\n    </span><span class="s1">this.onPointerCancel = callback;</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">public setOnPointerOutOfBounds(</span><span class="s3">\n    </span><span class="s1">callback: (event: AdaptedEvent) =&gt; void</span><span class="s3">\n  </span><span class="s1">): void {</span><span class="s3">\n    </span><span class="s1">this.onPointerOutOfBounds = callback;</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">protected markAsInBounds(pointerId: number): void {</span><span class="s3">\n    </span><span class="s1">if (this.pointersInBounds.indexOf(pointerId) &gt;= 0) {</span><span class="s3">\n      </span><span class="s1">return;</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n\n    </span><span class="s1">this.pointersInBounds.push(pointerId);</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">protected markAsOutOfBounds(pointerId: number): void {</span><span class="s3">\n    </span><span class="s1">const index: number = this.pointersInBounds.indexOf(pointerId);</span><span class="s3">\n\n    </span><span class="s1">if (index &lt; 0) {</span><span class="s3">\n      </span><span class="s1">return;</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n\n    </span><span class="s1">this.pointersInBounds.splice(index, 1);</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">public resetManager(): void {</span><span class="s3">\n    </span><span class="s1">// Reseting activePointersCounter is necessary to make gestures such as pinch work properly</span><span class="s3">\n    </span><span class="s1">// There are gestures that end when there is still one active pointer (like pinch/rotation)</span><span class="s3">\n    </span><span class="s1">// When these gestures end, they are reset, but they still receive events from pointer that is active</span><span class="s3">\n    </span><span class="s1">// This causes trouble, since only onPointerDown registers gesture in orchestrator, and while gestures receive</span><span class="s3">\n    </span><span class="s1">// Events from active pointer after they finished, next pointerdown event will be registered as additional pointer, not the first one</span><span class="s3">\n    </span><span class="s1">// This casues trouble like gestures getting stuck in END state, even though they should have gone to UNDETERMINED</span><span class="s3">\n\n    </span><span class="s1">this.activePointersCounter = 0;</span><span class="s3">\n    </span><span class="s1">this.pointersInBounds = [];</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n</span><span class="s1">&quot;</span><span class="s0">]}</span></pre>
</body>
</html>