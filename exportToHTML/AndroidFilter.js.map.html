<html>
<head>
<title>AndroidFilter.js.map</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<style type="text/css">
.s0 { color: #a9b7c6;}
.s1 { color: #6a8759;}
.s2 { color: #6897bb; font-style: italic;}
.s3 { color: #cc7832; font-style: italic;}
</style>
</head>
<body bgcolor="#2b2b2b">
<table CELLSPACING=0 CELLPADDING=5 COLS=1 WIDTH="100%" BGCOLOR="#606060" >
<tr><td><center>
<font face="Arial, Helvetica" color="#000000">
AndroidFilter.js.map</font>
</center></td></tr></table>
<pre><span class="s0">{</span><span class="s1">&quot;version&quot;</span><span class="s0">:</span><span class="s2">3</span><span class="s0">,</span><span class="s1">&quot;sources&quot;</span><span class="s0">:[</span><span class="s1">&quot;../../src/android/AndroidFilter.ts&quot;</span><span class="s0">],</span><span class="s1">&quot;names&quot;</span><span class="s0">:[</span><span class="s1">&quot;AndroidFilter&quot;</span><span class="s0">,</span><span class="s1">&quot;constructor&quot;</span><span class="s0">,</span><span class="s1">&quot;minPriority&quot;</span><span class="s0">,</span><span class="s1">&quot;filter&quot;</span><span class="s0">,</span><span class="s1">&quot;entry&quot;</span><span class="s0">,</span><span class="s1">&quot;priority&quot;</span><span class="s0">,</span><span class="s1">&quot;setFilterByTag&quot;</span><span class="s0">,</span><span class="s1">&quot;tags&quot;</span><span class="s0">,</span><span class="s1">&quot;Boolean&quot;</span><span class="s0">,</span><span class="s1">&quot;tag&quot;</span><span class="s0">,</span><span class="s1">&quot;indexOf&quot;</span><span class="s0">,</span><span class="s1">&quot;setFilterByApp&quot;</span><span class="s0">,</span><span class="s1">&quot;applicationId&quot;</span><span class="s0">,</span><span class="s1">&quot;adbPath&quot;</span><span class="s0">,</span><span class="s1">&quot;pid&quot;</span><span class="s0">,</span><span class="s1">&quot;setFilterByMatch&quot;</span><span class="s0">,</span><span class="s1">&quot;regexes&quot;</span><span class="s0">,</span><span class="s1">&quot;find&quot;</span><span class="s0">,</span><span class="s1">&quot;reg&quot;</span><span class="s0">,</span><span class="s1">&quot;messages&quot;</span><span class="s0">,</span><span class="s1">&quot;message&quot;</span><span class="s0">,</span><span class="s1">&quot;test&quot;</span><span class="s0">,</span><span class="s1">&quot;setCustomFilter&quot;</span><span class="s0">,</span><span class="s1">&quot;patterns&quot;</span><span class="s0">,</span><span class="s1">&quot;tagFilters&quot;</span><span class="s0">,</span><span class="s1">&quot;reduce&quot;</span><span class="s0">,</span><span class="s1">&quot;acc&quot;</span><span class="s0">,</span><span class="s1">&quot;pattern&quot;</span><span class="s0">,</span><span class="s1">&quot;split&quot;</span><span class="s0">,</span><span class="s1">&quot;Priority&quot;</span><span class="s0">,</span><span class="s1">&quot;fromLetter&quot;</span><span class="s0">,</span><span class="s1">&quot;SILENT&quot;</span><span class="s0">,</span><span class="s1">&quot;UNKNOWN&quot;</span><span class="s0">,</span><span class="s1">&quot;shouldInclude&quot;</span><span class="s0">],</span><span class="s1">&quot;mappings&quot;</span><span class="s0">:</span><span class="s1">&quot;;;;;;;;AACA;;AACA;;;;AAIe,MAAMA,aAAN,CAAuC;AAIpDC,EAAAA,WAAW,CAACC,WAAmB,GAAG,CAAvB,EAA0B;AAAA;;AAAA;;AACnC,SAAKA,WAAL,GAAmBA,WAAnB,CADmC,CAEnC;;AACA,SAAKC,MAAL,GAAeC,KAAD,IAAkB;AAC9B,aAAOA,KAAK,CAACC,QAAN,IAAkB,KAAKH,WAA9B;AACD,KAFD;AAGD;;AAEDI,EAAAA,cAAc,CAACC,IAAD,EAAiB;AAC7B,SAAKJ,MAAL,GAAeC,KAAD,IAAkB;AAC9B,aAAOI,OAAO,CACZJ,KAAK,CAACC,QAAN,IAAkB,KAAKH,WAAvB,IACEE,KAAK,CAACK,GADR,IAEEF,IAAI,CAACG,OAAL,CAAaN,KAAK,CAACK,GAAnB,IAA0B,CAAC,CAHjB,CAAd;AAKD,KAND;AAOD;;AAEDE,EAAAA,cAAc,CAACC,aAAD,EAAwBC,OAAxB,EAA0C;AACtD,UAAMC,GAAG,GAAG,4BAAkBF,aAAlB,EAAiCC,OAAjC,CAAZ;;AACA,SAAKV,MAAL,GAAeC,KAAD,IAAkB;AAC9B,aAAOA,KAAK,CAACC,QAAN,IAAkB,KAAKH,WAAvB,IAAsCE,KAAK,CAACU,GAAN,KAAcA,GAA3D;AACD,KAFD;AAGD;;AAEDC,EAAAA,gBAAgB,CAACC,OAAD,EAAoB;AAClC,SAAKb,MAAL,GAAeC,KAAD,IAAkB;AAC9B,aACEA,KAAK,CAACC,QAAN,IAAkB,KAAKH,WAAvB,IACAM,OAAO,CACLQ,OAAO,CAACC,IAAR,CAAcC,GAAD,IACXV,OAAO,CAACJ,KAAK,CAACe,QAAN,CAAeF,IAAf,CAAqBG,OAAD,IAAqBF,GAAG,CAACG,IAAJ,CAASD,OAAT,CAAzC,CAAD,CADT,CADK,CAFT;AAQD,KATD;AAUD;;AAEDE,EAAAA,eAAe,CAACC,QAAD,EAAqB;AAClC,UAAMC,UAAqC,GAAGD,QAAQ,CAACE,MAAT,CAC5C,CAACC,GAAD,EAAiCC,OAAjC,KAAqD;AACnD,YAAM,CAAClB,GAAD,EAAMJ,QAAN,IAAkBsB,OAAO,CAACC,KAAR,CAAc,GAAd,CAAxB;AACA,aAAO,EACL,GAAGF,GADE;AAEL,SAACjB,GAAD,GAAOoB,oBAASC,UAAT,CAAoBzB,QAApB;AAFF,OAAP;AAID,KAP2C,EAQ5C,EAR4C,CAA9C;;AAUA,SAAKF,MAAL,GAAeC,KAAD,IAAkB;AAC9B,aACGA,KAAK,CAACK,GAAN,IACCL,KAAK,CAACC,QAAN,KAAmBmB,UAAU,CAACpB,KAAK,CAACK,GAAP,CAAV,IAAyBoB,oBAASE,MAArD,CADF,IAEA3B,KAAK,CAACC,QAAN,KAAmBmB,UAAU,CAAC,GAAD,CAAV,IAAmBK,oBAASG,OAA/C,CAHF;AAKD,KAND;AAOD;;AAEDC,EAAAA,aAAa,CAAC7B,KAAD,EAAe;AAC1B,WAAO,KAAKD,MAAL,CAAYC,KAAZ,CAAP;AACD;;AAhEmD&quot;</span><span class="s0">,</span><span class="s1">&quot;sourcesContent&quot;</span><span class="s0">:[</span><span class="s1">&quot;import { IFilter, Entry } from '../types';</span><span class="s3">\n</span><span class="s1">import { getApplicationPid } from './adb';</span><span class="s3">\n</span><span class="s1">import { Priority } from './constants';</span><span class="s3">\n\n</span><span class="s1">type Filter = (entry: Entry) =&gt; boolean;</span><span class="s3">\n\n</span><span class="s1">export default class AndroidFilter implements IFilter {</span><span class="s3">\n  </span><span class="s1">private readonly minPriority: number;</span><span class="s3">\n  </span><span class="s1">private filter: Filter;</span><span class="s3">\n\n  </span><span class="s1">constructor(minPriority: number = 0) {</span><span class="s3">\n    </span><span class="s1">this.minPriority = minPriority;</span><span class="s3">\n    </span><span class="s1">// Default filter by all</span><span class="s3">\n    </span><span class="s1">this.filter = (entry: Entry) =&gt; {</span><span class="s3">\n      </span><span class="s1">return entry.priority &gt;= this.minPriority;</span><span class="s3">\n    </span><span class="s1">};</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">setFilterByTag(tags: string[]) {</span><span class="s3">\n    </span><span class="s1">this.filter = (entry: Entry) =&gt; {</span><span class="s3">\n      </span><span class="s1">return Boolean(</span><span class="s3">\n        </span><span class="s1">entry.priority &gt;= this.minPriority &amp;&amp;</span><span class="s3">\n          </span><span class="s1">entry.tag &amp;&amp;</span><span class="s3">\n          </span><span class="s1">tags.indexOf(entry.tag) &gt; -1</span><span class="s3">\n      </span><span class="s1">);</span><span class="s3">\n    </span><span class="s1">};</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">setFilterByApp(applicationId: string, adbPath?: string) {</span><span class="s3">\n    </span><span class="s1">const pid = getApplicationPid(applicationId, adbPath);</span><span class="s3">\n    </span><span class="s1">this.filter = (entry: Entry) =&gt; {</span><span class="s3">\n      </span><span class="s1">return entry.priority &gt;= this.minPriority &amp;&amp; entry.pid === pid;</span><span class="s3">\n    </span><span class="s1">};</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">setFilterByMatch(regexes: RegExp[]) {</span><span class="s3">\n    </span><span class="s1">this.filter = (entry: Entry) =&gt; {</span><span class="s3">\n      </span><span class="s1">return (</span><span class="s3">\n        </span><span class="s1">entry.priority &gt;= this.minPriority &amp;&amp;</span><span class="s3">\n        </span><span class="s1">Boolean(</span><span class="s3">\n          </span><span class="s1">regexes.find((reg: RegExp) =&gt;</span><span class="s3">\n            </span><span class="s1">Boolean(entry.messages.find((message: string) =&gt; reg.test(message)))</span><span class="s3">\n          </span><span class="s1">)</span><span class="s3">\n        </span><span class="s1">)</span><span class="s3">\n      </span><span class="s1">);</span><span class="s3">\n    </span><span class="s1">};</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">setCustomFilter(patterns: string[]) {</span><span class="s3">\n    </span><span class="s1">const tagFilters: { [key: string]: number } = patterns.reduce(</span><span class="s3">\n      </span><span class="s1">(acc: { [key: string]: number }, pattern: string) =&gt; {</span><span class="s3">\n        </span><span class="s1">const [tag, priority] = pattern.split(':');</span><span class="s3">\n        </span><span class="s1">return {</span><span class="s3">\n          </span><span class="s1">...acc,</span><span class="s3">\n          </span><span class="s1">[tag]: Priority.fromLetter(priority),</span><span class="s3">\n        </span><span class="s1">};</span><span class="s3">\n      </span><span class="s1">},</span><span class="s3">\n      </span><span class="s1">{}</span><span class="s3">\n    </span><span class="s1">);</span><span class="s3">\n    </span><span class="s1">this.filter = (entry: Entry) =&gt; {</span><span class="s3">\n      </span><span class="s1">return (</span><span class="s3">\n        </span><span class="s1">(entry.tag &amp;&amp;</span><span class="s3">\n          </span><span class="s1">entry.priority &gt;= (tagFilters[entry.tag] || Priority.SILENT)) ||</span><span class="s3">\n        </span><span class="s1">entry.priority &gt;= (tagFilters['*'] || Priority.UNKNOWN)</span><span class="s3">\n      </span><span class="s1">);</span><span class="s3">\n    </span><span class="s1">};</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">shouldInclude(entry: Entry) {</span><span class="s3">\n    </span><span class="s1">return this.filter(entry);</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n</span><span class="s1">&quot;</span><span class="s0">],</span><span class="s1">&quot;file&quot;</span><span class="s0">:</span><span class="s1">&quot;AndroidFilter.js&quot;</span><span class="s0">}</span></pre>
</body>
</html>