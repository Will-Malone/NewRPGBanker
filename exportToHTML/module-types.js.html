<html>
<head>
<title>module-types.js</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<style type="text/css">
.s0 { color: #6a8759;}
.s1 { color: #a9b7c6;}
.s2 { color: #cc7832;}
.s3 { color: #6897bb;}
.s4 { color: #4646f1;}
.s5 { color: #808080;}
</style>
</head>
<body bgcolor="#2b2b2b">
<table CELLSPACING=0 CELLPADDING=5 COLS=1 WIDTH="100%" BGCOLOR="#606060" >
<tr><td><center>
<font face="Arial, Helvetica" color="#000000">
module-types.js</font>
</center></td></tr></table>
<pre><span class="s0">&quot;use strict&quot;</span><span class="s1">;</span>

<span class="s1">Object.defineProperty(exports, </span><span class="s0">&quot;__esModule&quot;</span><span class="s1">, {</span>
  <span class="s1">value: </span><span class="s2">true</span>
<span class="s1">});</span>
<span class="s1">exports.</span><span class="s2">default </span><span class="s1">= loadCodeDefault;</span>
<span class="s1">exports.supportsESM = </span><span class="s2">void </span><span class="s3">0</span><span class="s1">;</span>
<span class="s2">var </span><span class="s1">_async = require(</span><span class="s0">&quot;../../gensync-utils/async&quot;</span><span class="s1">);</span>
<span class="s2">function </span><span class="s1">_path() {</span>
  <span class="s1">const data = require(</span><span class="s0">&quot;path&quot;</span><span class="s1">);</span>
  <span class="s1">_path = </span><span class="s2">function </span><span class="s1">() {</span>
    <span class="s2">return </span><span class="s1">data;</span>
  <span class="s1">};</span>
  <span class="s2">return </span><span class="s1">data;</span>
<span class="s1">}</span>
<span class="s2">function </span><span class="s1">_url() {</span>
  <span class="s1">const data = require(</span><span class="s0">&quot;url&quot;</span><span class="s1">);</span>
  <span class="s1">_url = </span><span class="s2">function </span><span class="s1">() {</span>
    <span class="s2">return </span><span class="s1">data;</span>
  <span class="s1">};</span>
  <span class="s2">return </span><span class="s1">data;</span>
<span class="s1">}</span>
<span class="s2">function </span><span class="s1">_semver() {</span>
  <span class="s1">const data = require(</span><span class="s0">&quot;semver&quot;</span><span class="s1">);</span>
  <span class="s1">_semver = </span><span class="s2">function </span><span class="s1">() {</span>
    <span class="s2">return </span><span class="s1">data;</span>
  <span class="s1">};</span>
  <span class="s2">return </span><span class="s1">data;</span>
<span class="s1">}</span>
<span class="s2">var </span><span class="s1">_rewriteStackTrace = require(</span><span class="s0">&quot;../../errors/rewrite-stack-trace&quot;</span><span class="s1">);</span>
<span class="s2">var </span><span class="s1">_configError = require(</span><span class="s0">&quot;../../errors/config-error&quot;</span><span class="s1">);</span>
<span class="s2">var </span><span class="s1">_transformFile = require(</span><span class="s0">&quot;../../transform-file&quot;</span><span class="s1">);</span>
<span class="s2">function </span><span class="s1">asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) { </span><span class="s2">try </span><span class="s1">{ </span><span class="s2">var </span><span class="s1">info = gen[key](arg); </span><span class="s2">var </span><span class="s1">value = info.value; } </span><span class="s2">catch </span><span class="s1">(error) { reject(error); </span><span class="s2">return</span><span class="s1">; } </span><span class="s2">if </span><span class="s1">(info.done) { resolve(value); } </span><span class="s2">else </span><span class="s1">{ Promise.resolve(value).then(_next, _throw); } }</span>
<span class="s2">function </span><span class="s1">_asyncToGenerator(fn) { </span><span class="s2">return function </span><span class="s1">() { </span><span class="s2">var </span><span class="s1">self = </span><span class="s2">this</span><span class="s1">, args = arguments; </span><span class="s2">return new </span><span class="s1">Promise(</span><span class="s2">function </span><span class="s1">(resolve, reject) { </span><span class="s2">var </span><span class="s1">gen = fn.apply(self, args); </span><span class="s2">function </span><span class="s1">_next(value) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, </span><span class="s0">&quot;next&quot;</span><span class="s1">, value); } </span><span class="s2">function </span><span class="s1">_throw(err) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, </span><span class="s0">&quot;throw&quot;</span><span class="s1">, err); } _next(undefined); }); }; }</span>
<span class="s1">let import_;</span>
<span class="s2">try </span><span class="s1">{</span>
  <span class="s1">import_ = require(</span><span class="s0">&quot;./import.cjs&quot;</span><span class="s1">);</span>
<span class="s1">} </span><span class="s2">catch </span><span class="s1">(_unused) {}</span>
<span class="s1">const supportsESM = _semver().satisfies(process.versions.node, </span><span class="s0">&quot;^12.17 || &gt;=13.2&quot;</span><span class="s1">);</span>
<span class="s1">exports.supportsESM = supportsESM;</span>
<span class="s2">function</span><span class="s1">* loadCodeDefault(filepath, asyncError) {</span>
  <span class="s2">switch </span><span class="s1">(_path().extname(filepath)) {</span>
    <span class="s2">case </span><span class="s0">&quot;.cjs&quot;</span><span class="s1">:</span>
      <span class="s1">{</span>
        <span class="s2">return </span><span class="s1">loadCjsDefault(filepath, arguments[</span><span class="s3">2</span><span class="s1">]);</span>
      <span class="s1">}</span>
    <span class="s2">case </span><span class="s0">&quot;.mjs&quot;</span><span class="s1">:</span>
      <span class="s2">break</span><span class="s1">;</span>
    <span class="s2">case </span><span class="s0">&quot;.cts&quot;</span><span class="s1">:</span>
      <span class="s2">return </span><span class="s1">loadCtsDefault(filepath);</span>
    <span class="s2">default</span><span class="s1">:</span>
      <span class="s2">try </span><span class="s1">{</span>
        <span class="s1">{</span>
          <span class="s2">return </span><span class="s1">loadCjsDefault(filepath, arguments[</span><span class="s3">2</span><span class="s1">]);</span>
        <span class="s1">}</span>
      <span class="s1">} </span><span class="s2">catch </span><span class="s1">(e) {</span>
        <span class="s2">if </span><span class="s1">(e.code !== </span><span class="s0">&quot;ERR_REQUIRE_ESM&quot;</span><span class="s1">) </span><span class="s2">throw </span><span class="s1">e;</span>
      <span class="s1">}</span>
  <span class="s1">}</span>
  <span class="s2">if </span><span class="s1">(yield* (</span><span class="s3">0</span><span class="s1">, _async.isAsync)()) {</span>
    <span class="s2">return </span><span class="s1">yield* (</span><span class="s3">0</span><span class="s1">, _async.waitFor)(loadMjsDefault(filepath));</span>
  <span class="s1">}</span>
  <span class="s2">throw new </span><span class="s1">_configError.</span><span class="s2">default</span><span class="s1">(asyncError, filepath);</span>
<span class="s1">}</span>
<span class="s2">function </span><span class="s1">loadCtsDefault(filepath) {</span>
  <span class="s1">const ext = </span><span class="s0">&quot;.cts&quot;</span><span class="s1">;</span>
  <span class="s1">const hasTsSupport = !!(require.extensions[</span><span class="s0">&quot;.ts&quot;</span><span class="s1">] || require.extensions[</span><span class="s0">&quot;.cts&quot;</span><span class="s1">] || require.extensions[</span><span class="s0">&quot;.mts&quot;</span><span class="s1">]);</span>
  <span class="s1">let handler;</span>
  <span class="s2">if </span><span class="s1">(!hasTsSupport) {</span>
    <span class="s1">const opts = {</span>
      <span class="s1">babelrc: </span><span class="s2">false</span><span class="s1">,</span>
      <span class="s1">configFile: </span><span class="s2">false</span><span class="s1">,</span>
      <span class="s1">sourceType: </span><span class="s0">&quot;unambiguous&quot;</span><span class="s1">,</span>
      <span class="s1">sourceMaps: </span><span class="s0">&quot;inline&quot;</span><span class="s1">,</span>
      <span class="s1">sourceFileName: _path().basename(filepath),</span>
      <span class="s1">presets: [[getTSPreset(filepath), Object.assign({</span>
        <span class="s1">onlyRemoveTypeImports: </span><span class="s2">true</span><span class="s1">,</span>
        <span class="s1">optimizeConstEnums: </span><span class="s2">true</span>
      <span class="s1">}, {</span>
        <span class="s1">allowDeclareFields: </span><span class="s2">true</span>
      <span class="s1">})]]</span>
    <span class="s1">};</span>
    <span class="s1">handler = </span><span class="s2">function </span><span class="s1">(m, filename) {</span>
      <span class="s2">if </span><span class="s1">(handler &amp;&amp; filename.endsWith(ext)) {</span>
        <span class="s2">try </span><span class="s1">{</span>
          <span class="s2">return </span><span class="s1">m._compile((</span><span class="s3">0</span><span class="s1">, _transformFile.transformFileSync)(filename, Object.assign({}, opts, {</span>
            <span class="s1">filename</span>
          <span class="s1">})).code, filename);</span>
        <span class="s1">} </span><span class="s2">catch </span><span class="s1">(error) {</span>
          <span class="s2">if </span><span class="s1">(!hasTsSupport) {</span>
            <span class="s1">const packageJson = require(</span><span class="s0">&quot;@babel/preset-typescript/package.json&quot;</span><span class="s1">);</span>
            <span class="s2">if </span><span class="s1">(_semver().lt(packageJson.version, </span><span class="s0">&quot;7.21.4&quot;</span><span class="s1">)) {</span>
              <span class="s1">console.error(</span><span class="s0">&quot;`.cts` configuration file failed to load, please try to update `@babel/preset-typescript`.&quot;</span><span class="s1">);</span>
            <span class="s1">}</span>
          <span class="s1">}</span>
          <span class="s2">throw </span><span class="s1">error;</span>
        <span class="s1">}</span>
      <span class="s1">}</span>
      <span class="s2">return </span><span class="s1">require.extensions[</span><span class="s0">&quot;.js&quot;</span><span class="s1">](m, filename);</span>
    <span class="s1">};</span>
    <span class="s1">require.extensions[ext] = handler;</span>
  <span class="s1">}</span>
  <span class="s2">try </span><span class="s1">{</span>
    <span class="s1">const module = (</span><span class="s3">0</span><span class="s1">, _rewriteStackTrace.endHiddenCallStack)(require)(filepath);</span>
    <span class="s2">return </span><span class="s1">module != </span><span class="s2">null </span><span class="s1">&amp;&amp; module.__esModule ? module.</span><span class="s2">default </span><span class="s1">: module;</span>
  <span class="s1">} </span><span class="s2">finally </span><span class="s1">{</span>
    <span class="s2">if </span><span class="s1">(!hasTsSupport) {</span>
      <span class="s2">if </span><span class="s1">(require.extensions[ext] === handler) </span><span class="s2">delete </span><span class="s1">require.extensions[ext];</span>
      <span class="s1">handler = undefined;</span>
    <span class="s1">}</span>
  <span class="s1">}</span>
<span class="s1">}</span>
<span class="s2">function </span><span class="s1">loadCjsDefault(filepath) {</span>
  <span class="s1">const module = (</span><span class="s3">0</span><span class="s1">, _rewriteStackTrace.endHiddenCallStack)(require)(filepath);</span>
  <span class="s1">{</span>
    <span class="s2">return </span><span class="s1">module != </span><span class="s2">null </span><span class="s1">&amp;&amp; module.__esModule ? module.</span><span class="s2">default </span><span class="s1">|| (arguments[</span><span class="s3">1</span><span class="s1">] ? module : undefined) : module;</span>
  <span class="s1">}</span>
<span class="s1">}</span>
<span class="s2">function </span><span class="s1">loadMjsDefault(_x) {</span>
  <span class="s2">return </span><span class="s1">_loadMjsDefault.apply(</span><span class="s2">this</span><span class="s1">, arguments);</span>
<span class="s1">}</span>
<span class="s2">function </span><span class="s1">_loadMjsDefault() {</span>
  <span class="s1">_loadMjsDefault = _asyncToGenerator(</span><span class="s2">function</span><span class="s1">* (filepath) {</span>
    <span class="s2">if </span><span class="s1">(!import_) {</span>
      <span class="s2">throw new </span><span class="s1">_configError.</span><span class="s2">default</span><span class="s1">(</span><span class="s0">&quot;Internal error: Native ECMAScript modules aren't supported by this platform.</span><span class="s4">\n</span><span class="s0">&quot;</span><span class="s1">, filepath);</span>
    <span class="s1">}</span>
    <span class="s1">const module = yield (</span><span class="s3">0</span><span class="s1">, _rewriteStackTrace.endHiddenCallStack)(import_)((</span><span class="s3">0</span><span class="s1">, _url().pathToFileURL)(filepath));</span>
    <span class="s2">return </span><span class="s1">module.</span><span class="s2">default</span><span class="s1">;</span>
  <span class="s1">});</span>
  <span class="s2">return </span><span class="s1">_loadMjsDefault.apply(</span><span class="s2">this</span><span class="s1">, arguments);</span>
<span class="s1">}</span>
<span class="s2">function </span><span class="s1">getTSPreset(filepath) {</span>
  <span class="s2">try </span><span class="s1">{</span>
    <span class="s2">return </span><span class="s1">require(</span><span class="s0">&quot;@babel/preset-typescript&quot;</span><span class="s1">);</span>
  <span class="s1">} </span><span class="s2">catch </span><span class="s1">(error) {</span>
    <span class="s2">if </span><span class="s1">(error.code !== </span><span class="s0">&quot;MODULE_NOT_FOUND&quot;</span><span class="s1">) </span><span class="s2">throw </span><span class="s1">error;</span>
    <span class="s1">let message = </span><span class="s0">&quot;You appear to be using a .cts file as Babel configuration, but the `@babel/preset-typescript` package was not found: please install it!&quot;</span><span class="s1">;</span>
    <span class="s1">{</span>
      <span class="s2">if </span><span class="s1">(process.versions.pnp) {</span>
        <span class="s1">message += `</span>
<span class="s1">If you are using Yarn Plug</span><span class="s0">'n'</span><span class="s1">Play, you may also need to add the following configuration to your .yarnrc.yml file:</span>

<span class="s1">packageExtensions:</span>
<span class="s1">\t</span><span class="s0">&quot;@babel/core@*&quot;</span><span class="s1">:</span>
<span class="s1">\t\tpeerDependencies:</span>
<span class="s1">\t\t\t</span><span class="s0">&quot;@babel/preset-typescript&quot;</span><span class="s1">: </span><span class="s0">&quot;*&quot;</span>
<span class="s1">`;</span>
      <span class="s1">}</span>
    <span class="s1">}</span>
    <span class="s2">throw new </span><span class="s1">_configError.</span><span class="s2">default</span><span class="s1">(message, filepath);</span>
  <span class="s1">}</span>
<span class="s1">}</span>
<span class="s3">0 </span><span class="s1">&amp;&amp; </span><span class="s3">0</span><span class="s1">;</span>

<span class="s5">//# sourceMappingURL=module-types.js.map</span>
</pre>
</body>
</html>