<html>
<head>
<title>conversions.h</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<style type="text/css">
.s0 { color: #808080;}
.s1 { color: #a9b7c6;}
.s2 { color: #bbb529;}
.s3 { color: #6a8759;}
.s4 { color: #cc7832;}
.s5 { color: #6897bb;}
</style>
</head>
<body bgcolor="#2b2b2b">
<table CELLSPACING=0 CELLPADDING=5 COLS=1 WIDTH="100%" BGCOLOR="#606060" >
<tr><td><center>
<font face="Arial, Helvetica" color="#000000">
conversions.h</font>
</center></td></tr></table>
<pre><span class="s0">/* 
 * Copyright (c) Meta Platforms, Inc. and affiliates. 
 * 
 * This source code is licensed under the MIT license found in the 
 * LICENSE file in the root directory of this source tree. 
 */</span>

<span class="s2">#pragma </span><span class="s1">once</span>

<span class="s2">#include </span><span class="s3">&lt;folly/Conv.h&gt;</span>
<span class="s2">#include </span><span class="s3">&lt;folly/dynamic.h&gt;</span>
<span class="s2">#include </span><span class="s3">&lt;react/debug/react_native_expect.h&gt;</span>
<span class="s2">#include </span><span class="s3">&lt;react/renderer/attributedstring/AttributedString.h&gt;</span>
<span class="s2">#include </span><span class="s3">&lt;react/renderer/attributedstring/ParagraphAttributes.h&gt;</span>
<span class="s2">#include </span><span class="s3">&lt;react/renderer/attributedstring/TextAttributes.h&gt;</span>
<span class="s2">#include </span><span class="s3">&lt;react/renderer/attributedstring/conversions.h&gt;</span>
<span class="s2">#include </span><span class="s3">&lt;react/renderer/attributedstring/primitives.h&gt;</span>
<span class="s2">#include </span><span class="s3">&lt;react/renderer/core/LayoutableShadowNode.h&gt;</span>
<span class="s2">#include </span><span class="s3">&lt;react/renderer/core/PropsParserContext.h&gt;</span>
<span class="s2">#include </span><span class="s3">&lt;react/renderer/core/ShadowNode.h&gt;</span>
<span class="s2">#include </span><span class="s3">&lt;react/renderer/core/conversions.h&gt;</span>
<span class="s2">#include </span><span class="s3">&lt;react/renderer/core/graphicsConversions.h&gt;</span>
<span class="s2">#include </span><span class="s3">&lt;react/renderer/core/propsConversions.h&gt;</span>
<span class="s2">#include </span><span class="s3">&lt;cmath&gt;</span>

<span class="s2">#ifdef </span><span class="s1">ANDROID</span>
<span class="s2">#include </span><span class="s3">&lt;react/renderer/mapbuffer/MapBuffer.h&gt;</span>
<span class="s2">#include </span><span class="s3">&lt;react/renderer/mapbuffer/MapBufferBuilder.h&gt;</span>
<span class="s2">#endif</span>

<span class="s2">#include </span><span class="s3">&lt;glog/logging.h&gt;</span>

<span class="s4">namespace </span><span class="s1">facebook {</span>
<span class="s4">namespace </span><span class="s1">react {</span>

<span class="s4">inline </span><span class="s1">std::string toString(</span><span class="s4">const </span><span class="s1">DynamicTypeRamp &amp;dynamicTypeRamp) {</span>
  <span class="s4">switch </span><span class="s1">(dynamicTypeRamp) {</span>
    <span class="s4">case </span><span class="s1">DynamicTypeRamp::Caption2:</span>
      <span class="s4">return </span><span class="s3">&quot;caption2&quot;</span><span class="s4">;</span>
    <span class="s4">case </span><span class="s1">DynamicTypeRamp::Caption1:</span>
      <span class="s4">return </span><span class="s3">&quot;caption1&quot;</span><span class="s4">;</span>
    <span class="s4">case </span><span class="s1">DynamicTypeRamp::Footnote:</span>
      <span class="s4">return </span><span class="s3">&quot;footnote&quot;</span><span class="s4">;</span>
    <span class="s4">case </span><span class="s1">DynamicTypeRamp::Subheadline:</span>
      <span class="s4">return </span><span class="s3">&quot;subheadline&quot;</span><span class="s4">;</span>
    <span class="s4">case </span><span class="s1">DynamicTypeRamp::Callout:</span>
      <span class="s4">return </span><span class="s3">&quot;callout&quot;</span><span class="s4">;</span>
    <span class="s4">case </span><span class="s1">DynamicTypeRamp::Body:</span>
      <span class="s4">return </span><span class="s3">&quot;body&quot;</span><span class="s4">;</span>
    <span class="s4">case </span><span class="s1">DynamicTypeRamp::Headline:</span>
      <span class="s4">return </span><span class="s3">&quot;headline&quot;</span><span class="s4">;</span>
    <span class="s4">case </span><span class="s1">DynamicTypeRamp::Title3:</span>
      <span class="s4">return </span><span class="s3">&quot;title3&quot;</span><span class="s4">;</span>
    <span class="s4">case </span><span class="s1">DynamicTypeRamp::Title2:</span>
      <span class="s4">return </span><span class="s3">&quot;title2&quot;</span><span class="s4">;</span>
    <span class="s4">case </span><span class="s1">DynamicTypeRamp::Title1:</span>
      <span class="s4">return </span><span class="s3">&quot;title1&quot;</span><span class="s4">;</span>
    <span class="s4">case </span><span class="s1">DynamicTypeRamp::LargeTitle:</span>
      <span class="s4">return </span><span class="s3">&quot;largeTitle&quot;</span><span class="s4">;</span>
  <span class="s1">}</span>

  <span class="s1">LOG(ERROR) &lt;&lt; </span><span class="s3">&quot;Unsupported DynamicTypeRamp value&quot;</span><span class="s4">;</span>
  <span class="s1">react_native_expect(</span><span class="s4">false</span><span class="s1">)</span><span class="s4">;</span>

  <span class="s0">// Sane default in case of parsing errors</span>
  <span class="s4">return </span><span class="s3">&quot;body&quot;</span><span class="s4">;</span>
<span class="s1">}</span>

<span class="s4">inline void </span><span class="s1">fromRawValue(</span>
    <span class="s4">const </span><span class="s1">PropsParserContext &amp;context</span><span class="s4">,</span>
    <span class="s4">const </span><span class="s1">RawValue &amp;value</span><span class="s4">,</span>
    <span class="s1">DynamicTypeRamp &amp;result) {</span>
  <span class="s1">react_native_expect(value.hasType&lt;std::string&gt;())</span><span class="s4">;</span>
  <span class="s4">if </span><span class="s1">(value.hasType&lt;std::string&gt;()) {</span>
    <span class="s4">auto </span><span class="s1">string = (std::string)value</span><span class="s4">;</span>
    <span class="s4">if </span><span class="s1">(string == </span><span class="s3">&quot;caption2&quot;</span><span class="s1">) {</span>
      <span class="s1">result = DynamicTypeRamp::Caption2</span><span class="s4">;</span>
    <span class="s1">} </span><span class="s4">else if </span><span class="s1">(string == </span><span class="s3">&quot;caption1&quot;</span><span class="s1">) {</span>
      <span class="s1">result = DynamicTypeRamp::Caption1</span><span class="s4">;</span>
    <span class="s1">} </span><span class="s4">else if </span><span class="s1">(string == </span><span class="s3">&quot;footnote&quot;</span><span class="s1">) {</span>
      <span class="s1">result = DynamicTypeRamp::Footnote</span><span class="s4">;</span>
    <span class="s1">} </span><span class="s4">else if </span><span class="s1">(string == </span><span class="s3">&quot;subheadline&quot;</span><span class="s1">) {</span>
      <span class="s1">result = DynamicTypeRamp::Subheadline</span><span class="s4">;</span>
    <span class="s1">} </span><span class="s4">else if </span><span class="s1">(string == </span><span class="s3">&quot;callout&quot;</span><span class="s1">) {</span>
      <span class="s1">result = DynamicTypeRamp::Callout</span><span class="s4">;</span>
    <span class="s1">} </span><span class="s4">else if </span><span class="s1">(string == </span><span class="s3">&quot;body&quot;</span><span class="s1">) {</span>
      <span class="s1">result = DynamicTypeRamp::Body</span><span class="s4">;</span>
    <span class="s1">} </span><span class="s4">else if </span><span class="s1">(string == </span><span class="s3">&quot;headline&quot;</span><span class="s1">) {</span>
      <span class="s1">result = DynamicTypeRamp::Headline</span><span class="s4">;</span>
    <span class="s1">} </span><span class="s4">else if </span><span class="s1">(string == </span><span class="s3">&quot;title3&quot;</span><span class="s1">) {</span>
      <span class="s1">result = DynamicTypeRamp::Title3</span><span class="s4">;</span>
    <span class="s1">} </span><span class="s4">else if </span><span class="s1">(string == </span><span class="s3">&quot;title2&quot;</span><span class="s1">) {</span>
      <span class="s1">result = DynamicTypeRamp::Title2</span><span class="s4">;</span>
    <span class="s1">} </span><span class="s4">else if </span><span class="s1">(string == </span><span class="s3">&quot;title1&quot;</span><span class="s1">) {</span>
      <span class="s1">result = DynamicTypeRamp::Title1</span><span class="s4">;</span>
    <span class="s1">} </span><span class="s4">else if </span><span class="s1">(string == </span><span class="s3">&quot;largeTitle&quot;</span><span class="s1">) {</span>
      <span class="s1">result = DynamicTypeRamp::LargeTitle</span><span class="s4">;</span>
    <span class="s1">} </span><span class="s4">else </span><span class="s1">{</span>
      <span class="s0">// sane default</span>
      <span class="s1">LOG(ERROR) &lt;&lt; </span><span class="s3">&quot;Unsupported DynamicTypeRamp value: &quot; </span><span class="s1">&lt;&lt; string</span><span class="s4">;</span>
      <span class="s1">react_native_expect(</span><span class="s4">false</span><span class="s1">)</span><span class="s4">;</span>
      <span class="s1">result = DynamicTypeRamp::Body</span><span class="s4">;</span>
    <span class="s1">}</span>
    <span class="s4">return;</span>
  <span class="s1">}</span>

  <span class="s1">LOG(ERROR) &lt;&lt; </span><span class="s3">&quot;Unsupported DynamicTypeRamp type&quot;</span><span class="s4">;</span>
  <span class="s1">react_native_expect(</span><span class="s4">false</span><span class="s1">)</span><span class="s4">;</span>

  <span class="s0">// Sane default in case of parsing errors</span>
  <span class="s1">result = DynamicTypeRamp::Body</span><span class="s4">;</span>
<span class="s1">}</span>

<span class="s4">inline </span><span class="s1">std::string toString(</span><span class="s4">const </span><span class="s1">EllipsizeMode &amp;ellipsisMode) {</span>
  <span class="s4">switch </span><span class="s1">(ellipsisMode) {</span>
    <span class="s4">case </span><span class="s1">EllipsizeMode::Clip:</span>
      <span class="s4">return </span><span class="s3">&quot;clip&quot;</span><span class="s4">;</span>
    <span class="s4">case </span><span class="s1">EllipsizeMode::Head:</span>
      <span class="s4">return </span><span class="s3">&quot;head&quot;</span><span class="s4">;</span>
    <span class="s4">case </span><span class="s1">EllipsizeMode::Tail:</span>
      <span class="s4">return </span><span class="s3">&quot;tail&quot;</span><span class="s4">;</span>
    <span class="s4">case </span><span class="s1">EllipsizeMode::Middle:</span>
      <span class="s4">return </span><span class="s3">&quot;middle&quot;</span><span class="s4">;</span>
  <span class="s1">}</span>

  <span class="s1">LOG(ERROR) &lt;&lt; </span><span class="s3">&quot;Unsupported EllipsizeMode value&quot;</span><span class="s4">;</span>
  <span class="s1">react_native_expect(</span><span class="s4">false</span><span class="s1">)</span><span class="s4">;</span>

  <span class="s0">// Sane default in case of parsing errors</span>
  <span class="s4">return </span><span class="s3">&quot;tail&quot;</span><span class="s4">;</span>
<span class="s1">}</span>

<span class="s4">inline void </span><span class="s1">fromRawValue(</span>
    <span class="s4">const </span><span class="s1">PropsParserContext &amp;context</span><span class="s4">,</span>
    <span class="s4">const </span><span class="s1">RawValue &amp;value</span><span class="s4">,</span>
    <span class="s1">EllipsizeMode &amp;result) {</span>
  <span class="s1">react_native_expect(value.hasType&lt;std::string&gt;())</span><span class="s4">;</span>
  <span class="s4">if </span><span class="s1">(value.hasType&lt;std::string&gt;()) {</span>
    <span class="s4">auto </span><span class="s1">string = (std::string)value</span><span class="s4">;</span>
    <span class="s4">if </span><span class="s1">(string == </span><span class="s3">&quot;clip&quot;</span><span class="s1">) {</span>
      <span class="s1">result = EllipsizeMode::Clip</span><span class="s4">;</span>
    <span class="s1">} </span><span class="s4">else if </span><span class="s1">(string == </span><span class="s3">&quot;head&quot;</span><span class="s1">) {</span>
      <span class="s1">result = EllipsizeMode::Head</span><span class="s4">;</span>
    <span class="s1">} </span><span class="s4">else if </span><span class="s1">(string == </span><span class="s3">&quot;tail&quot;</span><span class="s1">) {</span>
      <span class="s1">result = EllipsizeMode::Tail</span><span class="s4">;</span>
    <span class="s1">} </span><span class="s4">else if </span><span class="s1">(string == </span><span class="s3">&quot;middle&quot;</span><span class="s1">) {</span>
      <span class="s1">result = EllipsizeMode::Middle</span><span class="s4">;</span>
    <span class="s1">} </span><span class="s4">else </span><span class="s1">{</span>
      <span class="s0">// sane default</span>
      <span class="s1">LOG(ERROR) &lt;&lt; </span><span class="s3">&quot;Unsupported EllipsizeMode value: &quot; </span><span class="s1">&lt;&lt; string</span><span class="s4">;</span>
      <span class="s1">react_native_expect(</span><span class="s4">false</span><span class="s1">)</span><span class="s4">;</span>
      <span class="s1">result = EllipsizeMode::Tail</span><span class="s4">;</span>
    <span class="s1">}</span>
    <span class="s4">return;</span>
  <span class="s1">}</span>

  <span class="s1">LOG(ERROR) &lt;&lt; </span><span class="s3">&quot;Unsupported EllipsizeMode type&quot;</span><span class="s4">;</span>
  <span class="s1">react_native_expect(</span><span class="s4">false</span><span class="s1">)</span><span class="s4">;</span>

  <span class="s0">// Sane default in case of parsing errors</span>
  <span class="s1">result = EllipsizeMode::Tail</span><span class="s4">;</span>
<span class="s1">}</span>

<span class="s4">inline </span><span class="s1">std::string toString(</span><span class="s4">const </span><span class="s1">TextBreakStrategy &amp;textBreakStrategy) {</span>
  <span class="s4">switch </span><span class="s1">(textBreakStrategy) {</span>
    <span class="s4">case </span><span class="s1">TextBreakStrategy::Simple:</span>
      <span class="s4">return </span><span class="s3">&quot;simple&quot;</span><span class="s4">;</span>
    <span class="s4">case </span><span class="s1">TextBreakStrategy::HighQuality:</span>
      <span class="s4">return </span><span class="s3">&quot;highQuality&quot;</span><span class="s4">;</span>
    <span class="s4">case </span><span class="s1">TextBreakStrategy::Balanced:</span>
      <span class="s4">return </span><span class="s3">&quot;balanced&quot;</span><span class="s4">;</span>
  <span class="s1">}</span>

  <span class="s1">LOG(ERROR) &lt;&lt; </span><span class="s3">&quot;Unsupported TextBreakStrategy value&quot;</span><span class="s4">;</span>
  <span class="s1">react_native_expect(</span><span class="s4">false</span><span class="s1">)</span><span class="s4">;</span>
  <span class="s4">return </span><span class="s3">&quot;highQuality&quot;</span><span class="s4">;</span>
<span class="s1">}</span>

<span class="s4">inline void </span><span class="s1">fromRawValue(</span>
    <span class="s4">const </span><span class="s1">PropsParserContext &amp;context</span><span class="s4">,</span>
    <span class="s4">const </span><span class="s1">RawValue &amp;value</span><span class="s4">,</span>
    <span class="s1">TextBreakStrategy &amp;result) {</span>
  <span class="s1">react_native_expect(value.hasType&lt;std::string&gt;())</span><span class="s4">;</span>
  <span class="s4">if </span><span class="s1">(value.hasType&lt;std::string&gt;()) {</span>
    <span class="s4">auto </span><span class="s1">string = (std::string)value</span><span class="s4">;</span>
    <span class="s4">if </span><span class="s1">(string == </span><span class="s3">&quot;simple&quot;</span><span class="s1">) {</span>
      <span class="s1">result = TextBreakStrategy::Simple</span><span class="s4">;</span>
    <span class="s1">} </span><span class="s4">else if </span><span class="s1">(string == </span><span class="s3">&quot;highQuality&quot;</span><span class="s1">) {</span>
      <span class="s1">result = TextBreakStrategy::HighQuality</span><span class="s4">;</span>
    <span class="s1">} </span><span class="s4">else if </span><span class="s1">(string == </span><span class="s3">&quot;balanced&quot;</span><span class="s1">) {</span>
      <span class="s1">result = TextBreakStrategy::Balanced</span><span class="s4">;</span>
    <span class="s1">} </span><span class="s4">else </span><span class="s1">{</span>
      <span class="s0">// sane default</span>
      <span class="s1">LOG(ERROR) &lt;&lt; </span><span class="s3">&quot;Unsupported TextBreakStrategy value: &quot; </span><span class="s1">&lt;&lt; string</span><span class="s4">;</span>
      <span class="s1">react_native_expect(</span><span class="s4">false</span><span class="s1">)</span><span class="s4">;</span>
      <span class="s1">result = TextBreakStrategy::HighQuality</span><span class="s4">;</span>
    <span class="s1">}</span>
    <span class="s4">return;</span>
  <span class="s1">}</span>

  <span class="s1">LOG(ERROR) &lt;&lt; </span><span class="s3">&quot;Unsupported TextBreakStrategy type&quot;</span><span class="s4">;</span>
  <span class="s1">react_native_expect(</span><span class="s4">false</span><span class="s1">)</span><span class="s4">;</span>
  <span class="s1">result = TextBreakStrategy::HighQuality</span><span class="s4">;</span>
<span class="s1">}</span>

<span class="s4">inline void </span><span class="s1">fromRawValue(</span>
    <span class="s4">const </span><span class="s1">PropsParserContext &amp;context</span><span class="s4">,</span>
    <span class="s4">const </span><span class="s1">RawValue &amp;value</span><span class="s4">,</span>
    <span class="s1">FontWeight &amp;result) {</span>
  <span class="s1">react_native_expect(value.hasType&lt;std::string&gt;())</span><span class="s4">;</span>
  <span class="s4">if </span><span class="s1">(value.hasType&lt;std::string&gt;()) {</span>
    <span class="s4">auto </span><span class="s1">string = (std::string)value</span><span class="s4">;</span>
    <span class="s4">if </span><span class="s1">(string == </span><span class="s3">&quot;normal&quot;</span><span class="s1">) {</span>
      <span class="s1">result = FontWeight::Regular</span><span class="s4">;</span>
    <span class="s1">} </span><span class="s4">else if </span><span class="s1">(string == </span><span class="s3">&quot;regular&quot;</span><span class="s1">) {</span>
      <span class="s1">result = FontWeight::Regular</span><span class="s4">;</span>
    <span class="s1">} </span><span class="s4">else if </span><span class="s1">(string == </span><span class="s3">&quot;bold&quot;</span><span class="s1">) {</span>
      <span class="s1">result = FontWeight::Bold</span><span class="s4">;</span>
    <span class="s1">} </span><span class="s4">else if </span><span class="s1">(string == </span><span class="s3">&quot;100&quot;</span><span class="s1">) {</span>
      <span class="s1">result = FontWeight::Weight100</span><span class="s4">;</span>
    <span class="s1">} </span><span class="s4">else if </span><span class="s1">(string == </span><span class="s3">&quot;200&quot;</span><span class="s1">) {</span>
      <span class="s1">result = FontWeight::Weight200</span><span class="s4">;</span>
    <span class="s1">} </span><span class="s4">else if </span><span class="s1">(string == </span><span class="s3">&quot;300&quot;</span><span class="s1">) {</span>
      <span class="s1">result = FontWeight::Weight300</span><span class="s4">;</span>
    <span class="s1">} </span><span class="s4">else if </span><span class="s1">(string == </span><span class="s3">&quot;400&quot;</span><span class="s1">) {</span>
      <span class="s1">result = FontWeight::Weight400</span><span class="s4">;</span>
    <span class="s1">} </span><span class="s4">else if </span><span class="s1">(string == </span><span class="s3">&quot;500&quot;</span><span class="s1">) {</span>
      <span class="s1">result = FontWeight::Weight500</span><span class="s4">;</span>
    <span class="s1">} </span><span class="s4">else if </span><span class="s1">(string == </span><span class="s3">&quot;600&quot;</span><span class="s1">) {</span>
      <span class="s1">result = FontWeight::Weight600</span><span class="s4">;</span>
    <span class="s1">} </span><span class="s4">else if </span><span class="s1">(string == </span><span class="s3">&quot;700&quot;</span><span class="s1">) {</span>
      <span class="s1">result = FontWeight::Weight700</span><span class="s4">;</span>
    <span class="s1">} </span><span class="s4">else if </span><span class="s1">(string == </span><span class="s3">&quot;800&quot;</span><span class="s1">) {</span>
      <span class="s1">result = FontWeight::Weight800</span><span class="s4">;</span>
    <span class="s1">} </span><span class="s4">else if </span><span class="s1">(string == </span><span class="s3">&quot;900&quot;</span><span class="s1">) {</span>
      <span class="s1">result = FontWeight::Weight900</span><span class="s4">;</span>
    <span class="s1">} </span><span class="s4">else </span><span class="s1">{</span>
      <span class="s1">LOG(ERROR) &lt;&lt; </span><span class="s3">&quot;Unsupported FontWeight value: &quot; </span><span class="s1">&lt;&lt; string</span><span class="s4">;</span>
      <span class="s1">react_native_expect(</span><span class="s4">false</span><span class="s1">)</span><span class="s4">;</span>
      <span class="s0">// sane default for prod</span>
      <span class="s1">result = FontWeight::Regular</span><span class="s4">;</span>
    <span class="s1">}</span>
    <span class="s4">return;</span>
  <span class="s1">}</span>

  <span class="s1">LOG(ERROR) &lt;&lt; </span><span class="s3">&quot;Unsupported FontWeight type&quot;</span><span class="s4">;</span>
  <span class="s1">react_native_expect(</span><span class="s4">false</span><span class="s1">)</span><span class="s4">;</span>
  <span class="s1">result = FontWeight::Regular</span><span class="s4">;</span>
<span class="s1">}</span>

<span class="s4">inline </span><span class="s1">std::string toString(</span><span class="s4">const </span><span class="s1">FontWeight &amp;fontWeight) {</span>
  <span class="s4">return </span><span class="s1">folly::to&lt;std::string&gt;((</span><span class="s4">int</span><span class="s1">)fontWeight)</span><span class="s4">;</span>
<span class="s1">}</span>

<span class="s4">inline void </span><span class="s1">fromRawValue(</span>
    <span class="s4">const </span><span class="s1">PropsParserContext &amp;context</span><span class="s4">,</span>
    <span class="s4">const </span><span class="s1">RawValue &amp;value</span><span class="s4">,</span>
    <span class="s1">FontStyle &amp;result) {</span>
  <span class="s1">react_native_expect(value.hasType&lt;std::string&gt;())</span><span class="s4">;</span>
  <span class="s4">if </span><span class="s1">(value.hasType&lt;std::string&gt;()) {</span>
    <span class="s4">auto </span><span class="s1">string = (std::string)value</span><span class="s4">;</span>
    <span class="s4">if </span><span class="s1">(string == </span><span class="s3">&quot;normal&quot;</span><span class="s1">) {</span>
      <span class="s1">result = FontStyle::Normal</span><span class="s4">;</span>
    <span class="s1">} </span><span class="s4">else if </span><span class="s1">(string == </span><span class="s3">&quot;italic&quot;</span><span class="s1">) {</span>
      <span class="s1">result = FontStyle::Italic</span><span class="s4">;</span>
    <span class="s1">} </span><span class="s4">else if </span><span class="s1">(string == </span><span class="s3">&quot;oblique&quot;</span><span class="s1">) {</span>
      <span class="s1">result = FontStyle::Oblique</span><span class="s4">;</span>
    <span class="s1">} </span><span class="s4">else </span><span class="s1">{</span>
      <span class="s1">LOG(ERROR) &lt;&lt; </span><span class="s3">&quot;Unsupported FontStyle value: &quot; </span><span class="s1">&lt;&lt; string</span><span class="s4">;</span>
      <span class="s1">react_native_expect(</span><span class="s4">false</span><span class="s1">)</span><span class="s4">;</span>
      <span class="s0">// sane default for prod</span>
      <span class="s1">result = FontStyle::Normal</span><span class="s4">;</span>
    <span class="s1">}</span>
    <span class="s4">return;</span>
  <span class="s1">}</span>

  <span class="s1">LOG(ERROR) &lt;&lt; </span><span class="s3">&quot;Unsupported FontStyle type&quot;</span><span class="s4">;</span>
  <span class="s1">react_native_expect(</span><span class="s4">false</span><span class="s1">)</span><span class="s4">;</span>
  <span class="s0">// sane default for prod</span>
  <span class="s1">result = FontStyle::Normal</span><span class="s4">;</span>
<span class="s1">}</span>

<span class="s4">inline </span><span class="s1">std::string toString(</span><span class="s4">const </span><span class="s1">FontStyle &amp;fontStyle) {</span>
  <span class="s4">switch </span><span class="s1">(fontStyle) {</span>
    <span class="s4">case </span><span class="s1">FontStyle::Normal:</span>
      <span class="s4">return </span><span class="s3">&quot;normal&quot;</span><span class="s4">;</span>
    <span class="s4">case </span><span class="s1">FontStyle::Italic:</span>
      <span class="s4">return </span><span class="s3">&quot;italic&quot;</span><span class="s4">;</span>
    <span class="s4">case </span><span class="s1">FontStyle::Oblique:</span>
      <span class="s4">return </span><span class="s3">&quot;oblique&quot;</span><span class="s4">;</span>
  <span class="s1">}</span>

  <span class="s1">LOG(ERROR) &lt;&lt; </span><span class="s3">&quot;Unsupported FontStyle value&quot;</span><span class="s4">;</span>
  <span class="s1">react_native_expect(</span><span class="s4">false</span><span class="s1">)</span><span class="s4">;</span>
  <span class="s0">// sane default for prod</span>
  <span class="s4">return </span><span class="s3">&quot;normal&quot;</span><span class="s4">;</span>
<span class="s1">}</span>

<span class="s4">inline void </span><span class="s1">fromRawValue(</span>
    <span class="s4">const </span><span class="s1">PropsParserContext &amp;context</span><span class="s4">,</span>
    <span class="s4">const </span><span class="s1">RawValue &amp;value</span><span class="s4">,</span>
    <span class="s1">FontVariant &amp;result) {</span>
  <span class="s1">result = FontVariant::Default</span><span class="s4">;</span>
  <span class="s1">react_native_expect(value.hasType&lt;std::vector&lt;std::string&gt;&gt;())</span><span class="s4">;</span>
  <span class="s4">if </span><span class="s1">(value.hasType&lt;std::vector&lt;std::string&gt;&gt;()) {</span>
    <span class="s4">auto </span><span class="s1">items = std::vector&lt;std::string&gt;{value}</span><span class="s4">;</span>
    <span class="s4">for </span><span class="s1">(</span><span class="s4">const auto </span><span class="s1">&amp;item : items) {</span>
      <span class="s4">if </span><span class="s1">(item == </span><span class="s3">&quot;small-caps&quot;</span><span class="s1">) {</span>
        <span class="s1">result = (FontVariant)((</span><span class="s4">int</span><span class="s1">)result | (</span><span class="s4">int</span><span class="s1">)FontVariant::SmallCaps)</span><span class="s4">;</span>
      <span class="s1">} </span><span class="s4">else if </span><span class="s1">(item == </span><span class="s3">&quot;oldstyle-nums&quot;</span><span class="s1">) {</span>
        <span class="s1">result = (FontVariant)((</span><span class="s4">int</span><span class="s1">)result | (</span><span class="s4">int</span><span class="s1">)FontVariant::OldstyleNums)</span><span class="s4">;</span>
      <span class="s1">} </span><span class="s4">else if </span><span class="s1">(item == </span><span class="s3">&quot;lining-nums&quot;</span><span class="s1">) {</span>
        <span class="s1">result = (FontVariant)((</span><span class="s4">int</span><span class="s1">)result | (</span><span class="s4">int</span><span class="s1">)FontVariant::LiningNums)</span><span class="s4">;</span>
      <span class="s1">} </span><span class="s4">else if </span><span class="s1">(item == </span><span class="s3">&quot;tabular-nums&quot;</span><span class="s1">) {</span>
        <span class="s1">result = (FontVariant)((</span><span class="s4">int</span><span class="s1">)result | (</span><span class="s4">int</span><span class="s1">)FontVariant::TabularNums)</span><span class="s4">;</span>
      <span class="s1">} </span><span class="s4">else if </span><span class="s1">(item == </span><span class="s3">&quot;proportional-nums&quot;</span><span class="s1">) {</span>
        <span class="s1">result =</span>
            <span class="s1">(FontVariant)((</span><span class="s4">int</span><span class="s1">)result | (</span><span class="s4">int</span><span class="s1">)FontVariant::ProportionalNums)</span><span class="s4">;</span>
      <span class="s1">} </span><span class="s4">else </span><span class="s1">{</span>
        <span class="s1">LOG(ERROR) &lt;&lt; </span><span class="s3">&quot;Unsupported FontVariant value: &quot; </span><span class="s1">&lt;&lt; item</span><span class="s4">;</span>
        <span class="s1">react_native_expect(</span><span class="s4">false</span><span class="s1">)</span><span class="s4">;</span>
      <span class="s1">}</span>
      <span class="s4">continue;</span>
    <span class="s1">}</span>
  <span class="s1">} </span><span class="s4">else </span><span class="s1">{</span>
    <span class="s1">LOG(ERROR) &lt;&lt; </span><span class="s3">&quot;Unsupported FontVariant type&quot;</span><span class="s4">;</span>
  <span class="s1">}</span>
<span class="s1">}</span>

<span class="s4">inline </span><span class="s1">std::string toString(</span><span class="s4">const </span><span class="s1">FontVariant &amp;fontVariant) {</span>
  <span class="s4">auto </span><span class="s1">result = std::string{}</span><span class="s4">;</span>
  <span class="s4">auto </span><span class="s1">separator = std::string{</span><span class="s3">&quot;, &quot;</span><span class="s1">}</span><span class="s4">;</span>
  <span class="s4">if </span><span class="s1">((</span><span class="s4">int</span><span class="s1">)fontVariant &amp; (</span><span class="s4">int</span><span class="s1">)FontVariant::SmallCaps) {</span>
    <span class="s1">result += </span><span class="s3">&quot;small-caps&quot; </span><span class="s1">+ separator</span><span class="s4">;</span>
  <span class="s1">}</span>
  <span class="s4">if </span><span class="s1">((</span><span class="s4">int</span><span class="s1">)fontVariant &amp; (</span><span class="s4">int</span><span class="s1">)FontVariant::OldstyleNums) {</span>
    <span class="s1">result += </span><span class="s3">&quot;oldstyle-nums&quot; </span><span class="s1">+ separator</span><span class="s4">;</span>
  <span class="s1">}</span>
  <span class="s4">if </span><span class="s1">((</span><span class="s4">int</span><span class="s1">)fontVariant &amp; (</span><span class="s4">int</span><span class="s1">)FontVariant::LiningNums) {</span>
    <span class="s1">result += </span><span class="s3">&quot;lining-nums&quot; </span><span class="s1">+ separator</span><span class="s4">;</span>
  <span class="s1">}</span>
  <span class="s4">if </span><span class="s1">((</span><span class="s4">int</span><span class="s1">)fontVariant &amp; (</span><span class="s4">int</span><span class="s1">)FontVariant::TabularNums) {</span>
    <span class="s1">result += </span><span class="s3">&quot;tabular-nums&quot; </span><span class="s1">+ separator</span><span class="s4">;</span>
  <span class="s1">}</span>
  <span class="s4">if </span><span class="s1">((</span><span class="s4">int</span><span class="s1">)fontVariant &amp; (</span><span class="s4">int</span><span class="s1">)FontVariant::ProportionalNums) {</span>
    <span class="s1">result += </span><span class="s3">&quot;proportional-nums&quot; </span><span class="s1">+ separator</span><span class="s4">;</span>
  <span class="s1">}</span>

  <span class="s4">if </span><span class="s1">(!result.empty()) {</span>
    <span class="s1">result.erase(result.length() - separator.length())</span><span class="s4">;</span>
  <span class="s1">}</span>

  <span class="s4">return </span><span class="s1">result</span><span class="s4">;</span>
<span class="s1">}</span>

<span class="s4">inline void </span><span class="s1">fromRawValue(</span>
    <span class="s4">const </span><span class="s1">PropsParserContext &amp;context</span><span class="s4">,</span>
    <span class="s4">const </span><span class="s1">RawValue &amp;value</span><span class="s4">,</span>
    <span class="s1">TextTransform &amp;result) {</span>
  <span class="s1">react_native_expect(value.hasType&lt;std::string&gt;())</span><span class="s4">;</span>
  <span class="s4">if </span><span class="s1">(value.hasType&lt;std::string&gt;()) {</span>
    <span class="s4">auto </span><span class="s1">string = (std::string)value</span><span class="s4">;</span>
    <span class="s4">if </span><span class="s1">(string == </span><span class="s3">&quot;none&quot;</span><span class="s1">) {</span>
      <span class="s1">result = TextTransform::None</span><span class="s4">;</span>
    <span class="s1">} </span><span class="s4">else if </span><span class="s1">(string == </span><span class="s3">&quot;uppercase&quot;</span><span class="s1">) {</span>
      <span class="s1">result = TextTransform::Uppercase</span><span class="s4">;</span>
    <span class="s1">} </span><span class="s4">else if </span><span class="s1">(string == </span><span class="s3">&quot;lowercase&quot;</span><span class="s1">) {</span>
      <span class="s1">result = TextTransform::Lowercase</span><span class="s4">;</span>
    <span class="s1">} </span><span class="s4">else if </span><span class="s1">(string == </span><span class="s3">&quot;capitalize&quot;</span><span class="s1">) {</span>
      <span class="s1">result = TextTransform::Capitalize</span><span class="s4">;</span>
    <span class="s1">} </span><span class="s4">else if </span><span class="s1">(string == </span><span class="s3">&quot;unset&quot;</span><span class="s1">) {</span>
      <span class="s1">result = TextTransform::Unset</span><span class="s4">;</span>
    <span class="s1">} </span><span class="s4">else </span><span class="s1">{</span>
      <span class="s1">LOG(ERROR) &lt;&lt; </span><span class="s3">&quot;Unsupported TextTransform value: &quot; </span><span class="s1">&lt;&lt; string</span><span class="s4">;</span>
      <span class="s1">react_native_expect(</span><span class="s4">false</span><span class="s1">)</span><span class="s4">;</span>
      <span class="s0">// sane default for prod</span>
      <span class="s1">result = TextTransform::None</span><span class="s4">;</span>
    <span class="s1">}</span>
    <span class="s4">return;</span>
  <span class="s1">}</span>

  <span class="s1">LOG(ERROR) &lt;&lt; </span><span class="s3">&quot;Unsupported TextTransform type&quot;</span><span class="s4">;</span>
  <span class="s1">react_native_expect(</span><span class="s4">false</span><span class="s1">)</span><span class="s4">;</span>
  <span class="s0">// sane default for prod</span>
  <span class="s1">result = TextTransform::None</span><span class="s4">;</span>
<span class="s1">}</span>

<span class="s4">inline </span><span class="s1">std::string toString(</span><span class="s4">const </span><span class="s1">TextTransform &amp;textTransform) {</span>
  <span class="s4">switch </span><span class="s1">(textTransform) {</span>
    <span class="s4">case </span><span class="s1">TextTransform::None:</span>
      <span class="s4">return </span><span class="s3">&quot;none&quot;</span><span class="s4">;</span>
    <span class="s4">case </span><span class="s1">TextTransform::Uppercase:</span>
      <span class="s4">return </span><span class="s3">&quot;uppercase&quot;</span><span class="s4">;</span>
    <span class="s4">case </span><span class="s1">TextTransform::Lowercase:</span>
      <span class="s4">return </span><span class="s3">&quot;lowercase&quot;</span><span class="s4">;</span>
    <span class="s4">case </span><span class="s1">TextTransform::Capitalize:</span>
      <span class="s4">return </span><span class="s3">&quot;capitalize&quot;</span><span class="s4">;</span>
    <span class="s4">case </span><span class="s1">TextTransform::Unset:</span>
      <span class="s4">return </span><span class="s3">&quot;unset&quot;</span><span class="s4">;</span>
  <span class="s1">}</span>

  <span class="s1">LOG(ERROR) &lt;&lt; </span><span class="s3">&quot;Unsupported TextTransform value&quot;</span><span class="s4">;</span>
  <span class="s1">react_native_expect(</span><span class="s4">false</span><span class="s1">)</span><span class="s4">;</span>
  <span class="s0">// sane default for prod</span>
  <span class="s4">return </span><span class="s3">&quot;none&quot;</span><span class="s4">;</span>
<span class="s1">}</span>

<span class="s4">inline void </span><span class="s1">fromRawValue(</span>
    <span class="s4">const </span><span class="s1">PropsParserContext &amp;context</span><span class="s4">,</span>
    <span class="s4">const </span><span class="s1">RawValue &amp;value</span><span class="s4">,</span>
    <span class="s1">TextAlignment &amp;result) {</span>
  <span class="s1">react_native_expect(value.hasType&lt;std::string&gt;())</span><span class="s4">;</span>
  <span class="s4">if </span><span class="s1">(value.hasType&lt;std::string&gt;()) {</span>
    <span class="s4">auto </span><span class="s1">string = (std::string)value</span><span class="s4">;</span>
    <span class="s4">if </span><span class="s1">(string == </span><span class="s3">&quot;auto&quot;</span><span class="s1">) {</span>
      <span class="s1">result = TextAlignment::Natural</span><span class="s4">;</span>
    <span class="s1">} </span><span class="s4">else if </span><span class="s1">(string == </span><span class="s3">&quot;left&quot;</span><span class="s1">) {</span>
      <span class="s1">result = TextAlignment::Left</span><span class="s4">;</span>
    <span class="s1">} </span><span class="s4">else if </span><span class="s1">(string == </span><span class="s3">&quot;center&quot;</span><span class="s1">) {</span>
      <span class="s1">result = TextAlignment::Center</span><span class="s4">;</span>
    <span class="s1">} </span><span class="s4">else if </span><span class="s1">(string == </span><span class="s3">&quot;right&quot;</span><span class="s1">) {</span>
      <span class="s1">result = TextAlignment::Right</span><span class="s4">;</span>
    <span class="s1">} </span><span class="s4">else if </span><span class="s1">(string == </span><span class="s3">&quot;justify&quot;</span><span class="s1">) {</span>
      <span class="s1">result = TextAlignment::Justified</span><span class="s4">;</span>
    <span class="s1">} </span><span class="s4">else </span><span class="s1">{</span>
      <span class="s1">LOG(ERROR) &lt;&lt; </span><span class="s3">&quot;Unsupported TextAlignment value: &quot; </span><span class="s1">&lt;&lt; string</span><span class="s4">;</span>
      <span class="s1">react_native_expect(</span><span class="s4">false</span><span class="s1">)</span><span class="s4">;</span>
      <span class="s0">// sane default for prod</span>
      <span class="s1">result = TextAlignment::Natural</span><span class="s4">;</span>
    <span class="s1">}</span>
    <span class="s4">return;</span>
  <span class="s1">}</span>

  <span class="s1">LOG(ERROR) &lt;&lt; </span><span class="s3">&quot;Unsupported TextAlignment type&quot;</span><span class="s4">;</span>
  <span class="s0">// sane default for prod</span>
  <span class="s1">result = TextAlignment::Natural</span><span class="s4">;</span>
<span class="s1">}</span>

<span class="s4">inline </span><span class="s1">std::string toString(</span><span class="s4">const </span><span class="s1">TextAlignment &amp;textAlignment) {</span>
  <span class="s4">switch </span><span class="s1">(textAlignment) {</span>
    <span class="s4">case </span><span class="s1">TextAlignment::Natural:</span>
      <span class="s4">return </span><span class="s3">&quot;auto&quot;</span><span class="s4">;</span>
    <span class="s4">case </span><span class="s1">TextAlignment::Left:</span>
      <span class="s4">return </span><span class="s3">&quot;left&quot;</span><span class="s4">;</span>
    <span class="s4">case </span><span class="s1">TextAlignment::Center:</span>
      <span class="s4">return </span><span class="s3">&quot;center&quot;</span><span class="s4">;</span>
    <span class="s4">case </span><span class="s1">TextAlignment::Right:</span>
      <span class="s4">return </span><span class="s3">&quot;right&quot;</span><span class="s4">;</span>
    <span class="s4">case </span><span class="s1">TextAlignment::Justified:</span>
      <span class="s4">return </span><span class="s3">&quot;justified&quot;</span><span class="s4">;</span>
  <span class="s1">}</span>

  <span class="s1">LOG(ERROR) &lt;&lt; </span><span class="s3">&quot;Unsupported TextAlignment value&quot;</span><span class="s4">;</span>
  <span class="s0">// sane default for prod</span>
  <span class="s4">return </span><span class="s3">&quot;auto&quot;</span><span class="s4">;</span>
<span class="s1">}</span>

<span class="s4">inline void </span><span class="s1">fromRawValue(</span>
    <span class="s4">const </span><span class="s1">PropsParserContext &amp;context</span><span class="s4">,</span>
    <span class="s4">const </span><span class="s1">RawValue &amp;value</span><span class="s4">,</span>
    <span class="s1">WritingDirection &amp;result) {</span>
  <span class="s1">react_native_expect(value.hasType&lt;std::string&gt;())</span><span class="s4">;</span>
  <span class="s4">if </span><span class="s1">(value.hasType&lt;std::string&gt;()) {</span>
    <span class="s4">auto </span><span class="s1">string = (std::string)value</span><span class="s4">;</span>
    <span class="s4">if </span><span class="s1">(string == </span><span class="s3">&quot;natural&quot; </span><span class="s1">|| string == </span><span class="s3">&quot;auto&quot;</span><span class="s1">) {</span>
      <span class="s1">result = WritingDirection::Natural</span><span class="s4">;</span>
    <span class="s1">} </span><span class="s4">else if </span><span class="s1">(string == </span><span class="s3">&quot;ltr&quot;</span><span class="s1">) {</span>
      <span class="s1">result = WritingDirection::LeftToRight</span><span class="s4">;</span>
    <span class="s1">} </span><span class="s4">else if </span><span class="s1">(string == </span><span class="s3">&quot;rtl&quot;</span><span class="s1">) {</span>
      <span class="s1">result = WritingDirection::RightToLeft</span><span class="s4">;</span>
    <span class="s1">} </span><span class="s4">else </span><span class="s1">{</span>
      <span class="s1">LOG(ERROR) &lt;&lt; </span><span class="s3">&quot;Unsupported WritingDirection value: &quot; </span><span class="s1">&lt;&lt; string</span><span class="s4">;</span>
      <span class="s1">react_native_expect(</span><span class="s4">false</span><span class="s1">)</span><span class="s4">;</span>
      <span class="s0">// sane default for prod</span>
      <span class="s1">result = WritingDirection::Natural</span><span class="s4">;</span>
    <span class="s1">}</span>
    <span class="s4">return;</span>
  <span class="s1">}</span>

  <span class="s1">LOG(ERROR) &lt;&lt; </span><span class="s3">&quot;Unsupported WritingDirection type&quot;</span><span class="s4">;</span>
  <span class="s0">// sane default for prod</span>
  <span class="s1">result = WritingDirection::Natural</span><span class="s4">;</span>
<span class="s1">}</span>

<span class="s4">inline </span><span class="s1">std::string toString(</span><span class="s4">const </span><span class="s1">WritingDirection &amp;writingDirection) {</span>
  <span class="s4">switch </span><span class="s1">(writingDirection) {</span>
    <span class="s4">case </span><span class="s1">WritingDirection::Natural:</span>
      <span class="s4">return </span><span class="s3">&quot;auto&quot;</span><span class="s4">;</span>
    <span class="s4">case </span><span class="s1">WritingDirection::LeftToRight:</span>
      <span class="s4">return </span><span class="s3">&quot;ltr&quot;</span><span class="s4">;</span>
    <span class="s4">case </span><span class="s1">WritingDirection::RightToLeft:</span>
      <span class="s4">return </span><span class="s3">&quot;rtl&quot;</span><span class="s4">;</span>
  <span class="s1">}</span>

  <span class="s1">LOG(ERROR) &lt;&lt; </span><span class="s3">&quot;Unsupported WritingDirection value&quot;</span><span class="s4">;</span>
  <span class="s0">// sane default for prod</span>
  <span class="s4">return </span><span class="s3">&quot;auto&quot;</span><span class="s4">;</span>
<span class="s1">}</span>

<span class="s4">inline void </span><span class="s1">fromRawValue(</span>
    <span class="s4">const </span><span class="s1">PropsParserContext &amp;context</span><span class="s4">,</span>
    <span class="s4">const </span><span class="s1">RawValue &amp;value</span><span class="s4">,</span>
    <span class="s1">LineBreakStrategy &amp;result) {</span>
  <span class="s1">react_native_expect(value.hasType&lt;std::string&gt;())</span><span class="s4">;</span>
  <span class="s4">if </span><span class="s1">(value.hasType&lt;std::string&gt;()) {</span>
    <span class="s4">auto </span><span class="s1">string = (std::string)value</span><span class="s4">;</span>
    <span class="s4">if </span><span class="s1">(string == </span><span class="s3">&quot;none&quot;</span><span class="s1">) {</span>
      <span class="s1">result = LineBreakStrategy::None</span><span class="s4">;</span>
    <span class="s1">} </span><span class="s4">else if </span><span class="s1">(string == </span><span class="s3">&quot;push-out&quot;</span><span class="s1">) {</span>
      <span class="s1">result = LineBreakStrategy::PushOut</span><span class="s4">;</span>
    <span class="s1">} </span><span class="s4">else if </span><span class="s1">(string == </span><span class="s3">&quot;hangul-word&quot;</span><span class="s1">) {</span>
      <span class="s1">result = LineBreakStrategy::HangulWordPriority</span><span class="s4">;</span>
    <span class="s1">} </span><span class="s4">else if </span><span class="s1">(string == </span><span class="s3">&quot;standard&quot;</span><span class="s1">) {</span>
      <span class="s1">result = LineBreakStrategy::Standard</span><span class="s4">;</span>
    <span class="s1">} </span><span class="s4">else </span><span class="s1">{</span>
      <span class="s1">LOG(ERROR) &lt;&lt; </span><span class="s3">&quot;Unsupported LineBreakStrategy value: &quot; </span><span class="s1">&lt;&lt; string</span><span class="s4">;</span>
      <span class="s1">react_native_expect(</span><span class="s4">false</span><span class="s1">)</span><span class="s4">;</span>
      <span class="s0">// sane default for prod</span>
      <span class="s1">result = LineBreakStrategy::None</span><span class="s4">;</span>
    <span class="s1">}</span>
    <span class="s4">return;</span>
  <span class="s1">}</span>

  <span class="s1">LOG(ERROR) &lt;&lt; </span><span class="s3">&quot;Unsupported LineBreakStrategy type&quot;</span><span class="s4">;</span>
  <span class="s0">// sane default for prod</span>
  <span class="s1">result = LineBreakStrategy::None</span><span class="s4">;</span>
<span class="s1">}</span>

<span class="s4">inline </span><span class="s1">std::string toString(</span><span class="s4">const </span><span class="s1">LineBreakStrategy &amp;lineBreakStrategy) {</span>
  <span class="s4">switch </span><span class="s1">(lineBreakStrategy) {</span>
    <span class="s4">case </span><span class="s1">LineBreakStrategy::None:</span>
      <span class="s4">return </span><span class="s3">&quot;none&quot;</span><span class="s4">;</span>
    <span class="s4">case </span><span class="s1">LineBreakStrategy::PushOut:</span>
      <span class="s4">return </span><span class="s3">&quot;push-out&quot;</span><span class="s4">;</span>
    <span class="s4">case </span><span class="s1">LineBreakStrategy::HangulWordPriority:</span>
      <span class="s4">return </span><span class="s3">&quot;hangul-word&quot;</span><span class="s4">;</span>
    <span class="s4">case </span><span class="s1">LineBreakStrategy::Standard:</span>
      <span class="s4">return </span><span class="s3">&quot;standard&quot;</span><span class="s4">;</span>
  <span class="s1">}</span>

  <span class="s1">LOG(ERROR) &lt;&lt; </span><span class="s3">&quot;Unsupported LineBreakStrategy value&quot;</span><span class="s4">;</span>
  <span class="s0">// sane default for prod</span>
  <span class="s4">return </span><span class="s3">&quot;none&quot;</span><span class="s4">;</span>
<span class="s1">}</span>

<span class="s4">inline void </span><span class="s1">fromRawValue(</span>
    <span class="s4">const </span><span class="s1">PropsParserContext &amp;context</span><span class="s4">,</span>
    <span class="s4">const </span><span class="s1">RawValue &amp;value</span><span class="s4">,</span>
    <span class="s1">TextDecorationLineType &amp;result) {</span>
  <span class="s1">react_native_expect(value.hasType&lt;std::string&gt;())</span><span class="s4">;</span>
  <span class="s4">if </span><span class="s1">(value.hasType&lt;std::string&gt;()) {</span>
    <span class="s4">auto </span><span class="s1">string = (std::string)value</span><span class="s4">;</span>
    <span class="s4">if </span><span class="s1">(string == </span><span class="s3">&quot;none&quot;</span><span class="s1">) {</span>
      <span class="s1">result = TextDecorationLineType::None</span><span class="s4">;</span>
    <span class="s1">} </span><span class="s4">else if </span><span class="s1">(string == </span><span class="s3">&quot;underline&quot;</span><span class="s1">) {</span>
      <span class="s1">result = TextDecorationLineType::Underline</span><span class="s4">;</span>
    <span class="s1">} </span><span class="s4">else if </span><span class="s1">(string == </span><span class="s3">&quot;strikethrough&quot; </span><span class="s1">|| string == </span><span class="s3">&quot;line-through&quot;</span><span class="s1">) {</span>
      <span class="s0">// TODO: remove &quot;line-through&quot; after deprecation</span>
      <span class="s1">result = TextDecorationLineType::Strikethrough</span><span class="s4">;</span>
    <span class="s1">} </span><span class="s4">else if </span><span class="s1">(</span>
        <span class="s1">string == </span><span class="s3">&quot;underline-strikethrough&quot; </span><span class="s1">||</span>
        <span class="s1">string == </span><span class="s3">&quot;underline line-through&quot;</span><span class="s1">) {</span>
      <span class="s0">// TODO: remove &quot;underline line-through&quot; after &quot;line-through&quot; deprecation</span>
      <span class="s1">result = TextDecorationLineType::UnderlineStrikethrough</span><span class="s4">;</span>
    <span class="s1">} </span><span class="s4">else </span><span class="s1">{</span>
      <span class="s1">LOG(ERROR) &lt;&lt; </span><span class="s3">&quot;Unsupported TextDecorationLineType value: &quot; </span><span class="s1">&lt;&lt; string</span><span class="s4">;</span>
      <span class="s1">react_native_expect(</span><span class="s4">false</span><span class="s1">)</span><span class="s4">;</span>
      <span class="s0">// sane default for prod</span>
      <span class="s1">result = TextDecorationLineType::None</span><span class="s4">;</span>
    <span class="s1">}</span>
    <span class="s4">return;</span>
  <span class="s1">}</span>

  <span class="s1">LOG(ERROR) &lt;&lt; </span><span class="s3">&quot;Unsupported TextDecorationLineType type&quot;</span><span class="s4">;</span>
  <span class="s0">// sane default for prod</span>
  <span class="s1">result = TextDecorationLineType::None</span><span class="s4">;</span>
<span class="s1">}</span>

<span class="s4">inline </span><span class="s1">std::string toString(</span>
    <span class="s4">const </span><span class="s1">TextDecorationLineType &amp;textDecorationLineType) {</span>
  <span class="s4">switch </span><span class="s1">(textDecorationLineType) {</span>
    <span class="s4">case </span><span class="s1">TextDecorationLineType::None:</span>
      <span class="s4">return </span><span class="s3">&quot;none&quot;</span><span class="s4">;</span>
    <span class="s4">case </span><span class="s1">TextDecorationLineType::Underline:</span>
      <span class="s4">return </span><span class="s3">&quot;underline&quot;</span><span class="s4">;</span>
    <span class="s4">case </span><span class="s1">TextDecorationLineType::Strikethrough:</span>
      <span class="s4">return </span><span class="s3">&quot;strikethrough&quot;</span><span class="s4">;</span>
    <span class="s4">case </span><span class="s1">TextDecorationLineType::UnderlineStrikethrough:</span>
      <span class="s4">return </span><span class="s3">&quot;underline-strikethrough&quot;</span><span class="s4">;</span>
  <span class="s1">}</span>

  <span class="s1">LOG(ERROR) &lt;&lt; </span><span class="s3">&quot;Unsupported TextDecorationLineType value&quot;</span><span class="s4">;</span>
  <span class="s1">react_native_expect(</span><span class="s4">false</span><span class="s1">)</span><span class="s4">;</span>
  <span class="s0">// sane default for prod</span>
  <span class="s4">return </span><span class="s3">&quot;none&quot;</span><span class="s4">;</span>
<span class="s1">}</span>

<span class="s4">inline void </span><span class="s1">fromRawValue(</span>
    <span class="s4">const </span><span class="s1">PropsParserContext &amp;context</span><span class="s4">,</span>
    <span class="s4">const </span><span class="s1">RawValue &amp;value</span><span class="s4">,</span>
    <span class="s1">TextDecorationStyle &amp;result) {</span>
  <span class="s1">react_native_expect(value.hasType&lt;std::string&gt;())</span><span class="s4">;</span>
  <span class="s4">if </span><span class="s1">(value.hasType&lt;std::string&gt;()) {</span>
    <span class="s4">auto </span><span class="s1">string = (std::string)value</span><span class="s4">;</span>
    <span class="s4">if </span><span class="s1">(string == </span><span class="s3">&quot;solid&quot;</span><span class="s1">) {</span>
      <span class="s1">result = TextDecorationStyle::Solid</span><span class="s4">;</span>
    <span class="s1">} </span><span class="s4">else if </span><span class="s1">(string == </span><span class="s3">&quot;double&quot;</span><span class="s1">) {</span>
      <span class="s1">result = TextDecorationStyle::Double</span><span class="s4">;</span>
    <span class="s1">} </span><span class="s4">else if </span><span class="s1">(string == </span><span class="s3">&quot;dotted&quot;</span><span class="s1">) {</span>
      <span class="s1">result = TextDecorationStyle::Dotted</span><span class="s4">;</span>
    <span class="s1">} </span><span class="s4">else if </span><span class="s1">(string == </span><span class="s3">&quot;dashed&quot;</span><span class="s1">) {</span>
      <span class="s1">result = TextDecorationStyle::Dashed</span><span class="s4">;</span>
    <span class="s1">} </span><span class="s4">else </span><span class="s1">{</span>
      <span class="s1">LOG(ERROR) &lt;&lt; </span><span class="s3">&quot;Unsupported TextDecorationStyle value: &quot; </span><span class="s1">&lt;&lt; string</span><span class="s4">;</span>
      <span class="s1">react_native_expect(</span><span class="s4">false</span><span class="s1">)</span><span class="s4">;</span>
      <span class="s0">// sane default for prod</span>
      <span class="s1">result = TextDecorationStyle::Solid</span><span class="s4">;</span>
    <span class="s1">}</span>
    <span class="s4">return;</span>
  <span class="s1">}</span>

  <span class="s1">LOG(ERROR) &lt;&lt; </span><span class="s3">&quot;Unsupported TextDecorationStyle type&quot;</span><span class="s4">;</span>
  <span class="s0">// sane default for prod</span>
  <span class="s1">result = TextDecorationStyle::Solid</span><span class="s4">;</span>
<span class="s1">}</span>

<span class="s4">inline </span><span class="s1">std::string toString(</span><span class="s4">const </span><span class="s1">TextDecorationStyle &amp;textDecorationStyle) {</span>
  <span class="s4">switch </span><span class="s1">(textDecorationStyle) {</span>
    <span class="s4">case </span><span class="s1">TextDecorationStyle::Solid:</span>
      <span class="s4">return </span><span class="s3">&quot;solid&quot;</span><span class="s4">;</span>
    <span class="s4">case </span><span class="s1">TextDecorationStyle::Double:</span>
      <span class="s4">return </span><span class="s3">&quot;double&quot;</span><span class="s4">;</span>
    <span class="s4">case </span><span class="s1">TextDecorationStyle::Dotted:</span>
      <span class="s4">return </span><span class="s3">&quot;dotted&quot;</span><span class="s4">;</span>
    <span class="s4">case </span><span class="s1">TextDecorationStyle::Dashed:</span>
      <span class="s4">return </span><span class="s3">&quot;dashed&quot;</span><span class="s4">;</span>
  <span class="s1">}</span>

  <span class="s1">LOG(ERROR) &lt;&lt; </span><span class="s3">&quot;Unsupported TextDecorationStyle value&quot;</span><span class="s4">;</span>
  <span class="s1">react_native_expect(</span><span class="s4">false</span><span class="s1">)</span><span class="s4">;</span>
  <span class="s0">// sane default for prod</span>
  <span class="s4">return </span><span class="s3">&quot;solid&quot;</span><span class="s4">;</span>
<span class="s1">}</span>

<span class="s4">inline </span><span class="s1">std::string toString(</span><span class="s4">const </span><span class="s1">AccessibilityRole &amp;accessibilityRole) {</span>
  <span class="s4">switch </span><span class="s1">(accessibilityRole) {</span>
    <span class="s4">case </span><span class="s1">AccessibilityRole::None:</span>
      <span class="s4">return </span><span class="s3">&quot;none&quot;</span><span class="s4">;</span>
    <span class="s4">case </span><span class="s1">AccessibilityRole::Button:</span>
      <span class="s4">return </span><span class="s3">&quot;button&quot;</span><span class="s4">;</span>
    <span class="s4">case </span><span class="s1">AccessibilityRole::Link:</span>
      <span class="s4">return </span><span class="s3">&quot;link&quot;</span><span class="s4">;</span>
    <span class="s4">case </span><span class="s1">AccessibilityRole::Search:</span>
      <span class="s4">return </span><span class="s3">&quot;search&quot;</span><span class="s4">;</span>
    <span class="s4">case </span><span class="s1">AccessibilityRole::Image:</span>
      <span class="s4">return </span><span class="s3">&quot;image&quot;</span><span class="s4">;</span>
    <span class="s4">case </span><span class="s1">AccessibilityRole::Imagebutton:</span>
      <span class="s4">return </span><span class="s3">&quot;imagebutton&quot;</span><span class="s4">;</span>
    <span class="s4">case </span><span class="s1">AccessibilityRole::Keyboardkey:</span>
      <span class="s4">return </span><span class="s3">&quot;keyboardkey&quot;</span><span class="s4">;</span>
    <span class="s4">case </span><span class="s1">AccessibilityRole::Text:</span>
      <span class="s4">return </span><span class="s3">&quot;text&quot;</span><span class="s4">;</span>
    <span class="s4">case </span><span class="s1">AccessibilityRole::Adjustable:</span>
      <span class="s4">return </span><span class="s3">&quot;adjustable&quot;</span><span class="s4">;</span>
    <span class="s4">case </span><span class="s1">AccessibilityRole::Summary:</span>
      <span class="s4">return </span><span class="s3">&quot;summary&quot;</span><span class="s4">;</span>
    <span class="s4">case </span><span class="s1">AccessibilityRole::Header:</span>
      <span class="s4">return </span><span class="s3">&quot;header&quot;</span><span class="s4">;</span>
    <span class="s4">case </span><span class="s1">AccessibilityRole::Alert:</span>
      <span class="s4">return </span><span class="s3">&quot;alert&quot;</span><span class="s4">;</span>
    <span class="s4">case </span><span class="s1">AccessibilityRole::Checkbox:</span>
      <span class="s4">return </span><span class="s3">&quot;checkbox&quot;</span><span class="s4">;</span>
    <span class="s4">case </span><span class="s1">AccessibilityRole::Combobox:</span>
      <span class="s4">return </span><span class="s3">&quot;combobox&quot;</span><span class="s4">;</span>
    <span class="s4">case </span><span class="s1">AccessibilityRole::Menu:</span>
      <span class="s4">return </span><span class="s3">&quot;menu&quot;</span><span class="s4">;</span>
    <span class="s4">case </span><span class="s1">AccessibilityRole::Menubar:</span>
      <span class="s4">return </span><span class="s3">&quot;menubar&quot;</span><span class="s4">;</span>
    <span class="s4">case </span><span class="s1">AccessibilityRole::Menuitem:</span>
      <span class="s4">return </span><span class="s3">&quot;menuitem&quot;</span><span class="s4">;</span>
    <span class="s4">case </span><span class="s1">AccessibilityRole::Progressbar:</span>
      <span class="s4">return </span><span class="s3">&quot;progressbar&quot;</span><span class="s4">;</span>
    <span class="s4">case </span><span class="s1">AccessibilityRole::Radio:</span>
      <span class="s4">return </span><span class="s3">&quot;radio&quot;</span><span class="s4">;</span>
    <span class="s4">case </span><span class="s1">AccessibilityRole::Radiogroup:</span>
      <span class="s4">return </span><span class="s3">&quot;radiogroup&quot;</span><span class="s4">;</span>
    <span class="s4">case </span><span class="s1">AccessibilityRole::Scrollbar:</span>
      <span class="s4">return </span><span class="s3">&quot;scrollbar&quot;</span><span class="s4">;</span>
    <span class="s4">case </span><span class="s1">AccessibilityRole::Spinbutton:</span>
      <span class="s4">return </span><span class="s3">&quot;spinbutton&quot;</span><span class="s4">;</span>
    <span class="s4">case </span><span class="s1">AccessibilityRole::Switch:</span>
      <span class="s4">return </span><span class="s3">&quot;switch&quot;</span><span class="s4">;</span>
    <span class="s4">case </span><span class="s1">AccessibilityRole::Tab:</span>
      <span class="s4">return </span><span class="s3">&quot;tab&quot;</span><span class="s4">;</span>
    <span class="s4">case </span><span class="s1">AccessibilityRole::TabBar:</span>
      <span class="s4">return </span><span class="s3">&quot;tabbar&quot;</span><span class="s4">;</span>
    <span class="s4">case </span><span class="s1">AccessibilityRole::Tablist:</span>
      <span class="s4">return </span><span class="s3">&quot;tablist&quot;</span><span class="s4">;</span>
    <span class="s4">case </span><span class="s1">AccessibilityRole::Timer:</span>
      <span class="s4">return </span><span class="s3">&quot;timer&quot;</span><span class="s4">;</span>
    <span class="s4">case </span><span class="s1">AccessibilityRole::Toolbar:</span>
      <span class="s4">return </span><span class="s3">&quot;toolbar&quot;</span><span class="s4">;</span>
  <span class="s1">}</span>

  <span class="s1">LOG(ERROR) &lt;&lt; </span><span class="s3">&quot;Unsupported AccessibilityRole value&quot;</span><span class="s4">;</span>
  <span class="s1">react_native_expect(</span><span class="s4">false</span><span class="s1">)</span><span class="s4">;</span>
  <span class="s0">// sane default for prod</span>
  <span class="s4">return </span><span class="s3">&quot;none&quot;</span><span class="s4">;</span>
<span class="s1">}</span>

<span class="s4">inline void </span><span class="s1">fromRawValue(</span>
    <span class="s4">const </span><span class="s1">PropsParserContext &amp;context</span><span class="s4">,</span>
    <span class="s4">const </span><span class="s1">RawValue &amp;value</span><span class="s4">,</span>
    <span class="s1">AccessibilityRole &amp;result) {</span>
  <span class="s1">react_native_expect(value.hasType&lt;std::string&gt;())</span><span class="s4">;</span>
  <span class="s4">if </span><span class="s1">(value.hasType&lt;std::string&gt;()) {</span>
    <span class="s4">auto </span><span class="s1">string = (std::string)value</span><span class="s4">;</span>
    <span class="s4">if </span><span class="s1">(string == </span><span class="s3">&quot;none&quot;</span><span class="s1">) {</span>
      <span class="s1">result = AccessibilityRole::None</span><span class="s4">;</span>
    <span class="s1">} </span><span class="s4">else if </span><span class="s1">(string == </span><span class="s3">&quot;button&quot; </span><span class="s1">|| string == </span><span class="s3">&quot;togglebutton&quot;</span><span class="s1">) {</span>
      <span class="s1">result = AccessibilityRole::Button</span><span class="s4">;</span>
    <span class="s1">} </span><span class="s4">else if </span><span class="s1">(string == </span><span class="s3">&quot;link&quot;</span><span class="s1">) {</span>
      <span class="s1">result = AccessibilityRole::Link</span><span class="s4">;</span>
    <span class="s1">} </span><span class="s4">else if </span><span class="s1">(string == </span><span class="s3">&quot;search&quot;</span><span class="s1">) {</span>
      <span class="s1">result = AccessibilityRole::Search</span><span class="s4">;</span>
    <span class="s1">} </span><span class="s4">else if </span><span class="s1">(string == </span><span class="s3">&quot;image&quot;</span><span class="s1">) {</span>
      <span class="s1">result = AccessibilityRole::Image</span><span class="s4">;</span>
    <span class="s1">} </span><span class="s4">else if </span><span class="s1">(string == </span><span class="s3">&quot;imagebutton&quot;</span><span class="s1">) {</span>
      <span class="s1">result = AccessibilityRole::Imagebutton</span><span class="s4">;</span>
    <span class="s1">} </span><span class="s4">else if </span><span class="s1">(string == </span><span class="s3">&quot;keyboardkey&quot;</span><span class="s1">) {</span>
      <span class="s1">result = AccessibilityRole::Keyboardkey</span><span class="s4">;</span>
    <span class="s1">} </span><span class="s4">else if </span><span class="s1">(string == </span><span class="s3">&quot;text&quot;</span><span class="s1">) {</span>
      <span class="s1">result = AccessibilityRole::Text</span><span class="s4">;</span>
    <span class="s1">} </span><span class="s4">else if </span><span class="s1">(string == </span><span class="s3">&quot;adjustable&quot;</span><span class="s1">) {</span>
      <span class="s1">result = AccessibilityRole::Adjustable</span><span class="s4">;</span>
    <span class="s1">} </span><span class="s4">else if </span><span class="s1">(string == </span><span class="s3">&quot;summary&quot;</span><span class="s1">) {</span>
      <span class="s1">result = AccessibilityRole::Summary</span><span class="s4">;</span>
    <span class="s1">} </span><span class="s4">else if </span><span class="s1">(string == </span><span class="s3">&quot;header&quot;</span><span class="s1">) {</span>
      <span class="s1">result = AccessibilityRole::Header</span><span class="s4">;</span>
    <span class="s1">} </span><span class="s4">else if </span><span class="s1">(string == </span><span class="s3">&quot;alert&quot;</span><span class="s1">) {</span>
      <span class="s1">result = AccessibilityRole::Alert</span><span class="s4">;</span>
    <span class="s1">} </span><span class="s4">else if </span><span class="s1">(string == </span><span class="s3">&quot;checkbox&quot;</span><span class="s1">) {</span>
      <span class="s1">result = AccessibilityRole::Checkbox</span><span class="s4">;</span>
    <span class="s1">} </span><span class="s4">else if </span><span class="s1">(string == </span><span class="s3">&quot;combobox&quot;</span><span class="s1">) {</span>
      <span class="s1">result = AccessibilityRole::Combobox</span><span class="s4">;</span>
    <span class="s1">} </span><span class="s4">else if </span><span class="s1">(string == </span><span class="s3">&quot;menu&quot;</span><span class="s1">) {</span>
      <span class="s1">result = AccessibilityRole::Menu</span><span class="s4">;</span>
    <span class="s1">} </span><span class="s4">else if </span><span class="s1">(string == </span><span class="s3">&quot;menubar&quot;</span><span class="s1">) {</span>
      <span class="s1">result = AccessibilityRole::Menubar</span><span class="s4">;</span>
    <span class="s1">} </span><span class="s4">else if </span><span class="s1">(string == </span><span class="s3">&quot;menuitem&quot;</span><span class="s1">) {</span>
      <span class="s1">result = AccessibilityRole::Menuitem</span><span class="s4">;</span>
    <span class="s1">} </span><span class="s4">else if </span><span class="s1">(string == </span><span class="s3">&quot;progressbar&quot;</span><span class="s1">) {</span>
      <span class="s1">result = AccessibilityRole::Progressbar</span><span class="s4">;</span>
    <span class="s1">} </span><span class="s4">else if </span><span class="s1">(string == </span><span class="s3">&quot;radio&quot;</span><span class="s1">) {</span>
      <span class="s1">result = AccessibilityRole::Radio</span><span class="s4">;</span>
    <span class="s1">} </span><span class="s4">else if </span><span class="s1">(string == </span><span class="s3">&quot;radiogroup&quot;</span><span class="s1">) {</span>
      <span class="s1">result = AccessibilityRole::Radiogroup</span><span class="s4">;</span>
    <span class="s1">} </span><span class="s4">else if </span><span class="s1">(string == </span><span class="s3">&quot;scrollbar&quot;</span><span class="s1">) {</span>
      <span class="s1">result = AccessibilityRole::Scrollbar</span><span class="s4">;</span>
    <span class="s1">} </span><span class="s4">else if </span><span class="s1">(string == </span><span class="s3">&quot;spinbutton&quot;</span><span class="s1">) {</span>
      <span class="s1">result = AccessibilityRole::Spinbutton</span><span class="s4">;</span>
    <span class="s1">} </span><span class="s4">else if </span><span class="s1">(string == </span><span class="s3">&quot;switch&quot;</span><span class="s1">) {</span>
      <span class="s1">result = AccessibilityRole::Switch</span><span class="s4">;</span>
    <span class="s1">} </span><span class="s4">else if </span><span class="s1">(string == </span><span class="s3">&quot;tab&quot;</span><span class="s1">) {</span>
      <span class="s1">result = AccessibilityRole::Tab</span><span class="s4">;</span>
    <span class="s1">} </span><span class="s4">else if </span><span class="s1">(string == </span><span class="s3">&quot;tabbar&quot;</span><span class="s1">) {</span>
      <span class="s1">result = AccessibilityRole::TabBar</span><span class="s4">;</span>
    <span class="s1">} </span><span class="s4">else if </span><span class="s1">(string == </span><span class="s3">&quot;tablist&quot;</span><span class="s1">) {</span>
      <span class="s1">result = AccessibilityRole::Tablist</span><span class="s4">;</span>
    <span class="s1">} </span><span class="s4">else if </span><span class="s1">(string == </span><span class="s3">&quot;timer&quot;</span><span class="s1">) {</span>
      <span class="s1">result = AccessibilityRole::Timer</span><span class="s4">;</span>
    <span class="s1">} </span><span class="s4">else if </span><span class="s1">(string == </span><span class="s3">&quot;toolbar&quot;</span><span class="s1">) {</span>
      <span class="s1">result = AccessibilityRole::Toolbar</span><span class="s4">;</span>
    <span class="s1">} </span><span class="s4">else </span><span class="s1">{</span>
      <span class="s1">LOG(ERROR) &lt;&lt; </span><span class="s3">&quot;Unsupported AccessibilityRole value: &quot; </span><span class="s1">&lt;&lt; string</span><span class="s4">;</span>
      <span class="s1">react_native_expect(</span><span class="s4">false</span><span class="s1">)</span><span class="s4">;</span>
      <span class="s0">// sane default for prod</span>
      <span class="s1">result = AccessibilityRole::None</span><span class="s4">;</span>
    <span class="s1">}</span>
    <span class="s4">return;</span>
  <span class="s1">}</span>

  <span class="s1">LOG(ERROR) &lt;&lt; </span><span class="s3">&quot;Unsupported AccessibilityRole type&quot;</span><span class="s4">;</span>
  <span class="s1">react_native_expect(</span><span class="s4">false</span><span class="s1">)</span><span class="s4">;</span>
  <span class="s0">// sane default for prod</span>
  <span class="s1">result = AccessibilityRole::None</span><span class="s4">;</span>
<span class="s1">}</span>

<span class="s4">inline </span><span class="s1">std::string toString(</span><span class="s4">const </span><span class="s1">HyphenationFrequency &amp;hyphenationFrequency) {</span>
  <span class="s4">switch </span><span class="s1">(hyphenationFrequency) {</span>
    <span class="s4">case </span><span class="s1">HyphenationFrequency::None:</span>
      <span class="s4">return </span><span class="s3">&quot;none&quot;</span><span class="s4">;</span>
    <span class="s4">case </span><span class="s1">HyphenationFrequency::Normal:</span>
      <span class="s4">return </span><span class="s3">&quot;normal&quot;</span><span class="s4">;</span>
    <span class="s4">case </span><span class="s1">HyphenationFrequency::Full:</span>
      <span class="s4">return </span><span class="s3">&quot;full&quot;</span><span class="s4">;</span>
  <span class="s1">}</span>

  <span class="s1">LOG(ERROR) &lt;&lt; </span><span class="s3">&quot;Unsupported HyphenationFrequency value&quot;</span><span class="s4">;</span>
  <span class="s1">react_native_expect(</span><span class="s4">false</span><span class="s1">)</span><span class="s4">;</span>
  <span class="s4">return </span><span class="s3">&quot;none&quot;</span><span class="s4">;</span>
<span class="s1">}</span>

<span class="s4">inline void </span><span class="s1">fromRawValue(</span>
    <span class="s4">const </span><span class="s1">PropsParserContext &amp;context</span><span class="s4">,</span>
    <span class="s4">const </span><span class="s1">RawValue &amp;value</span><span class="s4">,</span>
    <span class="s1">HyphenationFrequency &amp;result) {</span>
  <span class="s1">react_native_expect(value.hasType&lt;std::string&gt;())</span><span class="s4">;</span>
  <span class="s4">if </span><span class="s1">(value.hasType&lt;std::string&gt;()) {</span>
    <span class="s4">auto </span><span class="s1">string = (std::string)value</span><span class="s4">;</span>
    <span class="s4">if </span><span class="s1">(string == </span><span class="s3">&quot;none&quot;</span><span class="s1">) {</span>
      <span class="s1">result = HyphenationFrequency::None</span><span class="s4">;</span>
    <span class="s1">} </span><span class="s4">else if </span><span class="s1">(string == </span><span class="s3">&quot;normal&quot;</span><span class="s1">) {</span>
      <span class="s1">result = HyphenationFrequency::Normal</span><span class="s4">;</span>
    <span class="s1">} </span><span class="s4">else if </span><span class="s1">(string == </span><span class="s3">&quot;full&quot;</span><span class="s1">) {</span>
      <span class="s1">result = HyphenationFrequency::Full</span><span class="s4">;</span>
    <span class="s1">} </span><span class="s4">else </span><span class="s1">{</span>
      <span class="s0">// sane default</span>
      <span class="s1">LOG(ERROR) &lt;&lt; </span><span class="s3">&quot;Unsupported HyphenationFrequency value: &quot; </span><span class="s1">&lt;&lt; string</span><span class="s4">;</span>
      <span class="s1">react_native_expect(</span><span class="s4">false</span><span class="s1">)</span><span class="s4">;</span>
      <span class="s1">result = HyphenationFrequency::None</span><span class="s4">;</span>
    <span class="s1">}</span>
    <span class="s4">return;</span>
  <span class="s1">}</span>

  <span class="s1">LOG(ERROR) &lt;&lt; </span><span class="s3">&quot;Unsupported HyphenationFrequency type&quot;</span><span class="s4">;</span>
  <span class="s1">react_native_expect(</span><span class="s4">false</span><span class="s1">)</span><span class="s4">;</span>
  <span class="s1">result = HyphenationFrequency::None</span><span class="s4">;</span>
<span class="s1">}</span>

<span class="s4">inline </span><span class="s1">ParagraphAttributes convertRawProp(</span>
    <span class="s4">const </span><span class="s1">PropsParserContext &amp;context</span><span class="s4">,</span>
    <span class="s1">RawProps </span><span class="s4">const </span><span class="s1">&amp;rawProps</span><span class="s4">,</span>
    <span class="s1">ParagraphAttributes </span><span class="s4">const </span><span class="s1">&amp;sourceParagraphAttributes</span><span class="s4">,</span>
    <span class="s1">ParagraphAttributes </span><span class="s4">const </span><span class="s1">&amp;defaultParagraphAttributes) {</span>
  <span class="s4">auto </span><span class="s1">paragraphAttributes = ParagraphAttributes{}</span><span class="s4">;</span>

  <span class="s1">paragraphAttributes.maximumNumberOfLines = convertRawProp(</span>
      <span class="s1">context</span><span class="s4">,</span>
      <span class="s1">rawProps</span><span class="s4">,</span>
      <span class="s3">&quot;numberOfLines&quot;</span><span class="s4">,</span>
      <span class="s1">sourceParagraphAttributes.maximumNumberOfLines</span><span class="s4">,</span>
      <span class="s1">defaultParagraphAttributes.maximumNumberOfLines)</span><span class="s4">;</span>
  <span class="s1">paragraphAttributes.ellipsizeMode = convertRawProp(</span>
      <span class="s1">context</span><span class="s4">,</span>
      <span class="s1">rawProps</span><span class="s4">,</span>
      <span class="s3">&quot;ellipsizeMode&quot;</span><span class="s4">,</span>
      <span class="s1">sourceParagraphAttributes.ellipsizeMode</span><span class="s4">,</span>
      <span class="s1">defaultParagraphAttributes.ellipsizeMode)</span><span class="s4">;</span>
  <span class="s1">paragraphAttributes.textBreakStrategy = convertRawProp(</span>
      <span class="s1">context</span><span class="s4">,</span>
      <span class="s1">rawProps</span><span class="s4">,</span>
      <span class="s3">&quot;textBreakStrategy&quot;</span><span class="s4">,</span>
      <span class="s1">sourceParagraphAttributes.textBreakStrategy</span><span class="s4">,</span>
      <span class="s1">defaultParagraphAttributes.textBreakStrategy)</span><span class="s4">;</span>
  <span class="s1">paragraphAttributes.adjustsFontSizeToFit = convertRawProp(</span>
      <span class="s1">context</span><span class="s4">,</span>
      <span class="s1">rawProps</span><span class="s4">,</span>
      <span class="s3">&quot;adjustsFontSizeToFit&quot;</span><span class="s4">,</span>
      <span class="s1">sourceParagraphAttributes.adjustsFontSizeToFit</span><span class="s4">,</span>
      <span class="s1">defaultParagraphAttributes.adjustsFontSizeToFit)</span><span class="s4">;</span>
  <span class="s1">paragraphAttributes.minimumFontSize = convertRawProp(</span>
      <span class="s1">context</span><span class="s4">,</span>
      <span class="s1">rawProps</span><span class="s4">,</span>
      <span class="s3">&quot;minimumFontSize&quot;</span><span class="s4">,</span>
      <span class="s1">sourceParagraphAttributes.minimumFontSize</span><span class="s4">,</span>
      <span class="s1">defaultParagraphAttributes.minimumFontSize)</span><span class="s4">;</span>
  <span class="s1">paragraphAttributes.maximumFontSize = convertRawProp(</span>
      <span class="s1">context</span><span class="s4">,</span>
      <span class="s1">rawProps</span><span class="s4">,</span>
      <span class="s3">&quot;maximumFontSize&quot;</span><span class="s4">,</span>
      <span class="s1">sourceParagraphAttributes.maximumFontSize</span><span class="s4">,</span>
      <span class="s1">defaultParagraphAttributes.maximumFontSize)</span><span class="s4">;</span>
  <span class="s1">paragraphAttributes.includeFontPadding = convertRawProp(</span>
      <span class="s1">context</span><span class="s4">,</span>
      <span class="s1">rawProps</span><span class="s4">,</span>
      <span class="s3">&quot;includeFontPadding&quot;</span><span class="s4">,</span>
      <span class="s1">sourceParagraphAttributes.includeFontPadding</span><span class="s4">,</span>
      <span class="s1">defaultParagraphAttributes.includeFontPadding)</span><span class="s4">;</span>
  <span class="s1">paragraphAttributes.android_hyphenationFrequency = convertRawProp(</span>
      <span class="s1">context</span><span class="s4">,</span>
      <span class="s1">rawProps</span><span class="s4">,</span>
      <span class="s3">&quot;android_hyphenationFrequency&quot;</span><span class="s4">,</span>
      <span class="s1">sourceParagraphAttributes.android_hyphenationFrequency</span><span class="s4">,</span>
      <span class="s1">defaultParagraphAttributes.android_hyphenationFrequency)</span><span class="s4">;</span>

  <span class="s4">return </span><span class="s1">paragraphAttributes</span><span class="s4">;</span>
<span class="s1">}</span>

<span class="s4">inline void </span><span class="s1">fromRawValue(</span>
    <span class="s4">const </span><span class="s1">PropsParserContext &amp;context</span><span class="s4">,</span>
    <span class="s1">RawValue </span><span class="s4">const </span><span class="s1">&amp;value</span><span class="s4">,</span>
    <span class="s1">AttributedString::Range &amp;result) {</span>
  <span class="s4">auto </span><span class="s1">map = (butter::map&lt;std::string</span><span class="s4">, int</span><span class="s1">&gt;)value</span><span class="s4">;</span>

  <span class="s4">auto </span><span class="s1">start = map.find(</span><span class="s3">&quot;start&quot;</span><span class="s1">)</span><span class="s4">;</span>
  <span class="s4">if </span><span class="s1">(start != map.end()) {</span>
    <span class="s1">result.location = start-&gt;second</span><span class="s4">;</span>
  <span class="s1">}</span>
  <span class="s4">auto </span><span class="s1">end = map.find(</span><span class="s3">&quot;end&quot;</span><span class="s1">)</span><span class="s4">;</span>
  <span class="s4">if </span><span class="s1">(end != map.end()) {</span>
    <span class="s1">result.length = start-&gt;second - result.location</span><span class="s4">;</span>
  <span class="s1">}</span>
<span class="s1">}</span>

<span class="s4">inline </span><span class="s1">std::string toString(AttributedString::Range </span><span class="s4">const </span><span class="s1">&amp;range) {</span>
  <span class="s4">return </span><span class="s3">&quot;{location: &quot; </span><span class="s1">+ folly::to&lt;std::string&gt;(range.location) +</span>
      <span class="s3">&quot;, length: &quot; </span><span class="s1">+ folly::to&lt;std::string&gt;(range.length) + </span><span class="s3">&quot;}&quot;</span><span class="s4">;</span>
<span class="s1">}</span>

<span class="s2">#ifdef </span><span class="s1">ANDROID</span>

<span class="s4">inline </span><span class="s1">folly::dynamic toDynamic(</span>
    <span class="s4">const </span><span class="s1">ParagraphAttributes &amp;paragraphAttributes) {</span>
  <span class="s4">auto </span><span class="s1">values = folly::dynamic::object()</span><span class="s4">;</span>
  <span class="s1">values(</span><span class="s3">&quot;maximumNumberOfLines&quot;</span><span class="s4">, </span><span class="s1">paragraphAttributes.maximumNumberOfLines)</span><span class="s4">;</span>
  <span class="s1">values(</span><span class="s3">&quot;ellipsizeMode&quot;</span><span class="s4">, </span><span class="s1">toString(paragraphAttributes.ellipsizeMode))</span><span class="s4">;</span>
  <span class="s1">values(</span><span class="s3">&quot;textBreakStrategy&quot;</span><span class="s4">, </span><span class="s1">toString(paragraphAttributes.textBreakStrategy))</span><span class="s4">;</span>
  <span class="s1">values(</span><span class="s3">&quot;adjustsFontSizeToFit&quot;</span><span class="s4">, </span><span class="s1">paragraphAttributes.adjustsFontSizeToFit)</span><span class="s4">;</span>
  <span class="s1">values(</span><span class="s3">&quot;includeFontPadding&quot;</span><span class="s4">, </span><span class="s1">paragraphAttributes.includeFontPadding)</span><span class="s4">;</span>
  <span class="s1">values(</span>
      <span class="s3">&quot;android_hyphenationFrequency&quot;</span><span class="s4">,</span>
      <span class="s1">toString(paragraphAttributes.android_hyphenationFrequency))</span><span class="s4">;</span>

  <span class="s4">return </span><span class="s1">values</span><span class="s4">;</span>
<span class="s1">}</span>

<span class="s4">inline </span><span class="s1">folly::dynamic toDynamic(</span><span class="s4">const </span><span class="s1">FontVariant &amp;fontVariant) {</span>
  <span class="s4">auto </span><span class="s1">result = folly::dynamic::array()</span><span class="s4">;</span>
  <span class="s4">if </span><span class="s1">((</span><span class="s4">int</span><span class="s1">)fontVariant &amp; (</span><span class="s4">int</span><span class="s1">)FontVariant::SmallCaps) {</span>
    <span class="s1">result.push_back(</span><span class="s3">&quot;small-caps&quot;</span><span class="s1">)</span><span class="s4">;</span>
  <span class="s1">}</span>
  <span class="s4">if </span><span class="s1">((</span><span class="s4">int</span><span class="s1">)fontVariant &amp; (</span><span class="s4">int</span><span class="s1">)FontVariant::OldstyleNums) {</span>
    <span class="s1">result.push_back(</span><span class="s3">&quot;oldstyle-nums&quot;</span><span class="s1">)</span><span class="s4">;</span>
  <span class="s1">}</span>
  <span class="s4">if </span><span class="s1">((</span><span class="s4">int</span><span class="s1">)fontVariant &amp; (</span><span class="s4">int</span><span class="s1">)FontVariant::LiningNums) {</span>
    <span class="s1">result.push_back(</span><span class="s3">&quot;lining-nums&quot;</span><span class="s1">)</span><span class="s4">;</span>
  <span class="s1">}</span>
  <span class="s4">if </span><span class="s1">((</span><span class="s4">int</span><span class="s1">)fontVariant &amp; (</span><span class="s4">int</span><span class="s1">)FontVariant::TabularNums) {</span>
    <span class="s1">result.push_back(</span><span class="s3">&quot;tabular-nums&quot;</span><span class="s1">)</span><span class="s4">;</span>
  <span class="s1">}</span>
  <span class="s4">if </span><span class="s1">((</span><span class="s4">int</span><span class="s1">)fontVariant &amp; (</span><span class="s4">int</span><span class="s1">)FontVariant::ProportionalNums) {</span>
    <span class="s1">result.push_back(</span><span class="s3">&quot;proportional-nums&quot;</span><span class="s1">)</span><span class="s4">;</span>
  <span class="s1">}</span>

  <span class="s4">return </span><span class="s1">result</span><span class="s4">;</span>
<span class="s1">}</span>

<span class="s4">inline </span><span class="s1">folly::dynamic toDynamic(</span><span class="s4">const </span><span class="s1">TextAttributes &amp;textAttributes) {</span>
  <span class="s4">auto </span><span class="s1">_textAttributes = folly::dynamic::object()</span><span class="s4">;</span>
  <span class="s4">if </span><span class="s1">(textAttributes.foregroundColor) {</span>
    <span class="s1">_textAttributes(</span>
        <span class="s3">&quot;foregroundColor&quot;</span><span class="s4">, </span><span class="s1">toAndroidRepr(textAttributes.foregroundColor))</span><span class="s4">;</span>
  <span class="s1">}</span>
  <span class="s4">if </span><span class="s1">(textAttributes.backgroundColor) {</span>
    <span class="s1">_textAttributes(</span>
        <span class="s3">&quot;backgroundColor&quot;</span><span class="s4">, </span><span class="s1">toAndroidRepr(textAttributes.backgroundColor))</span><span class="s4">;</span>
  <span class="s1">}</span>
  <span class="s4">if </span><span class="s1">(!std::isnan(textAttributes.opacity)) {</span>
    <span class="s1">_textAttributes(</span><span class="s3">&quot;opacity&quot;</span><span class="s4">, </span><span class="s1">textAttributes.opacity)</span><span class="s4">;</span>
  <span class="s1">}</span>
  <span class="s4">if </span><span class="s1">(!textAttributes.fontFamily.empty()) {</span>
    <span class="s1">_textAttributes(</span><span class="s3">&quot;fontFamily&quot;</span><span class="s4">, </span><span class="s1">textAttributes.fontFamily)</span><span class="s4">;</span>
  <span class="s1">}</span>
  <span class="s4">if </span><span class="s1">(!std::isnan(textAttributes.fontSize)) {</span>
    <span class="s1">_textAttributes(</span><span class="s3">&quot;fontSize&quot;</span><span class="s4">, </span><span class="s1">textAttributes.fontSize)</span><span class="s4">;</span>
  <span class="s1">}</span>
  <span class="s4">if </span><span class="s1">(!std::isnan(textAttributes.fontSizeMultiplier)) {</span>
    <span class="s1">_textAttributes(</span><span class="s3">&quot;fontSizeMultiplier&quot;</span><span class="s4">, </span><span class="s1">textAttributes.fontSizeMultiplier)</span><span class="s4">;</span>
  <span class="s1">}</span>
  <span class="s4">if </span><span class="s1">(textAttributes.fontWeight.has_value()) {</span>
    <span class="s1">_textAttributes(</span><span class="s3">&quot;fontWeight&quot;</span><span class="s4">, </span><span class="s1">toString(*textAttributes.fontWeight))</span><span class="s4">;</span>
  <span class="s1">}</span>
  <span class="s4">if </span><span class="s1">(textAttributes.fontStyle.has_value()) {</span>
    <span class="s1">_textAttributes(</span><span class="s3">&quot;fontStyle&quot;</span><span class="s4">, </span><span class="s1">toString(*textAttributes.fontStyle))</span><span class="s4">;</span>
  <span class="s1">}</span>
  <span class="s4">if </span><span class="s1">(textAttributes.fontVariant.has_value()) {</span>
    <span class="s1">_textAttributes(</span><span class="s3">&quot;fontVariant&quot;</span><span class="s4">, </span><span class="s1">toDynamic(*textAttributes.fontVariant))</span><span class="s4">;</span>
  <span class="s1">}</span>
  <span class="s4">if </span><span class="s1">(textAttributes.allowFontScaling.has_value()) {</span>
    <span class="s1">_textAttributes(</span><span class="s3">&quot;allowFontScaling&quot;</span><span class="s4">, </span><span class="s1">*textAttributes.allowFontScaling)</span><span class="s4">;</span>
  <span class="s1">}</span>
  <span class="s4">if </span><span class="s1">(!std::isnan(textAttributes.letterSpacing)) {</span>
    <span class="s1">_textAttributes(</span><span class="s3">&quot;letterSpacing&quot;</span><span class="s4">, </span><span class="s1">textAttributes.letterSpacing)</span><span class="s4">;</span>
  <span class="s1">}</span>
  <span class="s4">if </span><span class="s1">(textAttributes.textTransform.has_value()) {</span>
    <span class="s1">_textAttributes(</span><span class="s3">&quot;textTransform&quot;</span><span class="s4">, </span><span class="s1">toString(*textAttributes.textTransform))</span><span class="s4">;</span>
  <span class="s1">}</span>
  <span class="s4">if </span><span class="s1">(!std::isnan(textAttributes.lineHeight)) {</span>
    <span class="s1">_textAttributes(</span><span class="s3">&quot;lineHeight&quot;</span><span class="s4">, </span><span class="s1">textAttributes.lineHeight)</span><span class="s4">;</span>
  <span class="s1">}</span>
  <span class="s4">if </span><span class="s1">(textAttributes.alignment.has_value()) {</span>
    <span class="s1">_textAttributes(</span><span class="s3">&quot;alignment&quot;</span><span class="s4">, </span><span class="s1">toString(*textAttributes.alignment))</span><span class="s4">;</span>
  <span class="s1">}</span>
  <span class="s4">if </span><span class="s1">(textAttributes.baseWritingDirection.has_value()) {</span>
    <span class="s1">_textAttributes(</span>
        <span class="s3">&quot;baseWritingDirection&quot;</span><span class="s4">, </span><span class="s1">toString(*textAttributes.baseWritingDirection))</span><span class="s4">;</span>
  <span class="s1">}</span>
  <span class="s4">if </span><span class="s1">(textAttributes.lineBreakStrategy.has_value()) {</span>
    <span class="s1">_textAttributes(</span>
        <span class="s3">&quot;lineBreakStrategyIOS&quot;</span><span class="s4">, </span><span class="s1">toString(*textAttributes.lineBreakStrategy))</span><span class="s4">;</span>
  <span class="s1">}</span>
  <span class="s0">// Decoration</span>
  <span class="s4">if </span><span class="s1">(textAttributes.textDecorationColor) {</span>
    <span class="s1">_textAttributes(</span>
        <span class="s3">&quot;textDecorationColor&quot;</span><span class="s4">,</span>
        <span class="s1">toAndroidRepr(textAttributes.textDecorationColor))</span><span class="s4">;</span>
  <span class="s1">}</span>
  <span class="s4">if </span><span class="s1">(textAttributes.textDecorationLineType.has_value()) {</span>
    <span class="s1">_textAttributes(</span>
        <span class="s3">&quot;textDecorationLine&quot;</span><span class="s4">, </span><span class="s1">toString(*textAttributes.textDecorationLineType))</span><span class="s4">;</span>
  <span class="s1">}</span>
  <span class="s4">if </span><span class="s1">(textAttributes.textDecorationStyle.has_value()) {</span>
    <span class="s1">_textAttributes(</span>
        <span class="s3">&quot;textDecorationStyle&quot;</span><span class="s4">, </span><span class="s1">toString(*textAttributes.textDecorationStyle))</span><span class="s4">;</span>
  <span class="s1">}</span>
  <span class="s0">// Shadow</span>
  <span class="s0">// textShadowOffset = textAttributes.textShadowOffset.has_value() ?</span>
  <span class="s0">// textAttributes.textShadowOffset.value() : textShadowOffset;</span>
  <span class="s4">if </span><span class="s1">(!std::isnan(textAttributes.textShadowRadius)) {</span>
    <span class="s1">_textAttributes(</span><span class="s3">&quot;textShadowRadius&quot;</span><span class="s4">, </span><span class="s1">textAttributes.textShadowRadius)</span><span class="s4">;</span>
  <span class="s1">}</span>
  <span class="s4">if </span><span class="s1">(textAttributes.textShadowColor) {</span>
    <span class="s1">_textAttributes(</span>
        <span class="s3">&quot;textShadowColor&quot;</span><span class="s4">, </span><span class="s1">toAndroidRepr(textAttributes.textShadowColor))</span><span class="s4">;</span>
  <span class="s1">}</span>
  <span class="s0">// Special</span>
  <span class="s4">if </span><span class="s1">(textAttributes.isHighlighted.has_value()) {</span>
    <span class="s1">_textAttributes(</span><span class="s3">&quot;isHighlighted&quot;</span><span class="s4">, </span><span class="s1">*textAttributes.isHighlighted)</span><span class="s4">;</span>
  <span class="s1">}</span>
  <span class="s4">if </span><span class="s1">(textAttributes.layoutDirection.has_value()) {</span>
    <span class="s1">_textAttributes(</span>
        <span class="s3">&quot;layoutDirection&quot;</span><span class="s4">, </span><span class="s1">toString(*textAttributes.layoutDirection))</span><span class="s4">;</span>
  <span class="s1">}</span>
  <span class="s4">if </span><span class="s1">(textAttributes.accessibilityRole.has_value()) {</span>
    <span class="s1">_textAttributes(</span>
        <span class="s3">&quot;accessibilityRole&quot;</span><span class="s4">, </span><span class="s1">toString(*textAttributes.accessibilityRole))</span><span class="s4">;</span>
  <span class="s1">}</span>
  <span class="s4">return </span><span class="s1">_textAttributes</span><span class="s4">;</span>
<span class="s1">}</span>

<span class="s4">inline </span><span class="s1">folly::dynamic toDynamic(</span><span class="s4">const </span><span class="s1">AttributedString &amp;attributedString) {</span>
  <span class="s4">auto </span><span class="s1">value = folly::dynamic::object()</span><span class="s4">;</span>
  <span class="s4">auto </span><span class="s1">fragments = folly::dynamic::array()</span><span class="s4">;</span>
  <span class="s4">for </span><span class="s1">(</span><span class="s4">auto </span><span class="s1">fragment : attributedString.getFragments()) {</span>
    <span class="s1">folly::dynamic dynamicFragment = folly::dynamic::object()</span><span class="s4">;</span>
    <span class="s1">dynamicFragment[</span><span class="s3">&quot;string&quot;</span><span class="s1">] = fragment.string</span><span class="s4">;</span>
    <span class="s4">if </span><span class="s1">(fragment.parentShadowView.componentHandle) {</span>
      <span class="s1">dynamicFragment[</span><span class="s3">&quot;reactTag&quot;</span><span class="s1">] = fragment.parentShadowView.tag</span><span class="s4">;</span>
    <span class="s1">}</span>
    <span class="s4">if </span><span class="s1">(fragment.isAttachment()) {</span>
      <span class="s1">dynamicFragment[</span><span class="s3">&quot;isAttachment&quot;</span><span class="s1">] = </span><span class="s4">true;</span>
      <span class="s1">dynamicFragment[</span><span class="s3">&quot;width&quot;</span><span class="s1">] =</span>
          <span class="s1">fragment.parentShadowView.layoutMetrics.frame.size.width</span><span class="s4">;</span>
      <span class="s1">dynamicFragment[</span><span class="s3">&quot;height&quot;</span><span class="s1">] =</span>
          <span class="s1">fragment.parentShadowView.layoutMetrics.frame.size.height</span><span class="s4">;</span>
    <span class="s1">}</span>
    <span class="s1">dynamicFragment[</span><span class="s3">&quot;textAttributes&quot;</span><span class="s1">] = toDynamic(fragment.textAttributes)</span><span class="s4">;</span>
    <span class="s1">fragments.push_back(dynamicFragment)</span><span class="s4">;</span>
  <span class="s1">}</span>
  <span class="s1">value(</span><span class="s3">&quot;fragments&quot;</span><span class="s4">, </span><span class="s1">fragments)</span><span class="s4">;</span>
  <span class="s1">value(</span>
      <span class="s3">&quot;hash&quot;</span><span class="s4">, </span><span class="s1">std::hash&lt;facebook::react::AttributedString&gt;{}(attributedString))</span><span class="s4">;</span>
  <span class="s1">value(</span><span class="s3">&quot;string&quot;</span><span class="s4">, </span><span class="s1">attributedString.getString())</span><span class="s4">;</span>
  <span class="s4">return </span><span class="s1">value</span><span class="s4">;</span>
<span class="s1">}</span>

<span class="s4">inline </span><span class="s1">folly::dynamic toDynamic(AttributedString::Range </span><span class="s4">const </span><span class="s1">&amp;range) {</span>
  <span class="s1">folly::dynamic dynamicValue = folly::dynamic::object()</span><span class="s4">;</span>
  <span class="s1">dynamicValue[</span><span class="s3">&quot;location&quot;</span><span class="s1">] = range.location</span><span class="s4">;</span>
  <span class="s1">dynamicValue[</span><span class="s3">&quot;length&quot;</span><span class="s1">] = range.length</span><span class="s4">;</span>
  <span class="s4">return </span><span class="s1">dynamicValue</span><span class="s4">;</span>
<span class="s1">}</span>

<span class="s0">// constants for AttributedString serialization</span>
<span class="s4">constexpr static </span><span class="s1">MapBuffer::Key AS_KEY_HASH = </span><span class="s5">0</span><span class="s4">;</span>
<span class="s4">constexpr static </span><span class="s1">MapBuffer::Key AS_KEY_STRING = </span><span class="s5">1</span><span class="s4">;</span>
<span class="s4">constexpr static </span><span class="s1">MapBuffer::Key AS_KEY_FRAGMENTS = </span><span class="s5">2</span><span class="s4">;</span>
<span class="s4">constexpr static </span><span class="s1">MapBuffer::Key AS_KEY_CACHE_ID = </span><span class="s5">3</span><span class="s4">;</span>

<span class="s0">// constants for Fragment serialization</span>
<span class="s4">constexpr static </span><span class="s1">MapBuffer::Key FR_KEY_STRING = </span><span class="s5">0</span><span class="s4">;</span>
<span class="s4">constexpr static </span><span class="s1">MapBuffer::Key FR_KEY_REACT_TAG = </span><span class="s5">1</span><span class="s4">;</span>
<span class="s4">constexpr static </span><span class="s1">MapBuffer::Key FR_KEY_IS_ATTACHMENT = </span><span class="s5">2</span><span class="s4">;</span>
<span class="s4">constexpr static </span><span class="s1">MapBuffer::Key FR_KEY_WIDTH = </span><span class="s5">3</span><span class="s4">;</span>
<span class="s4">constexpr static </span><span class="s1">MapBuffer::Key FR_KEY_HEIGHT = </span><span class="s5">4</span><span class="s4">;</span>
<span class="s4">constexpr static </span><span class="s1">MapBuffer::Key FR_KEY_TEXT_ATTRIBUTES = </span><span class="s5">5</span><span class="s4">;</span>

<span class="s0">// constants for Text Attributes serialization</span>
<span class="s4">constexpr static </span><span class="s1">MapBuffer::Key TA_KEY_FOREGROUND_COLOR = </span><span class="s5">0</span><span class="s4">;</span>
<span class="s4">constexpr static </span><span class="s1">MapBuffer::Key TA_KEY_BACKGROUND_COLOR = </span><span class="s5">1</span><span class="s4">;</span>
<span class="s4">constexpr static </span><span class="s1">MapBuffer::Key TA_KEY_OPACITY = </span><span class="s5">2</span><span class="s4">;</span>
<span class="s4">constexpr static </span><span class="s1">MapBuffer::Key TA_KEY_FONT_FAMILY = </span><span class="s5">3</span><span class="s4">;</span>
<span class="s4">constexpr static </span><span class="s1">MapBuffer::Key TA_KEY_FONT_SIZE = </span><span class="s5">4</span><span class="s4">;</span>
<span class="s4">constexpr static </span><span class="s1">MapBuffer::Key TA_KEY_FONT_SIZE_MULTIPLIER = </span><span class="s5">5</span><span class="s4">;</span>
<span class="s4">constexpr static </span><span class="s1">MapBuffer::Key TA_KEY_FONT_WEIGHT = </span><span class="s5">6</span><span class="s4">;</span>
<span class="s4">constexpr static </span><span class="s1">MapBuffer::Key TA_KEY_FONT_STYLE = </span><span class="s5">7</span><span class="s4">;</span>
<span class="s4">constexpr static </span><span class="s1">MapBuffer::Key TA_KEY_FONT_VARIANT = </span><span class="s5">8</span><span class="s4">;</span>
<span class="s4">constexpr static </span><span class="s1">MapBuffer::Key TA_KEY_ALLOW_FONT_SCALING = </span><span class="s5">9</span><span class="s4">;</span>
<span class="s4">constexpr static </span><span class="s1">MapBuffer::Key TA_KEY_LETTER_SPACING = </span><span class="s5">10</span><span class="s4">;</span>
<span class="s4">constexpr static </span><span class="s1">MapBuffer::Key TA_KEY_LINE_HEIGHT = </span><span class="s5">11</span><span class="s4">;</span>
<span class="s4">constexpr static </span><span class="s1">MapBuffer::Key TA_KEY_ALIGNMENT = </span><span class="s5">12</span><span class="s4">;</span>
<span class="s4">constexpr static </span><span class="s1">MapBuffer::Key TA_KEY_BEST_WRITING_DIRECTION = </span><span class="s5">13</span><span class="s4">;</span>
<span class="s4">constexpr static </span><span class="s1">MapBuffer::Key TA_KEY_TEXT_DECORATION_COLOR = </span><span class="s5">14</span><span class="s4">;</span>
<span class="s4">constexpr static </span><span class="s1">MapBuffer::Key TA_KEY_TEXT_DECORATION_LINE = </span><span class="s5">15</span><span class="s4">;</span>
<span class="s4">constexpr static </span><span class="s1">MapBuffer::Key TA_KEY_TEXT_DECORATION_STYLE = </span><span class="s5">16</span><span class="s4">;</span>
<span class="s4">constexpr static </span><span class="s1">MapBuffer::Key TA_KEY_TEXT_SHADOW_RADIUS = </span><span class="s5">18</span><span class="s4">;</span>
<span class="s4">constexpr static </span><span class="s1">MapBuffer::Key TA_KEY_TEXT_SHADOW_COLOR = </span><span class="s5">19</span><span class="s4">;</span>
<span class="s4">constexpr static </span><span class="s1">MapBuffer::Key TA_KEY_IS_HIGHLIGHTED = </span><span class="s5">20</span><span class="s4">;</span>
<span class="s4">constexpr static </span><span class="s1">MapBuffer::Key TA_KEY_LAYOUT_DIRECTION = </span><span class="s5">21</span><span class="s4">;</span>
<span class="s4">constexpr static </span><span class="s1">MapBuffer::Key TA_KEY_ACCESSIBILITY_ROLE = </span><span class="s5">22</span><span class="s4">;</span>
<span class="s4">constexpr static </span><span class="s1">MapBuffer::Key TA_KEY_LINE_BREAK_STRATEGY = </span><span class="s5">23</span><span class="s4">;</span>

<span class="s0">// constants for ParagraphAttributes serialization</span>
<span class="s4">constexpr static </span><span class="s1">MapBuffer::Key PA_KEY_MAX_NUMBER_OF_LINES = </span><span class="s5">0</span><span class="s4">;</span>
<span class="s4">constexpr static </span><span class="s1">MapBuffer::Key PA_KEY_ELLIPSIZE_MODE = </span><span class="s5">1</span><span class="s4">;</span>
<span class="s4">constexpr static </span><span class="s1">MapBuffer::Key PA_KEY_TEXT_BREAK_STRATEGY = </span><span class="s5">2</span><span class="s4">;</span>
<span class="s4">constexpr static </span><span class="s1">MapBuffer::Key PA_KEY_ADJUST_FONT_SIZE_TO_FIT = </span><span class="s5">3</span><span class="s4">;</span>
<span class="s4">constexpr static </span><span class="s1">MapBuffer::Key PA_KEY_INCLUDE_FONT_PADDING = </span><span class="s5">4</span><span class="s4">;</span>
<span class="s4">constexpr static </span><span class="s1">MapBuffer::Key PA_KEY_HYPHENATION_FREQUENCY = </span><span class="s5">5</span><span class="s4">;</span>

<span class="s4">inline </span><span class="s1">MapBuffer toMapBuffer(</span><span class="s4">const </span><span class="s1">ParagraphAttributes &amp;paragraphAttributes) {</span>
  <span class="s4">auto </span><span class="s1">builder = MapBufferBuilder()</span><span class="s4">;</span>
  <span class="s1">builder.putInt(</span>
      <span class="s1">PA_KEY_MAX_NUMBER_OF_LINES</span><span class="s4">, </span><span class="s1">paragraphAttributes.maximumNumberOfLines)</span><span class="s4">;</span>
  <span class="s1">builder.putString(</span>
      <span class="s1">PA_KEY_ELLIPSIZE_MODE</span><span class="s4">, </span><span class="s1">toString(paragraphAttributes.ellipsizeMode))</span><span class="s4">;</span>
  <span class="s1">builder.putString(</span>
      <span class="s1">PA_KEY_TEXT_BREAK_STRATEGY</span><span class="s4">,</span>
      <span class="s1">toString(paragraphAttributes.textBreakStrategy))</span><span class="s4">;</span>
  <span class="s1">builder.putBool(</span>
      <span class="s1">PA_KEY_ADJUST_FONT_SIZE_TO_FIT</span><span class="s4">, </span><span class="s1">paragraphAttributes.adjustsFontSizeToFit)</span><span class="s4">;</span>
  <span class="s1">builder.putBool(</span>
      <span class="s1">PA_KEY_INCLUDE_FONT_PADDING</span><span class="s4">, </span><span class="s1">paragraphAttributes.includeFontPadding)</span><span class="s4">;</span>
  <span class="s1">builder.putString(</span>
      <span class="s1">PA_KEY_HYPHENATION_FREQUENCY</span><span class="s4">,</span>
      <span class="s1">toString(paragraphAttributes.android_hyphenationFrequency))</span><span class="s4">;</span>

  <span class="s4">return </span><span class="s1">builder.build()</span><span class="s4">;</span>
<span class="s1">}</span>

<span class="s4">inline </span><span class="s1">MapBuffer toMapBuffer(</span><span class="s4">const </span><span class="s1">FontVariant &amp;fontVariant) {</span>
  <span class="s4">auto </span><span class="s1">builder = MapBufferBuilder()</span><span class="s4">;</span>
  <span class="s4">int </span><span class="s1">index = </span><span class="s5">0</span><span class="s4">;</span>
  <span class="s4">if </span><span class="s1">((</span><span class="s4">int</span><span class="s1">)fontVariant &amp; (</span><span class="s4">int</span><span class="s1">)FontVariant::SmallCaps) {</span>
    <span class="s1">builder.putString(index++</span><span class="s4">, </span><span class="s3">&quot;small-caps&quot;</span><span class="s1">)</span><span class="s4">;</span>
  <span class="s1">}</span>
  <span class="s4">if </span><span class="s1">((</span><span class="s4">int</span><span class="s1">)fontVariant &amp; (</span><span class="s4">int</span><span class="s1">)FontVariant::OldstyleNums) {</span>
    <span class="s1">builder.putString(index++</span><span class="s4">, </span><span class="s3">&quot;oldstyle-nums&quot;</span><span class="s1">)</span><span class="s4">;</span>
  <span class="s1">}</span>
  <span class="s4">if </span><span class="s1">((</span><span class="s4">int</span><span class="s1">)fontVariant &amp; (</span><span class="s4">int</span><span class="s1">)FontVariant::LiningNums) {</span>
    <span class="s1">builder.putString(index++</span><span class="s4">, </span><span class="s3">&quot;lining-nums&quot;</span><span class="s1">)</span><span class="s4">;</span>
  <span class="s1">}</span>
  <span class="s4">if </span><span class="s1">((</span><span class="s4">int</span><span class="s1">)fontVariant &amp; (</span><span class="s4">int</span><span class="s1">)FontVariant::TabularNums) {</span>
    <span class="s1">builder.putString(index++</span><span class="s4">, </span><span class="s3">&quot;tabular-nums&quot;</span><span class="s1">)</span><span class="s4">;</span>
  <span class="s1">}</span>
  <span class="s4">if </span><span class="s1">((</span><span class="s4">int</span><span class="s1">)fontVariant &amp; (</span><span class="s4">int</span><span class="s1">)FontVariant::ProportionalNums) {</span>
    <span class="s1">builder.putString(index++</span><span class="s4">, </span><span class="s3">&quot;proportional-nums&quot;</span><span class="s1">)</span><span class="s4">;</span>
  <span class="s1">}</span>

  <span class="s4">return </span><span class="s1">builder.build()</span><span class="s4">;</span>
<span class="s1">}</span>

<span class="s4">inline </span><span class="s1">MapBuffer toMapBuffer(</span><span class="s4">const </span><span class="s1">TextAttributes &amp;textAttributes) {</span>
  <span class="s4">auto </span><span class="s1">builder = MapBufferBuilder()</span><span class="s4">;</span>
  <span class="s4">if </span><span class="s1">(textAttributes.foregroundColor) {</span>
    <span class="s1">builder.putInt(</span>
        <span class="s1">TA_KEY_FOREGROUND_COLOR</span><span class="s4">, </span><span class="s1">toAndroidRepr(textAttributes.foregroundColor))</span><span class="s4">;</span>
  <span class="s1">}</span>
  <span class="s4">if </span><span class="s1">(textAttributes.backgroundColor) {</span>
    <span class="s1">builder.putInt(</span>
        <span class="s1">TA_KEY_BACKGROUND_COLOR</span><span class="s4">, </span><span class="s1">toAndroidRepr(textAttributes.backgroundColor))</span><span class="s4">;</span>
  <span class="s1">}</span>
  <span class="s4">if </span><span class="s1">(!std::isnan(textAttributes.opacity)) {</span>
    <span class="s1">builder.putDouble(TA_KEY_OPACITY</span><span class="s4">, </span><span class="s1">textAttributes.opacity)</span><span class="s4">;</span>
  <span class="s1">}</span>
  <span class="s4">if </span><span class="s1">(!textAttributes.fontFamily.empty()) {</span>
    <span class="s1">builder.putString(TA_KEY_FONT_FAMILY</span><span class="s4">, </span><span class="s1">textAttributes.fontFamily)</span><span class="s4">;</span>
  <span class="s1">}</span>
  <span class="s4">if </span><span class="s1">(!std::isnan(textAttributes.fontSize)) {</span>
    <span class="s1">builder.putDouble(TA_KEY_FONT_SIZE</span><span class="s4">, </span><span class="s1">textAttributes.fontSize)</span><span class="s4">;</span>
  <span class="s1">}</span>
  <span class="s4">if </span><span class="s1">(!std::isnan(textAttributes.fontSizeMultiplier)) {</span>
    <span class="s1">builder.putDouble(</span>
        <span class="s1">TA_KEY_FONT_SIZE_MULTIPLIER</span><span class="s4">, </span><span class="s1">textAttributes.fontSizeMultiplier)</span><span class="s4">;</span>
  <span class="s1">}</span>
  <span class="s4">if </span><span class="s1">(textAttributes.fontWeight.has_value()) {</span>
    <span class="s1">builder.putString(TA_KEY_FONT_WEIGHT</span><span class="s4">, </span><span class="s1">toString(*textAttributes.fontWeight))</span><span class="s4">;</span>
  <span class="s1">}</span>
  <span class="s4">if </span><span class="s1">(textAttributes.fontStyle.has_value()) {</span>
    <span class="s1">builder.putString(TA_KEY_FONT_STYLE</span><span class="s4">, </span><span class="s1">toString(*textAttributes.fontStyle))</span><span class="s4">;</span>
  <span class="s1">}</span>
  <span class="s4">if </span><span class="s1">(textAttributes.fontVariant.has_value()) {</span>
    <span class="s4">auto </span><span class="s1">fontVariantMap = toMapBuffer(*textAttributes.fontVariant)</span><span class="s4">;</span>
    <span class="s1">builder.putMapBuffer(TA_KEY_FONT_VARIANT</span><span class="s4">, </span><span class="s1">fontVariantMap)</span><span class="s4">;</span>
  <span class="s1">}</span>
  <span class="s4">if </span><span class="s1">(textAttributes.allowFontScaling.has_value()) {</span>
    <span class="s1">builder.putBool(</span>
        <span class="s1">TA_KEY_ALLOW_FONT_SCALING</span><span class="s4">, </span><span class="s1">*textAttributes.allowFontScaling)</span><span class="s4">;</span>
  <span class="s1">}</span>
  <span class="s4">if </span><span class="s1">(!std::isnan(textAttributes.letterSpacing)) {</span>
    <span class="s1">builder.putDouble(TA_KEY_LETTER_SPACING</span><span class="s4">, </span><span class="s1">textAttributes.letterSpacing)</span><span class="s4">;</span>
  <span class="s1">}</span>
  <span class="s4">if </span><span class="s1">(!std::isnan(textAttributes.lineHeight)) {</span>
    <span class="s1">builder.putDouble(TA_KEY_LINE_HEIGHT</span><span class="s4">, </span><span class="s1">textAttributes.lineHeight)</span><span class="s4">;</span>
  <span class="s1">}</span>
  <span class="s4">if </span><span class="s1">(textAttributes.alignment.has_value()) {</span>
    <span class="s1">builder.putString(TA_KEY_ALIGNMENT</span><span class="s4">, </span><span class="s1">toString(*textAttributes.alignment))</span><span class="s4">;</span>
  <span class="s1">}</span>
  <span class="s4">if </span><span class="s1">(textAttributes.baseWritingDirection.has_value()) {</span>
    <span class="s1">builder.putString(</span>
        <span class="s1">TA_KEY_BEST_WRITING_DIRECTION</span><span class="s4">,</span>
        <span class="s1">toString(*textAttributes.baseWritingDirection))</span><span class="s4">;</span>
  <span class="s1">}</span>
  <span class="s4">if </span><span class="s1">(textAttributes.lineBreakStrategy.has_value()) {</span>
    <span class="s1">builder.putString(</span>
        <span class="s1">TA_KEY_LINE_BREAK_STRATEGY</span><span class="s4">,</span>
        <span class="s1">toString(*textAttributes.lineBreakStrategy))</span><span class="s4">;</span>
  <span class="s1">}</span>
  <span class="s0">// Decoration</span>
  <span class="s4">if </span><span class="s1">(textAttributes.textDecorationColor) {</span>
    <span class="s1">builder.putInt(</span>
        <span class="s1">TA_KEY_TEXT_DECORATION_COLOR</span><span class="s4">,</span>
        <span class="s1">toAndroidRepr(textAttributes.textDecorationColor))</span><span class="s4">;</span>
  <span class="s1">}</span>
  <span class="s4">if </span><span class="s1">(textAttributes.textDecorationLineType.has_value()) {</span>
    <span class="s1">builder.putString(</span>
        <span class="s1">TA_KEY_TEXT_DECORATION_LINE</span><span class="s4">,</span>
        <span class="s1">toString(*textAttributes.textDecorationLineType))</span><span class="s4">;</span>
  <span class="s1">}</span>
  <span class="s4">if </span><span class="s1">(textAttributes.textDecorationStyle.has_value()) {</span>
    <span class="s1">builder.putString(</span>
        <span class="s1">TA_KEY_TEXT_DECORATION_STYLE</span><span class="s4">,</span>
        <span class="s1">toString(*textAttributes.textDecorationStyle))</span><span class="s4">;</span>
  <span class="s1">}</span>

  <span class="s0">// Shadow</span>
  <span class="s4">if </span><span class="s1">(!std::isnan(textAttributes.textShadowRadius)) {</span>
    <span class="s1">builder.putDouble(</span>
        <span class="s1">TA_KEY_TEXT_SHADOW_RADIUS</span><span class="s4">, </span><span class="s1">textAttributes.textShadowRadius)</span><span class="s4">;</span>
  <span class="s1">}</span>
  <span class="s4">if </span><span class="s1">(textAttributes.textShadowColor) {</span>
    <span class="s1">builder.putInt(</span>
        <span class="s1">TA_KEY_TEXT_SHADOW_COLOR</span><span class="s4">,</span>
        <span class="s1">toAndroidRepr(textAttributes.textShadowColor))</span><span class="s4">;</span>
  <span class="s1">}</span>
  <span class="s0">// Special</span>
  <span class="s4">if </span><span class="s1">(textAttributes.isHighlighted.has_value()) {</span>
    <span class="s1">builder.putBool(TA_KEY_IS_HIGHLIGHTED</span><span class="s4">, </span><span class="s1">*textAttributes.isHighlighted)</span><span class="s4">;</span>
  <span class="s1">}</span>
  <span class="s4">if </span><span class="s1">(textAttributes.layoutDirection.has_value()) {</span>
    <span class="s1">builder.putString(</span>
        <span class="s1">TA_KEY_LAYOUT_DIRECTION</span><span class="s4">, </span><span class="s1">toString(*textAttributes.layoutDirection))</span><span class="s4">;</span>
  <span class="s1">}</span>
  <span class="s4">if </span><span class="s1">(textAttributes.accessibilityRole.has_value()) {</span>
    <span class="s1">builder.putString(</span>
        <span class="s1">TA_KEY_ACCESSIBILITY_ROLE</span><span class="s4">, </span><span class="s1">toString(*textAttributes.accessibilityRole))</span><span class="s4">;</span>
  <span class="s1">}</span>
  <span class="s4">return </span><span class="s1">builder.build()</span><span class="s4">;</span>
<span class="s1">}</span>

<span class="s4">inline </span><span class="s1">MapBuffer toMapBuffer(</span><span class="s4">const </span><span class="s1">AttributedString &amp;attributedString) {</span>
  <span class="s4">auto </span><span class="s1">fragmentsBuilder = MapBufferBuilder()</span><span class="s4">;</span>

  <span class="s4">int </span><span class="s1">index = </span><span class="s5">0</span><span class="s4">;</span>
  <span class="s4">for </span><span class="s1">(</span><span class="s4">auto </span><span class="s1">fragment : attributedString.getFragments()) {</span>
    <span class="s4">auto </span><span class="s1">dynamicFragmentBuilder = MapBufferBuilder()</span><span class="s4">;</span>
    <span class="s1">dynamicFragmentBuilder.putString(FR_KEY_STRING</span><span class="s4">, </span><span class="s1">fragment.string)</span><span class="s4">;</span>
    <span class="s4">if </span><span class="s1">(fragment.parentShadowView.componentHandle) {</span>
      <span class="s1">dynamicFragmentBuilder.putInt(</span>
          <span class="s1">FR_KEY_REACT_TAG</span><span class="s4">, </span><span class="s1">fragment.parentShadowView.tag)</span><span class="s4">;</span>
    <span class="s1">}</span>
    <span class="s4">if </span><span class="s1">(fragment.isAttachment()) {</span>
      <span class="s1">dynamicFragmentBuilder.putBool(FR_KEY_IS_ATTACHMENT</span><span class="s4">, true</span><span class="s1">)</span><span class="s4">;</span>
      <span class="s1">dynamicFragmentBuilder.putDouble(</span>
          <span class="s1">FR_KEY_WIDTH</span><span class="s4">,</span>
          <span class="s1">fragment.parentShadowView.layoutMetrics.frame.size.width)</span><span class="s4">;</span>
      <span class="s1">dynamicFragmentBuilder.putDouble(</span>
          <span class="s1">FR_KEY_HEIGHT</span><span class="s4">,</span>
          <span class="s1">fragment.parentShadowView.layoutMetrics.frame.size.height)</span><span class="s4">;</span>
    <span class="s1">}</span>
    <span class="s4">auto </span><span class="s1">textAttributesMap = toMapBuffer(fragment.textAttributes)</span><span class="s4">;</span>
    <span class="s1">dynamicFragmentBuilder.putMapBuffer(</span>
        <span class="s1">FR_KEY_TEXT_ATTRIBUTES</span><span class="s4">, </span><span class="s1">textAttributesMap)</span><span class="s4">;</span>
    <span class="s4">auto </span><span class="s1">dynamicFragmentMap = dynamicFragmentBuilder.build()</span><span class="s4">;</span>
    <span class="s1">fragmentsBuilder.putMapBuffer(index++</span><span class="s4">, </span><span class="s1">dynamicFragmentMap)</span><span class="s4">;</span>
  <span class="s1">}</span>

  <span class="s4">auto </span><span class="s1">builder = MapBufferBuilder()</span><span class="s4">;</span>
  <span class="s1">builder.putInt(</span>
      <span class="s1">AS_KEY_HASH</span><span class="s4">,</span>
      <span class="s1">std::hash&lt;facebook::react::AttributedString&gt;{}(attributedString))</span><span class="s4">;</span>
  <span class="s1">builder.putString(AS_KEY_STRING</span><span class="s4">, </span><span class="s1">attributedString.getString())</span><span class="s4">;</span>
  <span class="s4">auto </span><span class="s1">fragmentsMap = fragmentsBuilder.build()</span><span class="s4">;</span>
  <span class="s1">builder.putMapBuffer(AS_KEY_FRAGMENTS</span><span class="s4">, </span><span class="s1">fragmentsMap)</span><span class="s4">;</span>
  <span class="s4">return </span><span class="s1">builder.build()</span><span class="s4">;</span>
<span class="s1">}</span>

<span class="s2">#endif</span>

<span class="s1">} </span><span class="s0">// namespace react</span>
<span class="s1">} </span><span class="s0">// namespace facebook</span>
</pre>
</body>
</html>