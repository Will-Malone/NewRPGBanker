<html>
<head>
<title>loadMetroConfig.js.map</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<style type="text/css">
.s0 { color: #a9b7c6;}
.s1 { color: #6a8759;}
.s2 { color: #6897bb; font-style: italic;}
.s3 { color: #cc7832; font-style: italic;}
</style>
</head>
<body bgcolor="#2b2b2b">
<table CELLSPACING=0 CELLPADDING=5 COLS=1 WIDTH="100%" BGCOLOR="#606060" >
<tr><td><center>
<font face="Arial, Helvetica" color="#000000">
loadMetroConfig.js.map</font>
</center></td></tr></table>
<pre><span class="s0">{</span><span class="s1">&quot;version&quot;</span><span class="s0">:</span><span class="s2">3</span><span class="s0">,</span><span class="s1">&quot;names&quot;</span><span class="s0">:[</span><span class="s1">&quot;getOverrideConfig&quot;</span><span class="s0">,</span><span class="s1">&quot;ctx&quot;</span><span class="s0">,</span><span class="s1">&quot;outOfTreePlatforms&quot;</span><span class="s0">,</span><span class="s1">&quot;Object&quot;</span><span class="s0">,</span><span class="s1">&quot;keys&quot;</span><span class="s0">,</span><span class="s1">&quot;platforms&quot;</span><span class="s0">,</span><span class="s1">&quot;filter&quot;</span><span class="s0">,</span><span class="s1">&quot;platform&quot;</span><span class="s0">,</span><span class="s1">&quot;npmPackageName&quot;</span><span class="s0">,</span><span class="s1">&quot;resolver&quot;</span><span class="s0">,</span><span class="s1">&quot;length&quot;</span><span class="s0">,</span><span class="s1">&quot;resolveRequest&quot;</span><span class="s0">,</span><span class="s1">&quot;reactNativePlatformResolver&quot;</span><span class="s0">,</span><span class="s1">&quot;reduce&quot;</span><span class="s0">,</span><span class="s1">&quot;result&quot;</span><span class="s0">,</span><span class="s1">&quot;serializer&quot;</span><span class="s0">,</span><span class="s1">&quot;getModulesRunBeforeMainModule&quot;</span><span class="s0">,</span><span class="s1">&quot;require&quot;</span><span class="s0">,</span><span class="s1">&quot;resolve&quot;</span><span class="s0">,</span><span class="s1">&quot;path&quot;</span><span class="s0">,</span><span class="s1">&quot;join&quot;</span><span class="s0">,</span><span class="s1">&quot;reactNativePath&quot;</span><span class="s0">,</span><span class="s1">&quot;map&quot;</span><span class="s0">,</span><span class="s1">&quot;loadMetroConfig&quot;</span><span class="s0">,</span><span class="s1">&quot;options&quot;</span><span class="s0">,</span><span class="s1">&quot;overrideConfig&quot;</span><span class="s0">,</span><span class="s1">&quot;reporter&quot;</span><span class="s0">,</span><span class="s1">&quot;projectConfig&quot;</span><span class="s0">,</span><span class="s1">&quot;resolveConfig&quot;</span><span class="s0">,</span><span class="s1">&quot;undefined&quot;</span><span class="s0">,</span><span class="s1">&quot;root&quot;</span><span class="s0">,</span><span class="s1">&quot;isEmpty&quot;</span><span class="s0">,</span><span class="s1">&quot;CLIError&quot;</span><span class="s0">,</span><span class="s1">&quot;logger&quot;</span><span class="s0">,</span><span class="s1">&quot;debug&quot;</span><span class="s0">,</span><span class="s1">&quot;filepath&quot;</span><span class="s0">,</span><span class="s1">&quot;global&quot;</span><span class="s0">,</span><span class="s1">&quot;__REACT_NATIVE_METRO_CONFIG_LOADED&quot;</span><span class="s0">,</span><span class="s1">&quot;test&quot;</span><span class="s0">,</span><span class="s1">&quot;fs&quot;</span><span class="s0">,</span><span class="s1">&quot;readFileSync&quot;</span><span class="s0">,</span><span class="s1">&quot;warn&quot;</span><span class="s0">,</span><span class="s1">&quot;loadedConfig&quot;</span><span class="s0">,</span><span class="s1">&quot;loadConfig&quot;</span><span class="s0">,</span><span class="s1">&quot;cwd&quot;</span><span class="s0">,</span><span class="s1">&quot;getDefaultMetroConfig&quot;</span><span class="s0">,</span><span class="s1">&quot;mergeConfig&quot;</span><span class="s0">],</span><span class="s1">&quot;sources&quot;</span><span class="s0">:[</span><span class="s1">&quot;../../src/tools/loadMetroConfig.ts&quot;</span><span class="s0">],</span><span class="s1">&quot;sourcesContent&quot;</span><span class="s0">:[</span><span class="s1">&quot;import fs from 'fs';</span><span class="s3">\n</span><span class="s1">import path from 'path';</span><span class="s3">\n</span><span class="s1">import {</span><span class="s3">\n  </span><span class="s1">ConfigT,</span><span class="s3">\n  </span><span class="s1">InputConfigT,</span><span class="s3">\n  </span><span class="s1">loadConfig,</span><span class="s3">\n  </span><span class="s1">mergeConfig,</span><span class="s3">\n  </span><span class="s1">resolveConfig,</span><span class="s3">\n  </span><span class="s1">ResolverConfigT,</span><span class="s3">\n</span><span class="s1">} from 'metro-config';</span><span class="s3">\n</span><span class="s1">import {CLIError, logger} from '@react-native-community/cli-tools';</span><span class="s3">\n</span><span class="s1">import type {Config} from '@react-native-community/cli-types';</span><span class="s3">\n</span><span class="s1">import getDefaultMetroConfig from './getDefaultMetroConfig';</span><span class="s3">\n</span><span class="s1">import {reactNativePlatformResolver} from './metroPlatformResolver';</span><span class="s3">\n\n</span><span class="s1">export type {Config};</span><span class="s3">\n\n</span><span class="s1">export type ConfigLoadingContext = Pick&lt;</span><span class="s3">\n  </span><span class="s1">Config,</span><span class="s3">\n  </span><span class="s1">'root' | 'reactNativePath' | 'platforms'</span><span class="s3">\n</span><span class="s1">&gt;;</span><span class="s3">\n\n</span><span class="s1">declare global {</span><span class="s3">\n  </span><span class="s1">var __REACT_NATIVE_METRO_CONFIG_LOADED: boolean;</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">/**</span><span class="s3">\n </span><span class="s1">* Get the config options to override based on RN CLI inputs.</span><span class="s3">\n </span><span class="s1">*/</span><span class="s3">\n</span><span class="s1">function getOverrideConfig(ctx: ConfigLoadingContext): InputConfigT {</span><span class="s3">\n  </span><span class="s1">const outOfTreePlatforms = Object.keys(ctx.platforms).filter(</span><span class="s3">\n    </span><span class="s1">(platform) =&gt; ctx.platforms[platform].npmPackageName,</span><span class="s3">\n  </span><span class="s1">);</span><span class="s3">\n  </span><span class="s1">const resolver: Partial&lt;ResolverConfigT&gt; = {</span><span class="s3">\n    </span><span class="s1">platforms: [...Object.keys(ctx.platforms), 'native'],</span><span class="s3">\n  </span><span class="s1">};</span><span class="s3">\n\n  </span><span class="s1">if (outOfTreePlatforms.length) {</span><span class="s3">\n    </span><span class="s1">resolver.resolveRequest = reactNativePlatformResolver(</span><span class="s3">\n      </span><span class="s1">outOfTreePlatforms.reduce&lt;{[platform: string]: string}&gt;(</span><span class="s3">\n        </span><span class="s1">(result, platform) =&gt; {</span><span class="s3">\n          </span><span class="s1">result[platform] = ctx.platforms[platform].npmPackageName!;</span><span class="s3">\n          </span><span class="s1">return result;</span><span class="s3">\n        </span><span class="s1">},</span><span class="s3">\n        </span><span class="s1">{},</span><span class="s3">\n      </span><span class="s1">),</span><span class="s3">\n    </span><span class="s1">);</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">return {</span><span class="s3">\n    </span><span class="s1">resolver,</span><span class="s3">\n    </span><span class="s1">serializer: {</span><span class="s3">\n      </span><span class="s1">// We can include multiple copies of InitializeCore here because metro will</span><span class="s3">\n      </span><span class="s1">// only add ones that are already part of the bundle</span><span class="s3">\n      </span><span class="s1">getModulesRunBeforeMainModule: () =&gt; [</span><span class="s3">\n        </span><span class="s1">require.resolve(</span><span class="s3">\n          </span><span class="s1">path.join(ctx.reactNativePath, 'Libraries/Core/InitializeCore'),</span><span class="s3">\n        </span><span class="s1">),</span><span class="s3">\n        </span><span class="s1">...outOfTreePlatforms.map((platform) =&gt;</span><span class="s3">\n          </span><span class="s1">require.resolve(</span><span class="s3">\n            </span><span class="s1">`${ctx.platforms[platform]</span><span class="s3">\n              </span><span class="s1">.npmPackageName!}/Libraries/Core/InitializeCore`,</span><span class="s3">\n          </span><span class="s1">),</span><span class="s3">\n        </span><span class="s1">),</span><span class="s3">\n      </span><span class="s1">],</span><span class="s3">\n    </span><span class="s1">},</span><span class="s3">\n  </span><span class="s1">};</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">export interface ConfigOptionsT {</span><span class="s3">\n  </span><span class="s1">maxWorkers?: number;</span><span class="s3">\n  </span><span class="s1">port?: number;</span><span class="s3">\n  </span><span class="s1">projectRoot?: string;</span><span class="s3">\n  </span><span class="s1">resetCache?: boolean;</span><span class="s3">\n  </span><span class="s1">watchFolders?: string[];</span><span class="s3">\n  </span><span class="s1">sourceExts?: string[];</span><span class="s3">\n  </span><span class="s1">reporter?: any;</span><span class="s3">\n  </span><span class="s1">config?: string;</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">/**</span><span class="s3">\n </span><span class="s1">* Load Metro config.</span><span class="s3">\n </span><span class="s1">*</span><span class="s3">\n </span><span class="s1">* Allows the CLI to override select values in `metro.config.js` based on</span><span class="s3">\n </span><span class="s1">* dynamic user options in `ctx`.</span><span class="s3">\n </span><span class="s1">*/</span><span class="s3">\n</span><span class="s1">export default async function loadMetroConfig(</span><span class="s3">\n  </span><span class="s1">ctx: ConfigLoadingContext,</span><span class="s3">\n  </span><span class="s1">options: ConfigOptionsT = {},</span><span class="s3">\n</span><span class="s1">): Promise&lt;ConfigT&gt; {</span><span class="s3">\n  </span><span class="s1">const overrideConfig = getOverrideConfig(ctx);</span><span class="s3">\n  </span><span class="s1">if (options.reporter) {</span><span class="s3">\n    </span><span class="s1">overrideConfig.reporter = options.reporter;</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">const projectConfig = await resolveConfig(undefined, ctx.root);</span><span class="s3">\n\n  </span><span class="s1">if (projectConfig.isEmpty) {</span><span class="s3">\n    </span><span class="s1">throw new CLIError(`No metro config found in ${ctx.root}`);</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">logger.debug(`Reading Metro config from ${projectConfig.filepath}`);</span><span class="s3">\n\n  </span><span class="s1">if (</span><span class="s3">\n    </span><span class="s1">!global.__REACT_NATIVE_METRO_CONFIG_LOADED &amp;&amp;</span><span class="s3">\n    </span><span class="s1">// TODO(huntie): Remove this check from 0.73 onwards (all users will be on</span><span class="s3">\n    </span><span class="s1">// the next major @react-native/metro-config version)</span><span class="s3">\n    </span><span class="s1">!/['</span><span class="s3">\&quot;</span><span class="s1">']@react-native</span><span class="s3">\\</span><span class="s1">/metro-config['</span><span class="s3">\&quot;</span><span class="s1">']/.test(</span><span class="s3">\n      </span><span class="s1">fs.readFileSync(projectConfig.filepath, 'utf8'),</span><span class="s3">\n    </span><span class="s1">)</span><span class="s3">\n  </span><span class="s1">) {</span><span class="s3">\n    </span><span class="s1">logger.warn(</span><span class="s3">\n      </span><span class="s1">'From React Native 0.72, your metro.config.js file should extend' +</span><span class="s3">\n        \&quot;</span><span class="s1">'@react-native/metro-config'. Please see the React Native 0.72 </span><span class="s3">\&quot; </span><span class="s1">+</span><span class="s3">\n        </span><span class="s1">'changelog, or copy the template at:</span><span class="s3">\\</span><span class="s1">n' +</span><span class="s3">\n        </span><span class="s1">'https://github.com/facebook/react-native/blob/main/packages/react-native/template/metro.config.js',</span><span class="s3">\n    </span><span class="s1">);</span><span class="s3">\n    </span><span class="s1">logger.warn('Falling back to internal defaults.');</span><span class="s3">\n\n    </span><span class="s1">const loadedConfig = await loadConfig(</span><span class="s3">\n      </span><span class="s1">{cwd: ctx.root, ...options},</span><span class="s3">\n      </span><span class="s1">// Provide React Native defaults on top of Metro defaults</span><span class="s3">\n      </span><span class="s1">getDefaultMetroConfig(ctx),</span><span class="s3">\n    </span><span class="s1">);</span><span class="s3">\n\n    </span><span class="s1">return mergeConfig(loadedConfig, overrideConfig);</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">return mergeConfig(</span><span class="s3">\n    </span><span class="s1">await loadConfig({cwd: ctx.root, ...options}),</span><span class="s3">\n    </span><span class="s1">overrideConfig,</span><span class="s3">\n  </span><span class="s1">);</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n</span><span class="s1">&quot;</span><span class="s0">],</span><span class="s1">&quot;mappings&quot;</span><span class="s0">:</span><span class="s1">&quot;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&quot;</span><span class="s0">}</span></pre>
</body>
</html>