<html>
<head>
<title>listAndroidUsers.js.map</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<style type="text/css">
.s0 { color: #a9b7c6;}
.s1 { color: #6a8759;}
.s2 { color: #6897bb; font-style: italic;}
.s3 { color: #cc7832; font-style: italic;}
</style>
</head>
<body bgcolor="#2b2b2b">
<table CELLSPACING=0 CELLPADDING=5 COLS=1 WIDTH="100%" BGCOLOR="#606060" >
<tr><td><center>
<font face="Arial, Helvetica" color="#000000">
listAndroidUsers.js.map</font>
</center></td></tr></table>
<pre><span class="s0">{</span><span class="s1">&quot;version&quot;</span><span class="s0">:</span><span class="s2">3</span><span class="s0">,</span><span class="s1">&quot;names&quot;</span><span class="s0">:[</span><span class="s1">&quot;checkUsers&quot;</span><span class="s0">,</span><span class="s1">&quot;device&quot;</span><span class="s0">,</span><span class="s1">&quot;adbPath&quot;</span><span class="s0">,</span><span class="s1">&quot;adbArgs&quot;</span><span class="s0">,</span><span class="s1">&quot;logger&quot;</span><span class="s0">,</span><span class="s1">&quot;debug&quot;</span><span class="s0">,</span><span class="s1">&quot;stdout&quot;</span><span class="s0">,</span><span class="s1">&quot;execa&quot;</span><span class="s0">,</span><span class="s1">&quot;sync&quot;</span><span class="s0">,</span><span class="s1">&quot;encoding&quot;</span><span class="s0">,</span><span class="s1">&quot;regex&quot;</span><span class="s0">,</span><span class="s1">&quot;RegExp&quot;</span><span class="s0">,</span><span class="s1">&quot;users&quot;</span><span class="s0">,</span><span class="s1">&quot;lines&quot;</span><span class="s0">,</span><span class="s1">&quot;split&quot;</span><span class="s0">,</span><span class="s1">&quot;line&quot;</span><span class="s0">,</span><span class="s1">&quot;res&quot;</span><span class="s0">,</span><span class="s1">&quot;exec&quot;</span><span class="s0">,</span><span class="s1">&quot;groups&quot;</span><span class="s0">,</span><span class="s1">&quot;push&quot;</span><span class="s0">,</span><span class="s1">&quot;id&quot;</span><span class="s0">,</span><span class="s1">&quot;userId&quot;</span><span class="s0">,</span><span class="s1">&quot;name&quot;</span><span class="s0">,</span><span class="s1">&quot;userName&quot;</span><span class="s0">,</span><span class="s1">&quot;length&quot;</span><span class="s0">,</span><span class="s1">&quot;map&quot;</span><span class="s0">,</span><span class="s1">&quot;user&quot;</span><span class="s0">,</span><span class="s1">&quot;join&quot;</span><span class="s0">,</span><span class="s1">&quot;error&quot;</span><span class="s0">,</span><span class="s1">&quot;promptForUser&quot;</span><span class="s0">,</span><span class="s1">&quot;selectedUser&quot;</span><span class="s0">,</span><span class="s1">&quot;prompts&quot;</span><span class="s0">,</span><span class="s1">&quot;type&quot;</span><span class="s0">,</span><span class="s1">&quot;message&quot;</span><span class="s0">,</span><span class="s1">&quot;choices&quot;</span><span class="s0">,</span><span class="s1">&quot;title&quot;</span><span class="s0">,</span><span class="s1">&quot;value&quot;</span><span class="s0">,</span><span class="s1">&quot;min&quot;</span><span class="s0">],</span><span class="s1">&quot;sources&quot;</span><span class="s0">:[</span><span class="s1">&quot;../../../src/commands/runAndroid/listAndroidUsers.ts&quot;</span><span class="s0">],</span><span class="s1">&quot;sourcesContent&quot;</span><span class="s0">:[</span><span class="s1">&quot;import {logger} from '@react-native-community/cli-tools';</span><span class="s3">\n</span><span class="s1">import execa from 'execa';</span><span class="s3">\n</span><span class="s1">import prompts from 'prompts';</span><span class="s3">\n\n</span><span class="s1">type User = {</span><span class="s3">\n  </span><span class="s1">id: string;</span><span class="s3">\n  </span><span class="s1">name: string;</span><span class="s3">\n</span><span class="s1">};</span><span class="s3">\n\n</span><span class="s1">export function checkUsers(device: string, adbPath: string) {</span><span class="s3">\n  </span><span class="s1">try {</span><span class="s3">\n    </span><span class="s1">const adbArgs = ['-s', device, 'shell', 'pm', 'list', 'users'];</span><span class="s3">\n\n    </span><span class="s1">logger.debug(`Checking users on </span><span class="s3">\&quot;</span><span class="s1">${device}</span><span class="s3">\&quot;</span><span class="s1">...`);</span><span class="s3">\n    </span><span class="s1">const {stdout} = execa.sync(adbPath, adbArgs, {encoding: 'utf-8'});</span><span class="s3">\n    </span><span class="s1">const regex = new RegExp(</span><span class="s3">\n      </span><span class="s1">/^</span><span class="s3">\\</span><span class="s1">s*UserInfo</span><span class="s3">\\</span><span class="s1">{(?&lt;userId&gt;</span><span class="s3">\\</span><span class="s1">d+):(?&lt;userName&gt;.*):(?&lt;userFlags&gt;[0-9a-f]*)}/,</span><span class="s3">\n    </span><span class="s1">);</span><span class="s3">\n    </span><span class="s1">const users: User[] = [];</span><span class="s3">\n\n    </span><span class="s1">const lines = stdout.split('</span><span class="s3">\\</span><span class="s1">n');</span><span class="s3">\n    </span><span class="s1">for (const line of lines) {</span><span class="s3">\n      </span><span class="s1">const res = regex.exec(line);</span><span class="s3">\n      </span><span class="s1">if (res?.groups) {</span><span class="s3">\n        </span><span class="s1">users.push({id: res.groups.userId, name: res.groups.userName});</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n\n    </span><span class="s1">if (users.length &gt; 1) {</span><span class="s3">\n      </span><span class="s1">logger.debug(</span><span class="s3">\n        </span><span class="s1">`Available users are:</span><span class="s3">\\</span><span class="s1">n${users</span><span class="s3">\n          </span><span class="s1">.map((user) =&gt; `${user.name} - ${user.id}`)</span><span class="s3">\n          </span><span class="s1">.join('</span><span class="s3">\\</span><span class="s1">n')}`,</span><span class="s3">\n      </span><span class="s1">);</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n\n    </span><span class="s1">return users;</span><span class="s3">\n  </span><span class="s1">} catch (error) {</span><span class="s3">\n    </span><span class="s1">logger.error('Failed to check users of device.', error as any);</span><span class="s3">\n    </span><span class="s1">return [];</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">export async function promptForUser(users: User[]) {</span><span class="s3">\n  </span><span class="s1">const {selectedUser}: {selectedUser: User} = await prompts({</span><span class="s3">\n    </span><span class="s1">type: 'select',</span><span class="s3">\n    </span><span class="s1">name: 'selectedUser',</span><span class="s3">\n    </span><span class="s1">message: 'Which profile would you like to launch your app into?',</span><span class="s3">\n    </span><span class="s1">choices: users.map((user: User) =&gt; ({</span><span class="s3">\n      </span><span class="s1">title: user.name,</span><span class="s3">\n      </span><span class="s1">value: user,</span><span class="s3">\n    </span><span class="s1">})),</span><span class="s3">\n    </span><span class="s1">min: 1,</span><span class="s3">\n  </span><span class="s1">});</span><span class="s3">\n\n  </span><span class="s1">return selectedUser;</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n</span><span class="s1">&quot;</span><span class="s0">],</span><span class="s1">&quot;mappings&quot;</span><span class="s0">:</span><span class="s1">&quot;;;;;;;;AAAA;EAAA;EAAA;IAAA;EAAA;EAAA;AAAA;AACA;EAAA;EAAA;IAAA;EAAA;EAAA;AAAA;AACA;EAAA;EAAA;IAAA;EAAA;EAAA;AAAA;AAA8B;AAOvB,SAASA,UAAU,CAACC,MAAc,EAAEC,OAAe,EAAE;EAC1D,IAAI;IACF,MAAMC,OAAO,GAAG,CAAC,IAAI,EAAEF,MAAM,EAAE,OAAO,EAAE,IAAI,EAAE,MAAM,EAAE,OAAO,CAAC;IAE9DG,kBAAM,CAACC,KAAK,CAAE,sBAAqBJ,MAAO,MAAK,CAAC;IAChD,MAAM;MAACK;IAAM,CAAC,GAAGC,gBAAK,CAACC,IAAI,CAACN,OAAO,EAAEC,OAAO,EAAE;MAACM,QAAQ,EAAE;IAAO,CAAC,CAAC;IAClE,MAAMC,KAAK,GAAG,IAAIC,MAAM,CACtB,uEAAuE,CACxE;IACD,MAAMC,KAAa,GAAG,EAAE;IAExB,MAAMC,KAAK,GAAGP,MAAM,CAACQ,KAAK,CAAC,IAAI,CAAC;IAChC,KAAK,MAAMC,IAAI,IAAIF,KAAK,EAAE;MACxB,MAAMG,GAAG,GAAGN,KAAK,CAACO,IAAI,CAACF,IAAI,CAAC;MAC5B,IAAIC,GAAG,aAAHA,GAAG,uBAAHA,GAAG,CAAEE,MAAM,EAAE;QACfN,KAAK,CAACO,IAAI,CAAC;UAACC,EAAE,EAAEJ,GAAG,CAACE,MAAM,CAACG,MAAM;UAAEC,IAAI,EAAEN,GAAG,CAACE,MAAM,CAACK;QAAQ,CAAC,CAAC;MAChE;IACF;IAEA,IAAIX,KAAK,CAACY,MAAM,GAAG,CAAC,EAAE;MACpBpB,kBAAM,CAACC,KAAK,CACT,yBAAwBO,KAAK,CAC3Ba,GAAG,CAAEC,IAAI,IAAM,GAAEA,IAAI,CAACJ,IAAK,MAAKI,IAAI,CAACN,EAAG,EAAC,CAAC,CAC1CO,IAAI,CAAC,IAAI,CAAE,EAAC,CAChB;IACH;IAEA,OAAOf,KAAK;EACd,CAAC,CAAC,OAAOgB,KAAK,EAAE;IACdxB,kBAAM,CAACwB,KAAK,CAAC,kCAAkC,EAAEA,KAAK,CAAQ;IAC9D,OAAO,EAAE;EACX;AACF;AAEO,eAAeC,aAAa,CAACjB,KAAa,EAAE;EACjD,MAAM;IAACkB;EAAkC,CAAC,GAAG,MAAM,IAAAC,kBAAO,EAAC;IACzDC,IAAI,EAAE,QAAQ;IACdV,IAAI,EAAE,cAAc;IACpBW,OAAO,EAAE,uDAAuD;IAChEC,OAAO,EAAEtB,KAAK,CAACa,GAAG,CAAEC,IAAU,KAAM;MAClCS,KAAK,EAAET,IAAI,CAACJ,IAAI;MAChBc,KAAK,EAAEV;IACT,CAAC,CAAC,CAAC;IACHW,GAAG,EAAE;EACP,CAAC,CAAC;EAEF,OAAOP,YAAY;AACrB&quot;</span><span class="s0">}</span></pre>
</body>
</html>