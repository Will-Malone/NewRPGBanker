<html>
<head>
<title>PointerTracker.js.map</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<style type="text/css">
.s0 { color: #a9b7c6;}
.s1 { color: #6a8759;}
.s2 { color: #6897bb; font-style: italic;}
.s3 { color: #cc7832; font-style: italic;}
</style>
</head>
<body bgcolor="#2b2b2b">
<table CELLSPACING=0 CELLPADDING=5 COLS=1 WIDTH="100%" BGCOLOR="#606060" >
<tr><td><center>
<font face="Arial, Helvetica" color="#000000">
PointerTracker.js.map</font>
</center></td></tr></table>
<pre><span class="s0">{</span><span class="s1">&quot;version&quot;</span><span class="s0">:</span><span class="s2">3</span><span class="s0">,</span><span class="s1">&quot;sources&quot;</span><span class="s0">:[</span><span class="s1">&quot;PointerTracker.ts&quot;</span><span class="s0">],</span><span class="s1">&quot;names&quot;</span><span class="s0">:[</span><span class="s1">&quot;MAX_POINTERS&quot;</span><span class="s0">,</span><span class="s1">&quot;PointerTracker&quot;</span><span class="s0">,</span><span class="s1">&quot;constructor&quot;</span><span class="s0">,</span><span class="s1">&quot;VelocityTracker&quot;</span><span class="s0">,</span><span class="s1">&quot;Map&quot;</span><span class="s0">,</span><span class="s1">&quot;x&quot;</span><span class="s0">,</span><span class="s1">&quot;y&quot;</span><span class="s0">,</span><span class="s1">&quot;lastMovedPointerId&quot;</span><span class="s0">,</span><span class="s1">&quot;NaN&quot;</span><span class="s0">,</span><span class="s1">&quot;i&quot;</span><span class="s0">,</span><span class="s1">&quot;touchEventsIds&quot;</span><span class="s0">,</span><span class="s1">&quot;set&quot;</span><span class="s0">,</span><span class="s1">&quot;addToTracker&quot;</span><span class="s0">,</span><span class="s1">&quot;event&quot;</span><span class="s0">,</span><span class="s1">&quot;trackedPointers&quot;</span><span class="s0">,</span><span class="s1">&quot;has&quot;</span><span class="s0">,</span><span class="s1">&quot;pointerId&quot;</span><span class="s0">,</span><span class="s1">&quot;newElement&quot;</span><span class="s0">,</span><span class="s1">&quot;lastX&quot;</span><span class="s0">,</span><span class="s1">&quot;lastY&quot;</span><span class="s0">,</span><span class="s1">&quot;timeStamp&quot;</span><span class="s0">,</span><span class="s1">&quot;time&quot;</span><span class="s0">,</span><span class="s1">&quot;velocityX&quot;</span><span class="s0">,</span><span class="s1">&quot;velocityY&quot;</span><span class="s0">,</span><span class="s1">&quot;mapTouchEventId&quot;</span><span class="s0">,</span><span class="s1">&quot;cachedAverages&quot;</span><span class="s0">,</span><span class="s1">&quot;getLastAvgX&quot;</span><span class="s0">,</span><span class="s1">&quot;getLastAvgY&quot;</span><span class="s0">,</span><span class="s1">&quot;removeFromTracker&quot;</span><span class="s0">,</span><span class="s1">&quot;delete&quot;</span><span class="s0">,</span><span class="s1">&quot;removeMappedTouchId&quot;</span><span class="s0">,</span><span class="s1">&quot;track&quot;</span><span class="s0">,</span><span class="s1">&quot;element&quot;</span><span class="s0">,</span><span class="s1">&quot;get&quot;</span><span class="s0">,</span><span class="s1">&quot;velocityTracker&quot;</span><span class="s0">,</span><span class="s1">&quot;add&quot;</span><span class="s0">,</span><span class="s1">&quot;getVelocity&quot;</span><span class="s0">,</span><span class="s1">&quot;avgX&quot;</span><span class="s0">,</span><span class="s1">&quot;avgY&quot;</span><span class="s0">,</span><span class="s1">&quot;id&quot;</span><span class="s0">,</span><span class="s1">&quot;mappedId&quot;</span><span class="s0">,</span><span class="s1">&quot;touchId&quot;</span><span class="s0">,</span><span class="s1">&quot;isNaN&quot;</span><span class="s0">,</span><span class="s1">&quot;getMappedTouchEventId&quot;</span><span class="s0">,</span><span class="s1">&quot;touchEventId&quot;</span><span class="s0">,</span><span class="s1">&quot;key&quot;</span><span class="s0">,</span><span class="s1">&quot;value&quot;</span><span class="s0">,</span><span class="s1">&quot;entries&quot;</span><span class="s0">,</span><span class="s1">&quot;getVelocityX&quot;</span><span class="s0">,</span><span class="s1">&quot;getVelocityY&quot;</span><span class="s0">,</span><span class="s1">&quot;getLastX&quot;</span><span class="s0">,</span><span class="s1">&quot;undefined&quot;</span><span class="s0">,</span><span class="s1">&quot;getLastY&quot;</span><span class="s0">,</span><span class="s1">&quot;getSumX&quot;</span><span class="s0">,</span><span class="s1">&quot;size&quot;</span><span class="s0">,</span><span class="s1">&quot;getSumY&quot;</span><span class="s0">,</span><span class="s1">&quot;ignoredPointer&quot;</span><span class="s0">,</span><span class="s1">&quot;sumX&quot;</span><span class="s0">,</span><span class="s1">&quot;forEach&quot;</span><span class="s0">,</span><span class="s1">&quot;sumY&quot;</span><span class="s0">,</span><span class="s1">&quot;getTrackedPointersCount&quot;</span><span class="s0">,</span><span class="s1">&quot;getTrackedPointersID&quot;</span><span class="s0">,</span><span class="s1">&quot;keys&quot;</span><span class="s0">,</span><span class="s1">&quot;_value&quot;</span><span class="s0">,</span><span class="s1">&quot;push&quot;</span><span class="s0">,</span><span class="s1">&quot;getData&quot;</span><span class="s0">,</span><span class="s1">&quot;resetTracker&quot;</span><span class="s0">,</span><span class="s1">&quot;reset&quot;</span><span class="s0">,</span><span class="s1">&quot;clear&quot;</span><span class="s0">,</span><span class="s1">&quot;shareCommonPointers&quot;</span><span class="s0">,</span><span class="s1">&quot;stPointers&quot;</span><span class="s0">,</span><span class="s1">&quot;ndPointers&quot;</span><span class="s0">,</span><span class="s1">&quot;some&quot;</span><span class="s0">,</span><span class="s1">&quot;includes&quot;</span><span class="s0">],</span><span class="s1">&quot;mappings&quot;</span><span class="s0">:</span><span class="s1">&quot;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&quot;</span><span class="s0">,</span><span class="s1">&quot;sourcesContent&quot;</span><span class="s0">:[</span><span class="s1">&quot;import { AdaptedEvent } from '../interfaces';</span><span class="s3">\n</span><span class="s1">import VelocityTracker from './VelocityTracker';</span><span class="s3">\n\n</span><span class="s1">export interface TrackerElement {</span><span class="s3">\n  </span><span class="s1">lastX: number;</span><span class="s3">\n  </span><span class="s1">lastY: number;</span><span class="s3">\n\n  </span><span class="s1">timeStamp: number;</span><span class="s3">\n\n  </span><span class="s1">velocityX: number;</span><span class="s3">\n  </span><span class="s1">velocityY: number;</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">const MAX_POINTERS = 20;</span><span class="s3">\n\n</span><span class="s1">export default class PointerTracker {</span><span class="s3">\n  </span><span class="s1">private velocityTracker = new VelocityTracker();</span><span class="s3">\n  </span><span class="s1">private trackedPointers: Map&lt;number, TrackerElement&gt; = new Map&lt;</span><span class="s3">\n    </span><span class="s1">number,</span><span class="s3">\n    </span><span class="s1">TrackerElement</span><span class="s3">\n  </span><span class="s1">&gt;();</span><span class="s3">\n\n  </span><span class="s1">private touchEventsIds: Map&lt;number, number&gt; = new Map&lt;number, number&gt;();</span><span class="s3">\n\n  </span><span class="s1">private lastMovedPointerId: number;</span><span class="s3">\n\n  </span><span class="s1">private cachedAverages: { x: number; y: number } = { x: 0, y: 0 };</span><span class="s3">\n\n  </span><span class="s1">public constructor() {</span><span class="s3">\n    </span><span class="s1">this.lastMovedPointerId = NaN;</span><span class="s3">\n\n    </span><span class="s1">for (let i = 0; i &lt; MAX_POINTERS; ++i) {</span><span class="s3">\n      </span><span class="s1">this.touchEventsIds.set(i, NaN);</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">public addToTracker(event: AdaptedEvent): void {</span><span class="s3">\n    </span><span class="s1">if (this.trackedPointers.has(event.pointerId)) {</span><span class="s3">\n      </span><span class="s1">return;</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n\n    </span><span class="s1">this.lastMovedPointerId = event.pointerId;</span><span class="s3">\n\n    </span><span class="s1">const newElement: TrackerElement = {</span><span class="s3">\n      </span><span class="s1">lastX: event.x,</span><span class="s3">\n      </span><span class="s1">lastY: event.y,</span><span class="s3">\n      </span><span class="s1">timeStamp: event.time,</span><span class="s3">\n      </span><span class="s1">velocityX: 0,</span><span class="s3">\n      </span><span class="s1">velocityY: 0,</span><span class="s3">\n    </span><span class="s1">};</span><span class="s3">\n\n    </span><span class="s1">this.trackedPointers.set(event.pointerId, newElement);</span><span class="s3">\n    </span><span class="s1">this.mapTouchEventId(event.pointerId);</span><span class="s3">\n\n    </span><span class="s1">this.cachedAverages = {</span><span class="s3">\n      </span><span class="s1">x: this.getLastAvgX(),</span><span class="s3">\n      </span><span class="s1">y: this.getLastAvgY(),</span><span class="s3">\n    </span><span class="s1">};</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">public removeFromTracker(pointerId: number): void {</span><span class="s3">\n    </span><span class="s1">this.trackedPointers.delete(pointerId);</span><span class="s3">\n    </span><span class="s1">this.removeMappedTouchId(pointerId);</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">public track(event: AdaptedEvent): void {</span><span class="s3">\n    </span><span class="s1">const element: TrackerElement = this.trackedPointers.get(</span><span class="s3">\n      </span><span class="s1">event.pointerId</span><span class="s3">\n    </span><span class="s1">) as TrackerElement;</span><span class="s3">\n\n    </span><span class="s1">if (!element) {</span><span class="s3">\n      </span><span class="s1">return;</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n\n    </span><span class="s1">this.lastMovedPointerId = event.pointerId;</span><span class="s3">\n\n    </span><span class="s1">this.velocityTracker.add(event);</span><span class="s3">\n    </span><span class="s1">const [velocityX, velocityY] = this.velocityTracker.getVelocity();</span><span class="s3">\n\n    </span><span class="s1">element.velocityX = velocityX;</span><span class="s3">\n    </span><span class="s1">element.velocityY = velocityY;</span><span class="s3">\n\n    </span><span class="s1">element.lastX = event.x;</span><span class="s3">\n    </span><span class="s1">element.lastY = event.y;</span><span class="s3">\n\n    </span><span class="s1">this.trackedPointers.set(event.pointerId, element);</span><span class="s3">\n\n    </span><span class="s1">const avgX: number = this.getLastAvgX();</span><span class="s3">\n    </span><span class="s1">const avgY: number = this.getLastAvgY();</span><span class="s3">\n\n    </span><span class="s1">this.cachedAverages = {</span><span class="s3">\n      </span><span class="s1">x: avgX,</span><span class="s3">\n      </span><span class="s1">y: avgY,</span><span class="s3">\n    </span><span class="s1">};</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">//Mapping TouchEvents ID</span><span class="s3">\n  </span><span class="s1">private mapTouchEventId(id: number): void {</span><span class="s3">\n    </span><span class="s1">for (const [mappedId, touchId] of this.touchEventsIds) {</span><span class="s3">\n      </span><span class="s1">if (isNaN(touchId)) {</span><span class="s3">\n        </span><span class="s1">this.touchEventsIds.set(mappedId, id);</span><span class="s3">\n        </span><span class="s1">break;</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">private removeMappedTouchId(id: number): void {</span><span class="s3">\n    </span><span class="s1">const mappedId: number = this.getMappedTouchEventId(id);</span><span class="s3">\n    </span><span class="s1">if (!isNaN(mappedId)) {</span><span class="s3">\n      </span><span class="s1">this.touchEventsIds.set(mappedId, NaN);</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">public getMappedTouchEventId(touchEventId: number): number {</span><span class="s3">\n    </span><span class="s1">for (const [key, value] of this.touchEventsIds.entries()) {</span><span class="s3">\n      </span><span class="s1">if (value === touchEventId) {</span><span class="s3">\n        </span><span class="s1">return key;</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n\n    </span><span class="s1">return NaN;</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">public getVelocityX(pointerId: number): number {</span><span class="s3">\n    </span><span class="s1">return this.trackedPointers.get(pointerId)?.velocityX as number;</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">public getVelocityY(pointerId: number): number {</span><span class="s3">\n    </span><span class="s1">return this.trackedPointers.get(pointerId)?.velocityY as number;</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">/**</span><span class="s3">\n   </span><span class="s1">* Returns X coordinate of last moved pointer</span><span class="s3">\n   </span><span class="s1">*/</span><span class="s3">\n  </span><span class="s1">public getLastX(): number;</span><span class="s3">\n\n  </span><span class="s1">/**</span><span class="s3">\n   </span><span class="s1">*</span><span class="s3">\n   </span><span class="s1">* @param pointerId</span><span class="s3">\n   </span><span class="s1">* Returns X coordinate of given pointer</span><span class="s3">\n   </span><span class="s1">*/</span><span class="s3">\n  </span><span class="s1">// eslint-disable-next-line @typescript-eslint/unified-signatures</span><span class="s3">\n  </span><span class="s1">public getLastX(pointerId: number): number;</span><span class="s3">\n\n  </span><span class="s1">public getLastX(pointerId?: number): number {</span><span class="s3">\n    </span><span class="s1">if (pointerId !== undefined) {</span><span class="s3">\n      </span><span class="s1">return this.trackedPointers.get(pointerId)?.lastX as number;</span><span class="s3">\n    </span><span class="s1">} else {</span><span class="s3">\n      </span><span class="s1">return this.trackedPointers.get(this.lastMovedPointerId)?.lastX as number;</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">/**</span><span class="s3">\n   </span><span class="s1">* Returns Y coordinate of last moved pointer</span><span class="s3">\n   </span><span class="s1">*/</span><span class="s3">\n  </span><span class="s1">public getLastY(): number;</span><span class="s3">\n\n  </span><span class="s1">/**</span><span class="s3">\n   </span><span class="s1">*</span><span class="s3">\n   </span><span class="s1">* @param pointerId</span><span class="s3">\n   </span><span class="s1">* Returns Y coordinate of given pointer</span><span class="s3">\n   </span><span class="s1">*/</span><span class="s3">\n  </span><span class="s1">// eslint-disable-next-line @typescript-eslint/unified-signatures</span><span class="s3">\n  </span><span class="s1">public getLastY(pointerId: number): number;</span><span class="s3">\n\n  </span><span class="s1">public getLastY(pointerId?: number): number {</span><span class="s3">\n    </span><span class="s1">if (pointerId !== undefined) {</span><span class="s3">\n      </span><span class="s1">return this.trackedPointers.get(pointerId)?.lastY as number;</span><span class="s3">\n    </span><span class="s1">} else {</span><span class="s3">\n      </span><span class="s1">return this.trackedPointers.get(this.lastMovedPointerId)?.lastY as number;</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">// Some handlers use these methods to send average values in native event.</span><span class="s3">\n  </span><span class="s1">// This may happen when pointers have already been removed from tracker (i.e. pointerup event).</span><span class="s3">\n  </span><span class="s1">// In situation when NaN would be sent as a response, we return cached value.</span><span class="s3">\n  </span><span class="s1">// That prevents handlers from crashing</span><span class="s3">\n  </span><span class="s1">public getLastAvgX(): number {</span><span class="s3">\n    </span><span class="s1">const avgX: number = this.getSumX() / this.trackedPointers.size;</span><span class="s3">\n    </span><span class="s1">return isNaN(avgX) ? this.cachedAverages.x : avgX;</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">public getLastAvgY(): number {</span><span class="s3">\n    </span><span class="s1">const avgY: number = this.getSumY() / this.trackedPointers.size;</span><span class="s3">\n    </span><span class="s1">return isNaN(avgY) ? this.cachedAverages.y : avgY;</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">public getSumX(ignoredPointer?: number): number {</span><span class="s3">\n    </span><span class="s1">let sumX = 0;</span><span class="s3">\n\n    </span><span class="s1">this.trackedPointers.forEach((value, key) =&gt; {</span><span class="s3">\n      </span><span class="s1">if (key !== ignoredPointer) {</span><span class="s3">\n        </span><span class="s1">sumX += value.lastX;</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">});</span><span class="s3">\n\n    </span><span class="s1">return sumX;</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">public getSumY(ignoredPointer?: number): number {</span><span class="s3">\n    </span><span class="s1">let sumY = 0;</span><span class="s3">\n\n    </span><span class="s1">this.trackedPointers.forEach((value, key) =&gt; {</span><span class="s3">\n      </span><span class="s1">if (key !== ignoredPointer) {</span><span class="s3">\n        </span><span class="s1">sumY += value.lastY;</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">});</span><span class="s3">\n\n    </span><span class="s1">return sumY;</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">public getTrackedPointersCount(): number {</span><span class="s3">\n    </span><span class="s1">return this.trackedPointers.size;</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">public getTrackedPointersID(): number[] {</span><span class="s3">\n    </span><span class="s1">const keys: number[] = [];</span><span class="s3">\n\n    </span><span class="s1">this.trackedPointers.forEach((_value, key) =&gt; {</span><span class="s3">\n      </span><span class="s1">keys.push(key);</span><span class="s3">\n    </span><span class="s1">});</span><span class="s3">\n\n    </span><span class="s1">return keys;</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">public getData(): Map&lt;number, TrackerElement&gt; {</span><span class="s3">\n    </span><span class="s1">return this.trackedPointers;</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">public resetTracker(): void {</span><span class="s3">\n    </span><span class="s1">this.velocityTracker.reset();</span><span class="s3">\n    </span><span class="s1">this.trackedPointers.clear();</span><span class="s3">\n    </span><span class="s1">this.lastMovedPointerId = NaN;</span><span class="s3">\n\n    </span><span class="s1">for (let i = 0; i &lt; MAX_POINTERS; ++i) {</span><span class="s3">\n      </span><span class="s1">this.touchEventsIds.set(i, NaN);</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">public static shareCommonPointers(</span><span class="s3">\n    </span><span class="s1">stPointers: number[],</span><span class="s3">\n    </span><span class="s1">ndPointers: number[]</span><span class="s3">\n  </span><span class="s1">): boolean {</span><span class="s3">\n    </span><span class="s1">return stPointers.some((pointerId) =&gt; ndPointers.includes(pointerId));</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n</span><span class="s1">&quot;</span><span class="s0">]}</span></pre>
</body>
</html>