<html>
<head>
<title>listAndroidDevices.js.map</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<style type="text/css">
.s0 { color: #a9b7c6;}
.s1 { color: #6a8759;}
.s2 { color: #6897bb; font-style: italic;}
.s3 { color: #cc7832; font-style: italic;}
</style>
</head>
<body bgcolor="#2b2b2b">
<table CELLSPACING=0 CELLPADDING=5 COLS=1 WIDTH="100%" BGCOLOR="#606060" >
<tr><td><center>
<font face="Arial, Helvetica" color="#000000">
listAndroidDevices.js.map</font>
</center></td></tr></table>
<pre><span class="s0">{</span><span class="s1">&quot;version&quot;</span><span class="s0">:</span><span class="s2">3</span><span class="s0">,</span><span class="s1">&quot;names&quot;</span><span class="s0">:[</span><span class="s1">&quot;getEmulatorName&quot;</span><span class="s0">,</span><span class="s1">&quot;deviceId&quot;</span><span class="s0">,</span><span class="s1">&quot;adbPath&quot;</span><span class="s0">,</span><span class="s1">&quot;getAdbPath&quot;</span><span class="s0">,</span><span class="s1">&quot;buffer&quot;</span><span class="s0">,</span><span class="s1">&quot;execSync&quot;</span><span class="s0">,</span><span class="s1">&quot;toString&quot;</span><span class="s0">,</span><span class="s1">&quot;split&quot;</span><span class="s0">,</span><span class="s1">&quot;os&quot;</span><span class="s0">,</span><span class="s1">&quot;EOL&quot;</span><span class="s0">,</span><span class="s1">&quot;replace&quot;</span><span class="s0">,</span><span class="s1">&quot;trim&quot;</span><span class="s0">,</span><span class="s1">&quot;getPhoneName&quot;</span><span class="s0">,</span><span class="s1">&quot;promptForDeviceSelection&quot;</span><span class="s0">,</span><span class="s1">&quot;allDevices&quot;</span><span class="s0">,</span><span class="s1">&quot;length&quot;</span><span class="s0">,</span><span class="s1">&quot;CLIError&quot;</span><span class="s0">,</span><span class="s1">&quot;device&quot;</span><span class="s0">,</span><span class="s1">&quot;prompts&quot;</span><span class="s0">,</span><span class="s1">&quot;type&quot;</span><span class="s0">,</span><span class="s1">&quot;name&quot;</span><span class="s0">,</span><span class="s1">&quot;message&quot;</span><span class="s0">,</span><span class="s1">&quot;choices&quot;</span><span class="s0">,</span><span class="s1">&quot;map&quot;</span><span class="s0">,</span><span class="s1">&quot;d&quot;</span><span class="s0">,</span><span class="s1">&quot;title&quot;</span><span class="s0">,</span><span class="s1">&quot;chalk&quot;</span><span class="s0">,</span><span class="s1">&quot;bold&quot;</span><span class="s0">,</span><span class="s1">&quot;toPascalCase&quot;</span><span class="s0">,</span><span class="s1">&quot;green&quot;</span><span class="s0">,</span><span class="s1">&quot;readableName&quot;</span><span class="s0">,</span><span class="s1">&quot;connected&quot;</span><span class="s0">,</span><span class="s1">&quot;value&quot;</span><span class="s0">,</span><span class="s1">&quot;min&quot;</span><span class="s0">,</span><span class="s1">&quot;listAndroidDevices&quot;</span><span class="s0">,</span><span class="s1">&quot;devices&quot;</span><span class="s0">,</span><span class="s1">&quot;adb&quot;</span><span class="s0">,</span><span class="s1">&quot;getDevices&quot;</span><span class="s0">,</span><span class="s1">&quot;forEach&quot;</span><span class="s0">,</span><span class="s1">&quot;includes&quot;</span><span class="s0">,</span><span class="s1">&quot;emulatorData&quot;</span><span class="s0">,</span><span class="s1">&quot;phoneData&quot;</span><span class="s0">,</span><span class="s1">&quot;emulators&quot;</span><span class="s0">,</span><span class="s1">&quot;getEmulators&quot;</span><span class="s0">,</span><span class="s1">&quot;emulatorName&quot;</span><span class="s0">,</span><span class="s1">&quot;some&quot;</span><span class="s0">,</span><span class="s1">&quot;undefined&quot;</span><span class="s0">,</span><span class="s1">&quot;selectedDevice&quot;</span><span class="s0">],</span><span class="s1">&quot;sources&quot;</span><span class="s0">:[</span><span class="s1">&quot;../../../src/commands/runAndroid/listAndroidDevices.ts&quot;</span><span class="s0">],</span><span class="s1">&quot;sourcesContent&quot;</span><span class="s0">:[</span><span class="s1">&quot;import {execSync} from 'child_process';</span><span class="s3">\n</span><span class="s1">import adb from './adb';</span><span class="s3">\n</span><span class="s1">import getAdbPath from './getAdbPath';</span><span class="s3">\n</span><span class="s1">import {getEmulators} from './tryLaunchEmulator';</span><span class="s3">\n</span><span class="s1">import {toPascalCase} from './toPascalCase';</span><span class="s3">\n</span><span class="s1">import os from 'os';</span><span class="s3">\n</span><span class="s1">import prompts from 'prompts';</span><span class="s3">\n</span><span class="s1">import chalk from 'chalk';</span><span class="s3">\n</span><span class="s1">import {CLIError} from '@react-native-community/cli-tools';</span><span class="s3">\n\n</span><span class="s1">type DeviceData = {</span><span class="s3">\n  </span><span class="s1">deviceId: string | undefined;</span><span class="s3">\n  </span><span class="s1">readableName: string;</span><span class="s3">\n  </span><span class="s1">connected: boolean;</span><span class="s3">\n  </span><span class="s1">type: 'emulator' | 'phone';</span><span class="s3">\n</span><span class="s1">};</span><span class="s3">\n\n</span><span class="s1">/**</span><span class="s3">\n </span><span class="s1">*</span><span class="s3">\n </span><span class="s1">* @param deviceId string</span><span class="s3">\n </span><span class="s1">* @returns name of Android emulator</span><span class="s3">\n </span><span class="s1">*/</span><span class="s3">\n</span><span class="s1">function getEmulatorName(deviceId: string) {</span><span class="s3">\n  </span><span class="s1">const adbPath = getAdbPath();</span><span class="s3">\n  </span><span class="s1">const buffer = execSync(`${adbPath} -s ${deviceId} emu avd name`);</span><span class="s3">\n\n  </span><span class="s1">// 1st line should get us emu name</span><span class="s3">\n  </span><span class="s1">return buffer</span><span class="s3">\n    </span><span class="s1">.toString()</span><span class="s3">\n    </span><span class="s1">.split(os.EOL)[0]</span><span class="s3">\n    </span><span class="s1">.replace(/(</span><span class="s3">\\</span><span class="s1">r</span><span class="s3">\\</span><span class="s1">n|</span><span class="s3">\\</span><span class="s1">n|</span><span class="s3">\\</span><span class="s1">r)/gm, '')</span><span class="s3">\n    </span><span class="s1">.trim();</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">/**</span><span class="s3">\n </span><span class="s1">*</span><span class="s3">\n </span><span class="s1">* @param deviceId string</span><span class="s3">\n </span><span class="s1">* @returns Android device name in readable format</span><span class="s3">\n </span><span class="s1">*/</span><span class="s3">\n</span><span class="s1">function getPhoneName(deviceId: string) {</span><span class="s3">\n  </span><span class="s1">const adbPath = getAdbPath();</span><span class="s3">\n  </span><span class="s1">const buffer = execSync(</span><span class="s3">\n    </span><span class="s1">`${adbPath} -s ${deviceId} shell getprop | grep ro.product.model`,</span><span class="s3">\n  </span><span class="s1">);</span><span class="s3">\n  </span><span class="s1">return buffer</span><span class="s3">\n    </span><span class="s1">.toString()</span><span class="s3">\n    </span><span class="s1">.replace(/</span><span class="s3">\\</span><span class="s1">[ro</span><span class="s3">\\</span><span class="s1">.product</span><span class="s3">\\</span><span class="s1">.model</span><span class="s3">\\</span><span class="s1">]:</span><span class="s3">\\</span><span class="s1">s*</span><span class="s3">\\</span><span class="s1">[(.*)</span><span class="s3">\\</span><span class="s1">]/, '$1')</span><span class="s3">\n    </span><span class="s1">.trim();</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">async function promptForDeviceSelection(</span><span class="s3">\n  </span><span class="s1">allDevices: Array&lt;DeviceData&gt;,</span><span class="s3">\n</span><span class="s1">): Promise&lt;DeviceData | undefined&gt; {</span><span class="s3">\n  </span><span class="s1">if (!allDevices.length) {</span><span class="s3">\n    </span><span class="s1">throw new CLIError(</span><span class="s3">\n      </span><span class="s1">'No devices and/or emulators connected. Please create emulator with Android Studio or connect Android device.',</span><span class="s3">\n    </span><span class="s1">);</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">const {device} = await prompts({</span><span class="s3">\n    </span><span class="s1">type: 'select',</span><span class="s3">\n    </span><span class="s1">name: 'device',</span><span class="s3">\n    </span><span class="s1">message: 'Select the device / emulator you want to use',</span><span class="s3">\n    </span><span class="s1">choices: allDevices.map((d) =&gt; ({</span><span class="s3">\n      </span><span class="s1">title: `${chalk.bold(`${toPascalCase(d.type)}`)} ${chalk.green(</span><span class="s3">\n        </span><span class="s1">`${d.readableName}`,</span><span class="s3">\n      </span><span class="s1">)} (${d.connected ? 'connected' : 'disconnected'})`,</span><span class="s3">\n      </span><span class="s1">value: d,</span><span class="s3">\n    </span><span class="s1">})),</span><span class="s3">\n    </span><span class="s1">min: 1,</span><span class="s3">\n  </span><span class="s1">});</span><span class="s3">\n\n  </span><span class="s1">return device;</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">async function listAndroidDevices() {</span><span class="s3">\n  </span><span class="s1">const adbPath = getAdbPath();</span><span class="s3">\n  </span><span class="s1">const devices = adb.getDevices(adbPath);</span><span class="s3">\n\n  </span><span class="s1">let allDevices: Array&lt;DeviceData&gt; = [];</span><span class="s3">\n\n  </span><span class="s1">devices.forEach((deviceId) =&gt; {</span><span class="s3">\n    </span><span class="s1">if (deviceId.includes('emulator')) {</span><span class="s3">\n      </span><span class="s1">const emulatorData: DeviceData = {</span><span class="s3">\n        </span><span class="s1">deviceId,</span><span class="s3">\n        </span><span class="s1">readableName: getEmulatorName(deviceId),</span><span class="s3">\n        </span><span class="s1">connected: true,</span><span class="s3">\n        </span><span class="s1">type: 'emulator',</span><span class="s3">\n      </span><span class="s1">};</span><span class="s3">\n      </span><span class="s1">allDevices = [...allDevices, emulatorData];</span><span class="s3">\n    </span><span class="s1">} else {</span><span class="s3">\n      </span><span class="s1">const phoneData: DeviceData = {</span><span class="s3">\n        </span><span class="s1">deviceId,</span><span class="s3">\n        </span><span class="s1">readableName: getPhoneName(deviceId),</span><span class="s3">\n        </span><span class="s1">type: 'phone',</span><span class="s3">\n        </span><span class="s1">connected: true,</span><span class="s3">\n      </span><span class="s1">};</span><span class="s3">\n      </span><span class="s1">allDevices = [...allDevices, phoneData];</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">});</span><span class="s3">\n\n  </span><span class="s1">const emulators = getEmulators();</span><span class="s3">\n\n  </span><span class="s1">// Find not booted ones:</span><span class="s3">\n  </span><span class="s1">emulators.forEach((emulatorName) =&gt; {</span><span class="s3">\n    </span><span class="s1">// skip those already booted</span><span class="s3">\n    </span><span class="s1">if (allDevices.some((device) =&gt; device.readableName === emulatorName)) {</span><span class="s3">\n      </span><span class="s1">return;</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">const emulatorData: DeviceData = {</span><span class="s3">\n      </span><span class="s1">deviceId: undefined,</span><span class="s3">\n      </span><span class="s1">readableName: emulatorName,</span><span class="s3">\n      </span><span class="s1">type: 'emulator',</span><span class="s3">\n      </span><span class="s1">connected: false,</span><span class="s3">\n    </span><span class="s1">};</span><span class="s3">\n    </span><span class="s1">allDevices = [...allDevices, emulatorData];</span><span class="s3">\n  </span><span class="s1">});</span><span class="s3">\n\n  </span><span class="s1">const selectedDevice = await promptForDeviceSelection(allDevices);</span><span class="s3">\n  </span><span class="s1">return selectedDevice;</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">export default listAndroidDevices;</span><span class="s3">\n</span><span class="s1">&quot;</span><span class="s0">],</span><span class="s1">&quot;mappings&quot;</span><span class="s0">:</span><span class="s1">&quot;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&quot;</span><span class="s0">}</span></pre>
</body>
</html>