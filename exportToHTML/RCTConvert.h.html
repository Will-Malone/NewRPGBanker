<html>
<head>
<title>RCTConvert.h</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<style type="text/css">
.s0 { color: #808080;}
.s1 { color: #a9b7c6;}
.s2 { color: #bbb529;}
.s3 { color: #6a8759;}
.s4 { color: #cc7832;}
.s5 { color: #6897bb;}
</style>
</head>
<body bgcolor="#2b2b2b">
<table CELLSPACING=0 CELLPADDING=5 COLS=1 WIDTH="100%" BGCOLOR="#606060" >
<tr><td><center>
<font face="Arial, Helvetica" color="#000000">
RCTConvert.h</font>
</center></td></tr></table>
<pre><span class="s0">/* 
 * Copyright (c) Meta Platforms, Inc. and affiliates. 
 * 
 * This source code is licensed under the MIT license found in the 
 * LICENSE file in the root directory of this source tree. 
 */</span>

<span class="s2">#import </span><span class="s3">&lt;QuartzCore/QuartzCore.h&gt;</span>
<span class="s2">#import </span><span class="s3">&lt;UIKit/UIKit.h&gt;</span>

<span class="s2">#import </span><span class="s3">&lt;React/RCTAnimationType.h&gt;</span>
<span class="s2">#import </span><span class="s3">&lt;React/RCTBorderCurve.h&gt;</span>
<span class="s2">#import </span><span class="s3">&lt;React/RCTBorderStyle.h&gt;</span>
<span class="s2">#import </span><span class="s3">&lt;React/RCTDefines.h&gt;</span>
<span class="s2">#import </span><span class="s3">&lt;React/RCTLog.h&gt;</span>
<span class="s2">#import </span><span class="s3">&lt;React/RCTPointerEvents.h&gt;</span>
<span class="s2">#import </span><span class="s3">&lt;React/RCTTextDecorationLineType.h&gt;</span>
<span class="s2">#import </span><span class="s3">&lt;yoga/Yoga.h&gt;</span>
<span class="s2">#if </span><span class="s1">TARGET_OS_IPHONE</span>
<span class="s2">#import </span><span class="s3">&lt;WebKit/WebKit.h&gt;</span>
<span class="s2">#endif</span>

<span class="s0">/** 
 * This class provides a collection of conversion functions for mapping 
 * JSON objects to native types and classes. These are useful when writing 
 * custom RCTViewManager setter methods. 
 */</span>
<span class="s4">@interface </span><span class="s1">RCTConvert : NSObject</span>

<span class="s1">+ (id)id:(id)json</span><span class="s4">;</span>

<span class="s1">+ (BOOL)BOOL:(id)json</span><span class="s4">;</span>
<span class="s1">+ (</span><span class="s4">double</span><span class="s1">)</span><span class="s4">double</span><span class="s1">:(id)json</span><span class="s4">;</span>
<span class="s1">+ (</span><span class="s4">float</span><span class="s1">)</span><span class="s4">float</span><span class="s1">:(id)json</span><span class="s4">;</span>
<span class="s1">+ (</span><span class="s4">int</span><span class="s1">)</span><span class="s4">int</span><span class="s1">:(id)json</span><span class="s4">;</span>

<span class="s1">+ (int64_t)int64_t:(id)json</span><span class="s4">;</span>
<span class="s1">+ (uint64_t)uint64_t:(id)json</span><span class="s4">;</span>

<span class="s1">+ (NSInteger)NSInteger:(id)json</span><span class="s4">;</span>
<span class="s1">+ (NSUInteger)NSUInteger:(id)json</span><span class="s4">;</span>

<span class="s1">+ (NSArray *)NSArray:(id)json</span><span class="s4">;</span>
<span class="s1">+ (NSDictionary *)NSDictionary:(id)json</span><span class="s4">;</span>
<span class="s1">+ (NSString *)NSString:(id)json</span><span class="s4">;</span>
<span class="s1">+ (NSNumber *)NSNumber:(id)json</span><span class="s4">;</span>

<span class="s1">+ (NSSet *)NSSet:(id)json</span><span class="s4">;</span>
<span class="s1">+ (NSData *)NSData:(id)json</span><span class="s4">;</span>
<span class="s1">+ (NSIndexSet *)NSIndexSet:(id)json</span><span class="s4">;</span>

<span class="s1">+ (NSURLRequestCachePolicy)NSURLRequestCachePolicy:(id)json</span><span class="s4">;</span>
<span class="s1">+ (NSURL *)NSURL:(id)json</span><span class="s4">;</span>
<span class="s1">+ (NSURLRequest *)NSURLRequest:(id)json</span><span class="s4">;</span>

<span class="s4">typedef </span><span class="s1">NSURL RCTFileURL</span><span class="s4">;</span>
<span class="s1">+ (RCTFileURL *)RCTFileURL:(id)json</span><span class="s4">;</span>

<span class="s1">+ (NSDate *)NSDate:(id)json</span><span class="s4">;</span>
<span class="s1">+ (NSLocale *)NSLocale:(id)json</span><span class="s4">;</span>
<span class="s1">+ (NSTimeZone *)NSTimeZone:(id)json</span><span class="s4">;</span>
<span class="s1">+ (NSTimeInterval)NSTimeInterval:(id)json</span><span class="s4">;</span>

<span class="s1">+ (NSLineBreakMode)NSLineBreakMode:(id)json</span><span class="s4">;</span>
<span class="s1">+ (NSTextAlignment)NSTextAlignment:(id)json</span><span class="s4">;</span>
<span class="s1">+ (NSUnderlineStyle)NSUnderlineStyle:(id)json</span><span class="s4">;</span>
<span class="s1">+ (NSWritingDirection)NSWritingDirection:(id)json</span><span class="s4">;</span>
<span class="s1">+ (NSLineBreakStrategy)NSLineBreakStrategy:(id)json</span><span class="s4">;</span>
<span class="s1">+ (UITextAutocapitalizationType)UITextAutocapitalizationType:(id)json</span><span class="s4">;</span>
<span class="s1">+ (UITextFieldViewMode)UITextFieldViewMode:(id)json</span><span class="s4">;</span>
<span class="s1">+ (UIKeyboardType)UIKeyboardType:(id)json</span><span class="s4">;</span>
<span class="s1">+ (UIKeyboardAppearance)UIKeyboardAppearance:(id)json</span><span class="s4">;</span>
<span class="s1">+ (UIReturnKeyType)UIReturnKeyType:(id)json</span><span class="s4">;</span>
<span class="s1">+ (UIUserInterfaceStyle)UIUserInterfaceStyle:(id)json API_AVAILABLE(ios(</span><span class="s5">12</span><span class="s1">))</span><span class="s4">;</span>
<span class="s2">#if </span><span class="s1">!TARGET_OS_TV</span>
<span class="s1">+ (UIDataDetectorTypes)UIDataDetectorTypes:(id)json</span><span class="s4">;</span>
<span class="s2">#endif</span>

<span class="s2">#if </span><span class="s1">TARGET_OS_IPHONE</span>
<span class="s1">+ (WKDataDetectorTypes)WKDataDetectorTypes:(id)json</span><span class="s4">;</span>
<span class="s2">#endif</span>

<span class="s1">+ (UIViewContentMode)UIViewContentMode:(id)json</span><span class="s4">;</span>
<span class="s2">#if </span><span class="s1">!TARGET_OS_TV</span>
<span class="s1">+ (UIBarStyle)UIBarStyle:(id)json</span><span class="s4">;</span>
<span class="s2">#endif</span>

<span class="s1">+ (CGFloat)CGFloat:(id)json</span><span class="s4">;</span>
<span class="s1">+ (CGPoint)CGPoint:(id)json</span><span class="s4">;</span>
<span class="s1">+ (CGSize)CGSize:(id)json</span><span class="s4">;</span>
<span class="s1">+ (CGRect)CGRect:(id)json</span><span class="s4">;</span>
<span class="s1">+ (UIEdgeInsets)UIEdgeInsets:(id)json</span><span class="s4">;</span>

<span class="s1">+ (CGLineCap)CGLineCap:(id)json</span><span class="s4">;</span>
<span class="s1">+ (CGLineJoin)CGLineJoin:(id)json</span><span class="s4">;</span>

<span class="s1">+ (CGAffineTransform)CGAffineTransform:(id)json</span><span class="s4">;</span>

<span class="s1">+ (UIColor *)UIColor:(id)json</span><span class="s4">;</span>
<span class="s1">+ (CGColorRef)CGColor:(id)json CF_RETURNS_NOT_RETAINED</span><span class="s4">;</span>

<span class="s1">+ (YGValue)YGValue:(id)json</span><span class="s4">;</span>

<span class="s1">+ (NSArray&lt;NSArray *&gt; *)NSArrayArray:(id)json</span><span class="s4">;</span>
<span class="s1">+ (NSArray&lt;NSString *&gt; *)NSStringArray:(id)json</span><span class="s4">;</span>
<span class="s1">+ (NSArray&lt;NSArray&lt;NSString *&gt; *&gt; *)NSStringArrayArray:(id)json</span><span class="s4">;</span>
<span class="s1">+ (NSArray&lt;NSDictionary *&gt; *)NSDictionaryArray:(id)json</span><span class="s4">;</span>
<span class="s1">+ (NSArray&lt;NSURL *&gt; *)NSURLArray:(id)json</span><span class="s4">;</span>
<span class="s1">+ (NSArray&lt;RCTFileURL *&gt; *)RCTFileURLArray:(id)json</span><span class="s4">;</span>
<span class="s1">+ (NSArray&lt;NSNumber *&gt; *)NSNumberArray:(id)json</span><span class="s4">;</span>
<span class="s1">+ (NSArray&lt;UIColor *&gt; *)UIColorArray:(id)json</span><span class="s4">;</span>

<span class="s4">typedef </span><span class="s1">NSArray CGColorArray</span><span class="s4">;</span>
<span class="s1">+ (CGColorArray *)CGColorArray:(id)json</span><span class="s4">;</span>

<span class="s0">/** 
 * Convert a JSON object to a Plist-safe equivalent by stripping null values. 
 */</span>
<span class="s4">typedef </span><span class="s1">id NSPropertyList</span><span class="s4">;</span>
<span class="s1">+ (NSPropertyList)NSPropertyList:(id)json</span><span class="s4">;</span>

<span class="s4">typedef </span><span class="s1">BOOL css_backface_visibility_t</span><span class="s4">;</span>
<span class="s1">+ (YGOverflow)YGOverflow:(id)json</span><span class="s4">;</span>
<span class="s1">+ (YGDisplay)YGDisplay:(id)json</span><span class="s4">;</span>
<span class="s1">+ (css_backface_visibility_t)css_backface_visibility_t:(id)json</span><span class="s4">;</span>
<span class="s1">+ (YGFlexDirection)YGFlexDirection:(id)json</span><span class="s4">;</span>
<span class="s1">+ (YGJustify)YGJustify:(id)json</span><span class="s4">;</span>
<span class="s1">+ (YGAlign)YGAlign:(id)json</span><span class="s4">;</span>
<span class="s1">+ (YGPositionType)YGPositionType:(id)json</span><span class="s4">;</span>
<span class="s1">+ (YGWrap)YGWrap:(id)json</span><span class="s4">;</span>
<span class="s1">+ (YGDirection)YGDirection:(id)json</span><span class="s4">;</span>

<span class="s1">+ (RCTPointerEvents)RCTPointerEvents:(id)json</span><span class="s4">;</span>
<span class="s1">+ (RCTAnimationType)RCTAnimationType:(id)json</span><span class="s4">;</span>
<span class="s1">+ (RCTBorderStyle)RCTBorderStyle:(id)json</span><span class="s4">;</span>
<span class="s1">+ (RCTBorderCurve)RCTBorderCurve:(id)json</span><span class="s4">;</span>
<span class="s1">+ (RCTTextDecorationLineType)RCTTextDecorationLineType:(id)json</span><span class="s4">;</span>

<span class="s4">@end</span>

<span class="s4">@interface </span><span class="s1">RCTConvert (Deprecated)</span>

<span class="s0">/** 
 * Use lightweight generics syntax instead, e.g. NSArray&lt;NSString *&gt; 
 */</span>
<span class="s4">typedef </span><span class="s1">NSArray NSArrayArray __deprecated_msg(</span><span class="s3">&quot;Use NSArray&lt;NSArray *&gt;&quot;</span><span class="s1">)</span><span class="s4">;</span>
<span class="s4">typedef </span><span class="s1">NSArray NSStringArray __deprecated_msg(</span><span class="s3">&quot;Use NSArray&lt;NSString *&gt;&quot;</span><span class="s1">)</span><span class="s4">;</span>
<span class="s4">typedef </span><span class="s1">NSArray NSStringArrayArray __deprecated_msg(</span><span class="s3">&quot;Use NSArray&lt;NSArray&lt;NSString *&gt; *&gt;&quot;</span><span class="s1">)</span><span class="s4">;</span>
<span class="s4">typedef </span><span class="s1">NSArray NSDictionaryArray __deprecated_msg(</span><span class="s3">&quot;Use NSArray&lt;NSDictionary *&gt;&quot;</span><span class="s1">)</span><span class="s4">;</span>
<span class="s4">typedef </span><span class="s1">NSArray NSURLArray __deprecated_msg(</span><span class="s3">&quot;Use NSArray&lt;NSURL *&gt;&quot;</span><span class="s1">)</span><span class="s4">;</span>
<span class="s4">typedef </span><span class="s1">NSArray RCTFileURLArray __deprecated_msg(</span><span class="s3">&quot;Use NSArray&lt;RCTFileURL *&gt;&quot;</span><span class="s1">)</span><span class="s4">;</span>
<span class="s4">typedef </span><span class="s1">NSArray NSNumberArray __deprecated_msg(</span><span class="s3">&quot;Use NSArray&lt;NSNumber *&gt;&quot;</span><span class="s1">)</span><span class="s4">;</span>
<span class="s4">typedef </span><span class="s1">NSArray UIColorArray __deprecated_msg(</span><span class="s3">&quot;Use NSArray&lt;UIColor *&gt;&quot;</span><span class="s1">)</span><span class="s4">;</span>

<span class="s0">/** 
 * Synchronous image loading is generally a bad idea for performance reasons. 
 * If you need to pass image references, try to use `RCTImageSource` and then 
 * `RCTImageLoader` instead of converting directly to a UIImage. 
 */</span>
<span class="s1">+ (UIImage *)UIImage:(id)json</span><span class="s4">;</span>
<span class="s1">+ (CGImageRef)CGImage:(id)json CF_RETURNS_NOT_RETAINED</span><span class="s4">;</span>

<span class="s4">@end</span>

<span class="s0">/** 
 * Underlying implementations of RCT_XXX_CONVERTER macros. Ignore these. 
 */</span>
<span class="s1">RCT_EXTERN NSNumber *RCTConvertEnumValue(</span><span class="s4">const char </span><span class="s1">*</span><span class="s4">, </span><span class="s1">NSDictionary *</span><span class="s4">, </span><span class="s1">NSNumber *</span><span class="s4">, </span><span class="s1">id)</span><span class="s4">;</span>
<span class="s1">RCT_EXTERN NSNumber *RCTConvertMultiEnumValue(</span><span class="s4">const char </span><span class="s1">*</span><span class="s4">, </span><span class="s1">NSDictionary *</span><span class="s4">, </span><span class="s1">NSNumber *</span><span class="s4">, </span><span class="s1">id)</span><span class="s4">;</span>
<span class="s1">RCT_EXTERN NSArray *RCTConvertArrayValue(SEL</span><span class="s4">, </span><span class="s1">id)</span><span class="s4">;</span>

<span class="s0">/** 
 * This macro is used for logging conversion errors. This is just used to 
 * avoid repeating the same boilerplate for every error message. 
 */</span>
<span class="s2">#define </span><span class="s1">RCTLogConvertError(json</span><span class="s4">, </span><span class="s1">typeName) \ 
  RCTLogInfo(</span><span class="s4">@</span><span class="s3">&quot;JSON value '%@' of type %@ cannot be converted to %@&quot;</span><span class="s4">, </span><span class="s1">json</span><span class="s4">, </span><span class="s1">[json classForCoder]</span><span class="s4">, </span><span class="s1">typeName)</span>

<span class="s0">/** 
 * This macro is used for creating simple converter functions that just call 
 * the specified getter method on the json value. 
 */</span>
<span class="s2">#define </span><span class="s1">RCT_CONVERTER(type</span><span class="s4">, </span><span class="s1">name</span><span class="s4">, </span><span class="s1">getter) RCT_CUSTOM_CONVERTER(type</span><span class="s4">, </span><span class="s1">name</span><span class="s4">, </span><span class="s1">[json getter])</span>

<span class="s0">/** 
 * This macro is used for creating converter functions with arbitrary logic. 
 */</span>
<span class="s2">#define </span><span class="s1">RCT_CUSTOM_CONVERTER(type</span><span class="s4">, </span><span class="s1">name</span><span class="s4">, </span><span class="s1">code) \ 
  +(type)name : (id)json RCT_DYNAMIC           \ 
  {                                            \ 
    </span><span class="s4">if </span><span class="s1">(!RCT_DEBUG) {                          \ 
      </span><span class="s4">return </span><span class="s1">code</span><span class="s4">;                             </span><span class="s1">\ 
    } </span><span class="s4">else </span><span class="s1">{                                   \ 
      </span><span class="s4">@try </span><span class="s1">{                                   \ 
        </span><span class="s4">return </span><span class="s1">code</span><span class="s4">;                           </span><span class="s1">\ 
      } </span><span class="s4">@catch </span><span class="s1">(__unused NSException * e) {    \ 
        RCTLogConvertError(json</span><span class="s4">, @ </span><span class="s1">#type)</span><span class="s4">;     </span><span class="s1">\ 
        json = nil</span><span class="s4">;                            </span><span class="s1">\ 
        </span><span class="s4">return </span><span class="s1">code</span><span class="s4">;                           </span><span class="s1">\ 
      }                                        \ 
    }                                          \ 
  }</span>

<span class="s0">/** 
 * This macro is similar to RCT_CONVERTER, but specifically geared towards 
 * numeric types. It will handle string input correctly, and provides more 
 * detailed error reporting if an invalid value is passed in. 
 */</span>
<span class="s2">#define </span><span class="s1">RCT_NUMBER_CONVERTER(type</span><span class="s4">, </span><span class="s1">getter) \ 
  RCT_CUSTOM_CONVERTER(type</span><span class="s4">, </span><span class="s1">type</span><span class="s4">, </span><span class="s1">[RCT_DEBUG ? [self NSNumber:json] : json getter])</span>

<span class="s0">/** 
 * When using RCT_ENUM_CONVERTER in ObjC, the compiler is OK with us returning 
 * the underlying NSInteger/NSUInteger. In ObjC++, this is a type mismatch and 
 * we need to explicitly cast the return value to expected enum return type. 
 */</span>
<span class="s2">#ifdef </span><span class="s1">__cplusplus</span>
<span class="s2">#define </span><span class="s1">_RCT_CAST(type</span><span class="s4">, </span><span class="s1">expr) </span><span class="s4">static_cast</span><span class="s1">&lt;type&gt;(expr)</span>
<span class="s2">#else</span>
<span class="s2">#define </span><span class="s1">_RCT_CAST(type</span><span class="s4">, </span><span class="s1">expr) expr</span>
<span class="s2">#endif</span>

<span class="s0">/** 
 * This macro is used for creating converters for enum types. 
 */</span>
<span class="s2">#define </span><span class="s1">RCT_ENUM_CONVERTER(type</span><span class="s4">, </span><span class="s1">values</span><span class="s4">, default, </span><span class="s1">getter)                                   \ 
  +(type)type : (id)json RCT_DYNAMIC                                                        \ 
  {                                                                                         \ 
    </span><span class="s4">static </span><span class="s1">NSDictionary *mapping</span><span class="s4">;                                                           </span><span class="s1">\ 
    </span><span class="s4">static </span><span class="s1">dispatch_once_t onceToken</span><span class="s4">;                                                       </span><span class="s1">\ 
    dispatch_once(&amp;onceToken</span><span class="s4">, </span><span class="s1">^{                                                            \ 
      mapping = values</span><span class="s4">;                                                                     </span><span class="s1">\ 
    })</span><span class="s4">;                                                                                     </span><span class="s1">\ 
    </span><span class="s4">return </span><span class="s1">_RCT_CAST(type</span><span class="s4">, </span><span class="s1">[RCTConvertEnumValue(#type</span><span class="s4">, </span><span class="s1">mapping</span><span class="s4">, @</span><span class="s1">(</span><span class="s4">default</span><span class="s1">)</span><span class="s4">, </span><span class="s1">json) getter])</span><span class="s4">; </span><span class="s1">\ 
  }</span>

<span class="s0">/** 
 * This macro is used for creating converters for enum types for 
 * multiple enum values combined with | operator 
 */</span>
<span class="s2">#define </span><span class="s1">RCT_MULTI_ENUM_CONVERTER(type</span><span class="s4">, </span><span class="s1">values</span><span class="s4">, default, </span><span class="s1">getter)                                  \ 
  +(type)type : (id)json RCT_DYNAMIC                                                             \ 
  {                                                                                              \ 
    </span><span class="s4">static </span><span class="s1">NSDictionary *mapping</span><span class="s4">;                                                                </span><span class="s1">\ 
    </span><span class="s4">static </span><span class="s1">dispatch_once_t onceToken</span><span class="s4">;                                                            </span><span class="s1">\ 
    dispatch_once(&amp;onceToken</span><span class="s4">, </span><span class="s1">^{                                                                 \ 
      mapping = values</span><span class="s4">;                                                                          </span><span class="s1">\ 
    })</span><span class="s4">;                                                                                          </span><span class="s1">\ 
    </span><span class="s4">return </span><span class="s1">_RCT_CAST(type</span><span class="s4">, </span><span class="s1">[RCTConvertMultiEnumValue(#type</span><span class="s4">, </span><span class="s1">mapping</span><span class="s4">, @</span><span class="s1">(</span><span class="s4">default</span><span class="s1">)</span><span class="s4">, </span><span class="s1">json) getter])</span><span class="s4">; </span><span class="s1">\ 
  }</span>

<span class="s0">/** 
 * This macro is used for creating explicitly-named converter functions 
 * for typed arrays. 
 */</span>
<span class="s2">#define </span><span class="s1">RCT_ARRAY_CONVERTER_NAMED(type</span><span class="s4">, </span><span class="s1">name)            \ 
  +(NSArray&lt;type *&gt; *)name##Array : (id)json RCT_DYNAMIC \ 
  {                                                      \ 
    </span><span class="s4">return </span><span class="s1">RCTConvertArrayValue(</span><span class="s4">@selector</span><span class="s1">(name:)</span><span class="s4">, </span><span class="s1">json)</span><span class="s4">; </span><span class="s1">\ 
  }</span>

<span class="s0">/** 
 * This macro is used for creating converter functions for typed arrays. 
 * RCT_ARRAY_CONVERTER_NAMED may be used when type contains characters 
 * which are disallowed in selector names. 
 */</span>
<span class="s2">#define </span><span class="s1">RCT_ARRAY_CONVERTER(type) RCT_ARRAY_CONVERTER_NAMED(type</span><span class="s4">, </span><span class="s1">type)</span>
</pre>
</body>
</html>