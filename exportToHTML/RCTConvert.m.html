<html>
<head>
<title>RCTConvert.m</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<style type="text/css">
.s0 { color: #808080;}
.s1 { color: #a9b7c6;}
.s2 { color: #bbb529;}
.s3 { color: #6a8759;}
.s4 { color: #cc7832;}
.s5 { color: #6897bb;}
</style>
</head>
<body bgcolor="#2b2b2b">
<table CELLSPACING=0 CELLPADDING=5 COLS=1 WIDTH="100%" BGCOLOR="#606060" >
<tr><td><center>
<font face="Arial, Helvetica" color="#000000">
RCTConvert.m</font>
</center></td></tr></table>
<pre><span class="s0">/* 
 * Copyright (c) Meta Platforms, Inc. and affiliates. 
 * 
 * This source code is licensed under the MIT license found in the 
 * LICENSE file in the root directory of this source tree. 
 */</span>

<span class="s2">#import </span><span class="s3">&quot;RCTConvert.h&quot;</span>

<span class="s2">#import </span><span class="s3">&lt;objc/message.h&gt;</span>

<span class="s2">#import </span><span class="s3">&lt;CoreText/CoreText.h&gt;</span>

<span class="s2">#import </span><span class="s3">&quot;RCTDefines.h&quot;</span>
<span class="s2">#import </span><span class="s3">&quot;RCTImageSource.h&quot;</span>
<span class="s2">#import </span><span class="s3">&quot;RCTParserUtils.h&quot;</span>
<span class="s2">#import </span><span class="s3">&quot;RCTUtils.h&quot;</span>

<span class="s4">@implementation </span><span class="s1">RCTConvert</span>

<span class="s1">RCT_CONVERTER(id</span><span class="s4">, </span><span class="s1">id</span><span class="s4">, </span><span class="s1">self)</span>

<span class="s1">RCT_CONVERTER(BOOL</span><span class="s4">, </span><span class="s1">BOOL</span><span class="s4">, </span><span class="s1">boolValue)</span>
<span class="s1">RCT_NUMBER_CONVERTER(</span><span class="s4">double, </span><span class="s1">doubleValue)</span>
<span class="s1">RCT_NUMBER_CONVERTER(</span><span class="s4">float, </span><span class="s1">floatValue)</span>
<span class="s1">RCT_NUMBER_CONVERTER(</span><span class="s4">int, </span><span class="s1">intValue)</span>

<span class="s1">RCT_NUMBER_CONVERTER(int64_t</span><span class="s4">, </span><span class="s1">longLongValue)</span><span class="s4">;</span>
<span class="s1">RCT_NUMBER_CONVERTER(uint64_t</span><span class="s4">, </span><span class="s1">unsignedLongLongValue)</span><span class="s4">;</span>

<span class="s1">RCT_NUMBER_CONVERTER(NSInteger</span><span class="s4">, </span><span class="s1">integerValue)</span>
<span class="s1">RCT_NUMBER_CONVERTER(NSUInteger</span><span class="s4">, </span><span class="s1">unsignedIntegerValue)</span>

<span class="s0">/** 
 * This macro is used for creating converter functions for directly 
 * representable json values that require no conversion. 
 */</span>
<span class="s2">#if </span><span class="s1">RCT_DEBUG</span>
<span class="s2">#define </span><span class="s1">RCT_JSON_CONVERTER(type)             \ 
  +(type *)type : (id)json                   \ 
  {                                          \ 
    </span><span class="s4">if </span><span class="s1">([json isKindOfClass:[type </span><span class="s4">class</span><span class="s1">]]) { \ 
      </span><span class="s4">return </span><span class="s1">json</span><span class="s4">;                           </span><span class="s1">\ 
    } </span><span class="s4">else if </span><span class="s1">(json) {                       \ 
      RCTLogConvertError(json</span><span class="s4">, @ </span><span class="s1">#type)</span><span class="s4">;     </span><span class="s1">\ 
    }                                        \ 
    </span><span class="s4">return </span><span class="s1">nil</span><span class="s4">;                              </span><span class="s1">\ 
  }</span>
<span class="s2">#else</span>
<span class="s2">#define </span><span class="s1">RCT_JSON_CONVERTER(type) \ 
  +(type *)type : (id)json       \ 
  {                              \ 
    </span><span class="s4">return </span><span class="s1">json</span><span class="s4">;                 </span><span class="s1">\ 
  }</span>
<span class="s2">#endif</span>

<span class="s1">RCT_JSON_CONVERTER(NSArray)</span>
<span class="s1">RCT_JSON_CONVERTER(NSDictionary)</span>
<span class="s1">RCT_JSON_CONVERTER(NSString)</span>
<span class="s1">RCT_JSON_CONVERTER(NSNumber)</span>

<span class="s1">RCT_CUSTOM_CONVERTER(NSSet *</span><span class="s4">, </span><span class="s1">NSSet</span><span class="s4">, </span><span class="s1">[NSSet setWithArray:json])</span>
<span class="s1">RCT_CUSTOM_CONVERTER(NSData *</span><span class="s4">, </span><span class="s1">NSData</span><span class="s4">, </span><span class="s1">[json dataUsingEncoding:NSUTF8StringEncoding])</span>

<span class="s1">+ (NSIndexSet *)NSIndexSet:(id)json</span>
<span class="s1">{</span>
  <span class="s1">json = [self NSNumberArray:json]</span><span class="s4">;</span>
  <span class="s1">NSMutableIndexSet *indexSet = [NSMutableIndexSet new]</span><span class="s4">;</span>
  <span class="s4">for </span><span class="s1">(NSNumber *number in json) {</span>
    <span class="s1">NSInteger index = number.integerValue</span><span class="s4">;</span>
    <span class="s4">if </span><span class="s1">(RCT_DEBUG &amp;&amp; index &lt; </span><span class="s5">0</span><span class="s1">) {</span>
      <span class="s1">RCTLogInfo(</span><span class="s4">@</span><span class="s3">&quot;Invalid index value %lld. Indices must be positive.&quot;</span><span class="s4">, </span><span class="s1">(</span><span class="s4">long long</span><span class="s1">)index)</span><span class="s4">;</span>
    <span class="s1">}</span>
    <span class="s1">[indexSet addIndex:index]</span><span class="s4">;</span>
  <span class="s1">}</span>
  <span class="s4">return </span><span class="s1">indexSet</span><span class="s4">;</span>
<span class="s1">}</span>

<span class="s1">+ (NSURL *)NSURL:(id)json</span>
<span class="s1">{</span>
  <span class="s1">NSString *path = [self NSString:RCTNilIfNull(json)]</span><span class="s4">;</span>
  <span class="s4">if </span><span class="s1">(!path) {</span>
    <span class="s4">return </span><span class="s1">nil</span><span class="s4">;</span>
  <span class="s1">}</span>

  <span class="s4">@try </span><span class="s1">{ </span><span class="s0">// NSURL has a history of crashing with bad input, so let's be safe</span>

    <span class="s1">NSURL *URL = [NSURL URLWithString:path]</span><span class="s4">;</span>
    <span class="s4">if </span><span class="s1">(URL.scheme) { </span><span class="s0">// Was a well-formed absolute URL</span>
      <span class="s4">return </span><span class="s1">URL</span><span class="s4">;</span>
    <span class="s1">}</span>

    <span class="s0">// Check if it has a scheme</span>
    <span class="s4">if </span><span class="s1">([path rangeOfString:</span><span class="s4">@</span><span class="s3">&quot;://&quot;</span><span class="s1">].location != NSNotFound) {</span>
      <span class="s1">NSMutableCharacterSet *urlAllowedCharacterSet = [NSMutableCharacterSet new]</span><span class="s4">;</span>
      <span class="s1">[urlAllowedCharacterSet formUnionWithCharacterSet:[NSCharacterSet URLUserAllowedCharacterSet]]</span><span class="s4">;</span>
      <span class="s1">[urlAllowedCharacterSet formUnionWithCharacterSet:[NSCharacterSet URLPasswordAllowedCharacterSet]]</span><span class="s4">;</span>
      <span class="s1">[urlAllowedCharacterSet formUnionWithCharacterSet:[NSCharacterSet URLHostAllowedCharacterSet]]</span><span class="s4">;</span>
      <span class="s1">[urlAllowedCharacterSet formUnionWithCharacterSet:[NSCharacterSet URLPathAllowedCharacterSet]]</span><span class="s4">;</span>
      <span class="s1">[urlAllowedCharacterSet formUnionWithCharacterSet:[NSCharacterSet URLQueryAllowedCharacterSet]]</span><span class="s4">;</span>
      <span class="s1">[urlAllowedCharacterSet formUnionWithCharacterSet:[NSCharacterSet URLFragmentAllowedCharacterSet]]</span><span class="s4">;</span>
      <span class="s1">path = [path stringByAddingPercentEncodingWithAllowedCharacters:urlAllowedCharacterSet]</span><span class="s4">;</span>
      <span class="s1">URL = [NSURL URLWithString:path]</span><span class="s4">;</span>
      <span class="s4">if </span><span class="s1">(URL) {</span>
        <span class="s4">return </span><span class="s1">URL</span><span class="s4">;</span>
      <span class="s1">}</span>
    <span class="s1">}</span>

    <span class="s0">// Assume that it's a local path</span>
    <span class="s1">path = path.stringByRemovingPercentEncoding</span><span class="s4">;</span>
    <span class="s4">if </span><span class="s1">([path hasPrefix:</span><span class="s4">@</span><span class="s3">&quot;~&quot;</span><span class="s1">]) {</span>
      <span class="s0">// Path is inside user directory</span>
      <span class="s1">path = path.stringByExpandingTildeInPath</span><span class="s4">;</span>
    <span class="s1">} </span><span class="s4">else if </span><span class="s1">(!path.absolutePath) {</span>
      <span class="s0">// Assume it's a resource path</span>
      <span class="s1">path = [[NSBundle mainBundle].resourcePath stringByAppendingPathComponent:path]</span><span class="s4">;</span>
    <span class="s1">}</span>
    <span class="s4">if </span><span class="s1">(!(URL = [NSURL fileURLWithPath:path])) {</span>
      <span class="s1">RCTLogConvertError(json</span><span class="s4">, @</span><span class="s3">&quot;a valid URL&quot;</span><span class="s1">)</span><span class="s4">;</span>
    <span class="s1">}</span>
    <span class="s4">return </span><span class="s1">URL</span><span class="s4">;</span>
  <span class="s1">} </span><span class="s4">@catch </span><span class="s1">(__unused NSException *e) {</span>
    <span class="s1">RCTLogConvertError(json</span><span class="s4">, @</span><span class="s3">&quot;a valid URL&quot;</span><span class="s1">)</span><span class="s4">;</span>
    <span class="s4">return </span><span class="s1">nil</span><span class="s4">;</span>
  <span class="s1">}</span>
<span class="s1">}</span>

<span class="s1">RCT_ENUM_CONVERTER(</span>
    <span class="s1">NSURLRequestCachePolicy</span><span class="s4">,</span>
    <span class="s1">(</span><span class="s4">@</span><span class="s1">{</span>
      <span class="s4">@</span><span class="s3">&quot;default&quot; </span><span class="s1">: </span><span class="s4">@</span><span class="s1">(NSURLRequestUseProtocolCachePolicy)</span><span class="s4">,</span>
      <span class="s4">@</span><span class="s3">&quot;reload&quot; </span><span class="s1">: </span><span class="s4">@</span><span class="s1">(NSURLRequestReloadIgnoringLocalCacheData)</span><span class="s4">,</span>
      <span class="s4">@</span><span class="s3">&quot;force-cache&quot; </span><span class="s1">: </span><span class="s4">@</span><span class="s1">(NSURLRequestReturnCacheDataElseLoad)</span><span class="s4">,</span>
      <span class="s4">@</span><span class="s3">&quot;only-if-cached&quot; </span><span class="s1">: </span><span class="s4">@</span><span class="s1">(NSURLRequestReturnCacheDataDontLoad)</span><span class="s4">,</span>
    <span class="s1">})</span><span class="s4">,</span>
    <span class="s1">NSURLRequestUseProtocolCachePolicy</span><span class="s4">,</span>
    <span class="s1">integerValue)</span>

<span class="s1">+ (NSURLRequest *)NSURLRequest:(id)json</span>
<span class="s1">{</span>
  <span class="s4">if </span><span class="s1">([json isKindOfClass:[NSString </span><span class="s4">class</span><span class="s1">]]) {</span>
    <span class="s1">NSURL *URL = [self NSURL:json]</span><span class="s4">;</span>
    <span class="s4">return </span><span class="s1">URL ? [NSURLRequest requestWithURL:URL] : nil</span><span class="s4">;</span>
  <span class="s1">}</span>
  <span class="s4">if </span><span class="s1">([json isKindOfClass:[NSDictionary </span><span class="s4">class</span><span class="s1">]]) {</span>
    <span class="s1">NSString *URLString = json[</span><span class="s4">@</span><span class="s3">&quot;uri&quot;</span><span class="s1">] ?: json[</span><span class="s4">@</span><span class="s3">&quot;url&quot;</span><span class="s1">]</span><span class="s4">;</span>

    <span class="s1">NSURL *URL</span><span class="s4">;</span>
    <span class="s1">NSString *bundleName = json[</span><span class="s4">@</span><span class="s3">&quot;bundle&quot;</span><span class="s1">]</span><span class="s4">;</span>
    <span class="s4">if </span><span class="s1">(bundleName) {</span>
      <span class="s1">URLString = [NSString stringWithFormat:</span><span class="s4">@</span><span class="s3">&quot;%@.bundle/%@&quot;</span><span class="s4">, </span><span class="s1">bundleName</span><span class="s4">, </span><span class="s1">URLString]</span><span class="s4">;</span>
    <span class="s1">}</span>

    <span class="s1">URL = [self NSURL:URLString]</span><span class="s4">;</span>
    <span class="s4">if </span><span class="s1">(!URL) {</span>
      <span class="s4">return </span><span class="s1">nil</span><span class="s4">;</span>
    <span class="s1">}</span>

    <span class="s1">NSData *body = [self NSData:json[</span><span class="s4">@</span><span class="s3">&quot;body&quot;</span><span class="s1">]]</span><span class="s4">;</span>
    <span class="s1">NSString *method = [self NSString:json[</span><span class="s4">@</span><span class="s3">&quot;method&quot;</span><span class="s1">]].uppercaseString ?: </span><span class="s4">@</span><span class="s3">&quot;GET&quot;</span><span class="s4">;</span>
    <span class="s1">NSURLRequestCachePolicy cachePolicy = [self NSURLRequestCachePolicy:json[</span><span class="s4">@</span><span class="s3">&quot;cache&quot;</span><span class="s1">]]</span><span class="s4">;</span>
    <span class="s1">NSDictionary *headers = [self NSDictionary:json[</span><span class="s4">@</span><span class="s3">&quot;headers&quot;</span><span class="s1">]]</span><span class="s4">;</span>
    <span class="s4">if </span><span class="s1">([method isEqualToString:</span><span class="s4">@</span><span class="s3">&quot;GET&quot;</span><span class="s1">] &amp;&amp; headers == nil &amp;&amp; body == nil &amp;&amp;</span>
        <span class="s1">cachePolicy == NSURLRequestUseProtocolCachePolicy) {</span>
      <span class="s4">return </span><span class="s1">[NSURLRequest requestWithURL:URL]</span><span class="s4">;</span>
    <span class="s1">}</span>

    <span class="s4">if </span><span class="s1">(headers) {</span>
      <span class="s1">__block BOOL allHeadersAreStrings = YES</span><span class="s4">;</span>
      <span class="s1">[headers enumerateKeysAndObjectsUsingBlock:^(NSString *key</span><span class="s4">, </span><span class="s1">id header</span><span class="s4">, </span><span class="s1">BOOL *stop) {</span>
        <span class="s4">if </span><span class="s1">(![header isKindOfClass:[NSString </span><span class="s4">class</span><span class="s1">]]) {</span>
          <span class="s1">RCTLogInfo(</span>
              <span class="s4">@</span><span class="s3">&quot;Values of HTTP headers passed must be  of type string. &quot;</span>
               <span class="s3">&quot;Value of header '%@' is not a string.&quot;</span><span class="s4">,</span>
              <span class="s1">key)</span><span class="s4">;</span>
          <span class="s1">allHeadersAreStrings = NO</span><span class="s4">;</span>
          <span class="s1">*stop = YES</span><span class="s4">;</span>
        <span class="s1">}</span>
      <span class="s1">}]</span><span class="s4">;</span>
      <span class="s4">if </span><span class="s1">(!allHeadersAreStrings) {</span>
        <span class="s0">// Set headers to nil here to avoid crashing later.</span>
        <span class="s1">headers = nil</span><span class="s4">;</span>
      <span class="s1">}</span>
    <span class="s1">}</span>

    <span class="s1">NSMutableURLRequest *request = [NSMutableURLRequest requestWithURL:URL]</span><span class="s4">;</span>
    <span class="s1">request.HTTPBody = body</span><span class="s4">;</span>
    <span class="s1">request.HTTPMethod = method</span><span class="s4">;</span>
    <span class="s1">request.cachePolicy = cachePolicy</span><span class="s4">;</span>
    <span class="s1">request.allHTTPHeaderFields = headers</span><span class="s4">;</span>
    <span class="s4">return </span><span class="s1">[request copy]</span><span class="s4">;</span>
  <span class="s1">}</span>
  <span class="s4">if </span><span class="s1">(json) {</span>
    <span class="s1">RCTLogConvertError(json</span><span class="s4">, @</span><span class="s3">&quot;a valid URLRequest&quot;</span><span class="s1">)</span><span class="s4">;</span>
  <span class="s1">}</span>
  <span class="s4">return </span><span class="s1">nil</span><span class="s4">;</span>
<span class="s1">}</span>

<span class="s1">+ (RCTFileURL *)RCTFileURL:(id)json</span>
<span class="s1">{</span>
  <span class="s1">NSURL *fileURL = [self NSURL:json]</span><span class="s4">;</span>
  <span class="s4">if </span><span class="s1">(!fileURL.fileURL) {</span>
    <span class="s1">RCTLogInfo(</span><span class="s4">@</span><span class="s3">&quot;URI must be a local file, '%@' isn't.&quot;</span><span class="s4">, </span><span class="s1">fileURL)</span><span class="s4">;</span>
    <span class="s4">return </span><span class="s1">nil</span><span class="s4">;</span>
  <span class="s1">}</span>
  <span class="s4">if </span><span class="s1">(![[NSFileManager defaultManager] fileExistsAtPath:fileURL.path]) {</span>
    <span class="s1">RCTLogInfo(</span><span class="s4">@</span><span class="s3">&quot;File '%@' could not be found.&quot;</span><span class="s4">, </span><span class="s1">fileURL)</span><span class="s4">;</span>
    <span class="s4">return </span><span class="s1">nil</span><span class="s4">;</span>
  <span class="s1">}</span>
  <span class="s4">return </span><span class="s1">fileURL</span><span class="s4">;</span>
<span class="s1">}</span>

<span class="s1">+ (NSDate *)NSDate:(id)json</span>
<span class="s1">{</span>
  <span class="s4">if </span><span class="s1">([json isKindOfClass:[NSNumber </span><span class="s4">class</span><span class="s1">]]) {</span>
    <span class="s4">return </span><span class="s1">[NSDate dateWithTimeIntervalSince1970:[self NSTimeInterval:json]]</span><span class="s4">;</span>
  <span class="s1">} </span><span class="s4">else if </span><span class="s1">([json isKindOfClass:[NSString </span><span class="s4">class</span><span class="s1">]]) {</span>
    <span class="s4">static </span><span class="s1">NSDateFormatter *formatter</span><span class="s4">;</span>
    <span class="s4">static </span><span class="s1">dispatch_once_t onceToken</span><span class="s4">;</span>
    <span class="s1">dispatch_once(&amp;onceToken</span><span class="s4">, </span><span class="s1">^{</span>
      <span class="s1">formatter = [NSDateFormatter new]</span><span class="s4">;</span>
      <span class="s1">formatter.dateFormat = </span><span class="s4">@</span><span class="s3">&quot;yyyy-MM-dd'T'HH:mm:ss.SSSZZZZZ&quot;</span><span class="s4">;</span>
      <span class="s1">formatter.locale = [NSLocale localeWithLocaleIdentifier:</span><span class="s4">@</span><span class="s3">&quot;en_US_POSIX&quot;</span><span class="s1">]</span><span class="s4">;</span>
      <span class="s1">formatter.timeZone = [NSTimeZone timeZoneWithName:</span><span class="s4">@</span><span class="s3">&quot;UTC&quot;</span><span class="s1">]</span><span class="s4">;</span>
    <span class="s1">})</span><span class="s4">;</span>
    <span class="s1">NSDate *date = [formatter dateFromString:json]</span><span class="s4">;</span>
    <span class="s4">if </span><span class="s1">(!date) {</span>
      <span class="s1">RCTLogInfo(</span>
          <span class="s4">@</span><span class="s3">&quot;JSON String '%@' could not be interpreted as a date. &quot;</span>
           <span class="s3">&quot;Expected format: YYYY-MM-DD'T'HH:mm:ss.sssZ&quot;</span><span class="s4">,</span>
          <span class="s1">json)</span><span class="s4">;</span>
    <span class="s1">}</span>
    <span class="s4">return </span><span class="s1">date</span><span class="s4">;</span>
  <span class="s1">} </span><span class="s4">else if </span><span class="s1">(json) {</span>
    <span class="s1">RCTLogConvertError(json</span><span class="s4">, @</span><span class="s3">&quot;a date&quot;</span><span class="s1">)</span><span class="s4">;</span>
  <span class="s1">}</span>
  <span class="s4">return </span><span class="s1">nil</span><span class="s4">;</span>
<span class="s1">}</span>

<span class="s1">+ (NSLocale *)NSLocale:(id)json</span>
<span class="s1">{</span>
  <span class="s4">if </span><span class="s1">([json isKindOfClass:[NSString </span><span class="s4">class</span><span class="s1">]]) {</span>
    <span class="s1">NSLocale *locale = [[NSLocale alloc] initWithLocaleIdentifier:json]</span><span class="s4">;</span>
    <span class="s4">if </span><span class="s1">(!locale) {</span>
      <span class="s1">RCTLogInfo(</span><span class="s4">@</span><span class="s3">&quot;JSON String '%@' could not be interpreted as a valid locale. &quot;</span><span class="s4">, </span><span class="s1">json)</span><span class="s4">;</span>
    <span class="s1">}</span>
    <span class="s4">return </span><span class="s1">locale</span><span class="s4">;</span>
  <span class="s1">} </span><span class="s4">else if </span><span class="s1">(json) {</span>
    <span class="s1">RCTLogConvertError(json</span><span class="s4">, @</span><span class="s3">&quot;a locale&quot;</span><span class="s1">)</span><span class="s4">;</span>
  <span class="s1">}</span>
  <span class="s4">return </span><span class="s1">nil</span><span class="s4">;</span>
<span class="s1">}</span>

<span class="s0">// JS Standard for time is milliseconds</span>
<span class="s1">RCT_CUSTOM_CONVERTER(NSTimeInterval</span><span class="s4">, </span><span class="s1">NSTimeInterval</span><span class="s4">, </span><span class="s1">[self </span><span class="s4">double</span><span class="s1">:json] / </span><span class="s5">1000.0</span><span class="s1">)</span>

<span class="s0">// JS standard for time zones is minutes.</span>
<span class="s1">RCT_CUSTOM_CONVERTER(NSTimeZone *</span><span class="s4">, </span><span class="s1">NSTimeZone</span><span class="s4">, </span><span class="s1">[NSTimeZone timeZoneForSecondsFromGMT:[self </span><span class="s4">double</span><span class="s1">:json] * </span><span class="s5">60.0</span><span class="s1">])</span>

<span class="s1">NSNumber *RCTConvertEnumValue(</span><span class="s4">const char </span><span class="s1">*typeName</span><span class="s4">, </span><span class="s1">NSDictionary *mapping</span><span class="s4">, </span><span class="s1">NSNumber *defaultValue</span><span class="s4">, </span><span class="s1">id json)</span>
<span class="s1">{</span>
  <span class="s4">if </span><span class="s1">(!json) {</span>
    <span class="s4">return </span><span class="s1">defaultValue</span><span class="s4">;</span>
  <span class="s1">}</span>
  <span class="s4">if </span><span class="s1">([json isKindOfClass:[NSNumber </span><span class="s4">class</span><span class="s1">]]) {</span>
    <span class="s1">NSArray *allValues = mapping.allValues</span><span class="s4">;</span>
    <span class="s4">if </span><span class="s1">([allValues containsObject:json] || [json isEqual:defaultValue]) {</span>
      <span class="s4">return </span><span class="s1">json</span><span class="s4">;</span>
    <span class="s1">}</span>
    <span class="s1">RCTLogInfo(</span><span class="s4">@</span><span class="s3">&quot;Invalid %s '%@'. should be one of: %@&quot;</span><span class="s4">, </span><span class="s1">typeName</span><span class="s4">, </span><span class="s1">json</span><span class="s4">, </span><span class="s1">allValues)</span><span class="s4">;</span>
    <span class="s4">return </span><span class="s1">defaultValue</span><span class="s4">;</span>
  <span class="s1">}</span>
  <span class="s4">if </span><span class="s1">(RCT_DEBUG &amp;&amp; ![json isKindOfClass:[NSString </span><span class="s4">class</span><span class="s1">]]) {</span>
    <span class="s1">RCTLogInfo(</span><span class="s4">@</span><span class="s3">&quot;Expected NSNumber or NSString for %s, received %@: %@&quot;</span><span class="s4">, </span><span class="s1">typeName</span><span class="s4">, </span><span class="s1">[json classForCoder]</span><span class="s4">, </span><span class="s1">json)</span><span class="s4">;</span>
  <span class="s1">}</span>
  <span class="s1">id value = mapping[json]</span><span class="s4">;</span>
  <span class="s4">if </span><span class="s1">(RCT_DEBUG &amp;&amp; !value &amp;&amp; [json description].length &gt; </span><span class="s5">0</span><span class="s1">) {</span>
    <span class="s1">RCTLogInfo(</span>
        <span class="s4">@</span><span class="s3">&quot;Invalid %s '%@'. should be one of: %@&quot;</span><span class="s4">,</span>
        <span class="s1">typeName</span><span class="s4">,</span>
        <span class="s1">json</span><span class="s4">,</span>
        <span class="s1">[[mapping allKeys] sortedArrayUsingSelector:</span><span class="s4">@selector</span><span class="s1">(caseInsensitiveCompare:)])</span><span class="s4">;</span>
  <span class="s1">}</span>
  <span class="s4">return </span><span class="s1">value ?: defaultValue</span><span class="s4">;</span>
<span class="s1">}</span>

<span class="s1">NSNumber *RCTConvertMultiEnumValue(</span><span class="s4">const char </span><span class="s1">*typeName</span><span class="s4">, </span><span class="s1">NSDictionary *mapping</span><span class="s4">, </span><span class="s1">NSNumber *defaultValue</span><span class="s4">, </span><span class="s1">id json)</span>
<span class="s1">{</span>
  <span class="s4">if </span><span class="s1">([json isKindOfClass:[NSArray </span><span class="s4">class</span><span class="s1">]]) {</span>
    <span class="s4">if </span><span class="s1">([json count] == </span><span class="s5">0</span><span class="s1">) {</span>
      <span class="s4">return </span><span class="s1">defaultValue</span><span class="s4">;</span>
    <span class="s1">}</span>
    <span class="s4">long long </span><span class="s1">result = </span><span class="s5">0</span><span class="s4">;</span>
    <span class="s4">for </span><span class="s1">(id arrayElement in json) {</span>
      <span class="s1">NSNumber *value = RCTConvertEnumValue(typeName</span><span class="s4">, </span><span class="s1">mapping</span><span class="s4">, </span><span class="s1">defaultValue</span><span class="s4">, </span><span class="s1">arrayElement)</span><span class="s4">;</span>
      <span class="s1">result |= value.longLongValue</span><span class="s4">;</span>
    <span class="s1">}</span>
    <span class="s4">return @</span><span class="s1">(result)</span><span class="s4">;</span>
  <span class="s1">}</span>
  <span class="s4">return </span><span class="s1">RCTConvertEnumValue(typeName</span><span class="s4">, </span><span class="s1">mapping</span><span class="s4">, </span><span class="s1">defaultValue</span><span class="s4">, </span><span class="s1">json)</span><span class="s4">;</span>
<span class="s1">}</span>

<span class="s1">RCT_ENUM_CONVERTER(</span>
    <span class="s1">NSLineBreakMode</span><span class="s4">,</span>
    <span class="s1">(</span><span class="s4">@</span><span class="s1">{</span>
      <span class="s4">@</span><span class="s3">&quot;clip&quot; </span><span class="s1">: </span><span class="s4">@</span><span class="s1">(NSLineBreakByClipping)</span><span class="s4">,</span>
      <span class="s4">@</span><span class="s3">&quot;head&quot; </span><span class="s1">: </span><span class="s4">@</span><span class="s1">(NSLineBreakByTruncatingHead)</span><span class="s4">,</span>
      <span class="s4">@</span><span class="s3">&quot;tail&quot; </span><span class="s1">: </span><span class="s4">@</span><span class="s1">(NSLineBreakByTruncatingTail)</span><span class="s4">,</span>
      <span class="s4">@</span><span class="s3">&quot;middle&quot; </span><span class="s1">: </span><span class="s4">@</span><span class="s1">(NSLineBreakByTruncatingMiddle)</span><span class="s4">,</span>
      <span class="s4">@</span><span class="s3">&quot;wordWrapping&quot; </span><span class="s1">: </span><span class="s4">@</span><span class="s1">(NSLineBreakByWordWrapping)</span><span class="s4">,</span>
    <span class="s1">})</span><span class="s4">,</span>
    <span class="s1">NSLineBreakByTruncatingTail</span><span class="s4">,</span>
    <span class="s1">integerValue)</span>

<span class="s1">RCT_ENUM_CONVERTER(</span>
    <span class="s1">NSTextAlignment</span><span class="s4">,</span>
    <span class="s1">(</span><span class="s4">@</span><span class="s1">{</span>
      <span class="s4">@</span><span class="s3">&quot;auto&quot; </span><span class="s1">: </span><span class="s4">@</span><span class="s1">(NSTextAlignmentNatural)</span><span class="s4">,</span>
      <span class="s4">@</span><span class="s3">&quot;left&quot; </span><span class="s1">: </span><span class="s4">@</span><span class="s1">(NSTextAlignmentLeft)</span><span class="s4">,</span>
      <span class="s4">@</span><span class="s3">&quot;center&quot; </span><span class="s1">: </span><span class="s4">@</span><span class="s1">(NSTextAlignmentCenter)</span><span class="s4">,</span>
      <span class="s4">@</span><span class="s3">&quot;right&quot; </span><span class="s1">: </span><span class="s4">@</span><span class="s1">(NSTextAlignmentRight)</span><span class="s4">,</span>
      <span class="s4">@</span><span class="s3">&quot;justify&quot; </span><span class="s1">: </span><span class="s4">@</span><span class="s1">(NSTextAlignmentJustified)</span><span class="s4">,</span>
    <span class="s1">})</span><span class="s4">,</span>
    <span class="s1">NSTextAlignmentNatural</span><span class="s4">,</span>
    <span class="s1">integerValue)</span>

<span class="s1">RCT_ENUM_CONVERTER(</span>
    <span class="s1">NSUnderlineStyle</span><span class="s4">,</span>
    <span class="s1">(</span><span class="s4">@</span><span class="s1">{</span>
      <span class="s4">@</span><span class="s3">&quot;solid&quot; </span><span class="s1">: </span><span class="s4">@</span><span class="s1">(NSUnderlineStyleSingle)</span><span class="s4">,</span>
      <span class="s4">@</span><span class="s3">&quot;double&quot; </span><span class="s1">: </span><span class="s4">@</span><span class="s1">(NSUnderlineStyleDouble)</span><span class="s4">,</span>
      <span class="s4">@</span><span class="s3">&quot;dotted&quot; </span><span class="s1">: </span><span class="s4">@</span><span class="s1">(NSUnderlinePatternDot | NSUnderlineStyleSingle)</span><span class="s4">,</span>
      <span class="s4">@</span><span class="s3">&quot;dashed&quot; </span><span class="s1">: </span><span class="s4">@</span><span class="s1">(NSUnderlinePatternDash | NSUnderlineStyleSingle)</span><span class="s4">,</span>
    <span class="s1">})</span><span class="s4">,</span>
    <span class="s1">NSUnderlineStyleSingle</span><span class="s4">,</span>
    <span class="s1">integerValue)</span>

<span class="s1">RCT_ENUM_CONVERTER(</span>
    <span class="s1">RCTBorderStyle</span><span class="s4">,</span>
    <span class="s1">(</span><span class="s4">@</span><span class="s1">{</span>
      <span class="s4">@</span><span class="s3">&quot;solid&quot; </span><span class="s1">: </span><span class="s4">@</span><span class="s1">(RCTBorderStyleSolid)</span><span class="s4">,</span>
      <span class="s4">@</span><span class="s3">&quot;dotted&quot; </span><span class="s1">: </span><span class="s4">@</span><span class="s1">(RCTBorderStyleDotted)</span><span class="s4">,</span>
      <span class="s4">@</span><span class="s3">&quot;dashed&quot; </span><span class="s1">: </span><span class="s4">@</span><span class="s1">(RCTBorderStyleDashed)</span><span class="s4">,</span>
    <span class="s1">})</span><span class="s4">,</span>
    <span class="s1">RCTBorderStyleSolid</span><span class="s4">,</span>
    <span class="s1">integerValue)</span>

<span class="s1">RCT_ENUM_CONVERTER(</span>
    <span class="s1">RCTBorderCurve</span><span class="s4">,</span>
    <span class="s1">(</span><span class="s4">@</span><span class="s1">{</span>
      <span class="s4">@</span><span class="s3">&quot;circular&quot; </span><span class="s1">: </span><span class="s4">@</span><span class="s1">(RCTBorderCurveCircular)</span><span class="s4">,</span>
      <span class="s4">@</span><span class="s3">&quot;continuous&quot; </span><span class="s1">: </span><span class="s4">@</span><span class="s1">(RCTBorderCurveContinuous)</span><span class="s4">,</span>
    <span class="s1">})</span><span class="s4">,</span>
    <span class="s1">RCTBorderCurveCircular</span><span class="s4">,</span>
    <span class="s1">integerValue)</span>

<span class="s1">RCT_ENUM_CONVERTER(</span>
    <span class="s1">RCTTextDecorationLineType</span><span class="s4">,</span>
    <span class="s1">(</span><span class="s4">@</span><span class="s1">{</span>
      <span class="s4">@</span><span class="s3">&quot;none&quot; </span><span class="s1">: </span><span class="s4">@</span><span class="s1">(RCTTextDecorationLineTypeNone)</span><span class="s4">,</span>
      <span class="s4">@</span><span class="s3">&quot;underline&quot; </span><span class="s1">: </span><span class="s4">@</span><span class="s1">(RCTTextDecorationLineTypeUnderline)</span><span class="s4">,</span>
      <span class="s4">@</span><span class="s3">&quot;line-through&quot; </span><span class="s1">: </span><span class="s4">@</span><span class="s1">(RCTTextDecorationLineTypeStrikethrough)</span><span class="s4">,</span>
      <span class="s4">@</span><span class="s3">&quot;underline line-through&quot; </span><span class="s1">: </span><span class="s4">@</span><span class="s1">(RCTTextDecorationLineTypeUnderlineStrikethrough)</span><span class="s4">,</span>
    <span class="s1">})</span><span class="s4">,</span>
    <span class="s1">RCTTextDecorationLineTypeNone</span><span class="s4">,</span>
    <span class="s1">integerValue)</span>

<span class="s1">RCT_ENUM_CONVERTER(</span>
    <span class="s1">NSWritingDirection</span><span class="s4">,</span>
    <span class="s1">(</span><span class="s4">@</span><span class="s1">{</span>
      <span class="s4">@</span><span class="s3">&quot;auto&quot; </span><span class="s1">: </span><span class="s4">@</span><span class="s1">(NSWritingDirectionNatural)</span><span class="s4">,</span>
      <span class="s4">@</span><span class="s3">&quot;ltr&quot; </span><span class="s1">: </span><span class="s4">@</span><span class="s1">(NSWritingDirectionLeftToRight)</span><span class="s4">,</span>
      <span class="s4">@</span><span class="s3">&quot;rtl&quot; </span><span class="s1">: </span><span class="s4">@</span><span class="s1">(NSWritingDirectionRightToLeft)</span><span class="s4">,</span>
    <span class="s1">})</span><span class="s4">,</span>
    <span class="s1">NSWritingDirectionNatural</span><span class="s4">,</span>
    <span class="s1">integerValue)</span>

<span class="s1">+ (NSLineBreakStrategy)NSLineBreakStrategy:(id)json RCT_DYNAMIC</span>
<span class="s1">{</span>
  <span class="s4">if </span><span class="s1">(</span><span class="s4">@available</span><span class="s1">(iOS </span><span class="s5">14.0</span><span class="s4">, </span><span class="s1">*)) {</span>
    <span class="s4">static </span><span class="s1">NSDictionary *mapping</span><span class="s4">;</span>
    <span class="s4">static </span><span class="s1">dispatch_once_t onceToken</span><span class="s4">;</span>
    <span class="s1">dispatch_once(&amp;onceToken</span><span class="s4">, </span><span class="s1">^{</span>
      <span class="s1">mapping = </span><span class="s4">@</span><span class="s1">{</span>
        <span class="s4">@</span><span class="s3">&quot;none&quot; </span><span class="s1">: </span><span class="s4">@</span><span class="s1">(NSLineBreakStrategyNone)</span><span class="s4">,</span>
        <span class="s4">@</span><span class="s3">&quot;standard&quot; </span><span class="s1">: </span><span class="s4">@</span><span class="s1">(NSLineBreakStrategyStandard)</span><span class="s4">,</span>
        <span class="s4">@</span><span class="s3">&quot;hangul-word&quot; </span><span class="s1">: </span><span class="s4">@</span><span class="s1">(NSLineBreakStrategyHangulWordPriority)</span><span class="s4">,</span>
        <span class="s4">@</span><span class="s3">&quot;push-out&quot; </span><span class="s1">: </span><span class="s4">@</span><span class="s1">(NSLineBreakStrategyPushOut)</span>
      <span class="s1">}</span><span class="s4">;</span>
    <span class="s1">})</span><span class="s4">;</span>
    <span class="s4">return </span><span class="s1">RCTConvertEnumValue(</span><span class="s3">&quot;NSLineBreakStrategy&quot;</span><span class="s4">, </span><span class="s1">mapping</span><span class="s4">, @</span><span class="s1">(NSLineBreakStrategyNone)</span><span class="s4">, </span><span class="s1">json).integerValue</span><span class="s4">;</span>
  <span class="s1">} </span><span class="s4">else </span><span class="s1">{</span>
    <span class="s4">return </span><span class="s1">NSLineBreakStrategyNone</span><span class="s4">;</span>
  <span class="s1">}</span>
<span class="s1">}</span>

<span class="s1">RCT_ENUM_CONVERTER(</span>
    <span class="s1">UITextAutocapitalizationType</span><span class="s4">,</span>
    <span class="s1">(</span><span class="s4">@</span><span class="s1">{</span>
      <span class="s4">@</span><span class="s3">&quot;none&quot; </span><span class="s1">: </span><span class="s4">@</span><span class="s1">(UITextAutocapitalizationTypeNone)</span><span class="s4">,</span>
      <span class="s4">@</span><span class="s3">&quot;words&quot; </span><span class="s1">: </span><span class="s4">@</span><span class="s1">(UITextAutocapitalizationTypeWords)</span><span class="s4">,</span>
      <span class="s4">@</span><span class="s3">&quot;sentences&quot; </span><span class="s1">: </span><span class="s4">@</span><span class="s1">(UITextAutocapitalizationTypeSentences)</span><span class="s4">,</span>
      <span class="s4">@</span><span class="s3">&quot;characters&quot; </span><span class="s1">: </span><span class="s4">@</span><span class="s1">(UITextAutocapitalizationTypeAllCharacters)</span>
    <span class="s1">})</span><span class="s4">,</span>
    <span class="s1">UITextAutocapitalizationTypeSentences</span><span class="s4">,</span>
    <span class="s1">integerValue)</span>

<span class="s1">RCT_ENUM_CONVERTER(</span>
    <span class="s1">UITextFieldViewMode</span><span class="s4">,</span>
    <span class="s1">(</span><span class="s4">@</span><span class="s1">{</span>
      <span class="s4">@</span><span class="s3">&quot;never&quot; </span><span class="s1">: </span><span class="s4">@</span><span class="s1">(UITextFieldViewModeNever)</span><span class="s4">,</span>
      <span class="s4">@</span><span class="s3">&quot;while-editing&quot; </span><span class="s1">: </span><span class="s4">@</span><span class="s1">(UITextFieldViewModeWhileEditing)</span><span class="s4">,</span>
      <span class="s4">@</span><span class="s3">&quot;unless-editing&quot; </span><span class="s1">: </span><span class="s4">@</span><span class="s1">(UITextFieldViewModeUnlessEditing)</span><span class="s4">,</span>
      <span class="s4">@</span><span class="s3">&quot;always&quot; </span><span class="s1">: </span><span class="s4">@</span><span class="s1">(UITextFieldViewModeAlways)</span><span class="s4">,</span>
    <span class="s1">})</span><span class="s4">,</span>
    <span class="s1">UITextFieldViewModeNever</span><span class="s4">,</span>
    <span class="s1">integerValue)</span>

<span class="s1">+ (UIKeyboardType)UIKeyboardType:(id)json RCT_DYNAMIC</span>
<span class="s1">{</span>
  <span class="s4">static </span><span class="s1">NSDictionary&lt;NSString *</span><span class="s4">, </span><span class="s1">NSNumber *&gt; *mapping</span><span class="s4">;</span>
  <span class="s4">static </span><span class="s1">dispatch_once_t onceToken</span><span class="s4">;</span>
  <span class="s1">dispatch_once(&amp;onceToken</span><span class="s4">, </span><span class="s1">^{</span>
    <span class="s1">NSMutableDictionary&lt;NSString *</span><span class="s4">, </span><span class="s1">NSNumber *&gt; *temporaryMapping = [NSMutableDictionary dictionaryWithDictionary:</span><span class="s4">@</span><span class="s1">{</span>
      <span class="s4">@</span><span class="s3">&quot;default&quot; </span><span class="s1">: </span><span class="s4">@</span><span class="s1">(UIKeyboardTypeDefault)</span><span class="s4">,</span>
      <span class="s4">@</span><span class="s3">&quot;ascii-capable&quot; </span><span class="s1">: </span><span class="s4">@</span><span class="s1">(UIKeyboardTypeASCIICapable)</span><span class="s4">,</span>
      <span class="s4">@</span><span class="s3">&quot;numbers-and-punctuation&quot; </span><span class="s1">: </span><span class="s4">@</span><span class="s1">(UIKeyboardTypeNumbersAndPunctuation)</span><span class="s4">,</span>
      <span class="s4">@</span><span class="s3">&quot;url&quot; </span><span class="s1">: </span><span class="s4">@</span><span class="s1">(UIKeyboardTypeURL)</span><span class="s4">,</span>
      <span class="s4">@</span><span class="s3">&quot;number-pad&quot; </span><span class="s1">: </span><span class="s4">@</span><span class="s1">(UIKeyboardTypeNumberPad)</span><span class="s4">,</span>
      <span class="s4">@</span><span class="s3">&quot;phone-pad&quot; </span><span class="s1">: </span><span class="s4">@</span><span class="s1">(UIKeyboardTypePhonePad)</span><span class="s4">,</span>
      <span class="s4">@</span><span class="s3">&quot;name-phone-pad&quot; </span><span class="s1">: </span><span class="s4">@</span><span class="s1">(UIKeyboardTypeNamePhonePad)</span><span class="s4">,</span>
      <span class="s4">@</span><span class="s3">&quot;email-address&quot; </span><span class="s1">: </span><span class="s4">@</span><span class="s1">(UIKeyboardTypeEmailAddress)</span><span class="s4">,</span>
      <span class="s4">@</span><span class="s3">&quot;decimal-pad&quot; </span><span class="s1">: </span><span class="s4">@</span><span class="s1">(UIKeyboardTypeDecimalPad)</span><span class="s4">,</span>
      <span class="s4">@</span><span class="s3">&quot;twitter&quot; </span><span class="s1">: </span><span class="s4">@</span><span class="s1">(UIKeyboardTypeTwitter)</span><span class="s4">,</span>
      <span class="s4">@</span><span class="s3">&quot;web-search&quot; </span><span class="s1">: </span><span class="s4">@</span><span class="s1">(UIKeyboardTypeWebSearch)</span><span class="s4">,</span>
      <span class="s0">// Added for Android compatibility</span>
      <span class="s4">@</span><span class="s3">&quot;numeric&quot; </span><span class="s1">: </span><span class="s4">@</span><span class="s1">(UIKeyboardTypeDecimalPad)</span><span class="s4">,</span>
    <span class="s1">}]</span><span class="s4">;</span>
    <span class="s1">temporaryMapping[</span><span class="s4">@</span><span class="s3">&quot;ascii-capable-number-pad&quot;</span><span class="s1">] = </span><span class="s4">@</span><span class="s1">(UIKeyboardTypeASCIICapableNumberPad)</span><span class="s4">;</span>
    <span class="s1">mapping = temporaryMapping</span><span class="s4">;</span>
  <span class="s1">})</span><span class="s4">;</span>

  <span class="s1">UIKeyboardType type = RCTConvertEnumValue(</span><span class="s3">&quot;UIKeyboardType&quot;</span><span class="s4">, </span><span class="s1">mapping</span><span class="s4">, @</span><span class="s1">(UIKeyboardTypeDefault)</span><span class="s4">, </span><span class="s1">json).integerValue</span><span class="s4">;</span>
  <span class="s4">return </span><span class="s1">type</span><span class="s4">;</span>
<span class="s1">}</span>

<span class="s1">RCT_MULTI_ENUM_CONVERTER(</span>
    <span class="s1">UIDataDetectorTypes</span><span class="s4">,</span>
    <span class="s1">(</span><span class="s4">@</span><span class="s1">{</span>
      <span class="s4">@</span><span class="s3">&quot;phoneNumber&quot; </span><span class="s1">: </span><span class="s4">@</span><span class="s1">(UIDataDetectorTypePhoneNumber)</span><span class="s4">,</span>
      <span class="s4">@</span><span class="s3">&quot;link&quot; </span><span class="s1">: </span><span class="s4">@</span><span class="s1">(UIDataDetectorTypeLink)</span><span class="s4">,</span>
      <span class="s4">@</span><span class="s3">&quot;address&quot; </span><span class="s1">: </span><span class="s4">@</span><span class="s1">(UIDataDetectorTypeAddress)</span><span class="s4">,</span>
      <span class="s4">@</span><span class="s3">&quot;calendarEvent&quot; </span><span class="s1">: </span><span class="s4">@</span><span class="s1">(UIDataDetectorTypeCalendarEvent)</span><span class="s4">,</span>
      <span class="s4">@</span><span class="s3">&quot;none&quot; </span><span class="s1">: </span><span class="s4">@</span><span class="s1">(UIDataDetectorTypeNone)</span><span class="s4">,</span>
      <span class="s4">@</span><span class="s3">&quot;all&quot; </span><span class="s1">: </span><span class="s4">@</span><span class="s1">(UIDataDetectorTypeAll)</span><span class="s4">,</span>
    <span class="s1">})</span><span class="s4">,</span>
    <span class="s1">UIDataDetectorTypePhoneNumber</span><span class="s4">,</span>
    <span class="s1">unsignedLongLongValue)</span>

<span class="s1">RCT_MULTI_ENUM_CONVERTER(</span>
    <span class="s1">WKDataDetectorTypes</span><span class="s4">,</span>
    <span class="s1">(</span><span class="s4">@</span><span class="s1">{</span>
      <span class="s4">@</span><span class="s3">&quot;phoneNumber&quot; </span><span class="s1">: </span><span class="s4">@</span><span class="s1">(WKDataDetectorTypePhoneNumber)</span><span class="s4">,</span>
      <span class="s4">@</span><span class="s3">&quot;link&quot; </span><span class="s1">: </span><span class="s4">@</span><span class="s1">(WKDataDetectorTypeLink)</span><span class="s4">,</span>
      <span class="s4">@</span><span class="s3">&quot;address&quot; </span><span class="s1">: </span><span class="s4">@</span><span class="s1">(WKDataDetectorTypeAddress)</span><span class="s4">,</span>
      <span class="s4">@</span><span class="s3">&quot;calendarEvent&quot; </span><span class="s1">: </span><span class="s4">@</span><span class="s1">(WKDataDetectorTypeCalendarEvent)</span><span class="s4">,</span>
      <span class="s4">@</span><span class="s3">&quot;trackingNumber&quot; </span><span class="s1">: </span><span class="s4">@</span><span class="s1">(WKDataDetectorTypeTrackingNumber)</span><span class="s4">,</span>
      <span class="s4">@</span><span class="s3">&quot;flightNumber&quot; </span><span class="s1">: </span><span class="s4">@</span><span class="s1">(WKDataDetectorTypeFlightNumber)</span><span class="s4">,</span>
      <span class="s4">@</span><span class="s3">&quot;lookupSuggestion&quot; </span><span class="s1">: </span><span class="s4">@</span><span class="s1">(WKDataDetectorTypeLookupSuggestion)</span><span class="s4">,</span>
      <span class="s4">@</span><span class="s3">&quot;none&quot; </span><span class="s1">: </span><span class="s4">@</span><span class="s1">(WKDataDetectorTypeNone)</span><span class="s4">,</span>
      <span class="s4">@</span><span class="s3">&quot;all&quot; </span><span class="s1">: </span><span class="s4">@</span><span class="s1">(WKDataDetectorTypeAll)</span><span class="s4">,</span>
    <span class="s1">})</span><span class="s4">,</span>
    <span class="s1">WKDataDetectorTypePhoneNumber</span><span class="s4">,</span>
    <span class="s1">unsignedLongLongValue)</span>

<span class="s1">RCT_ENUM_CONVERTER(</span>
    <span class="s1">UIKeyboardAppearance</span><span class="s4">,</span>
    <span class="s1">(</span><span class="s4">@</span><span class="s1">{</span>
      <span class="s4">@</span><span class="s3">&quot;default&quot; </span><span class="s1">: </span><span class="s4">@</span><span class="s1">(UIKeyboardAppearanceDefault)</span><span class="s4">,</span>
      <span class="s4">@</span><span class="s3">&quot;light&quot; </span><span class="s1">: </span><span class="s4">@</span><span class="s1">(UIKeyboardAppearanceLight)</span><span class="s4">,</span>
      <span class="s4">@</span><span class="s3">&quot;dark&quot; </span><span class="s1">: </span><span class="s4">@</span><span class="s1">(UIKeyboardAppearanceDark)</span><span class="s4">,</span>
    <span class="s1">})</span><span class="s4">,</span>
    <span class="s1">UIKeyboardAppearanceDefault</span><span class="s4">,</span>
    <span class="s1">integerValue)</span>

<span class="s1">RCT_ENUM_CONVERTER(</span>
    <span class="s1">UIReturnKeyType</span><span class="s4">,</span>
    <span class="s1">(</span><span class="s4">@</span><span class="s1">{</span>
      <span class="s4">@</span><span class="s3">&quot;default&quot; </span><span class="s1">: </span><span class="s4">@</span><span class="s1">(UIReturnKeyDefault)</span><span class="s4">,</span>
      <span class="s4">@</span><span class="s3">&quot;go&quot; </span><span class="s1">: </span><span class="s4">@</span><span class="s1">(UIReturnKeyGo)</span><span class="s4">,</span>
      <span class="s4">@</span><span class="s3">&quot;google&quot; </span><span class="s1">: </span><span class="s4">@</span><span class="s1">(UIReturnKeyGoogle)</span><span class="s4">,</span>
      <span class="s4">@</span><span class="s3">&quot;join&quot; </span><span class="s1">: </span><span class="s4">@</span><span class="s1">(UIReturnKeyJoin)</span><span class="s4">,</span>
      <span class="s4">@</span><span class="s3">&quot;next&quot; </span><span class="s1">: </span><span class="s4">@</span><span class="s1">(UIReturnKeyNext)</span><span class="s4">,</span>
      <span class="s4">@</span><span class="s3">&quot;route&quot; </span><span class="s1">: </span><span class="s4">@</span><span class="s1">(UIReturnKeyRoute)</span><span class="s4">,</span>
      <span class="s4">@</span><span class="s3">&quot;search&quot; </span><span class="s1">: </span><span class="s4">@</span><span class="s1">(UIReturnKeySearch)</span><span class="s4">,</span>
      <span class="s4">@</span><span class="s3">&quot;send&quot; </span><span class="s1">: </span><span class="s4">@</span><span class="s1">(UIReturnKeySend)</span><span class="s4">,</span>
      <span class="s4">@</span><span class="s3">&quot;yahoo&quot; </span><span class="s1">: </span><span class="s4">@</span><span class="s1">(UIReturnKeyYahoo)</span><span class="s4">,</span>
      <span class="s4">@</span><span class="s3">&quot;done&quot; </span><span class="s1">: </span><span class="s4">@</span><span class="s1">(UIReturnKeyDone)</span><span class="s4">,</span>
      <span class="s4">@</span><span class="s3">&quot;emergency-call&quot; </span><span class="s1">: </span><span class="s4">@</span><span class="s1">(UIReturnKeyEmergencyCall)</span><span class="s4">,</span>
    <span class="s1">})</span><span class="s4">,</span>
    <span class="s1">UIReturnKeyDefault</span><span class="s4">,</span>
    <span class="s1">integerValue)</span>

<span class="s1">RCT_ENUM_CONVERTER(</span>
    <span class="s1">UIUserInterfaceStyle</span><span class="s4">,</span>
    <span class="s1">(</span><span class="s4">@</span><span class="s1">{</span>
      <span class="s4">@</span><span class="s3">&quot;unspecified&quot; </span><span class="s1">: </span><span class="s4">@</span><span class="s1">(UIUserInterfaceStyleUnspecified)</span><span class="s4">,</span>
      <span class="s4">@</span><span class="s3">&quot;light&quot; </span><span class="s1">: </span><span class="s4">@</span><span class="s1">(UIUserInterfaceStyleLight)</span><span class="s4">,</span>
      <span class="s4">@</span><span class="s3">&quot;dark&quot; </span><span class="s1">: </span><span class="s4">@</span><span class="s1">(UIUserInterfaceStyleDark)</span><span class="s4">,</span>
    <span class="s1">})</span><span class="s4">,</span>
    <span class="s1">UIUserInterfaceStyleUnspecified</span><span class="s4">,</span>
    <span class="s1">integerValue)</span>

<span class="s1">RCT_ENUM_CONVERTER(</span>
    <span class="s1">UIViewContentMode</span><span class="s4">,</span>
    <span class="s1">(</span><span class="s4">@</span><span class="s1">{</span>
      <span class="s4">@</span><span class="s3">&quot;scale-to-fill&quot; </span><span class="s1">: </span><span class="s4">@</span><span class="s1">(UIViewContentModeScaleToFill)</span><span class="s4">,</span>
      <span class="s4">@</span><span class="s3">&quot;scale-aspect-fit&quot; </span><span class="s1">: </span><span class="s4">@</span><span class="s1">(UIViewContentModeScaleAspectFit)</span><span class="s4">,</span>
      <span class="s4">@</span><span class="s3">&quot;scale-aspect-fill&quot; </span><span class="s1">: </span><span class="s4">@</span><span class="s1">(UIViewContentModeScaleAspectFill)</span><span class="s4">,</span>
      <span class="s4">@</span><span class="s3">&quot;redraw&quot; </span><span class="s1">: </span><span class="s4">@</span><span class="s1">(UIViewContentModeRedraw)</span><span class="s4">,</span>
      <span class="s4">@</span><span class="s3">&quot;center&quot; </span><span class="s1">: </span><span class="s4">@</span><span class="s1">(UIViewContentModeCenter)</span><span class="s4">,</span>
      <span class="s4">@</span><span class="s3">&quot;top&quot; </span><span class="s1">: </span><span class="s4">@</span><span class="s1">(UIViewContentModeTop)</span><span class="s4">,</span>
      <span class="s4">@</span><span class="s3">&quot;bottom&quot; </span><span class="s1">: </span><span class="s4">@</span><span class="s1">(UIViewContentModeBottom)</span><span class="s4">,</span>
      <span class="s4">@</span><span class="s3">&quot;left&quot; </span><span class="s1">: </span><span class="s4">@</span><span class="s1">(UIViewContentModeLeft)</span><span class="s4">,</span>
      <span class="s4">@</span><span class="s3">&quot;right&quot; </span><span class="s1">: </span><span class="s4">@</span><span class="s1">(UIViewContentModeRight)</span><span class="s4">,</span>
      <span class="s4">@</span><span class="s3">&quot;top-left&quot; </span><span class="s1">: </span><span class="s4">@</span><span class="s1">(UIViewContentModeTopLeft)</span><span class="s4">,</span>
      <span class="s4">@</span><span class="s3">&quot;top-right&quot; </span><span class="s1">: </span><span class="s4">@</span><span class="s1">(UIViewContentModeTopRight)</span><span class="s4">,</span>
      <span class="s4">@</span><span class="s3">&quot;bottom-left&quot; </span><span class="s1">: </span><span class="s4">@</span><span class="s1">(UIViewContentModeBottomLeft)</span><span class="s4">,</span>
      <span class="s4">@</span><span class="s3">&quot;bottom-right&quot; </span><span class="s1">: </span><span class="s4">@</span><span class="s1">(UIViewContentModeBottomRight)</span><span class="s4">,</span>
      <span class="s0">// Cross-platform values</span>
      <span class="s4">@</span><span class="s3">&quot;cover&quot; </span><span class="s1">: </span><span class="s4">@</span><span class="s1">(UIViewContentModeScaleAspectFill)</span><span class="s4">,</span>
      <span class="s4">@</span><span class="s3">&quot;contain&quot; </span><span class="s1">: </span><span class="s4">@</span><span class="s1">(UIViewContentModeScaleAspectFit)</span><span class="s4">,</span>
      <span class="s4">@</span><span class="s3">&quot;stretch&quot; </span><span class="s1">: </span><span class="s4">@</span><span class="s1">(UIViewContentModeScaleToFill)</span><span class="s4">,</span>
    <span class="s1">})</span><span class="s4">,</span>
    <span class="s1">UIViewContentModeScaleAspectFill</span><span class="s4">,</span>
    <span class="s1">integerValue)</span>

<span class="s1">RCT_ENUM_CONVERTER(</span>
    <span class="s1">UIBarStyle</span><span class="s4">,</span>
    <span class="s1">(</span><span class="s4">@</span><span class="s1">{</span>
      <span class="s4">@</span><span class="s3">&quot;default&quot; </span><span class="s1">: </span><span class="s4">@</span><span class="s1">(UIBarStyleDefault)</span><span class="s4">,</span>
      <span class="s4">@</span><span class="s3">&quot;black&quot; </span><span class="s1">: </span><span class="s4">@</span><span class="s1">(UIBarStyleBlack)</span><span class="s4">,</span>
      <span class="s4">@</span><span class="s3">&quot;blackOpaque&quot; </span><span class="s1">: </span><span class="s4">@</span><span class="s1">(UIBarStyleBlackOpaque)</span><span class="s4">,</span>
      <span class="s4">@</span><span class="s3">&quot;blackTranslucent&quot; </span><span class="s1">: </span><span class="s4">@</span><span class="s1">(UIBarStyleBlackTranslucent)</span><span class="s4">,</span>
    <span class="s1">})</span><span class="s4">,</span>
    <span class="s1">UIBarStyleDefault</span><span class="s4">,</span>
    <span class="s1">integerValue)</span>

<span class="s4">static void </span><span class="s1">convertCGStruct(</span><span class="s4">const char </span><span class="s1">*type</span><span class="s4">, </span><span class="s1">NSArray *fields</span><span class="s4">, </span><span class="s1">CGFloat *result</span><span class="s4">, </span><span class="s1">id json)</span>
<span class="s1">{</span>
  <span class="s1">NSUInteger count = fields.count</span><span class="s4">;</span>
  <span class="s4">if </span><span class="s1">([json isKindOfClass:[NSArray </span><span class="s4">class</span><span class="s1">]]) {</span>
    <span class="s4">if </span><span class="s1">(RCT_DEBUG &amp;&amp; [json count] != count) {</span>
      <span class="s1">RCTLogInfo(</span>
          <span class="s4">@</span><span class="s3">&quot;Expected array with count %llu, but count is %llu: %@&quot;</span><span class="s4">,</span>
          <span class="s1">(</span><span class="s4">unsigned long long</span><span class="s1">)count</span><span class="s4">,</span>
          <span class="s1">(</span><span class="s4">unsigned long long</span><span class="s1">)[json count]</span><span class="s4">,</span>
          <span class="s1">json)</span><span class="s4">;</span>
    <span class="s1">} </span><span class="s4">else </span><span class="s1">{</span>
      <span class="s4">for </span><span class="s1">(NSUInteger i = </span><span class="s5">0</span><span class="s4">; </span><span class="s1">i &lt; count</span><span class="s4">; </span><span class="s1">i++) {</span>
        <span class="s1">result[i] = [RCTConvert CGFloat:RCTNilIfNull(json[i])]</span><span class="s4">;</span>
      <span class="s1">}</span>
    <span class="s1">}</span>
  <span class="s1">} </span><span class="s4">else if </span><span class="s1">([json isKindOfClass:[NSDictionary </span><span class="s4">class</span><span class="s1">]]) {</span>
    <span class="s4">for </span><span class="s1">(NSUInteger i = </span><span class="s5">0</span><span class="s4">; </span><span class="s1">i &lt; count</span><span class="s4">; </span><span class="s1">i++) {</span>
      <span class="s1">result[i] = [RCTConvert CGFloat:RCTNilIfNull(json[fields[i]])]</span><span class="s4">;</span>
    <span class="s1">}</span>
  <span class="s1">} </span><span class="s4">else if </span><span class="s1">(json) {</span>
    <span class="s1">RCTLogConvertError(json</span><span class="s4">, @</span><span class="s1">(type))</span><span class="s4">;</span>
  <span class="s1">}</span>
<span class="s1">}</span>

<span class="s0">/** 
 * This macro is used for creating converter functions for structs that consist 
 * of a number of CGFloat properties, such as CGPoint, CGRect, etc. 
 */</span>
<span class="s2">#define </span><span class="s1">RCT_CGSTRUCT_CONVERTER(type</span><span class="s4">, </span><span class="s1">values)                  \ 
  +(type)type : (id)json                                      \ 
  {                                                           \ 
    </span><span class="s4">static </span><span class="s1">NSArray *fields</span><span class="s4">;                                   </span><span class="s1">\ 
    </span><span class="s4">static </span><span class="s1">dispatch_once_t onceToken</span><span class="s4">;                         </span><span class="s1">\ 
    dispatch_once(&amp;onceToken</span><span class="s4">, </span><span class="s1">^{                              \ 
      fields = values</span><span class="s4">;                                        </span><span class="s1">\ 
    })</span><span class="s4">;                                                       </span><span class="s1">\ 
    type result</span><span class="s4">;                                              </span><span class="s1">\ 
    convertCGStruct(#type</span><span class="s4">, </span><span class="s1">fields</span><span class="s4">, </span><span class="s1">(CGFloat *)&amp;result</span><span class="s4">, </span><span class="s1">json)</span><span class="s4">; </span><span class="s1">\ 
    </span><span class="s4">return </span><span class="s1">result</span><span class="s4">;                                            </span><span class="s1">\ 
  }</span>

<span class="s1">RCT_CUSTOM_CONVERTER(CGFloat</span><span class="s4">, </span><span class="s1">CGFloat</span><span class="s4">, </span><span class="s1">[self </span><span class="s4">double</span><span class="s1">:json])</span>

<span class="s1">RCT_CGSTRUCT_CONVERTER(CGPoint</span><span class="s4">, </span><span class="s1">(</span><span class="s4">@</span><span class="s1">[ </span><span class="s4">@</span><span class="s3">&quot;x&quot;</span><span class="s4">, @</span><span class="s3">&quot;y&quot; </span><span class="s1">]))</span>
<span class="s1">RCT_CGSTRUCT_CONVERTER(CGSize</span><span class="s4">, </span><span class="s1">(</span><span class="s4">@</span><span class="s1">[ </span><span class="s4">@</span><span class="s3">&quot;width&quot;</span><span class="s4">, @</span><span class="s3">&quot;height&quot; </span><span class="s1">]))</span>
<span class="s1">RCT_CGSTRUCT_CONVERTER(CGRect</span><span class="s4">, </span><span class="s1">(</span><span class="s4">@</span><span class="s1">[ </span><span class="s4">@</span><span class="s3">&quot;x&quot;</span><span class="s4">, @</span><span class="s3">&quot;y&quot;</span><span class="s4">, @</span><span class="s3">&quot;width&quot;</span><span class="s4">, @</span><span class="s3">&quot;height&quot; </span><span class="s1">]))</span>

<span class="s1">+ (UIEdgeInsets)UIEdgeInsets:(id)json</span>
<span class="s1">{</span>
  <span class="s4">static </span><span class="s1">NSArray *fields</span><span class="s4">;</span>
  <span class="s4">static </span><span class="s1">dispatch_once_t onceToken</span><span class="s4">;</span>
  <span class="s1">dispatch_once(&amp;onceToken</span><span class="s4">, </span><span class="s1">^{</span>
    <span class="s1">fields = </span><span class="s4">@</span><span class="s1">[ </span><span class="s4">@</span><span class="s3">&quot;top&quot;</span><span class="s4">, @</span><span class="s3">&quot;left&quot;</span><span class="s4">, @</span><span class="s3">&quot;bottom&quot;</span><span class="s4">, @</span><span class="s3">&quot;right&quot; </span><span class="s1">]</span><span class="s4">;</span>
  <span class="s1">})</span><span class="s4">;</span>

  <span class="s4">if </span><span class="s1">([json isKindOfClass:[NSNumber </span><span class="s4">class</span><span class="s1">]]) {</span>
    <span class="s1">CGFloat value = [json doubleValue]</span><span class="s4">;</span>
    <span class="s4">return </span><span class="s1">UIEdgeInsetsMake(value</span><span class="s4">, </span><span class="s1">value</span><span class="s4">, </span><span class="s1">value</span><span class="s4">, </span><span class="s1">value)</span><span class="s4">;</span>
  <span class="s1">} </span><span class="s4">else </span><span class="s1">{</span>
    <span class="s1">UIEdgeInsets result</span><span class="s4">;</span>
    <span class="s1">convertCGStruct(</span><span class="s3">&quot;UIEdgeInsets&quot;</span><span class="s4">, </span><span class="s1">fields</span><span class="s4">, </span><span class="s1">(CGFloat *)&amp;result</span><span class="s4">, </span><span class="s1">json)</span><span class="s4">;</span>
    <span class="s4">return </span><span class="s1">result</span><span class="s4">;</span>
  <span class="s1">}</span>
<span class="s1">}</span>

<span class="s1">RCT_ENUM_CONVERTER(</span>
    <span class="s1">CGLineJoin</span><span class="s4">,</span>
    <span class="s1">(</span><span class="s4">@</span><span class="s1">{</span>
      <span class="s4">@</span><span class="s3">&quot;miter&quot; </span><span class="s1">: </span><span class="s4">@</span><span class="s1">(kCGLineJoinMiter)</span><span class="s4">,</span>
      <span class="s4">@</span><span class="s3">&quot;round&quot; </span><span class="s1">: </span><span class="s4">@</span><span class="s1">(kCGLineJoinRound)</span><span class="s4">,</span>
      <span class="s4">@</span><span class="s3">&quot;bevel&quot; </span><span class="s1">: </span><span class="s4">@</span><span class="s1">(kCGLineJoinBevel)</span><span class="s4">,</span>
    <span class="s1">})</span><span class="s4">,</span>
    <span class="s1">kCGLineJoinMiter</span><span class="s4">,</span>
    <span class="s1">intValue)</span>

<span class="s1">RCT_ENUM_CONVERTER(</span>
    <span class="s1">CGLineCap</span><span class="s4">,</span>
    <span class="s1">(</span><span class="s4">@</span><span class="s1">{</span>
      <span class="s4">@</span><span class="s3">&quot;butt&quot; </span><span class="s1">: </span><span class="s4">@</span><span class="s1">(kCGLineCapButt)</span><span class="s4">,</span>
      <span class="s4">@</span><span class="s3">&quot;round&quot; </span><span class="s1">: </span><span class="s4">@</span><span class="s1">(kCGLineCapRound)</span><span class="s4">,</span>
      <span class="s4">@</span><span class="s3">&quot;square&quot; </span><span class="s1">: </span><span class="s4">@</span><span class="s1">(kCGLineCapSquare)</span><span class="s4">,</span>
    <span class="s1">})</span><span class="s4">,</span>
    <span class="s1">kCGLineCapButt</span><span class="s4">,</span>
    <span class="s1">intValue)</span>

<span class="s1">RCT_CGSTRUCT_CONVERTER(CGAffineTransform</span><span class="s4">, </span><span class="s1">(</span><span class="s4">@</span><span class="s1">[ </span><span class="s4">@</span><span class="s3">&quot;a&quot;</span><span class="s4">, @</span><span class="s3">&quot;b&quot;</span><span class="s4">, @</span><span class="s3">&quot;c&quot;</span><span class="s4">, @</span><span class="s3">&quot;d&quot;</span><span class="s4">, @</span><span class="s3">&quot;tx&quot;</span><span class="s4">, @</span><span class="s3">&quot;ty&quot; </span><span class="s1">]))</span>

<span class="s4">static </span><span class="s1">NSString *</span><span class="s4">const </span><span class="s1">RCTFallback = </span><span class="s4">@</span><span class="s3">&quot;fallback&quot;</span><span class="s4">;</span>
<span class="s4">static </span><span class="s1">NSString *</span><span class="s4">const </span><span class="s1">RCTFallbackARGB = </span><span class="s4">@</span><span class="s3">&quot;fallback-argb&quot;</span><span class="s4">;</span>
<span class="s4">static </span><span class="s1">NSString *</span><span class="s4">const </span><span class="s1">RCTSelector = </span><span class="s4">@</span><span class="s3">&quot;selector&quot;</span><span class="s4">;</span>
<span class="s4">static </span><span class="s1">NSString *</span><span class="s4">const </span><span class="s1">RCTIndex = </span><span class="s4">@</span><span class="s3">&quot;index&quot;</span><span class="s4">;</span>

<span class="s0">/** The following dictionary defines the react-native semantic colors for ios. 
 *  If the value for a given name is empty then the name itself 
 *  is used as the UIColor selector. 
 *  If the RCTSelector key is present then that value is used for a selector instead 
 *  of the key name. 
 *  If the given selector is not available on the running OS version then 
 *  the RCTFallback selector is used instead. 
 *  If the RCTIndex key is present then object returned from UIColor is an 
 *  NSArray and the object at index RCTIndex is to be used. 
 */</span>
<span class="s4">static </span><span class="s1">NSDictionary&lt;NSString *</span><span class="s4">, </span><span class="s1">NSDictionary *&gt; *RCTSemanticColorsMap()</span>
<span class="s1">{</span>
  <span class="s4">static </span><span class="s1">NSDictionary&lt;NSString *</span><span class="s4">, </span><span class="s1">NSDictionary *&gt; *colorMap = nil</span><span class="s4">;</span>
  <span class="s4">if </span><span class="s1">(colorMap == nil) {</span>
    <span class="s1">NSMutableDictionary&lt;NSString *</span><span class="s4">, </span><span class="s1">NSDictionary *&gt; *map = [</span><span class="s4">@</span><span class="s1">{</span>
      <span class="s0">// https://developer.apple.com/documentation/uikit/uicolor/ui_element_colors</span>
      <span class="s0">// Label Colors</span>
      <span class="s4">@</span><span class="s3">&quot;labelColor&quot; </span><span class="s1">: </span><span class="s4">@</span><span class="s1">{</span>
        <span class="s0">// iOS 13.0</span>
        <span class="s1">RCTFallbackARGB :</span>
            <span class="s4">@</span><span class="s1">(</span><span class="s5">0xFF000000</span><span class="s1">) </span><span class="s0">// fallback for iOS&lt;=12: RGBA returned by this semantic color in light mode on iOS 13</span>
      <span class="s1">}</span><span class="s4">,</span>
      <span class="s4">@</span><span class="s3">&quot;secondaryLabelColor&quot; </span><span class="s1">: </span><span class="s4">@</span><span class="s1">{</span>
        <span class="s0">// iOS 13.0</span>
        <span class="s1">RCTFallbackARGB : </span><span class="s4">@</span><span class="s1">(</span><span class="s5">0x993c3c43</span><span class="s1">)</span>
      <span class="s1">}</span><span class="s4">,</span>
      <span class="s4">@</span><span class="s3">&quot;tertiaryLabelColor&quot; </span><span class="s1">: </span><span class="s4">@</span><span class="s1">{</span>
        <span class="s0">// iOS 13.0</span>
        <span class="s1">RCTFallbackARGB : </span><span class="s4">@</span><span class="s1">(</span><span class="s5">0x4c3c3c43</span><span class="s1">)</span>
      <span class="s1">}</span><span class="s4">,</span>
      <span class="s4">@</span><span class="s3">&quot;quaternaryLabelColor&quot; </span><span class="s1">: </span><span class="s4">@</span><span class="s1">{</span>
        <span class="s0">// iOS 13.0</span>
        <span class="s1">RCTFallbackARGB : </span><span class="s4">@</span><span class="s1">(</span><span class="s5">0x2d3c3c43</span><span class="s1">)</span>
      <span class="s1">}</span><span class="s4">,</span>
      <span class="s0">// Fill Colors</span>
      <span class="s4">@</span><span class="s3">&quot;systemFillColor&quot; </span><span class="s1">: </span><span class="s4">@</span><span class="s1">{</span>
        <span class="s0">// iOS 13.0</span>
        <span class="s1">RCTFallbackARGB : </span><span class="s4">@</span><span class="s1">(</span><span class="s5">0x33787880</span><span class="s1">)</span>
      <span class="s1">}</span><span class="s4">,</span>
      <span class="s4">@</span><span class="s3">&quot;secondarySystemFillColor&quot; </span><span class="s1">: </span><span class="s4">@</span><span class="s1">{</span>
        <span class="s0">// iOS 13.0</span>
        <span class="s1">RCTFallbackARGB : </span><span class="s4">@</span><span class="s1">(</span><span class="s5">0x28787880</span><span class="s1">)</span>
      <span class="s1">}</span><span class="s4">,</span>
      <span class="s4">@</span><span class="s3">&quot;tertiarySystemFillColor&quot; </span><span class="s1">: </span><span class="s4">@</span><span class="s1">{</span>
        <span class="s0">// iOS 13.0</span>
        <span class="s1">RCTFallbackARGB : </span><span class="s4">@</span><span class="s1">(</span><span class="s5">0x1e767680</span><span class="s1">)</span>
      <span class="s1">}</span><span class="s4">,</span>
      <span class="s4">@</span><span class="s3">&quot;quaternarySystemFillColor&quot; </span><span class="s1">: </span><span class="s4">@</span><span class="s1">{</span>
        <span class="s0">// iOS 13.0</span>
        <span class="s1">RCTFallbackARGB : </span><span class="s4">@</span><span class="s1">(</span><span class="s5">0x14747480</span><span class="s1">)</span>
      <span class="s1">}</span><span class="s4">,</span>
      <span class="s0">// Text Colors</span>
      <span class="s4">@</span><span class="s3">&quot;placeholderTextColor&quot; </span><span class="s1">: </span><span class="s4">@</span><span class="s1">{</span>
        <span class="s0">// iOS 13.0</span>
        <span class="s1">RCTFallbackARGB : </span><span class="s4">@</span><span class="s1">(</span><span class="s5">0x4c3c3c43</span><span class="s1">)</span>
      <span class="s1">}</span><span class="s4">,</span>
      <span class="s0">// Standard Content Background Colors</span>
      <span class="s4">@</span><span class="s3">&quot;systemBackgroundColor&quot; </span><span class="s1">: </span><span class="s4">@</span><span class="s1">{</span>
        <span class="s0">// iOS 13.0</span>
        <span class="s1">RCTFallbackARGB : </span><span class="s4">@</span><span class="s1">(</span><span class="s5">0xFFffffff</span><span class="s1">)</span>
      <span class="s1">}</span><span class="s4">,</span>
      <span class="s4">@</span><span class="s3">&quot;secondarySystemBackgroundColor&quot; </span><span class="s1">: </span><span class="s4">@</span><span class="s1">{</span>
        <span class="s0">// iOS 13.0</span>
        <span class="s1">RCTFallbackARGB : </span><span class="s4">@</span><span class="s1">(</span><span class="s5">0xFFf2f2f7</span><span class="s1">)</span>
      <span class="s1">}</span><span class="s4">,</span>
      <span class="s4">@</span><span class="s3">&quot;tertiarySystemBackgroundColor&quot; </span><span class="s1">: </span><span class="s4">@</span><span class="s1">{</span>
        <span class="s0">// iOS 13.0</span>
        <span class="s1">RCTFallbackARGB : </span><span class="s4">@</span><span class="s1">(</span><span class="s5">0xFFffffff</span><span class="s1">)</span>
      <span class="s1">}</span><span class="s4">,</span>
      <span class="s0">// Grouped Content Background Colors</span>
      <span class="s4">@</span><span class="s3">&quot;systemGroupedBackgroundColor&quot; </span><span class="s1">: </span><span class="s4">@</span><span class="s1">{</span>
        <span class="s0">// iOS 13.0</span>
        <span class="s1">RCTFallbackARGB : </span><span class="s4">@</span><span class="s1">(</span><span class="s5">0xFFf2f2f7</span><span class="s1">)</span>
      <span class="s1">}</span><span class="s4">,</span>
      <span class="s4">@</span><span class="s3">&quot;secondarySystemGroupedBackgroundColor&quot; </span><span class="s1">: </span><span class="s4">@</span><span class="s1">{</span>
        <span class="s0">// iOS 13.0</span>
        <span class="s1">RCTFallbackARGB : </span><span class="s4">@</span><span class="s1">(</span><span class="s5">0xFFffffff</span><span class="s1">)</span>
      <span class="s1">}</span><span class="s4">,</span>
      <span class="s4">@</span><span class="s3">&quot;tertiarySystemGroupedBackgroundColor&quot; </span><span class="s1">: </span><span class="s4">@</span><span class="s1">{</span>
        <span class="s0">// iOS 13.0</span>
        <span class="s1">RCTFallbackARGB : </span><span class="s4">@</span><span class="s1">(</span><span class="s5">0xFFf2f2f7</span><span class="s1">)</span>
      <span class="s1">}</span><span class="s4">,</span>
      <span class="s0">// Separator Colors</span>
      <span class="s4">@</span><span class="s3">&quot;separatorColor&quot; </span><span class="s1">: </span><span class="s4">@</span><span class="s1">{</span>
        <span class="s0">// iOS 13.0</span>
        <span class="s1">RCTFallbackARGB : </span><span class="s4">@</span><span class="s1">(</span><span class="s5">0x493c3c43</span><span class="s1">)</span>
      <span class="s1">}</span><span class="s4">,</span>
      <span class="s4">@</span><span class="s3">&quot;opaqueSeparatorColor&quot; </span><span class="s1">: </span><span class="s4">@</span><span class="s1">{</span>
        <span class="s0">// iOS 13.0</span>
        <span class="s1">RCTFallbackARGB : </span><span class="s4">@</span><span class="s1">(</span><span class="s5">0xFFc6c6c8</span><span class="s1">)</span>
      <span class="s1">}</span><span class="s4">,</span>
      <span class="s0">// Link Color</span>
      <span class="s4">@</span><span class="s3">&quot;linkColor&quot; </span><span class="s1">: </span><span class="s4">@</span><span class="s1">{</span>
        <span class="s0">// iOS 13.0</span>
        <span class="s1">RCTFallbackARGB : </span><span class="s4">@</span><span class="s1">(</span><span class="s5">0xFF007aff</span><span class="s1">)</span>
      <span class="s1">}</span><span class="s4">,</span>
      <span class="s0">// Nonadaptable Colors</span>
      <span class="s4">@</span><span class="s3">&quot;darkTextColor&quot; </span><span class="s1">: </span><span class="s4">@</span><span class="s1">{}</span><span class="s4">,</span>
      <span class="s4">@</span><span class="s3">&quot;lightTextColor&quot; </span><span class="s1">: </span><span class="s4">@</span><span class="s1">{}</span><span class="s4">,</span>
      <span class="s0">// https://developer.apple.com/documentation/uikit/uicolor/standard_colors</span>
      <span class="s0">// Adaptable Colors</span>
      <span class="s4">@</span><span class="s3">&quot;systemBlueColor&quot; </span><span class="s1">: </span><span class="s4">@</span><span class="s1">{}</span><span class="s4">,</span>
      <span class="s4">@</span><span class="s3">&quot;systemBrownColor&quot; </span><span class="s1">: </span><span class="s4">@</span><span class="s1">{</span>
        <span class="s0">// iOS 13.0</span>
        <span class="s1">RCTFallbackARGB : </span><span class="s4">@</span><span class="s1">(</span><span class="s5">0xFFa2845e</span><span class="s1">)</span>
      <span class="s1">}</span><span class="s4">,</span>
      <span class="s4">@</span><span class="s3">&quot;systemGreenColor&quot; </span><span class="s1">: </span><span class="s4">@</span><span class="s1">{}</span><span class="s4">,</span>
      <span class="s4">@</span><span class="s3">&quot;systemIndigoColor&quot; </span><span class="s1">: </span><span class="s4">@</span><span class="s1">{</span>
        <span class="s0">// iOS 13.0</span>
        <span class="s1">RCTFallbackARGB : </span><span class="s4">@</span><span class="s1">(</span><span class="s5">0xFF5856d6</span><span class="s1">)</span>
      <span class="s1">}</span><span class="s4">,</span>
      <span class="s4">@</span><span class="s3">&quot;systemOrangeColor&quot; </span><span class="s1">: </span><span class="s4">@</span><span class="s1">{}</span><span class="s4">,</span>
      <span class="s4">@</span><span class="s3">&quot;systemPinkColor&quot; </span><span class="s1">: </span><span class="s4">@</span><span class="s1">{}</span><span class="s4">,</span>
      <span class="s4">@</span><span class="s3">&quot;systemPurpleColor&quot; </span><span class="s1">: </span><span class="s4">@</span><span class="s1">{}</span><span class="s4">,</span>
      <span class="s4">@</span><span class="s3">&quot;systemRedColor&quot; </span><span class="s1">: </span><span class="s4">@</span><span class="s1">{}</span><span class="s4">,</span>
      <span class="s4">@</span><span class="s3">&quot;systemTealColor&quot; </span><span class="s1">: </span><span class="s4">@</span><span class="s1">{}</span><span class="s4">,</span>
      <span class="s4">@</span><span class="s3">&quot;systemYellowColor&quot; </span><span class="s1">: </span><span class="s4">@</span><span class="s1">{}</span><span class="s4">,</span>
      <span class="s0">// Adaptable Gray Colors</span>
      <span class="s4">@</span><span class="s3">&quot;systemGrayColor&quot; </span><span class="s1">: </span><span class="s4">@</span><span class="s1">{}</span><span class="s4">,</span>
      <span class="s4">@</span><span class="s3">&quot;systemGray2Color&quot; </span><span class="s1">: </span><span class="s4">@</span><span class="s1">{</span>
        <span class="s0">// iOS 13.0</span>
        <span class="s1">RCTFallbackARGB : </span><span class="s4">@</span><span class="s1">(</span><span class="s5">0xFFaeaeb2</span><span class="s1">)</span>
      <span class="s1">}</span><span class="s4">,</span>
      <span class="s4">@</span><span class="s3">&quot;systemGray3Color&quot; </span><span class="s1">: </span><span class="s4">@</span><span class="s1">{</span>
        <span class="s0">// iOS 13.0</span>
        <span class="s1">RCTFallbackARGB : </span><span class="s4">@</span><span class="s1">(</span><span class="s5">0xFFc7c7cc</span><span class="s1">)</span>
      <span class="s1">}</span><span class="s4">,</span>
      <span class="s4">@</span><span class="s3">&quot;systemGray4Color&quot; </span><span class="s1">: </span><span class="s4">@</span><span class="s1">{</span>
        <span class="s0">// iOS 13.0</span>
        <span class="s1">RCTFallbackARGB : </span><span class="s4">@</span><span class="s1">(</span><span class="s5">0xFFd1d1d6</span><span class="s1">)</span>
      <span class="s1">}</span><span class="s4">,</span>
      <span class="s4">@</span><span class="s3">&quot;systemGray5Color&quot; </span><span class="s1">: </span><span class="s4">@</span><span class="s1">{</span>
        <span class="s0">// iOS 13.0</span>
        <span class="s1">RCTFallbackARGB : </span><span class="s4">@</span><span class="s1">(</span><span class="s5">0xFFe5e5ea</span><span class="s1">)</span>
      <span class="s1">}</span><span class="s4">,</span>
      <span class="s4">@</span><span class="s3">&quot;systemGray6Color&quot; </span><span class="s1">: </span><span class="s4">@</span><span class="s1">{</span>
        <span class="s0">// iOS 13.0</span>
        <span class="s1">RCTFallbackARGB : </span><span class="s4">@</span><span class="s1">(</span><span class="s5">0xFFf2f2f7</span><span class="s1">)</span>
      <span class="s1">}</span><span class="s4">,</span>
      <span class="s0">// Transparent Color</span>
      <span class="s4">@</span><span class="s3">&quot;clearColor&quot; </span><span class="s1">: </span><span class="s4">@</span><span class="s1">{</span>
        <span class="s0">// iOS 13.0</span>
        <span class="s1">RCTFallbackARGB : </span><span class="s4">@</span><span class="s1">(</span><span class="s5">0x00000000</span><span class="s1">)</span>
      <span class="s1">}</span><span class="s4">,</span>
    <span class="s1">} mutableCopy]</span><span class="s4">;</span>
    <span class="s0">// The color names are the Objective-C UIColor selector names,</span>
    <span class="s0">// but Swift selector names are valid as well, so make aliases.</span>
    <span class="s4">static </span><span class="s1">NSString *</span><span class="s4">const </span><span class="s1">RCTColorSuffix = </span><span class="s4">@</span><span class="s3">&quot;Color&quot;</span><span class="s4">;</span>
    <span class="s1">NSMutableDictionary&lt;NSString *</span><span class="s4">, </span><span class="s1">NSDictionary *&gt; *aliases = [NSMutableDictionary new]</span><span class="s4">;</span>
    <span class="s4">for </span><span class="s1">(NSString *objcSelector in map) {</span>
      <span class="s1">RCTAssert(</span>
          <span class="s1">[objcSelector hasSuffix:RCTColorSuffix]</span><span class="s4">, @</span><span class="s3">&quot;A selector in the color map did not end with the suffix Color.&quot;</span><span class="s1">)</span><span class="s4">;</span>
      <span class="s1">NSMutableDictionary *entry = [map[objcSelector] mutableCopy]</span><span class="s4">;</span>
      <span class="s1">RCTAssert([entry objectForKey:RCTSelector] == nil</span><span class="s4">, @</span><span class="s3">&quot;Entry should not already have an RCTSelector&quot;</span><span class="s1">)</span><span class="s4">;</span>
      <span class="s1">NSString *swiftSelector = [objcSelector substringToIndex:[objcSelector length] - [RCTColorSuffix length]]</span><span class="s4">;</span>
      <span class="s1">entry[RCTSelector] = objcSelector</span><span class="s4">;</span>
      <span class="s1">aliases[swiftSelector] = entry</span><span class="s4">;</span>
    <span class="s1">}</span>
    <span class="s1">[map addEntriesFromDictionary:aliases]</span><span class="s4">;</span>
<span class="s2">#if </span><span class="s1">DEBUG</span>
    <span class="s1">[map addEntriesFromDictionary:</span><span class="s4">@</span><span class="s1">{</span>
      <span class="s0">// The follow exist for Unit Tests</span>
      <span class="s4">@</span><span class="s3">&quot;unitTestFallbackColor&quot; </span><span class="s1">: </span><span class="s4">@</span><span class="s1">{RCTFallback : </span><span class="s4">@</span><span class="s3">&quot;gridColor&quot;</span><span class="s1">}</span><span class="s4">,</span>
      <span class="s4">@</span><span class="s3">&quot;unitTestFallbackColorIOS&quot; </span><span class="s1">: </span><span class="s4">@</span><span class="s1">{RCTFallback : </span><span class="s4">@</span><span class="s3">&quot;blueColor&quot;</span><span class="s1">}</span><span class="s4">,</span>
      <span class="s4">@</span><span class="s3">&quot;unitTestFallbackColorEven&quot; </span><span class="s1">: </span><span class="s4">@</span><span class="s1">{</span>
        <span class="s1">RCTSelector : </span><span class="s4">@</span><span class="s3">&quot;unitTestFallbackColorEven&quot;</span><span class="s4">,</span>
        <span class="s1">RCTIndex : </span><span class="s4">@</span><span class="s5">0</span><span class="s4">,</span>
        <span class="s1">RCTFallback : </span><span class="s4">@</span><span class="s3">&quot;controlAlternatingRowBackgroundColors&quot;</span>
      <span class="s1">}</span><span class="s4">,</span>
      <span class="s4">@</span><span class="s3">&quot;unitTestFallbackColorOdd&quot; </span><span class="s1">: </span><span class="s4">@</span><span class="s1">{</span>
        <span class="s1">RCTSelector : </span><span class="s4">@</span><span class="s3">&quot;unitTestFallbackColorOdd&quot;</span><span class="s4">,</span>
        <span class="s1">RCTIndex : </span><span class="s4">@</span><span class="s5">1</span><span class="s4">,</span>
        <span class="s1">RCTFallback : </span><span class="s4">@</span><span class="s3">&quot;controlAlternatingRowBackgroundColors&quot;</span>
      <span class="s1">}</span><span class="s4">,</span>
    <span class="s1">}]</span><span class="s4">;</span>
<span class="s2">#endif</span>
    <span class="s1">colorMap = [map copy]</span><span class="s4">;</span>
  <span class="s1">}</span>

  <span class="s4">return </span><span class="s1">colorMap</span><span class="s4">;</span>
<span class="s1">}</span>

<span class="s0">/** Returns a UIColor based on a semantic color name. 
 *  Returns nil if the semantic color name is invalid. 
 */</span>
<span class="s4">static </span><span class="s1">UIColor *RCTColorFromSemanticColorName(NSString *semanticColorName)</span>
<span class="s1">{</span>
  <span class="s1">NSDictionary&lt;NSString *</span><span class="s4">, </span><span class="s1">NSDictionary *&gt; *colorMap = RCTSemanticColorsMap()</span><span class="s4">;</span>
  <span class="s1">UIColor *color = nil</span><span class="s4">;</span>
  <span class="s1">NSDictionary&lt;NSString *</span><span class="s4">, </span><span class="s1">id&gt; *colorInfo = colorMap[semanticColorName]</span><span class="s4">;</span>
  <span class="s4">if </span><span class="s1">(colorInfo) {</span>
    <span class="s1">NSString *semanticColorSelector = colorInfo[RCTSelector]</span><span class="s4">;</span>
    <span class="s4">if </span><span class="s1">(semanticColorSelector == nil) {</span>
      <span class="s1">semanticColorSelector = semanticColorName</span><span class="s4">;</span>
    <span class="s1">}</span>
    <span class="s1">SEL </span><span class="s4">selector </span><span class="s1">= NSSelectorFromString(semanticColorSelector)</span><span class="s4">;</span>
    <span class="s4">if </span><span class="s1">(![UIColor respondsToSelector:</span><span class="s4">selector</span><span class="s1">]) {</span>
      <span class="s1">NSNumber *fallbackRGB = colorInfo[RCTFallbackARGB]</span><span class="s4">;</span>
      <span class="s4">if </span><span class="s1">(fallbackRGB != nil) {</span>
        <span class="s1">RCTAssert([fallbackRGB isKindOfClass:[NSNumber </span><span class="s4">class</span><span class="s1">]]</span><span class="s4">, @</span><span class="s3">&quot;fallback ARGB is not a number&quot;</span><span class="s1">)</span><span class="s4">;</span>
        <span class="s4">return </span><span class="s1">[RCTConvert UIColor:fallbackRGB]</span><span class="s4">;</span>
      <span class="s1">}</span>
      <span class="s1">semanticColorSelector = colorInfo[RCTFallback]</span><span class="s4">;</span>
      <span class="s4">selector </span><span class="s1">= NSSelectorFromString(semanticColorSelector)</span><span class="s4">;</span>
    <span class="s1">}</span>
    <span class="s1">RCTAssert([UIColor respondsToSelector:</span><span class="s4">selector</span><span class="s1">]</span><span class="s4">, @</span><span class="s3">&quot;RCTUIColor does not respond to a semantic color selector.&quot;</span><span class="s1">)</span><span class="s4">;</span>
    <span class="s1">Class klass = [UIColor </span><span class="s4">class</span><span class="s1">]</span><span class="s4">;</span>
    <span class="s1">IMP imp = [klass methodForSelector:</span><span class="s4">selector</span><span class="s1">]</span><span class="s4">;</span>
    <span class="s1">id (*getSemanticColorObject)(id</span><span class="s4">, </span><span class="s1">SEL) = (</span><span class="s4">void </span><span class="s1">*)imp</span><span class="s4">;</span>
    <span class="s1">id colorObject = getSemanticColorObject(klass</span><span class="s4">, selector</span><span class="s1">)</span><span class="s4">;</span>
    <span class="s4">if </span><span class="s1">([colorObject isKindOfClass:[UIColor </span><span class="s4">class</span><span class="s1">]]) {</span>
      <span class="s1">color = colorObject</span><span class="s4">;</span>
    <span class="s1">} </span><span class="s4">else if </span><span class="s1">([colorObject isKindOfClass:[NSArray </span><span class="s4">class</span><span class="s1">]]) {</span>
      <span class="s1">NSArray *colors = colorObject</span><span class="s4">;</span>
      <span class="s1">NSNumber *index = colorInfo[RCTIndex]</span><span class="s4">;</span>
      <span class="s1">RCTAssert(index</span><span class="s4">, @</span><span class="s3">&quot;index should not be null&quot;</span><span class="s1">)</span><span class="s4">;</span>
      <span class="s1">color = colors[[index unsignedIntegerValue]]</span><span class="s4">;</span>
    <span class="s1">} </span><span class="s4">else </span><span class="s1">{</span>
      <span class="s1">RCTAssert(false</span><span class="s4">, @</span><span class="s3">&quot;selector return an unknown object type&quot;</span><span class="s1">)</span><span class="s4">;</span>
    <span class="s1">}</span>
  <span class="s1">}</span>
  <span class="s4">return </span><span class="s1">color</span><span class="s4">;</span>
<span class="s1">}</span>

<span class="s0">/** Returns an alphabetically sorted comma separated list of the valid semantic color names 
 */</span>
<span class="s4">static </span><span class="s1">NSString *RCTSemanticColorNames()</span>
<span class="s1">{</span>
  <span class="s1">NSMutableString *names = [NSMutableString new]</span><span class="s4">;</span>
  <span class="s1">NSDictionary&lt;NSString *</span><span class="s4">, </span><span class="s1">NSDictionary *&gt; *colorMap = RCTSemanticColorsMap()</span><span class="s4">;</span>
  <span class="s1">NSArray *allKeys =</span>
      <span class="s1">[[[colorMap allKeys] mutableCopy] sortedArrayUsingSelector:</span><span class="s4">@selector</span><span class="s1">(localizedCaseInsensitiveCompare:)]</span><span class="s4">;</span>

  <span class="s4">for </span><span class="s1">(id key in allKeys) {</span>
    <span class="s4">if </span><span class="s1">([names length]) {</span>
      <span class="s1">[names appendString:</span><span class="s4">@</span><span class="s3">&quot;, &quot;</span><span class="s1">]</span><span class="s4">;</span>
    <span class="s1">}</span>
    <span class="s1">[names appendString:key]</span><span class="s4">;</span>
  <span class="s1">}</span>
  <span class="s4">return </span><span class="s1">names</span><span class="s4">;</span>
<span class="s1">}</span>

<span class="s1">+ (UIColor *)UIColor:(id)json</span>
<span class="s1">{</span>
  <span class="s4">if </span><span class="s1">(!json) {</span>
    <span class="s4">return </span><span class="s1">nil</span><span class="s4">;</span>
  <span class="s1">}</span>
  <span class="s4">if </span><span class="s1">([json isKindOfClass:[NSArray </span><span class="s4">class</span><span class="s1">]]) {</span>
    <span class="s1">NSArray *components = [self NSNumberArray:json]</span><span class="s4">;</span>
    <span class="s1">CGFloat alpha = components.count &gt; </span><span class="s5">3 </span><span class="s1">? [self CGFloat:components[</span><span class="s5">3</span><span class="s1">]] : </span><span class="s5">1.0</span><span class="s4">;</span>
    <span class="s4">return </span><span class="s1">[UIColor colorWithRed:[self CGFloat:components[</span><span class="s5">0</span><span class="s1">]]</span>
                           <span class="s1">green:[self CGFloat:components[</span><span class="s5">1</span><span class="s1">]]</span>
                            <span class="s1">blue:[self CGFloat:components[</span><span class="s5">2</span><span class="s1">]]</span>
                           <span class="s1">alpha:alpha]</span><span class="s4">;</span>
  <span class="s1">} </span><span class="s4">else if </span><span class="s1">([json isKindOfClass:[NSNumber </span><span class="s4">class</span><span class="s1">]]) {</span>
    <span class="s1">NSUInteger argb = [self NSUInteger:json]</span><span class="s4">;</span>
    <span class="s1">CGFloat a = ((argb &gt;&gt; </span><span class="s5">24</span><span class="s1">) &amp; </span><span class="s5">0xFF</span><span class="s1">) / </span><span class="s5">255.0</span><span class="s4">;</span>
    <span class="s1">CGFloat r = ((argb &gt;&gt; </span><span class="s5">16</span><span class="s1">) &amp; </span><span class="s5">0xFF</span><span class="s1">) / </span><span class="s5">255.0</span><span class="s4">;</span>
    <span class="s1">CGFloat g = ((argb &gt;&gt; </span><span class="s5">8</span><span class="s1">) &amp; </span><span class="s5">0xFF</span><span class="s1">) / </span><span class="s5">255.0</span><span class="s4">;</span>
    <span class="s1">CGFloat b = (argb &amp; </span><span class="s5">0xFF</span><span class="s1">) / </span><span class="s5">255.0</span><span class="s4">;</span>
    <span class="s4">return </span><span class="s1">[UIColor colorWithRed:r green:g blue:b alpha:a]</span><span class="s4">;</span>
  <span class="s1">} </span><span class="s4">else if </span><span class="s1">([json isKindOfClass:[NSDictionary </span><span class="s4">class</span><span class="s1">]]) {</span>
    <span class="s1">NSDictionary *dictionary = json</span><span class="s4">;</span>
    <span class="s1">id value = nil</span><span class="s4">;</span>
    <span class="s4">if </span><span class="s1">((value = [dictionary objectForKey:</span><span class="s4">@</span><span class="s3">&quot;semantic&quot;</span><span class="s1">])) {</span>
      <span class="s4">if </span><span class="s1">([value isKindOfClass:[NSString </span><span class="s4">class</span><span class="s1">]]) {</span>
        <span class="s1">NSString *semanticName = value</span><span class="s4">;</span>
        <span class="s1">UIColor *color = [UIColor colorNamed:semanticName]</span><span class="s4">;</span>
        <span class="s4">if </span><span class="s1">(color != nil) {</span>
          <span class="s4">return </span><span class="s1">color</span><span class="s4">;</span>
        <span class="s1">}</span>
        <span class="s1">color = RCTColorFromSemanticColorName(semanticName)</span><span class="s4">;</span>
        <span class="s4">if </span><span class="s1">(color == nil) {</span>
          <span class="s1">RCTLogConvertError(</span>
              <span class="s1">json</span><span class="s4">,</span>
              <span class="s1">[</span><span class="s4">@</span><span class="s3">&quot;a UIColor.  Expected one of the following values: &quot; </span><span class="s1">stringByAppendingString:RCTSemanticColorNames()])</span><span class="s4">;</span>
        <span class="s1">}</span>
        <span class="s4">return </span><span class="s1">color</span><span class="s4">;</span>
      <span class="s1">} </span><span class="s4">else if </span><span class="s1">([value isKindOfClass:[NSArray </span><span class="s4">class</span><span class="s1">]]) {</span>
        <span class="s4">for </span><span class="s1">(id name in value) {</span>
          <span class="s1">UIColor *color = [UIColor colorNamed:name]</span><span class="s4">;</span>
          <span class="s4">if </span><span class="s1">(color != nil) {</span>
            <span class="s4">return </span><span class="s1">color</span><span class="s4">;</span>
          <span class="s1">}</span>
          <span class="s1">color = RCTColorFromSemanticColorName(name)</span><span class="s4">;</span>
          <span class="s4">if </span><span class="s1">(color != nil) {</span>
            <span class="s4">return </span><span class="s1">color</span><span class="s4">;</span>
          <span class="s1">}</span>
        <span class="s1">}</span>
        <span class="s1">RCTLogConvertError(</span>
            <span class="s1">json</span><span class="s4">,</span>
            <span class="s1">[</span><span class="s4">@</span><span class="s3">&quot;a UIColor.  None of the names in the array were one of the following values: &quot;</span>
                <span class="s1">stringByAppendingString:RCTSemanticColorNames()])</span><span class="s4">;</span>
        <span class="s4">return </span><span class="s1">nil</span><span class="s4">;</span>
      <span class="s1">}</span>
      <span class="s1">RCTLogConvertError(</span>
          <span class="s1">json</span><span class="s4">, @</span><span class="s3">&quot;a UIColor.  Expected either a single name or an array of names but got something else.&quot;</span><span class="s1">)</span><span class="s4">;</span>
      <span class="s4">return </span><span class="s1">nil</span><span class="s4">;</span>
    <span class="s1">} </span><span class="s4">else if </span><span class="s1">((value = [dictionary objectForKey:</span><span class="s4">@</span><span class="s3">&quot;dynamic&quot;</span><span class="s1">])) {</span>
      <span class="s1">NSDictionary *appearances = value</span><span class="s4">;</span>
      <span class="s1">id light = [appearances objectForKey:</span><span class="s4">@</span><span class="s3">&quot;light&quot;</span><span class="s1">]</span><span class="s4">;</span>
      <span class="s1">UIColor *lightColor = [RCTConvert UIColor:light]</span><span class="s4">;</span>
      <span class="s1">id dark = [appearances objectForKey:</span><span class="s4">@</span><span class="s3">&quot;dark&quot;</span><span class="s1">]</span><span class="s4">;</span>
      <span class="s1">UIColor *darkColor = [RCTConvert UIColor:dark]</span><span class="s4">;</span>
      <span class="s1">id highContrastLight = [appearances objectForKey:</span><span class="s4">@</span><span class="s3">&quot;highContrastLight&quot;</span><span class="s1">]</span><span class="s4">;</span>
      <span class="s1">UIColor *highContrastLightColor = [RCTConvert UIColor:highContrastLight]</span><span class="s4">;</span>
      <span class="s1">id highContrastDark = [appearances objectForKey:</span><span class="s4">@</span><span class="s3">&quot;highContrastDark&quot;</span><span class="s1">]</span><span class="s4">;</span>
      <span class="s1">UIColor *highContrastDarkColor = [RCTConvert UIColor:highContrastDark]</span><span class="s4">;</span>
      <span class="s4">if </span><span class="s1">(lightColor != nil &amp;&amp; darkColor != nil) {</span>
<span class="s2">#if </span><span class="s1">defined(__IPHONE_OS_VERSION_MAX_ALLOWED) &amp;&amp; __IPHONE_OS_VERSION_MAX_ALLOWED &gt;= </span><span class="s5">130000</span>
        <span class="s4">if </span><span class="s1">(</span><span class="s4">@available</span><span class="s1">(iOS </span><span class="s5">13.0</span><span class="s4">, </span><span class="s1">*)) {</span>
          <span class="s1">UIColor *color = [UIColor colorWithDynamicProvider:^UIColor *</span><span class="s4">_Nonnull</span><span class="s1">(</span>
                                        <span class="s1">UITraitCollection *</span><span class="s4">_Nonnull </span><span class="s1">collection) {</span>
            <span class="s4">if </span><span class="s1">(collection.userInterfaceStyle == UIUserInterfaceStyleDark) {</span>
              <span class="s4">if </span><span class="s1">(collection.accessibilityContrast == UIAccessibilityContrastHigh &amp;&amp; highContrastDarkColor != nil) {</span>
                <span class="s4">return </span><span class="s1">highContrastDarkColor</span><span class="s4">;</span>
              <span class="s1">} </span><span class="s4">else </span><span class="s1">{</span>
                <span class="s4">return </span><span class="s1">darkColor</span><span class="s4">;</span>
              <span class="s1">}</span>
            <span class="s1">} </span><span class="s4">else </span><span class="s1">{</span>
              <span class="s4">if </span><span class="s1">(collection.accessibilityContrast == UIAccessibilityContrastHigh &amp;&amp; highContrastLightColor != nil) {</span>
                <span class="s4">return </span><span class="s1">highContrastLightColor</span><span class="s4">;</span>
              <span class="s1">} </span><span class="s4">else </span><span class="s1">{</span>
                <span class="s4">return </span><span class="s1">lightColor</span><span class="s4">;</span>
              <span class="s1">}</span>
            <span class="s1">}</span>
          <span class="s1">}]</span><span class="s4">;</span>
          <span class="s4">return </span><span class="s1">color</span><span class="s4">;</span>
        <span class="s1">} </span><span class="s4">else </span><span class="s1">{</span>
<span class="s2">#endif</span>
          <span class="s4">return </span><span class="s1">lightColor</span><span class="s4">;</span>
<span class="s2">#if </span><span class="s1">defined(__IPHONE_OS_VERSION_MAX_ALLOWED) &amp;&amp; __IPHONE_OS_VERSION_MAX_ALLOWED &gt;= </span><span class="s5">130000</span>
        <span class="s1">}</span>
<span class="s2">#endif</span>
      <span class="s1">} </span><span class="s4">else </span><span class="s1">{</span>
        <span class="s1">RCTLogConvertError(json</span><span class="s4">, @</span><span class="s3">&quot;a UIColor. Expected an iOS dynamic appearance aware color.&quot;</span><span class="s1">)</span><span class="s4">;</span>
        <span class="s4">return </span><span class="s1">nil</span><span class="s4">;</span>
      <span class="s1">}</span>
    <span class="s1">} </span><span class="s4">else </span><span class="s1">{</span>
      <span class="s1">RCTLogConvertError(json</span><span class="s4">, @</span><span class="s3">&quot;a UIColor. Expected an iOS semantic color or dynamic appearance aware color.&quot;</span><span class="s1">)</span><span class="s4">;</span>
      <span class="s4">return </span><span class="s1">nil</span><span class="s4">;</span>
    <span class="s1">}</span>
  <span class="s1">} </span><span class="s4">else </span><span class="s1">{</span>
    <span class="s1">RCTLogConvertError(json</span><span class="s4">, @</span><span class="s3">&quot;a UIColor. Did you forget to call processColor() on the JS side?&quot;</span><span class="s1">)</span><span class="s4">;</span>
    <span class="s4">return </span><span class="s1">nil</span><span class="s4">;</span>
  <span class="s1">}</span>
<span class="s1">}</span>

<span class="s1">+ (CGColorRef)CGColor:(id)json</span>
<span class="s1">{</span>
  <span class="s4">return </span><span class="s1">[self UIColor:json].CGColor</span><span class="s4">;</span>
<span class="s1">}</span>

<span class="s1">+ (YGValue)YGValue:(id)json</span>
<span class="s1">{</span>
  <span class="s4">if </span><span class="s1">(!json) {</span>
    <span class="s4">return </span><span class="s1">YGValueUndefined</span><span class="s4">;</span>
  <span class="s1">} </span><span class="s4">else if </span><span class="s1">([json isKindOfClass:[NSNumber </span><span class="s4">class</span><span class="s1">]]) {</span>
    <span class="s4">return </span><span class="s1">(YGValue){[json floatValue]</span><span class="s4">, </span><span class="s1">YGUnitPoint}</span><span class="s4">;</span>
  <span class="s1">} </span><span class="s4">else if </span><span class="s1">([json isKindOfClass:[NSString </span><span class="s4">class</span><span class="s1">]]) {</span>
    <span class="s1">NSString *s = (NSString *)json</span><span class="s4">;</span>
    <span class="s4">if </span><span class="s1">([s isEqualToString:</span><span class="s4">@</span><span class="s3">&quot;auto&quot;</span><span class="s1">]) {</span>
      <span class="s4">return </span><span class="s1">(YGValue){YGUndefined</span><span class="s4">, </span><span class="s1">YGUnitAuto}</span><span class="s4">;</span>
    <span class="s1">} </span><span class="s4">else if </span><span class="s1">([s hasSuffix:</span><span class="s4">@</span><span class="s3">&quot;%&quot;</span><span class="s1">]) {</span>
      <span class="s4">float </span><span class="s1">floatValue</span><span class="s4">;</span>
      <span class="s4">if </span><span class="s1">([[NSScanner scannerWithString:s] scanFloat:&amp;floatValue]) {</span>
        <span class="s4">return </span><span class="s1">(YGValue){floatValue</span><span class="s4">, </span><span class="s1">YGUnitPercent}</span><span class="s4">;</span>
      <span class="s1">}</span>
    <span class="s1">} </span><span class="s4">else </span><span class="s1">{</span>
      <span class="s1">RCTLogAdvice(</span>
          <span class="s4">@</span><span class="s3">&quot;</span><span class="s4">\&quot;</span><span class="s3">%@</span><span class="s4">\&quot; </span><span class="s3">is not a valid dimension. Dimensions must be a number, </span><span class="s4">\&quot;</span><span class="s3">auto</span><span class="s4">\&quot;</span><span class="s3">, or a string suffixed with </span><span class="s4">\&quot;</span><span class="s3">%%</span><span class="s4">\&quot;</span><span class="s3">.&quot;</span><span class="s4">,</span>
          <span class="s1">s)</span><span class="s4">;</span>
    <span class="s1">}</span>
  <span class="s1">}</span>
  <span class="s4">return </span><span class="s1">YGValueUndefined</span><span class="s4">;</span>
<span class="s1">}</span>

<span class="s1">NSArray *RCTConvertArrayValue(SEL type</span><span class="s4">, </span><span class="s1">id json)</span>
<span class="s1">{</span>
  <span class="s1">__block BOOL copy = NO</span><span class="s4">;</span>
  <span class="s1">__block NSArray *values = json = [RCTConvert NSArray:json]</span><span class="s4">;</span>
  <span class="s1">[json enumerateObjectsUsingBlock:^(id jsonValue</span><span class="s4">, </span><span class="s1">NSUInteger idx</span><span class="s4">, </span><span class="s1">__unused BOOL *stop) {</span>
    <span class="s1">id value = ((id(*)(Class</span><span class="s4">, </span><span class="s1">SEL</span><span class="s4">, </span><span class="s1">id))objc_msgSend)([RCTConvert </span><span class="s4">class</span><span class="s1">]</span><span class="s4">, </span><span class="s1">type</span><span class="s4">, </span><span class="s1">jsonValue)</span><span class="s4">;</span>
    <span class="s4">if </span><span class="s1">(copy) {</span>
      <span class="s4">if </span><span class="s1">(value) {</span>
        <span class="s1">[(NSMutableArray *)values addObject:value]</span><span class="s4">;</span>
      <span class="s1">}</span>
    <span class="s1">} </span><span class="s4">else if </span><span class="s1">(value != jsonValue) {</span>
      <span class="s0">// Converted value is different, so we'll need to copy the array</span>
      <span class="s1">values = [[NSMutableArray alloc] initWithCapacity:values.count]</span><span class="s4">;</span>
      <span class="s4">for </span><span class="s1">(NSUInteger i = </span><span class="s5">0</span><span class="s4">; </span><span class="s1">i &lt; idx</span><span class="s4">; </span><span class="s1">i++) {</span>
        <span class="s1">[(NSMutableArray *)values addObject:json[i]]</span><span class="s4">;</span>
      <span class="s1">}</span>
      <span class="s4">if </span><span class="s1">(value) {</span>
        <span class="s1">[(NSMutableArray *)values addObject:value]</span><span class="s4">;</span>
      <span class="s1">}</span>
      <span class="s1">copy = YES</span><span class="s4">;</span>
    <span class="s1">}</span>
  <span class="s1">}]</span><span class="s4">;</span>
  <span class="s4">return </span><span class="s1">values</span><span class="s4">;</span>
<span class="s1">}</span>

<span class="s1">RCT_ARRAY_CONVERTER(NSURL)</span>
<span class="s1">RCT_ARRAY_CONVERTER(RCTFileURL)</span>
<span class="s1">RCT_ARRAY_CONVERTER(UIColor)</span>

<span class="s0">/** 
 * This macro is used for creating converter functions for directly 
 * representable json array values that require no conversion. 
 */</span>
<span class="s2">#if </span><span class="s1">RCT_DEBUG</span>
<span class="s2">#define </span><span class="s1">RCT_JSON_ARRAY_CONVERTER_NAMED(type</span><span class="s4">, </span><span class="s1">name) RCT_ARRAY_CONVERTER_NAMED(type</span><span class="s4">, </span><span class="s1">name)</span>
<span class="s2">#else</span>
<span class="s2">#define </span><span class="s1">RCT_JSON_ARRAY_CONVERTER_NAMED(type</span><span class="s4">, </span><span class="s1">name) \ 
  +(NSArray *)name##Array : (id)json               \ 
  {                                                \ 
    </span><span class="s4">return </span><span class="s1">json</span><span class="s4">;                                   </span><span class="s1">\ 
  }</span>
<span class="s2">#endif</span>
<span class="s2">#define </span><span class="s1">RCT_JSON_ARRAY_CONVERTER(type) RCT_JSON_ARRAY_CONVERTER_NAMED(type</span><span class="s4">, </span><span class="s1">type)</span>

<span class="s1">RCT_JSON_ARRAY_CONVERTER(NSArray)</span>
<span class="s1">RCT_JSON_ARRAY_CONVERTER(NSString)</span>
<span class="s1">RCT_JSON_ARRAY_CONVERTER_NAMED(NSArray&lt;NSString *&gt;</span><span class="s4">, </span><span class="s1">NSStringArray)</span>
<span class="s1">RCT_JSON_ARRAY_CONVERTER(NSDictionary)</span>
<span class="s1">RCT_JSON_ARRAY_CONVERTER(NSNumber)</span>

<span class="s0">// Can't use RCT_ARRAY_CONVERTER due to bridged cast</span>
<span class="s1">+ (NSArray *)CGColorArray:(id)json</span>
<span class="s1">{</span>
  <span class="s1">NSMutableArray *colors = [NSMutableArray new]</span><span class="s4">;</span>
  <span class="s4">for </span><span class="s1">(id value in [self NSArray:json]) {</span>
    <span class="s1">[colors addObject:(</span><span class="s4">__bridge </span><span class="s1">id)[self CGColor:value]]</span><span class="s4">;</span>
  <span class="s1">}</span>
  <span class="s4">return </span><span class="s1">colors</span><span class="s4">;</span>
<span class="s1">}</span>

<span class="s4">static </span><span class="s1">id RCTConvertPropertyListValue(id json)</span>
<span class="s1">{</span>
  <span class="s4">if </span><span class="s1">(!json || json == (id)kCFNull) {</span>
    <span class="s4">return </span><span class="s1">nil</span><span class="s4">;</span>
  <span class="s1">}</span>

  <span class="s4">if </span><span class="s1">([json isKindOfClass:[NSDictionary </span><span class="s4">class</span><span class="s1">]]) {</span>
    <span class="s1">__block BOOL copy = NO</span><span class="s4">;</span>
    <span class="s1">NSMutableDictionary *values = [[NSMutableDictionary alloc] initWithCapacity:[json count]]</span><span class="s4">;</span>
    <span class="s1">[json enumerateKeysAndObjectsUsingBlock:^(NSString *key</span><span class="s4">, </span><span class="s1">id jsonValue</span><span class="s4">, </span><span class="s1">__unused BOOL *stop) {</span>
      <span class="s1">id value = RCTConvertPropertyListValue(jsonValue)</span><span class="s4">;</span>
      <span class="s4">if </span><span class="s1">(value) {</span>
        <span class="s1">values[key] = value</span><span class="s4">;</span>
      <span class="s1">}</span>
      <span class="s1">copy |= value != jsonValue</span><span class="s4">;</span>
    <span class="s1">}]</span><span class="s4">;</span>
    <span class="s4">return </span><span class="s1">copy ? values : json</span><span class="s4">;</span>
  <span class="s1">}</span>

  <span class="s4">if </span><span class="s1">([json isKindOfClass:[NSArray </span><span class="s4">class</span><span class="s1">]]) {</span>
    <span class="s1">__block BOOL copy = NO</span><span class="s4">;</span>
    <span class="s1">__block NSArray *values = json</span><span class="s4">;</span>
    <span class="s1">[json enumerateObjectsUsingBlock:^(id jsonValue</span><span class="s4">, </span><span class="s1">NSUInteger idx</span><span class="s4">, </span><span class="s1">__unused BOOL *stop) {</span>
      <span class="s1">id value = RCTConvertPropertyListValue(jsonValue)</span><span class="s4">;</span>
      <span class="s4">if </span><span class="s1">(copy) {</span>
        <span class="s4">if </span><span class="s1">(value) {</span>
          <span class="s1">[(NSMutableArray *)values addObject:value]</span><span class="s4">;</span>
        <span class="s1">}</span>
      <span class="s1">} </span><span class="s4">else if </span><span class="s1">(value != jsonValue) {</span>
        <span class="s0">// Converted value is different, so we'll need to copy the array</span>
        <span class="s1">values = [[NSMutableArray alloc] initWithCapacity:values.count]</span><span class="s4">;</span>
        <span class="s4">for </span><span class="s1">(NSUInteger i = </span><span class="s5">0</span><span class="s4">; </span><span class="s1">i &lt; idx</span><span class="s4">; </span><span class="s1">i++) {</span>
          <span class="s1">[(NSMutableArray *)values addObject:json[i]]</span><span class="s4">;</span>
        <span class="s1">}</span>
        <span class="s4">if </span><span class="s1">(value) {</span>
          <span class="s1">[(NSMutableArray *)values addObject:value]</span><span class="s4">;</span>
        <span class="s1">}</span>
        <span class="s1">copy = YES</span><span class="s4">;</span>
      <span class="s1">}</span>
    <span class="s1">}]</span><span class="s4">;</span>
    <span class="s4">return </span><span class="s1">values</span><span class="s4">;</span>
  <span class="s1">}</span>

  <span class="s0">// All other JSON types are supported by property lists</span>
  <span class="s4">return </span><span class="s1">json</span><span class="s4">;</span>
<span class="s1">}</span>

<span class="s1">+ (NSPropertyList)NSPropertyList:(id)json</span>
<span class="s1">{</span>
  <span class="s4">return </span><span class="s1">RCTConvertPropertyListValue(json)</span><span class="s4">;</span>
<span class="s1">}</span>

<span class="s1">RCT_ENUM_CONVERTER(css_backface_visibility_t</span><span class="s4">, </span><span class="s1">(</span><span class="s4">@</span><span class="s1">{</span><span class="s4">@</span><span class="s3">&quot;hidden&quot; </span><span class="s1">: </span><span class="s4">@</span><span class="s1">NO</span><span class="s4">, @</span><span class="s3">&quot;visible&quot; </span><span class="s1">: </span><span class="s4">@</span><span class="s1">YES})</span><span class="s4">, </span><span class="s1">YES</span><span class="s4">, </span><span class="s1">boolValue)</span>

<span class="s1">RCT_ENUM_CONVERTER(</span>
    <span class="s1">YGOverflow</span><span class="s4">,</span>
    <span class="s1">(</span><span class="s4">@</span><span class="s1">{</span>
      <span class="s4">@</span><span class="s3">&quot;hidden&quot; </span><span class="s1">: </span><span class="s4">@</span><span class="s1">(YGOverflowHidden)</span><span class="s4">,</span>
      <span class="s4">@</span><span class="s3">&quot;visible&quot; </span><span class="s1">: </span><span class="s4">@</span><span class="s1">(YGOverflowVisible)</span><span class="s4">,</span>
      <span class="s4">@</span><span class="s3">&quot;scroll&quot; </span><span class="s1">: </span><span class="s4">@</span><span class="s1">(YGOverflowScroll)</span><span class="s4">,</span>
    <span class="s1">})</span><span class="s4">,</span>
    <span class="s1">YGOverflowVisible</span><span class="s4">,</span>
    <span class="s1">intValue)</span>

<span class="s1">RCT_ENUM_CONVERTER(</span>
    <span class="s1">YGDisplay</span><span class="s4">,</span>
    <span class="s1">(</span><span class="s4">@</span><span class="s1">{</span>
      <span class="s4">@</span><span class="s3">&quot;flex&quot; </span><span class="s1">: </span><span class="s4">@</span><span class="s1">(YGDisplayFlex)</span><span class="s4">,</span>
      <span class="s4">@</span><span class="s3">&quot;none&quot; </span><span class="s1">: </span><span class="s4">@</span><span class="s1">(YGDisplayNone)</span><span class="s4">,</span>
    <span class="s1">})</span><span class="s4">,</span>
    <span class="s1">YGDisplayFlex</span><span class="s4">,</span>
    <span class="s1">intValue)</span>

<span class="s1">RCT_ENUM_CONVERTER(</span>
    <span class="s1">YGFlexDirection</span><span class="s4">,</span>
    <span class="s1">(</span><span class="s4">@</span><span class="s1">{</span>
      <span class="s4">@</span><span class="s3">&quot;row&quot; </span><span class="s1">: </span><span class="s4">@</span><span class="s1">(YGFlexDirectionRow)</span><span class="s4">,</span>
      <span class="s4">@</span><span class="s3">&quot;row-reverse&quot; </span><span class="s1">: </span><span class="s4">@</span><span class="s1">(YGFlexDirectionRowReverse)</span><span class="s4">,</span>
      <span class="s4">@</span><span class="s3">&quot;column&quot; </span><span class="s1">: </span><span class="s4">@</span><span class="s1">(YGFlexDirectionColumn)</span><span class="s4">,</span>
      <span class="s4">@</span><span class="s3">&quot;column-reverse&quot; </span><span class="s1">: </span><span class="s4">@</span><span class="s1">(YGFlexDirectionColumnReverse)</span>
    <span class="s1">})</span><span class="s4">,</span>
    <span class="s1">YGFlexDirectionColumn</span><span class="s4">,</span>
    <span class="s1">intValue)</span>

<span class="s1">RCT_ENUM_CONVERTER(</span>
    <span class="s1">YGJustify</span><span class="s4">,</span>
    <span class="s1">(</span><span class="s4">@</span><span class="s1">{</span>
      <span class="s4">@</span><span class="s3">&quot;flex-start&quot; </span><span class="s1">: </span><span class="s4">@</span><span class="s1">(YGJustifyFlexStart)</span><span class="s4">,</span>
      <span class="s4">@</span><span class="s3">&quot;flex-end&quot; </span><span class="s1">: </span><span class="s4">@</span><span class="s1">(YGJustifyFlexEnd)</span><span class="s4">,</span>
      <span class="s4">@</span><span class="s3">&quot;center&quot; </span><span class="s1">: </span><span class="s4">@</span><span class="s1">(YGJustifyCenter)</span><span class="s4">,</span>
      <span class="s4">@</span><span class="s3">&quot;space-between&quot; </span><span class="s1">: </span><span class="s4">@</span><span class="s1">(YGJustifySpaceBetween)</span><span class="s4">,</span>
      <span class="s4">@</span><span class="s3">&quot;space-around&quot; </span><span class="s1">: </span><span class="s4">@</span><span class="s1">(YGJustifySpaceAround)</span><span class="s4">,</span>
      <span class="s4">@</span><span class="s3">&quot;space-evenly&quot; </span><span class="s1">: </span><span class="s4">@</span><span class="s1">(YGJustifySpaceEvenly)</span>
    <span class="s1">})</span><span class="s4">,</span>
    <span class="s1">YGJustifyFlexStart</span><span class="s4">,</span>
    <span class="s1">intValue)</span>

<span class="s1">RCT_ENUM_CONVERTER(</span>
    <span class="s1">YGAlign</span><span class="s4">,</span>
    <span class="s1">(</span><span class="s4">@</span><span class="s1">{</span>
      <span class="s4">@</span><span class="s3">&quot;flex-start&quot; </span><span class="s1">: </span><span class="s4">@</span><span class="s1">(YGAlignFlexStart)</span><span class="s4">,</span>
      <span class="s4">@</span><span class="s3">&quot;flex-end&quot; </span><span class="s1">: </span><span class="s4">@</span><span class="s1">(YGAlignFlexEnd)</span><span class="s4">,</span>
      <span class="s4">@</span><span class="s3">&quot;center&quot; </span><span class="s1">: </span><span class="s4">@</span><span class="s1">(YGAlignCenter)</span><span class="s4">,</span>
      <span class="s4">@</span><span class="s3">&quot;auto&quot; </span><span class="s1">: </span><span class="s4">@</span><span class="s1">(YGAlignAuto)</span><span class="s4">,</span>
      <span class="s4">@</span><span class="s3">&quot;stretch&quot; </span><span class="s1">: </span><span class="s4">@</span><span class="s1">(YGAlignStretch)</span><span class="s4">,</span>
      <span class="s4">@</span><span class="s3">&quot;baseline&quot; </span><span class="s1">: </span><span class="s4">@</span><span class="s1">(YGAlignBaseline)</span><span class="s4">,</span>
      <span class="s4">@</span><span class="s3">&quot;space-between&quot; </span><span class="s1">: </span><span class="s4">@</span><span class="s1">(YGAlignSpaceBetween)</span><span class="s4">,</span>
      <span class="s4">@</span><span class="s3">&quot;space-around&quot; </span><span class="s1">: </span><span class="s4">@</span><span class="s1">(YGAlignSpaceAround)</span>
    <span class="s1">})</span><span class="s4">,</span>
    <span class="s1">YGAlignFlexStart</span><span class="s4">,</span>
    <span class="s1">intValue)</span>

<span class="s1">RCT_ENUM_CONVERTER(</span>
    <span class="s1">YGDirection</span><span class="s4">,</span>
    <span class="s1">(</span><span class="s4">@</span><span class="s1">{</span>
      <span class="s4">@</span><span class="s3">&quot;inherit&quot; </span><span class="s1">: </span><span class="s4">@</span><span class="s1">(YGDirectionInherit)</span><span class="s4">,</span>
      <span class="s4">@</span><span class="s3">&quot;ltr&quot; </span><span class="s1">: </span><span class="s4">@</span><span class="s1">(YGDirectionLTR)</span><span class="s4">,</span>
      <span class="s4">@</span><span class="s3">&quot;rtl&quot; </span><span class="s1">: </span><span class="s4">@</span><span class="s1">(YGDirectionRTL)</span><span class="s4">,</span>
    <span class="s1">})</span><span class="s4">,</span>
    <span class="s1">YGDirectionInherit</span><span class="s4">,</span>
    <span class="s1">intValue)</span>

<span class="s1">RCT_ENUM_CONVERTER(</span>
    <span class="s1">YGPositionType</span><span class="s4">,</span>
    <span class="s1">(</span><span class="s4">@</span><span class="s1">{</span>
      <span class="s4">@</span><span class="s3">&quot;static&quot; </span><span class="s1">: </span><span class="s4">@</span><span class="s1">(YGPositionTypeStatic)</span><span class="s4">,</span>
      <span class="s4">@</span><span class="s3">&quot;absolute&quot; </span><span class="s1">: </span><span class="s4">@</span><span class="s1">(YGPositionTypeAbsolute)</span><span class="s4">,</span>
      <span class="s4">@</span><span class="s3">&quot;relative&quot; </span><span class="s1">: </span><span class="s4">@</span><span class="s1">(YGPositionTypeRelative)</span>
    <span class="s1">})</span><span class="s4">,</span>
    <span class="s1">YGPositionTypeRelative</span><span class="s4">,</span>
    <span class="s1">intValue)</span>

<span class="s1">RCT_ENUM_CONVERTER(</span>
    <span class="s1">YGWrap</span><span class="s4">,</span>
    <span class="s1">(</span><span class="s4">@</span><span class="s1">{</span><span class="s4">@</span><span class="s3">&quot;wrap&quot; </span><span class="s1">: </span><span class="s4">@</span><span class="s1">(YGWrapWrap)</span><span class="s4">, @</span><span class="s3">&quot;nowrap&quot; </span><span class="s1">: </span><span class="s4">@</span><span class="s1">(YGWrapNoWrap)</span><span class="s4">, @</span><span class="s3">&quot;wrap-reverse&quot; </span><span class="s1">: </span><span class="s4">@</span><span class="s1">(YGWrapWrapReverse)})</span><span class="s4">,</span>
    <span class="s1">YGWrapNoWrap</span><span class="s4">,</span>
    <span class="s1">intValue)</span>

<span class="s1">RCT_ENUM_CONVERTER(</span>
    <span class="s1">RCTPointerEvents</span><span class="s4">,</span>
    <span class="s1">(</span><span class="s4">@</span><span class="s1">{</span>
      <span class="s4">@</span><span class="s3">&quot;none&quot; </span><span class="s1">: </span><span class="s4">@</span><span class="s1">(RCTPointerEventsNone)</span><span class="s4">,</span>
      <span class="s4">@</span><span class="s3">&quot;box-only&quot; </span><span class="s1">: </span><span class="s4">@</span><span class="s1">(RCTPointerEventsBoxOnly)</span><span class="s4">,</span>
      <span class="s4">@</span><span class="s3">&quot;box-none&quot; </span><span class="s1">: </span><span class="s4">@</span><span class="s1">(RCTPointerEventsBoxNone)</span><span class="s4">,</span>
      <span class="s4">@</span><span class="s3">&quot;auto&quot; </span><span class="s1">: </span><span class="s4">@</span><span class="s1">(RCTPointerEventsUnspecified)</span>
    <span class="s1">})</span><span class="s4">,</span>
    <span class="s1">RCTPointerEventsUnspecified</span><span class="s4">,</span>
    <span class="s1">integerValue)</span>

<span class="s1">RCT_ENUM_CONVERTER(</span>
    <span class="s1">RCTAnimationType</span><span class="s4">,</span>
    <span class="s1">(</span><span class="s4">@</span><span class="s1">{</span>
      <span class="s4">@</span><span class="s3">&quot;spring&quot; </span><span class="s1">: </span><span class="s4">@</span><span class="s1">(RCTAnimationTypeSpring)</span><span class="s4">,</span>
      <span class="s4">@</span><span class="s3">&quot;linear&quot; </span><span class="s1">: </span><span class="s4">@</span><span class="s1">(RCTAnimationTypeLinear)</span><span class="s4">,</span>
      <span class="s4">@</span><span class="s3">&quot;easeIn&quot; </span><span class="s1">: </span><span class="s4">@</span><span class="s1">(RCTAnimationTypeEaseIn)</span><span class="s4">,</span>
      <span class="s4">@</span><span class="s3">&quot;easeOut&quot; </span><span class="s1">: </span><span class="s4">@</span><span class="s1">(RCTAnimationTypeEaseOut)</span><span class="s4">,</span>
      <span class="s4">@</span><span class="s3">&quot;easeInEaseOut&quot; </span><span class="s1">: </span><span class="s4">@</span><span class="s1">(RCTAnimationTypeEaseInEaseOut)</span><span class="s4">,</span>
      <span class="s4">@</span><span class="s3">&quot;keyboard&quot; </span><span class="s1">: </span><span class="s4">@</span><span class="s1">(RCTAnimationTypeKeyboard)</span><span class="s4">,</span>
    <span class="s1">})</span><span class="s4">,</span>
    <span class="s1">RCTAnimationTypeEaseInEaseOut</span><span class="s4">,</span>
    <span class="s1">integerValue)</span>

<span class="s4">@end</span>

<span class="s4">@interface </span><span class="s1">RCTImageSource (Packager)</span>

<span class="s4">@property </span><span class="s1">(nonatomic</span><span class="s4">, </span><span class="s1">assign) BOOL packagerAsset</span><span class="s4">;</span>

<span class="s4">@end</span>

<span class="s4">@implementation </span><span class="s1">RCTConvert (Deprecated)</span>

<span class="s0">/* This method is only used when loading images synchronously, e.g. for tabbar icons */</span>
<span class="s1">+ (UIImage *)UIImage:(id)json</span>
<span class="s1">{</span>
  <span class="s4">if </span><span class="s1">(!json) {</span>
    <span class="s4">return </span><span class="s1">nil</span><span class="s4">;</span>
  <span class="s1">}</span>

  <span class="s1">RCTImageSource *imageSource = [self RCTImageSource:json]</span><span class="s4">;</span>
  <span class="s4">if </span><span class="s1">(!imageSource) {</span>
    <span class="s4">return </span><span class="s1">nil</span><span class="s4">;</span>
  <span class="s1">}</span>

  <span class="s1">__block UIImage *image</span><span class="s4">;</span>
  <span class="s4">if </span><span class="s1">(!RCTIsMainQueue()) {</span>
    <span class="s0">// It seems that none of the UIImage loading methods can be guaranteed</span>
    <span class="s0">// thread safe, so we'll pick the lesser of two evils here and block rather</span>
    <span class="s0">// than run the risk of crashing</span>
    <span class="s1">RCTLogWarn(</span><span class="s4">@</span><span class="s3">&quot;Calling [RCTConvert UIImage:] on a background thread is not recommended&quot;</span><span class="s1">)</span><span class="s4">;</span>
    <span class="s1">RCTUnsafeExecuteOnMainQueueSync(^{</span>
      <span class="s1">image = [self UIImage:json]</span><span class="s4">;</span>
    <span class="s1">})</span><span class="s4">;</span>
    <span class="s4">return </span><span class="s1">image</span><span class="s4">;</span>
  <span class="s1">}</span>

  <span class="s1">NSURL *URL = imageSource.request.URL</span><span class="s4">;</span>
  <span class="s1">NSString *scheme = URL.scheme.lowercaseString</span><span class="s4">;</span>
  <span class="s4">if </span><span class="s1">([scheme isEqualToString:</span><span class="s4">@</span><span class="s3">&quot;file&quot;</span><span class="s1">]) {</span>
    <span class="s1">image = RCTImageFromLocalAssetURL(URL)</span><span class="s4">;</span>
    <span class="s0">// There is a case where this may fail when the image is at the bundle location.</span>
    <span class="s0">// RCTImageFromLocalAssetURL only checks for the image in the same location as the jsbundle</span>
    <span class="s0">// Hence, if the bundle is CodePush-ed, it will not be able to find the image.</span>
    <span class="s0">// This check is added here instead of being inside RCTImageFromLocalAssetURL, since</span>
    <span class="s0">// we don't want breaking changes to RCTImageFromLocalAssetURL, which is called in a lot of places</span>
    <span class="s0">// This is a deprecated method, and hence has the least impact on existing code. Basically,</span>
    <span class="s0">// instead of crashing the app, it tries one more location for the image.</span>
    <span class="s4">if </span><span class="s1">(!image) {</span>
      <span class="s1">image = RCTImageFromLocalBundleAssetURL(URL)</span><span class="s4">;</span>
    <span class="s1">}</span>
    <span class="s4">if </span><span class="s1">(!image) {</span>
      <span class="s1">RCTLogConvertError(json</span><span class="s4">, @</span><span class="s3">&quot;an image. File not found.&quot;</span><span class="s1">)</span><span class="s4">;</span>
    <span class="s1">}</span>
  <span class="s1">} </span><span class="s4">else if </span><span class="s1">([scheme isEqualToString:</span><span class="s4">@</span><span class="s3">&quot;data&quot;</span><span class="s1">]) {</span>
    <span class="s1">image = [UIImage imageWithData:[NSData dataWithContentsOfURL:URL]]</span><span class="s4">;</span>
  <span class="s1">} </span><span class="s4">else if </span><span class="s1">([scheme isEqualToString:</span><span class="s4">@</span><span class="s3">&quot;http&quot;</span><span class="s1">] &amp;&amp; imageSource.packagerAsset) {</span>
    <span class="s1">image = [UIImage imageWithData:[NSData dataWithContentsOfURL:URL]]</span><span class="s4">;</span>
  <span class="s1">} </span><span class="s4">else </span><span class="s1">{</span>
    <span class="s1">RCTLogConvertError(json</span><span class="s4">, @</span><span class="s3">&quot;an image. Only local files or data URIs are supported.&quot;</span><span class="s1">)</span><span class="s4">;</span>
    <span class="s4">return </span><span class="s1">nil</span><span class="s4">;</span>
  <span class="s1">}</span>

  <span class="s1">CGFloat scale = imageSource.scale</span><span class="s4">;</span>
  <span class="s4">if </span><span class="s1">(!scale &amp;&amp; imageSource.size.width) {</span>
    <span class="s0">// If no scale provided, set scale to image width / source width</span>
    <span class="s1">scale = CGImageGetWidth(image.CGImage) / imageSource.size.width</span><span class="s4">;</span>
  <span class="s1">}</span>

  <span class="s4">if </span><span class="s1">(scale) {</span>
    <span class="s1">image = [UIImage imageWithCGImage:image.CGImage scale:scale orientation:image.imageOrientation]</span><span class="s4">;</span>
  <span class="s1">}</span>

  <span class="s4">if </span><span class="s1">(!CGSizeEqualToSize(imageSource.size</span><span class="s4">, </span><span class="s1">CGSizeZero) &amp;&amp; !CGSizeEqualToSize(imageSource.size</span><span class="s4">, </span><span class="s1">image.size)) {</span>
    <span class="s1">RCTLogInfo(</span>
        <span class="s4">@</span><span class="s3">&quot;Image source %@ size %@ does not match loaded image size %@.&quot;</span><span class="s4">,</span>
        <span class="s1">URL.path.lastPathComponent</span><span class="s4">,</span>
        <span class="s1">NSStringFromCGSize(imageSource.size)</span><span class="s4">,</span>
        <span class="s1">NSStringFromCGSize(image.size))</span><span class="s4">;</span>
  <span class="s1">}</span>

  <span class="s4">return </span><span class="s1">image</span><span class="s4">;</span>
<span class="s1">}</span>

<span class="s1">+ (CGImageRef)CGImage:(id)json</span>
<span class="s1">{</span>
  <span class="s4">return </span><span class="s1">[self UIImage:json].CGImage</span><span class="s4">;</span>
<span class="s1">}</span>

<span class="s4">@end</span>
</pre>
</body>
</html>