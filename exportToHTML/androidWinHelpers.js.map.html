<html>
<head>
<title>androidWinHelpers.js.map</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<style type="text/css">
.s0 { color: #a9b7c6;}
.s1 { color: #6a8759;}
.s2 { color: #6897bb; font-style: italic;}
.s3 { color: #cc7832; font-style: italic;}
</style>
</head>
<body bgcolor="#2b2b2b">
<table CELLSPACING=0 CELLPADDING=5 COLS=1 WIDTH="100%" BGCOLOR="#606060" >
<tr><td><center>
<font face="Arial, Helvetica" color="#000000">
androidWinHelpers.js.map</font>
</center></td></tr></table>
<pre><span class="s0">{</span><span class="s1">&quot;version&quot;</span><span class="s0">:</span><span class="s2">3</span><span class="s0">,</span><span class="s1">&quot;names&quot;</span><span class="s0">:[</span><span class="s1">&quot;getUserAndroidPath&quot;</span><span class="s0">,</span><span class="s1">&quot;join&quot;</span><span class="s0">,</span><span class="s1">&quot;process&quot;</span><span class="s0">,</span><span class="s1">&quot;env&quot;</span><span class="s0">,</span><span class="s1">&quot;LOCALAPPDATA&quot;</span><span class="s0">,</span><span class="s1">&quot;getAndroidSdkRootInstallation&quot;</span><span class="s0">,</span><span class="s1">&quot;ANDROID_SDK_ROOT&quot;</span><span class="s0">,</span><span class="s1">&quot;ANDROID_HOME&quot;</span><span class="s0">,</span><span class="s1">&quot;installPath&quot;</span><span class="s0">,</span><span class="s1">&quot;pathExistsSync&quot;</span><span class="s0">,</span><span class="s1">&quot;installComponent&quot;</span><span class="s0">,</span><span class="s1">&quot;component&quot;</span><span class="s0">,</span><span class="s1">&quot;androidSdkRoot&quot;</span><span class="s0">,</span><span class="s1">&quot;Promise&quot;</span><span class="s0">,</span><span class="s1">&quot;done&quot;</span><span class="s0">,</span><span class="s1">&quot;error&quot;</span><span class="s0">,</span><span class="s1">&quot;sdkmanager&quot;</span><span class="s0">,</span><span class="s1">&quot;command&quot;</span><span class="s0">,</span><span class="s1">&quot;child&quot;</span><span class="s0">,</span><span class="s1">&quot;executeCommand&quot;</span><span class="s0">,</span><span class="s1">&quot;stderr&quot;</span><span class="s0">,</span><span class="s1">&quot;stdout&quot;</span><span class="s0">,</span><span class="s1">&quot;on&quot;</span><span class="s0">,</span><span class="s1">&quot;data&quot;</span><span class="s0">,</span><span class="s1">&quot;includes&quot;</span><span class="s0">,</span><span class="s1">&quot;stdin&quot;</span><span class="s0">,</span><span class="s1">&quot;write&quot;</span><span class="s0">,</span><span class="s1">&quot;toString&quot;</span><span class="s0">,</span><span class="s1">&quot;exitStatus&quot;</span><span class="s0">,</span><span class="s1">&quot;undefined&quot;</span><span class="s0">,</span><span class="s1">&quot;parseHypervisor&quot;</span><span class="s0">,</span><span class="s1">&quot;status&quot;</span><span class="s0">,</span><span class="s1">&quot;customHypervisor&quot;</span><span class="s0">,</span><span class="s1">&quot;hypervisor&quot;</span><span class="s0">,</span><span class="s1">&quot;installed&quot;</span><span class="s0">,</span><span class="s1">&quot;test&quot;</span><span class="s0">,</span><span class="s1">&quot;getEmulatorAccelOutputInformation&quot;</span><span class="s0">,</span><span class="s1">&quot;androidSDKRoot&quot;</span><span class="s0">,</span><span class="s1">&quot;e&quot;</span><span class="s0">,</span><span class="s1">&quot;createAVD&quot;</span><span class="s0">,</span><span class="s1">&quot;name&quot;</span><span class="s0">,</span><span class="s1">&quot;device&quot;</span><span class="s0">,</span><span class="s1">&quot;image&quot;</span><span class="s0">,</span><span class="s1">&quot;abi&quot;</span><span class="s0">,</span><span class="s1">&quot;tag&quot;</span><span class="s0">,</span><span class="s1">&quot;avdmanager&quot;</span><span class="s0">,</span><span class="s1">&quot;configPath&quot;</span><span class="s0">,</span><span class="s1">&quot;HOMEPATH&quot;</span><span class="s0">,</span><span class="s1">&quot;content&quot;</span><span class="s0">,</span><span class="s1">&quot;readFile&quot;</span><span class="s0">,</span><span class="s1">&quot;updatedContent&quot;</span><span class="s0">,</span><span class="s1">&quot;replace&quot;</span><span class="s0">,</span><span class="s1">&quot;writeFile&quot;</span><span class="s0">,</span><span class="s1">&quot;getBestHypervisor&quot;</span><span class="s0">,</span><span class="s1">&quot;getProcessorType&quot;</span><span class="s0">,</span><span class="s1">&quot;lines&quot;</span><span class="s0">,</span><span class="s1">&quot;split&quot;</span><span class="s0">,</span><span class="s1">&quot;line&quot;</span><span class="s0">,</span><span class="s1">&quot;enableWHPX&quot;</span><span class="s0">,</span><span class="s1">&quot;enableHAXM&quot;</span><span class="s0">,</span><span class="s1">&quot;androidSdkInstallPath&quot;</span><span class="s0">,</span><span class="s1">&quot;enableAMDH&quot;</span><span class="s0">],</span><span class="s1">&quot;sources&quot;</span><span class="s0">:[</span><span class="s1">&quot;../../../src/tools/windows/androidWinHelpers.ts&quot;</span><span class="s0">],</span><span class="s1">&quot;sourcesContent&quot;</span><span class="s0">:[</span><span class="s1">&quot;import {readFile, writeFile, pathExistsSync} from 'fs-extra';</span><span class="s3">\n</span><span class="s1">import {join} from 'path';</span><span class="s3">\n</span><span class="s1">import {executeCommand} from './executeWinCommand';</span><span class="s3">\n</span><span class="s1">import {getProcessorType} from './processorType';</span><span class="s3">\n\n</span><span class="s1">type HypervisorStatus = {</span><span class="s3">\n  </span><span class="s1">hypervisor: 'WHPX' | 'HAXM' | 'AMDH' | 'none';</span><span class="s3">\n  </span><span class="s1">installed: boolean;</span><span class="s3">\n</span><span class="s1">};</span><span class="s3">\n\n</span><span class="s1">/**</span><span class="s3">\n </span><span class="s1">* Returns the path to where all Android related things should be installed</span><span class="s3">\n </span><span class="s1">* locally to the user.</span><span class="s3">\n </span><span class="s1">*/</span><span class="s3">\n</span><span class="s1">export const getUserAndroidPath = () =&gt; {</span><span class="s3">\n  </span><span class="s1">return join(process.env.LOCALAPPDATA || '', 'Android');</span><span class="s3">\n</span><span class="s1">};</span><span class="s3">\n\n</span><span class="s1">/**</span><span class="s3">\n </span><span class="s1">* Deals with ANDROID_HOME, ANDROID_SDK_ROOT or generates a new one</span><span class="s3">\n </span><span class="s1">*/</span><span class="s3">\n</span><span class="s1">export const getAndroidSdkRootInstallation = () =&gt; {</span><span class="s3">\n  </span><span class="s1">const env = process.env.ANDROID_SDK_ROOT || process.env.ANDROID_HOME;</span><span class="s3">\n  </span><span class="s1">const installPath = env</span><span class="s3">\n    </span><span class="s1">? // Happens if previous installations or not fully completed</span><span class="s3">\n      </span><span class="s1">env</span><span class="s3">\n    </span><span class="s1">: // All Android zip files have a root folder, using `Android` as the common place</span><span class="s3">\n      </span><span class="s1">join(getUserAndroidPath(), 'Sdk');</span><span class="s3">\n\n  </span><span class="s1">if (pathExistsSync(installPath)) {</span><span class="s3">\n    </span><span class="s1">return installPath;</span><span class="s3">\n  </span><span class="s1">} else {</span><span class="s3">\n    </span><span class="s1">return '';</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n</span><span class="s1">};</span><span class="s3">\n\n</span><span class="s1">/**</span><span class="s3">\n </span><span class="s1">* Installs an Android component (e.g.: `platform-tools`, `emulator`)</span><span class="s3">\n </span><span class="s1">* using the `sdkmanager` tool and automatically accepting the licenses.</span><span class="s3">\n </span><span class="s1">*/</span><span class="s3">\n</span><span class="s1">export const installComponent = (component: string, androidSdkRoot: string) =&gt; {</span><span class="s3">\n  </span><span class="s1">return new Promise((done, error) =&gt; {</span><span class="s3">\n    </span><span class="s1">const sdkmanager = join(androidSdkRoot, 'tools', 'bin', 'sdkmanager.bat');</span><span class="s3">\n\n    </span><span class="s1">const command = `</span><span class="s3">\&quot;</span><span class="s1">${sdkmanager}</span><span class="s3">\&quot; </span><span class="s1">--sdk_root=</span><span class="s3">\&quot;</span><span class="s1">${androidSdkRoot}</span><span class="s3">\&quot; \&quot;</span><span class="s1">${component}</span><span class="s3">\&quot;</span><span class="s1">`;</span><span class="s3">\n\n    </span><span class="s1">const child = executeCommand(command);</span><span class="s3">\n    </span><span class="s1">let stderr = '';</span><span class="s3">\n\n    </span><span class="s1">child.stdout?.on('data', (data) =&gt; {</span><span class="s3">\n      </span><span class="s1">if (data.includes('(y/N)')) {</span><span class="s3">\n        </span><span class="s1">child.stdin?.write('y</span><span class="s3">\\</span><span class="s1">n');</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">});</span><span class="s3">\n\n    </span><span class="s1">child.stderr?.on('data', (data) =&gt; {</span><span class="s3">\n      </span><span class="s1">stderr += data.toString('utf-8');</span><span class="s3">\n    </span><span class="s1">});</span><span class="s3">\n\n    </span><span class="s1">child.on('close', (exitStatus) =&gt; {</span><span class="s3">\n      </span><span class="s1">if (exitStatus === 0) {</span><span class="s3">\n        </span><span class="s1">done(undefined);</span><span class="s3">\n      </span><span class="s1">} else {</span><span class="s3">\n        </span><span class="s1">error({stderr});</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">});</span><span class="s3">\n    </span><span class="s1">child.on('error', error);</span><span class="s3">\n  </span><span class="s1">});</span><span class="s3">\n</span><span class="s1">};</span><span class="s3">\n\n</span><span class="s1">/**</span><span class="s3">\n </span><span class="s1">* For the given custom Hypervisor and the output of `emulator-check accel`</span><span class="s3">\n </span><span class="s1">* returns the preferred Hypervisor to use and its installation status.</span><span class="s3">\n </span><span class="s1">* The recommendation order is:</span><span class="s3">\n </span><span class="s1">* 1. WHPX</span><span class="s3">\n </span><span class="s1">* 2. HAXM if Intel</span><span class="s3">\n </span><span class="s1">* 3. AMDH if AMD</span><span class="s3">\n </span><span class="s1">*/</span><span class="s3">\n</span><span class="s1">const parseHypervisor = (</span><span class="s3">\n  </span><span class="s1">status: string,</span><span class="s3">\n  </span><span class="s1">customHypervisor: 'HAXM' | 'AMDH',</span><span class="s3">\n</span><span class="s1">): HypervisorStatus | null =&gt; {</span><span class="s3">\n  </span><span class="s1">/**</span><span class="s3">\n   </span><span class="s1">* Messages:</span><span class="s3">\n   </span><span class="s1">* Android Emulator requires an Intel processor with VT-x and NX support.  Your CPU: 'AuthenticAMD'</span><span class="s3">\n   </span><span class="s1">* HAXM is not installed, but Windows Hypervisor Platform is available.</span><span class="s3">\n   </span><span class="s1">* WHPX (10.0.19041) is installed and usable.</span><span class="s3">\n   </span><span class="s1">* * This message outputs for WHPX and when the AMD Hypervisor is installed</span><span class="s3">\n   </span><span class="s1">* HAXM version 6.2.1 (4) is installed and usable.</span><span class="s3">\n   </span><span class="s1">* HAXM is not installed on this machine</span><span class="s3">\n   </span><span class="s1">*/</span><span class="s3">\n\n  </span><span class="s1">if (</span><span class="s3">\n    </span><span class="s1">status.includes(</span><span class="s3">\n      </span><span class="s1">'is not installed, but Windows Hypervisor Platform is available.',</span><span class="s3">\n    </span><span class="s1">)</span><span class="s3">\n  </span><span class="s1">) {</span><span class="s3">\n    </span><span class="s1">return {</span><span class="s3">\n      </span><span class="s1">hypervisor: 'WHPX',</span><span class="s3">\n      </span><span class="s1">installed: false,</span><span class="s3">\n    </span><span class="s1">};</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">if (/WHPX </span><span class="s3">\\</span><span class="s1">((</span><span class="s3">\\</span><span class="s1">d|</span><span class="s3">\\</span><span class="s1">.)+</span><span class="s3">\\</span><span class="s1">) is installed and usable</span><span class="s3">\\</span><span class="s1">./.test(status)) {</span><span class="s3">\n    </span><span class="s1">return {</span><span class="s3">\n      </span><span class="s1">hypervisor: 'WHPX',</span><span class="s3">\n      </span><span class="s1">installed: true,</span><span class="s3">\n    </span><span class="s1">};</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">if (/is installed and usable</span><span class="s3">\\</span><span class="s1">./.test(status)) {</span><span class="s3">\n    </span><span class="s1">return {</span><span class="s3">\n      </span><span class="s1">hypervisor: customHypervisor,</span><span class="s3">\n      </span><span class="s1">installed: true,</span><span class="s3">\n    </span><span class="s1">};</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">if (status.includes(</span><span class="s3">\&quot;</span><span class="s1">Your CPU: 'AuthenticAMD'</span><span class="s3">\&quot;</span><span class="s1">)) {</span><span class="s3">\n    </span><span class="s1">return {</span><span class="s3">\n      </span><span class="s1">hypervisor: customHypervisor,</span><span class="s3">\n      </span><span class="s1">installed: false,</span><span class="s3">\n    </span><span class="s1">};</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">if (status.includes('is not installed on this machine')) {</span><span class="s3">\n    </span><span class="s1">return {</span><span class="s3">\n      </span><span class="s1">hypervisor: 'none',</span><span class="s3">\n      </span><span class="s1">installed: false,</span><span class="s3">\n    </span><span class="s1">};</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">return null;</span><span class="s3">\n</span><span class="s1">};</span><span class="s3">\n\n</span><span class="s1">const getEmulatorAccelOutputInformation = async (androidSDKRoot: string) =&gt; {</span><span class="s3">\n  </span><span class="s1">/**</span><span class="s3">\n   </span><span class="s1">* The output of the following command is something like:</span><span class="s3">\n   </span><span class="s1">*</span><span class="s3">\n   </span><span class="s1">* ```</span><span class="s3">\n   </span><span class="s1">* accel:</span><span class="s3">\n   </span><span class="s1">* 0</span><span class="s3">\n   </span><span class="s1">* WHPX (10.0.19041) is installed and usable.</span><span class="s3">\n   </span><span class="s1">* accel</span><span class="s3">\n   </span><span class="s1">* ```</span><span class="s3">\n   </span><span class="s1">*</span><span class="s3">\n   </span><span class="s1">* If it fails it will still output to stdout with a similar format:</span><span class="s3">\n   </span><span class="s1">*</span><span class="s3">\n   </span><span class="s1">* ```</span><span class="s3">\n   </span><span class="s1">* accel:</span><span class="s3">\n   </span><span class="s1">* 1</span><span class="s3">\n   </span><span class="s1">* Android Emulator does not support nested virtualization.  Your VM host: 'Microsoft Hv' (Hyper-V)</span><span class="s3">\n   </span><span class="s1">* accel</span><span class="s3">\n   </span><span class="s1">* ```</span><span class="s3">\n   </span><span class="s1">*</span><span class="s3">\n   </span><span class="s1">*/</span><span class="s3">\n\n  </span><span class="s1">try {</span><span class="s3">\n    </span><span class="s1">const {stdout} = await executeCommand(</span><span class="s3">\n      </span><span class="s1">`</span><span class="s3">\&quot;</span><span class="s1">${join(androidSDKRoot, 'emulator', 'emulator-check.exe')}</span><span class="s3">\&quot; </span><span class="s1">accel`,</span><span class="s3">\n    </span><span class="s1">);</span><span class="s3">\n\n    </span><span class="s1">return stdout;</span><span class="s3">\n  </span><span class="s1">} catch (e) {</span><span class="s3">\n    </span><span class="s1">const {stdout} = e as any;</span><span class="s3">\n\n    </span><span class="s1">return stdout;</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n</span><span class="s1">};</span><span class="s3">\n\n</span><span class="s1">/**</span><span class="s3">\n </span><span class="s1">* Creates a new Android Virtual Device in the default folder with the</span><span class="s3">\n </span><span class="s1">* name, device and system image passed by parameter.</span><span class="s3">\n </span><span class="s1">*/</span><span class="s3">\n</span><span class="s1">export const createAVD = async (</span><span class="s3">\n  </span><span class="s1">androidSDKRoot: string,</span><span class="s3">\n  </span><span class="s1">name: string,</span><span class="s3">\n  </span><span class="s1">device: string,</span><span class="s3">\n  </span><span class="s1">image: string,</span><span class="s3">\n</span><span class="s1">) =&gt; {</span><span class="s3">\n  </span><span class="s1">try {</span><span class="s3">\n    </span><span class="s1">const abi = image.includes('x86_64') ? 'x86_64' : 'x86';</span><span class="s3">\n    </span><span class="s1">const tag = image.includes('google_apis') ? 'google_apis' : 'generic';</span><span class="s3">\n    </span><span class="s1">const avdmanager = join(androidSDKRoot, 'tools', 'bin', 'avdmanager.bat');</span><span class="s3">\n\n    </span><span class="s1">const {stdout} = await executeCommand(</span><span class="s3">\n      </span><span class="s1">`${avdmanager} -s create avd --force --name </span><span class="s3">\&quot;</span><span class="s1">${name}</span><span class="s3">\&quot; </span><span class="s1">--device </span><span class="s3">\&quot;</span><span class="s1">${device}</span><span class="s3">\&quot; </span><span class="s1">--package </span><span class="s3">\&quot;</span><span class="s1">${image}</span><span class="s3">\&quot; </span><span class="s1">--tag </span><span class="s3">\&quot;</span><span class="s1">${tag}</span><span class="s3">\&quot; </span><span class="s1">--abi </span><span class="s3">\&quot;</span><span class="s1">${abi}</span><span class="s3">\&quot;</span><span class="s1">`,</span><span class="s3">\n    </span><span class="s1">);</span><span class="s3">\n\n    </span><span class="s1">// For some reason `image.sysdir.1` in `config.ini` points to the wrong location and needs to be updated</span><span class="s3">\n    </span><span class="s1">const configPath = join(</span><span class="s3">\n      </span><span class="s1">process.env.HOMEPATH || '',</span><span class="s3">\n      </span><span class="s1">'.android',</span><span class="s3">\n      </span><span class="s1">'avd',</span><span class="s3">\n      </span><span class="s1">`${name}.avd`,</span><span class="s3">\n      </span><span class="s1">'config.ini',</span><span class="s3">\n    </span><span class="s1">);</span><span class="s3">\n\n    </span><span class="s1">const content = await readFile(configPath, 'utf-8');</span><span class="s3">\n    </span><span class="s1">const updatedContent = content.replace(</span><span class="s3">\n      </span><span class="s1">/Sdk</span><span class="s3">\\\\</span><span class="s1">system-images/g,</span><span class="s3">\n      </span><span class="s1">'system-images',</span><span class="s3">\n    </span><span class="s1">);</span><span class="s3">\n\n    </span><span class="s1">await writeFile(configPath, updatedContent, 'utf-8');</span><span class="s3">\n\n    </span><span class="s1">return stdout;</span><span class="s3">\n  </span><span class="s1">} catch (e) {</span><span class="s3">\n    </span><span class="s1">const {stderr} = e as any;</span><span class="s3">\n\n    </span><span class="s1">return stderr;</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n</span><span class="s1">};</span><span class="s3">\n\n</span><span class="s1">/**</span><span class="s3">\n </span><span class="s1">* Returns what hypervisor should be installed for the Android emulator</span><span class="s3">\n </span><span class="s1">* using [Microsoft's official</span><span class="s3">\n </span><span class="s1">* documentation](https://docs.microsoft.com/en-us/xamarin/android/get-started/installation/android-emulator/hardware-acceleration?pivots=windows)</span><span class="s3">\n </span><span class="s1">* as a reference.</span><span class="s3">\n </span><span class="s1">*/</span><span class="s3">\n</span><span class="s1">export const getBestHypervisor = async (</span><span class="s3">\n  </span><span class="s1">androidSDKRoot: string,</span><span class="s3">\n</span><span class="s1">): Promise&lt;HypervisorStatus&gt; =&gt; {</span><span class="s3">\n  </span><span class="s1">const customHypervisor = getProcessorType() === 'Intel' ? 'HAXM' : 'AMDH';</span><span class="s3">\n\n  </span><span class="s1">const stdout = await getEmulatorAccelOutputInformation(androidSDKRoot);</span><span class="s3">\n\n  </span><span class="s1">const lines = stdout.split('</span><span class="s3">\\</span><span class="s1">n');</span><span class="s3">\n\n  </span><span class="s1">for (const line of lines) {</span><span class="s3">\n    </span><span class="s1">const hypervisor = parseHypervisor(line, customHypervisor);</span><span class="s3">\n\n    </span><span class="s1">if (hypervisor) {</span><span class="s3">\n      </span><span class="s1">return hypervisor;</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">// Couldn't identify the best one to run so not doing anything</span><span class="s3">\n  </span><span class="s1">return {</span><span class="s3">\n    </span><span class="s1">hypervisor: 'none',</span><span class="s3">\n    </span><span class="s1">installed: false,</span><span class="s3">\n  </span><span class="s1">};</span><span class="s3">\n</span><span class="s1">};</span><span class="s3">\n\n</span><span class="s1">/**</span><span class="s3">\n </span><span class="s1">* Enables the Windows HypervisorPlatform and Hyper-V features.</span><span class="s3">\n </span><span class="s1">* Will prompt the User Account Control (UAC)</span><span class="s3">\n </span><span class="s1">*/</span><span class="s3">\n</span><span class="s1">export const enableWHPX = () =&gt; {</span><span class="s3">\n  </span><span class="s1">return executeCommand(</span><span class="s3">\n    </span><span class="s1">'DISM /Quiet /NoRestart /Online /Enable-Feature /All /FeatureName:Microsoft-Hyper-V /FeatureName:HypervisorPlatform',</span><span class="s3">\n    </span><span class="s1">true,</span><span class="s3">\n  </span><span class="s1">);</span><span class="s3">\n</span><span class="s1">};</span><span class="s3">\n\n</span><span class="s1">/**</span><span class="s3">\n </span><span class="s1">* Installs and enables the [HAXM](https://github.com/intel/haxm)</span><span class="s3">\n </span><span class="s1">* version available through the Android SDK manager.</span><span class="s3">\n </span><span class="s1">* @param androidSdkInstallPath The path to the Android SDK installation</span><span class="s3">\n </span><span class="s1">*/</span><span class="s3">\n</span><span class="s1">export const enableHAXM = async (androidSdkInstallPath: string) =&gt; {</span><span class="s3">\n  </span><span class="s1">await installComponent(</span><span class="s3">\n    </span><span class="s1">'extras;intel;Hardware_Accelerated_Execution_Manager',</span><span class="s3">\n    </span><span class="s1">androidSdkInstallPath,</span><span class="s3">\n  </span><span class="s1">);</span><span class="s3">\n\n  </span><span class="s1">await executeCommand(</span><span class="s3">\n    </span><span class="s1">join(</span><span class="s3">\n      </span><span class="s1">androidSdkInstallPath,</span><span class="s3">\n      </span><span class="s1">'Sdk',</span><span class="s3">\n      </span><span class="s1">'extras',</span><span class="s3">\n      </span><span class="s1">'intel',</span><span class="s3">\n      </span><span class="s1">'Hardware_Accelerated_Execution_Manager',</span><span class="s3">\n      </span><span class="s1">'silent_install.bat',</span><span class="s3">\n    </span><span class="s1">),</span><span class="s3">\n  </span><span class="s1">);</span><span class="s3">\n</span><span class="s1">};</span><span class="s3">\n\n</span><span class="s1">/**</span><span class="s3">\n </span><span class="s1">* Installs and enables the</span><span class="s3">\n </span><span class="s1">* [Hypervisor Driver for AMD Processors](https://androidstudio.googleblog.com/2019/10/android-emulator-hypervisor-driver-for.html)</span><span class="s3">\n </span><span class="s1">* version available through the Android SDK manager.</span><span class="s3">\n </span><span class="s1">* @param androidSdkInstallPath The path to the Android SDK installation</span><span class="s3">\n </span><span class="s1">*/</span><span class="s3">\n</span><span class="s1">export const enableAMDH = async (androidSdkInstallPath: string) =&gt; {</span><span class="s3">\n  </span><span class="s1">await installComponent(</span><span class="s3">\n    </span><span class="s1">'extras;google;Android_Emulator_Hypervisor_Driver',</span><span class="s3">\n    </span><span class="s1">androidSdkInstallPath,</span><span class="s3">\n  </span><span class="s1">);</span><span class="s3">\n\n  </span><span class="s1">await executeCommand(</span><span class="s3">\n    </span><span class="s1">join(</span><span class="s3">\n      </span><span class="s1">androidSdkInstallPath,</span><span class="s3">\n      </span><span class="s1">'Sdk',</span><span class="s3">\n      </span><span class="s1">'extras',</span><span class="s3">\n      </span><span class="s1">'google',</span><span class="s3">\n      </span><span class="s1">'Android_Emulator_Hypervisor_Driver',</span><span class="s3">\n      </span><span class="s1">'silent_install.bat',</span><span class="s3">\n    </span><span class="s1">),</span><span class="s3">\n  </span><span class="s1">);</span><span class="s3">\n</span><span class="s1">};</span><span class="s3">\n</span><span class="s1">&quot;</span><span class="s0">],</span><span class="s1">&quot;mappings&quot;</span><span class="s0">:</span><span class="s1">&quot;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&quot;</span><span class="s0">}</span></pre>
</body>
</html>