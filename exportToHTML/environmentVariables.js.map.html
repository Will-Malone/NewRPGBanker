<html>
<head>
<title>environmentVariables.js.map</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<style type="text/css">
.s0 { color: #a9b7c6;}
.s1 { color: #6a8759;}
.s2 { color: #6897bb; font-style: italic;}
.s3 { color: #cc7832; font-style: italic;}
</style>
</head>
<body bgcolor="#2b2b2b">
<table CELLSPACING=0 CELLPADDING=5 COLS=1 WIDTH="100%" BGCOLOR="#606060" >
<tr><td><center>
<font face="Arial, Helvetica" color="#000000">
environmentVariables.js.map</font>
</center></td></tr></table>
<pre><span class="s0">{</span><span class="s1">&quot;version&quot;</span><span class="s0">:</span><span class="s2">3</span><span class="s0">,</span><span class="s1">&quot;names&quot;</span><span class="s0">:[</span><span class="s1">&quot;setEnvironment&quot;</span><span class="s0">,</span><span class="s1">&quot;variable&quot;</span><span class="s0">,</span><span class="s1">&quot;value&quot;</span><span class="s0">,</span><span class="s1">&quot;command&quot;</span><span class="s0">,</span><span class="s1">&quot;executeCommand&quot;</span><span class="s0">,</span><span class="s1">&quot;process&quot;</span><span class="s0">,</span><span class="s1">&quot;env&quot;</span><span class="s0">,</span><span class="s1">&quot;updateEnvironment&quot;</span><span class="s0">,</span><span class="s1">&quot;envVariable&quot;</span><span class="s0">,</span><span class="s1">&quot;includes&quot;</span><span class="s0">],</span><span class="s1">&quot;sources&quot;</span><span class="s0">:[</span><span class="s1">&quot;../../../src/tools/windows/environmentVariables.ts&quot;</span><span class="s0">],</span><span class="s1">&quot;sourcesContent&quot;</span><span class="s0">:[</span><span class="s1">&quot;import {executeCommand} from './executeWinCommand';</span><span class="s3">\n\n</span><span class="s1">/**</span><span class="s3">\n </span><span class="s1">* Creates a new variable in the user's environment</span><span class="s3">\n </span><span class="s1">*/</span><span class="s3">\n</span><span class="s1">const setEnvironment = async (variable: string, value: string) =&gt; {</span><span class="s3">\n  </span><span class="s1">// https://superuser.com/a/601034</span><span class="s3">\n  </span><span class="s1">const command = `setx ${variable} </span><span class="s3">\&quot;</span><span class="s1">${value}</span><span class="s3">\&quot;</span><span class="s1">`;</span><span class="s3">\n\n  </span><span class="s1">await executeCommand(command);</span><span class="s3">\n\n  </span><span class="s1">process.env[variable] = value;</span><span class="s3">\n</span><span class="s1">};</span><span class="s3">\n\n</span><span class="s1">/**</span><span class="s3">\n </span><span class="s1">* Prepends the given `value` to the user's environment `variable`.</span><span class="s3">\n </span><span class="s1">* @param {string} variable The environment variable to modify</span><span class="s3">\n </span><span class="s1">* @param {string} value The value to add to the variable</span><span class="s3">\n </span><span class="s1">* @returns {Promise&lt;void&gt;}</span><span class="s3">\n </span><span class="s1">*/</span><span class="s3">\n</span><span class="s1">const updateEnvironment = async (variable: string, value: string) =&gt; {</span><span class="s3">\n  </span><span class="s1">// Avoid adding the value multiple times to PATH</span><span class="s3">\n  </span><span class="s1">// Need to do the following to avoid TSLint complaining about possible</span><span class="s3">\n  </span><span class="s1">// undefined values even if I check before via `typeof` or another way</span><span class="s3">\n  </span><span class="s1">const envVariable = process.env[variable] || '';</span><span class="s3">\n  </span><span class="s1">if (variable === 'PATH' &amp;&amp; envVariable.includes(`${value};`)) {</span><span class="s3">\n    </span><span class="s1">return;</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">// https://superuser.com/a/601034</span><span class="s3">\n  </span><span class="s1">const command = `for /f </span><span class="s3">\&quot;</span><span class="s1">skip=2 tokens=3*</span><span class="s3">\&quot; </span><span class="s1">%a in ('reg query HKCU</span><span class="s3">\\\\</span><span class="s1">Environment /v ${variable}') do @if [%b]==[] ( @setx ${variable} </span><span class="s3">\&quot;</span><span class="s1">${value};%~a</span><span class="s3">\&quot; </span><span class="s1">) else ( @setx ${variable} </span><span class="s3">\&quot;</span><span class="s1">${value};%~a %~b</span><span class="s3">\&quot; </span><span class="s1">)</span><span class="s3">\n  </span><span class="s1">`;</span><span class="s3">\n\n  </span><span class="s1">await executeCommand(command);</span><span class="s3">\n\n  </span><span class="s1">process.env[variable] = `${process.env[variable]}${value};`;</span><span class="s3">\n</span><span class="s1">};</span><span class="s3">\n\n</span><span class="s1">export {setEnvironment, updateEnvironment};</span><span class="s3">\n</span><span class="s1">&quot;</span><span class="s0">],</span><span class="s1">&quot;mappings&quot;</span><span class="s0">:</span><span class="s1">&quot;;;;;;;AAAA;AAEA;AACA;AACA;AACA,MAAMA,cAAc,GAAG,OAAOC,QAAgB,EAAEC,KAAa,KAAK;EAChE;EACA,MAAMC,OAAO,GAAI,QAAOF,QAAS,KAAIC,KAAM,GAAE;EAE7C,MAAM,IAAAE,iCAAc,EAACD,OAAO,CAAC;EAE7BE,OAAO,CAACC,GAAG,CAACL,QAAQ,CAAC,GAAGC,KAAK;AAC/B,CAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AALA;AAMA,MAAMK,iBAAiB,GAAG,OAAON,QAAgB,EAAEC,KAAa,KAAK;EACnE;EACA;EACA;EACA,MAAMM,WAAW,GAAGH,OAAO,CAACC,GAAG,CAACL,QAAQ,CAAC,IAAI,EAAE;EAC/C,IAAIA,QAAQ,KAAK,MAAM,IAAIO,WAAW,CAACC,QAAQ,CAAE,GAAEP,KAAM,GAAE,CAAC,EAAE;IAC5D;EACF;EACA;EACA,MAAMC,OAAO,GAAI,oEAAmEF,QAAS,8BAA6BA,QAAS,KAAIC,KAAM,wBAAuBD,QAAS,KAAIC,KAAM;AACzL,GAAG;EAED,MAAM,IAAAE,iCAAc,EAACD,OAAO,CAAC;EAE7BE,OAAO,CAACC,GAAG,CAACL,QAAQ,CAAC,GAAI,GAAEI,OAAO,CAACC,GAAG,CAACL,QAAQ,CAAE,GAAEC,KAAM,GAAE;AAC7D,CAAC;AAAC&quot;</span><span class="s0">}</span></pre>
</body>
</html>