<html>
<head>
<title>AndroidParser.js.map</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<style type="text/css">
.s0 { color: #a9b7c6;}
.s1 { color: #6a8759;}
.s2 { color: #6897bb; font-style: italic;}
.s3 { color: #cc7832; font-style: italic;}
</style>
</head>
<body bgcolor="#2b2b2b">
<table CELLSPACING=0 CELLPADDING=5 COLS=1 WIDTH="100%" BGCOLOR="#606060" >
<tr><td><center>
<font face="Arial, Helvetica" color="#000000">
AndroidParser.js.map</font>
</center></td></tr></table>
<pre><span class="s0">{</span><span class="s1">&quot;version&quot;</span><span class="s0">:</span><span class="s2">3</span><span class="s0">,</span><span class="s1">&quot;sources&quot;</span><span class="s0">:[</span><span class="s1">&quot;../../src/android/AndroidParser.ts&quot;</span><span class="s0">],</span><span class="s1">&quot;names&quot;</span><span class="s0">:[</span><span class="s1">&quot;AndroidParser&quot;</span><span class="s0">,</span><span class="s1">&quot;splitMessages&quot;</span><span class="s0">,</span><span class="s1">&quot;raw&quot;</span><span class="s0">,</span><span class="s1">&quot;messages&quot;</span><span class="s0">,</span><span class="s1">&quot;data&quot;</span><span class="s0">,</span><span class="s1">&quot;toString&quot;</span><span class="s0">,</span><span class="s1">&quot;match&quot;</span><span class="s0">,</span><span class="s1">&quot;timeRegex&quot;</span><span class="s0">,</span><span class="s1">&quot;timeHeader&quot;</span><span class="s0">,</span><span class="s1">&quot;slice&quot;</span><span class="s0">,</span><span class="s1">&quot;index&quot;</span><span class="s0">,</span><span class="s1">&quot;length&quot;</span><span class="s0">,</span><span class="s1">&quot;nextMatch&quot;</span><span class="s0">,</span><span class="s1">&quot;body&quot;</span><span class="s0">,</span><span class="s1">&quot;push&quot;</span><span class="s0">,</span><span class="s1">&quot;parseMessages&quot;</span><span class="s0">,</span><span class="s1">&quot;map&quot;</span><span class="s0">,</span><span class="s1">&quot;rawMessage&quot;</span><span class="s0">,</span><span class="s1">&quot;timeMatch&quot;</span><span class="s0">,</span><span class="s1">&quot;Error&quot;</span><span class="s0">,</span><span class="s1">&quot;headerMatch&quot;</span><span class="s0">,</span><span class="s1">&quot;headerRegex&quot;</span><span class="s0">,</span><span class="s1">&quot;priority&quot;</span><span class="s0">,</span><span class="s1">&quot;tag&quot;</span><span class="s0">,</span><span class="s1">&quot;pid&quot;</span><span class="s0">,</span><span class="s1">&quot;platform&quot;</span><span class="s0">,</span><span class="s1">&quot;date&quot;</span><span class="s0">,</span><span class="s1">&quot;set&quot;</span><span class="s0">,</span><span class="s1">&quot;parseInt&quot;</span><span class="s0">,</span><span class="s1">&quot;trim&quot;</span><span class="s0">,</span><span class="s1">&quot;Priority&quot;</span><span class="s0">,</span><span class="s1">&quot;fromLetter&quot;</span><span class="s0">,</span><span class="s1">&quot;reduce&quot;</span><span class="s0">,</span><span class="s1">&quot;acc&quot;</span><span class="s0">,</span><span class="s1">&quot;entry&quot;</span><span class="s0">,</span><span class="s1">&quot;isSame&quot;</span><span class="s0">],</span><span class="s1">&quot;mappings&quot;</span><span class="s0">:</span><span class="s1">&quot;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&quot;</span><span class="s0">,</span><span class="s1">&quot;sourcesContent&quot;</span><span class="s0">:[</span><span class="s1">&quot;import DayJS from 'dayjs';</span><span class="s3">\n</span><span class="s1">import { IParser, Entry } from '../types';</span><span class="s3">\n</span><span class="s1">import { Priority } from './constants';</span><span class="s3">\n\n</span><span class="s1">export default class AndroidParser implements IParser {</span><span class="s3">\n  </span><span class="s1">static timeRegex: RegExp = /(</span><span class="s3">\\</span><span class="s1">d{2})-(</span><span class="s3">\\</span><span class="s1">d{2}) (</span><span class="s3">\\</span><span class="s1">d{2}):(</span><span class="s3">\\</span><span class="s1">d{2}):(</span><span class="s3">\\</span><span class="s1">d{2}).</span><span class="s3">\\</span><span class="s1">d{3}/m;</span><span class="s3">\n  </span><span class="s1">static headerRegex: RegExp = /^</span><span class="s3">\\</span><span class="s1">s*(</span><span class="s3">\\</span><span class="s1">w)</span><span class="s3">\\</span><span class="s1">/(.+)</span><span class="s3">\\</span><span class="s1">(([</span><span class="s3">\\</span><span class="s1">s</span><span class="s3">\\</span><span class="s1">d]+)</span><span class="s3">\\</span><span class="s1">):/;</span><span class="s3">\n\n  </span><span class="s1">splitMessages(raw: string): string[] {</span><span class="s3">\n    </span><span class="s1">const messages: string[] = [];</span><span class="s3">\n    </span><span class="s1">let data = raw.toString();</span><span class="s3">\n    </span><span class="s1">let match = data.match(AndroidParser.timeRegex);</span><span class="s3">\n    </span><span class="s1">while (match) {</span><span class="s3">\n      </span><span class="s1">const timeHeader = match[0];</span><span class="s3">\n      </span><span class="s1">data = data.slice((match.index || 0) + timeHeader.length);</span><span class="s3">\n      </span><span class="s1">const nextMatch = data.match(AndroidParser.timeRegex);</span><span class="s3">\n      </span><span class="s1">const body = nextMatch ? data.slice(0, nextMatch.index) : data;</span><span class="s3">\n      </span><span class="s1">messages.push(`${timeHeader} ${body}`);</span><span class="s3">\n      </span><span class="s1">match = nextMatch;</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">return messages;</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">parseMessages(messages: string[]): Entry[] {</span><span class="s3">\n    </span><span class="s1">return messages</span><span class="s3">\n      </span><span class="s1">.map(</span><span class="s3">\n        </span><span class="s1">(rawMessage: string): Entry =&gt; {</span><span class="s3">\n          </span><span class="s1">const timeMatch = rawMessage.match(AndroidParser.timeRegex);</span><span class="s3">\n          </span><span class="s1">if (!timeMatch) {</span><span class="s3">\n            </span><span class="s1">throw new Error(</span><span class="s3">\n              </span><span class="s1">`Time regex was not matched in message: ${rawMessage}`</span><span class="s3">\n            </span><span class="s1">);</span><span class="s3">\n          </span><span class="s1">}</span><span class="s3">\n\n          </span><span class="s1">const headerMatch = rawMessage</span><span class="s3">\n            </span><span class="s1">.slice(timeMatch[0].length)</span><span class="s3">\n            </span><span class="s1">.match(AndroidParser.headerRegex) || ['', 'U', 'unknown', '-1'];</span><span class="s3">\n\n          </span><span class="s1">const [, priority, tag, pid] = headerMatch;</span><span class="s3">\n          </span><span class="s1">return {</span><span class="s3">\n            </span><span class="s1">platform: 'android',</span><span class="s3">\n            </span><span class="s1">date: DayJS()</span><span class="s3">\n              </span><span class="s1">.set('month', parseInt(timeMatch[1], 10))</span><span class="s3">\n              </span><span class="s1">.set('day', parseInt(timeMatch[2], 10))</span><span class="s3">\n              </span><span class="s1">.set('hour', parseInt(timeMatch[3], 10))</span><span class="s3">\n              </span><span class="s1">.set('minute', parseInt(timeMatch[4], 10))</span><span class="s3">\n              </span><span class="s1">.set('second', parseInt(timeMatch[5], 10))</span><span class="s3">\n              </span><span class="s1">.set('millisecond', 0),</span><span class="s3">\n            </span><span class="s1">pid: parseInt(pid.trim(), 10) || 0,</span><span class="s3">\n            </span><span class="s1">priority: Priority.fromLetter(priority),</span><span class="s3">\n            </span><span class="s1">tag: tag.trim() || 'unknown',</span><span class="s3">\n            </span><span class="s1">messages: [</span><span class="s3">\n              </span><span class="s1">rawMessage</span><span class="s3">\n                </span><span class="s1">.slice(timeMatch[0].length + headerMatch[0].length)</span><span class="s3">\n                </span><span class="s1">.trim(),</span><span class="s3">\n            </span><span class="s1">],</span><span class="s3">\n          </span><span class="s1">};</span><span class="s3">\n        </span><span class="s1">}</span><span class="s3">\n      </span><span class="s1">)</span><span class="s3">\n      </span><span class="s1">.reduce((acc: Entry[], entry: Entry) =&gt; {</span><span class="s3">\n        </span><span class="s1">if (</span><span class="s3">\n          </span><span class="s1">acc.length &gt; 0 &amp;&amp;</span><span class="s3">\n          </span><span class="s1">acc[acc.length - 1].date.isSame(entry.date) &amp;&amp;</span><span class="s3">\n          </span><span class="s1">acc[acc.length - 1].tag === entry.tag &amp;&amp;</span><span class="s3">\n          </span><span class="s1">acc[acc.length - 1].pid === entry.pid &amp;&amp;</span><span class="s3">\n          </span><span class="s1">acc[acc.length - 1].priority === entry.priority</span><span class="s3">\n        </span><span class="s1">) {</span><span class="s3">\n          </span><span class="s1">acc[acc.length - 1].messages.push(...entry.messages);</span><span class="s3">\n          </span><span class="s1">return acc;</span><span class="s3">\n        </span><span class="s1">}</span><span class="s3">\n\n        </span><span class="s1">return [...acc, entry];</span><span class="s3">\n      </span><span class="s1">}, []);</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n</span><span class="s1">&quot;</span><span class="s0">],</span><span class="s1">&quot;file&quot;</span><span class="s0">:</span><span class="s1">&quot;AndroidParser.js&quot;</span><span class="s0">}</span></pre>
</body>
</html>