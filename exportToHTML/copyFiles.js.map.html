<html>
<head>
<title>copyFiles.js.map</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<style type="text/css">
.s0 { color: #a9b7c6;}
.s1 { color: #6a8759;}
.s2 { color: #6897bb; font-style: italic;}
.s3 { color: #cc7832; font-style: italic;}
</style>
</head>
<body bgcolor="#2b2b2b">
<table CELLSPACING=0 CELLPADDING=5 COLS=1 WIDTH="100%" BGCOLOR="#606060" >
<tr><td><center>
<font face="Arial, Helvetica" color="#000000">
copyFiles.js.map</font>
</center></td></tr></table>
<pre><span class="s0">{</span><span class="s1">&quot;version&quot;</span><span class="s0">:</span><span class="s2">3</span><span class="s0">,</span><span class="s1">&quot;names&quot;</span><span class="s0">:[</span><span class="s1">&quot;copyFiles&quot;</span><span class="s0">,</span><span class="s1">&quot;srcPath&quot;</span><span class="s0">,</span><span class="s1">&quot;destPath&quot;</span><span class="s0">,</span><span class="s1">&quot;options&quot;</span><span class="s0">,</span><span class="s1">&quot;Promise&quot;</span><span class="s0">,</span><span class="s1">&quot;all&quot;</span><span class="s0">,</span><span class="s1">&quot;walk&quot;</span><span class="s0">,</span><span class="s1">&quot;map&quot;</span><span class="s0">,</span><span class="s1">&quot;absoluteSrcFilePath&quot;</span><span class="s0">,</span><span class="s1">&quot;exclude&quot;</span><span class="s0">,</span><span class="s1">&quot;some&quot;</span><span class="s0">,</span><span class="s1">&quot;p&quot;</span><span class="s0">,</span><span class="s1">&quot;test&quot;</span><span class="s0">,</span><span class="s1">&quot;relativeFilePath&quot;</span><span class="s0">,</span><span class="s1">&quot;path&quot;</span><span class="s0">,</span><span class="s1">&quot;relative&quot;</span><span class="s0">,</span><span class="s1">&quot;copyFile&quot;</span><span class="s0">,</span><span class="s1">&quot;resolve&quot;</span><span class="s0">,</span><span class="s1">&quot;fs&quot;</span><span class="s0">,</span><span class="s1">&quot;lstatSync&quot;</span><span class="s0">,</span><span class="s1">&quot;isDirectory&quot;</span><span class="s0">,</span><span class="s1">&quot;existsSync&quot;</span><span class="s0">,</span><span class="s1">&quot;mkdirSync&quot;</span><span class="s0">,</span><span class="s1">&quot;reject&quot;</span><span class="s0">,</span><span class="s1">&quot;copyBinaryFile&quot;</span><span class="s0">,</span><span class="s1">&quot;err&quot;</span><span class="s0">,</span><span class="s1">&quot;cb&quot;</span><span class="s0">,</span><span class="s1">&quot;cbCalled&quot;</span><span class="s0">,</span><span class="s1">&quot;mode&quot;</span><span class="s0">,</span><span class="s1">&quot;statSync&quot;</span><span class="s0">,</span><span class="s1">&quot;readStream&quot;</span><span class="s0">,</span><span class="s1">&quot;createReadStream&quot;</span><span class="s0">,</span><span class="s1">&quot;writeStream&quot;</span><span class="s0">,</span><span class="s1">&quot;createWriteStream&quot;</span><span class="s0">,</span><span class="s1">&quot;on&quot;</span><span class="s0">,</span><span class="s1">&quot;done&quot;</span><span class="s0">,</span><span class="s1">&quot;chmodSync&quot;</span><span class="s0">,</span><span class="s1">&quot;pipe&quot;</span><span class="s0">],</span><span class="s1">&quot;sources&quot;</span><span class="s0">:[</span><span class="s1">&quot;../../src/tools/copyFiles.ts&quot;</span><span class="s0">],</span><span class="s1">&quot;sourcesContent&quot;</span><span class="s0">:[</span><span class="s1">&quot;/**</span><span class="s3">\n </span><span class="s1">* Copyright (c) Facebook, Inc. and its affiliates.</span><span class="s3">\n </span><span class="s1">*</span><span class="s3">\n </span><span class="s1">* This source code is licensed under the MIT license found in the</span><span class="s3">\n </span><span class="s1">* LICENSE file in the root directory of this source tree.</span><span class="s3">\n </span><span class="s1">*/</span><span class="s3">\n\n</span><span class="s1">import fs from 'fs';</span><span class="s3">\n</span><span class="s1">import path from 'path';</span><span class="s3">\n</span><span class="s1">import walk from './walk';</span><span class="s3">\n\n</span><span class="s1">type Options = {</span><span class="s3">\n  </span><span class="s1">exclude?: Array&lt;RegExp&gt;;</span><span class="s3">\n</span><span class="s1">};</span><span class="s3">\n\n</span><span class="s1">/**</span><span class="s3">\n </span><span class="s1">* Copy files (binary included) recursively.</span><span class="s3">\n </span><span class="s1">*/</span><span class="s3">\n</span><span class="s1">async function copyFiles(</span><span class="s3">\n  </span><span class="s1">srcPath: string,</span><span class="s3">\n  </span><span class="s1">destPath: string,</span><span class="s3">\n  </span><span class="s1">options: Options = {},</span><span class="s3">\n</span><span class="s1">) {</span><span class="s3">\n  </span><span class="s1">return Promise.all(</span><span class="s3">\n    </span><span class="s1">walk(srcPath).map(async (absoluteSrcFilePath: string) =&gt; {</span><span class="s3">\n      </span><span class="s1">const exclude = options.exclude;</span><span class="s3">\n      </span><span class="s1">if (exclude &amp;&amp; exclude.some((p) =&gt; p.test(absoluteSrcFilePath))) {</span><span class="s3">\n        </span><span class="s1">return;</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n      </span><span class="s1">const relativeFilePath = path.relative(srcPath, absoluteSrcFilePath);</span><span class="s3">\n      </span><span class="s1">await copyFile(</span><span class="s3">\n        </span><span class="s1">absoluteSrcFilePath,</span><span class="s3">\n        </span><span class="s1">path.resolve(destPath, relativeFilePath),</span><span class="s3">\n      </span><span class="s1">);</span><span class="s3">\n    </span><span class="s1">}),</span><span class="s3">\n  </span><span class="s1">);</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">/**</span><span class="s3">\n </span><span class="s1">* Copy a file to given destination.</span><span class="s3">\n </span><span class="s1">*/</span><span class="s3">\n</span><span class="s1">function copyFile(srcPath: string, destPath: string) {</span><span class="s3">\n  </span><span class="s1">if (fs.lstatSync(srcPath).isDirectory()) {</span><span class="s3">\n    </span><span class="s1">if (!fs.existsSync(destPath)) {</span><span class="s3">\n      </span><span class="s1">fs.mkdirSync(destPath);</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">// Not recursive</span><span class="s3">\n    </span><span class="s1">return;</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">return new Promise((resolve, reject) =&gt; {</span><span class="s3">\n    </span><span class="s1">copyBinaryFile(srcPath, destPath, (err) =&gt; {</span><span class="s3">\n      </span><span class="s1">if (err) {</span><span class="s3">\n        </span><span class="s1">reject(err);</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n      </span><span class="s1">resolve(destPath);</span><span class="s3">\n    </span><span class="s1">});</span><span class="s3">\n  </span><span class="s1">});</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">/**</span><span class="s3">\n </span><span class="s1">* Same as 'cp' on Unix. Don't do any replacements.</span><span class="s3">\n </span><span class="s1">*/</span><span class="s3">\n</span><span class="s1">function copyBinaryFile(</span><span class="s3">\n  </span><span class="s1">srcPath: string,</span><span class="s3">\n  </span><span class="s1">destPath: string,</span><span class="s3">\n  </span><span class="s1">cb: (err?: Error) =&gt; void,</span><span class="s3">\n</span><span class="s1">) {</span><span class="s3">\n  </span><span class="s1">let cbCalled = false;</span><span class="s3">\n  </span><span class="s1">const {mode} = fs.statSync(srcPath);</span><span class="s3">\n  </span><span class="s1">const readStream = fs.createReadStream(srcPath);</span><span class="s3">\n  </span><span class="s1">const writeStream = fs.createWriteStream(destPath);</span><span class="s3">\n  </span><span class="s1">readStream.on('error', (err) =&gt; {</span><span class="s3">\n    </span><span class="s1">done(err);</span><span class="s3">\n  </span><span class="s1">});</span><span class="s3">\n  </span><span class="s1">writeStream.on('error', (err) =&gt; {</span><span class="s3">\n    </span><span class="s1">done(err);</span><span class="s3">\n  </span><span class="s1">});</span><span class="s3">\n  </span><span class="s1">readStream.on('close', () =&gt; {</span><span class="s3">\n    </span><span class="s1">done();</span><span class="s3">\n    </span><span class="s1">fs.chmodSync(destPath, mode);</span><span class="s3">\n  </span><span class="s1">});</span><span class="s3">\n  </span><span class="s1">readStream.pipe(writeStream);</span><span class="s3">\n  </span><span class="s1">function done(err?: Error) {</span><span class="s3">\n    </span><span class="s1">if (!cbCalled) {</span><span class="s3">\n      </span><span class="s1">cb(err);</span><span class="s3">\n      </span><span class="s1">cbCalled = true;</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">export default copyFiles;</span><span class="s3">\n</span><span class="s1">&quot;</span><span class="s0">],</span><span class="s1">&quot;mappings&quot;</span><span class="s0">:</span><span class="s1">&quot;;;;;;;AAOA;EAAA;EAAA;IAAA;EAAA;EAAA;AAAA;AACA;EAAA;EAAA;IAAA;EAAA;EAAA;AAAA;AACA;AAA0B;AAT1B;AACA;AACA;AACA;AACA;AACA;;AAUA;AACA;AACA;AACA,eAAeA,SAAS,CACtBC,OAAe,EACfC,QAAgB,EAChBC,OAAgB,GAAG,CAAC,CAAC,EACrB;EACA,OAAOC,OAAO,CAACC,GAAG,CAChB,IAAAC,aAAI,EAACL,OAAO,CAAC,CAACM,GAAG,CAAC,MAAOC,mBAA2B,IAAK;IACvD,MAAMC,OAAO,GAAGN,OAAO,CAACM,OAAO;IAC/B,IAAIA,OAAO,IAAIA,OAAO,CAACC,IAAI,CAAEC,CAAC,IAAKA,CAAC,CAACC,IAAI,CAACJ,mBAAmB,CAAC,CAAC,EAAE;MAC/D;IACF;IACA,MAAMK,gBAAgB,GAAGC,eAAI,CAACC,QAAQ,CAACd,OAAO,EAAEO,mBAAmB,CAAC;IACpE,MAAMQ,QAAQ,CACZR,mBAAmB,EACnBM,eAAI,CAACG,OAAO,CAACf,QAAQ,EAAEW,gBAAgB,CAAC,CACzC;EACH,CAAC,CAAC,CACH;AACH;;AAEA;AACA;AACA;AACA,SAASG,QAAQ,CAACf,OAAe,EAAEC,QAAgB,EAAE;EACnD,IAAIgB,aAAE,CAACC,SAAS,CAAClB,OAAO,CAAC,CAACmB,WAAW,EAAE,EAAE;IACvC,IAAI,CAACF,aAAE,CAACG,UAAU,CAACnB,QAAQ,CAAC,EAAE;MAC5BgB,aAAE,CAACI,SAAS,CAACpB,QAAQ,CAAC;IACxB;IACA;IACA;EACF;EAEA,OAAO,IAAIE,OAAO,CAAC,CAACa,OAAO,EAAEM,MAAM,KAAK;IACtCC,cAAc,CAACvB,OAAO,EAAEC,QAAQ,EAAGuB,GAAG,IAAK;MACzC,IAAIA,GAAG,EAAE;QACPF,MAAM,CAACE,GAAG,CAAC;MACb;MACAR,OAAO,CAACf,QAAQ,CAAC;IACnB,CAAC,CAAC;EACJ,CAAC,CAAC;AACJ;;AAEA;AACA;AACA;AACA,SAASsB,cAAc,CACrBvB,OAAe,EACfC,QAAgB,EAChBwB,EAAyB,EACzB;EACA,IAAIC,QAAQ,GAAG,KAAK;EACpB,MAAM;IAACC;EAAI,CAAC,GAAGV,aAAE,CAACW,QAAQ,CAAC5B,OAAO,CAAC;EACnC,MAAM6B,UAAU,GAAGZ,aAAE,CAACa,gBAAgB,CAAC9B,OAAO,CAAC;EAC/C,MAAM+B,WAAW,GAAGd,aAAE,CAACe,iBAAiB,CAAC/B,QAAQ,CAAC;EAClD4B,UAAU,CAACI,EAAE,CAAC,OAAO,EAAGT,GAAG,IAAK;IAC9BU,IAAI,CAACV,GAAG,CAAC;EACX,CAAC,CAAC;EACFO,WAAW,CAACE,EAAE,CAAC,OAAO,EAAGT,GAAG,IAAK;IAC/BU,IAAI,CAACV,GAAG,CAAC;EACX,CAAC,CAAC;EACFK,UAAU,CAACI,EAAE,CAAC,OAAO,EAAE,MAAM;IAC3BC,IAAI,EAAE;IACNjB,aAAE,CAACkB,SAAS,CAAClC,QAAQ,EAAE0B,IAAI,CAAC;EAC9B,CAAC,CAAC;EACFE,UAAU,CAACO,IAAI,CAACL,WAAW,CAAC;EAC5B,SAASG,IAAI,CAACV,GAAW,EAAE;IACzB,IAAI,CAACE,QAAQ,EAAE;MACbD,EAAE,CAACD,GAAG,CAAC;MACPE,QAAQ,GAAG,IAAI;IACjB;EACF;AACF;AAAC,eAEc3B,SAAS;AAAA&quot;</span><span class="s0">}</span></pre>
</body>
</html>