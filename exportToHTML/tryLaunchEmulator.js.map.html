<html>
<head>
<title>tryLaunchEmulator.js.map</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<style type="text/css">
.s0 { color: #a9b7c6;}
.s1 { color: #6a8759;}
.s2 { color: #6897bb; font-style: italic;}
.s3 { color: #cc7832; font-style: italic;}
</style>
</head>
<body bgcolor="#2b2b2b">
<table CELLSPACING=0 CELLPADDING=5 COLS=1 WIDTH="100%" BGCOLOR="#606060" >
<tr><td><center>
<font face="Arial, Helvetica" color="#000000">
tryLaunchEmulator.js.map</font>
</center></td></tr></table>
<pre><span class="s0">{</span><span class="s1">&quot;version&quot;</span><span class="s0">:</span><span class="s2">3</span><span class="s0">,</span><span class="s1">&quot;names&quot;</span><span class="s0">:[</span><span class="s1">&quot;emulatorCommand&quot;</span><span class="s0">,</span><span class="s1">&quot;process&quot;</span><span class="s0">,</span><span class="s1">&quot;env&quot;</span><span class="s0">,</span><span class="s1">&quot;ANDROID_HOME&quot;</span><span class="s0">,</span><span class="s1">&quot;getEmulators&quot;</span><span class="s0">,</span><span class="s1">&quot;emulatorsOutput&quot;</span><span class="s0">,</span><span class="s1">&quot;execa&quot;</span><span class="s0">,</span><span class="s1">&quot;sync&quot;</span><span class="s0">,</span><span class="s1">&quot;stdout&quot;</span><span class="s0">,</span><span class="s1">&quot;split&quot;</span><span class="s0">,</span><span class="s1">&quot;os&quot;</span><span class="s0">,</span><span class="s1">&quot;EOL&quot;</span><span class="s0">,</span><span class="s1">&quot;filter&quot;</span><span class="s0">,</span><span class="s1">&quot;name&quot;</span><span class="s0">,</span><span class="s1">&quot;launchEmulator&quot;</span><span class="s0">,</span><span class="s1">&quot;emulatorName&quot;</span><span class="s0">,</span><span class="s1">&quot;adbPath&quot;</span><span class="s0">,</span><span class="s1">&quot;port&quot;</span><span class="s0">,</span><span class="s1">&quot;manualCommand&quot;</span><span class="s0">,</span><span class="s1">&quot;cp&quot;</span><span class="s0">,</span><span class="s1">&quot;detached&quot;</span><span class="s0">,</span><span class="s1">&quot;stdio&quot;</span><span class="s0">,</span><span class="s1">&quot;unref&quot;</span><span class="s0">,</span><span class="s1">&quot;timeout&quot;</span><span class="s0">,</span><span class="s1">&quot;Promise&quot;</span><span class="s0">,</span><span class="s1">&quot;resolve&quot;</span><span class="s0">,</span><span class="s1">&quot;reject&quot;</span><span class="s0">,</span><span class="s1">&quot;bootCheckInterval&quot;</span><span class="s0">,</span><span class="s1">&quot;setInterval&quot;</span><span class="s0">,</span><span class="s1">&quot;devices&quot;</span><span class="s0">,</span><span class="s1">&quot;adb&quot;</span><span class="s0">,</span><span class="s1">&quot;getDevices&quot;</span><span class="s0">,</span><span class="s1">&quot;connected&quot;</span><span class="s0">,</span><span class="s1">&quot;find&quot;</span><span class="s0">,</span><span class="s1">&quot;d&quot;</span><span class="s0">,</span><span class="s1">&quot;includes&quot;</span><span class="s0">,</span><span class="s1">&quot;length&quot;</span><span class="s0">,</span><span class="s1">&quot;cleanup&quot;</span><span class="s0">,</span><span class="s1">&quot;rejectTimeout&quot;</span><span class="s0">,</span><span class="s1">&quot;setTimeout&quot;</span><span class="s0">,</span><span class="s1">&quot;stopWaitingAndReject&quot;</span><span class="s0">,</span><span class="s1">&quot;clearTimeout&quot;</span><span class="s0">,</span><span class="s1">&quot;clearInterval&quot;</span><span class="s0">,</span><span class="s1">&quot;message&quot;</span><span class="s0">,</span><span class="s1">&quot;Error&quot;</span><span class="s0">,</span><span class="s1">&quot;on&quot;</span><span class="s0">,</span><span class="s1">&quot;tryLaunchEmulator&quot;</span><span class="s0">,</span><span class="s1">&quot;emulators&quot;</span><span class="s0">,</span><span class="s1">&quot;success&quot;</span><span class="s0">,</span><span class="s1">&quot;error&quot;</span><span class="s0">],</span><span class="s1">&quot;sources&quot;</span><span class="s0">:[</span><span class="s1">&quot;../../../src/commands/runAndroid/tryLaunchEmulator.ts&quot;</span><span class="s0">],</span><span class="s1">&quot;sourcesContent&quot;</span><span class="s0">:[</span><span class="s1">&quot;import os from 'os';</span><span class="s3">\n</span><span class="s1">import execa from 'execa';</span><span class="s3">\n</span><span class="s1">import adb from './adb';</span><span class="s3">\n\n</span><span class="s1">const emulatorCommand = process.env.ANDROID_HOME</span><span class="s3">\n  </span><span class="s1">? `${process.env.ANDROID_HOME}/emulator/emulator`</span><span class="s3">\n  </span><span class="s1">: 'emulator';</span><span class="s3">\n\n</span><span class="s1">export const getEmulators = () =&gt; {</span><span class="s3">\n  </span><span class="s1">try {</span><span class="s3">\n    </span><span class="s1">const emulatorsOutput = execa.sync(emulatorCommand, ['-list-avds']).stdout;</span><span class="s3">\n    </span><span class="s1">return emulatorsOutput.split(os.EOL).filter((name) =&gt; name !== '');</span><span class="s3">\n  </span><span class="s1">} catch {</span><span class="s3">\n    </span><span class="s1">return [];</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n</span><span class="s1">};</span><span class="s3">\n\n</span><span class="s1">const launchEmulator = async (</span><span class="s3">\n  </span><span class="s1">emulatorName: string,</span><span class="s3">\n  </span><span class="s1">adbPath: string,</span><span class="s3">\n  </span><span class="s1">port?: number,</span><span class="s3">\n</span><span class="s1">): Promise&lt;boolean&gt; =&gt; {</span><span class="s3">\n  </span><span class="s1">const manualCommand = `${emulatorCommand} @${emulatorName}`;</span><span class="s3">\n\n  </span><span class="s1">const cp = execa(</span><span class="s3">\n    </span><span class="s1">emulatorCommand,</span><span class="s3">\n    </span><span class="s1">port ? [`@${emulatorName}`, '-port', `${port}`] : [`@${emulatorName}`],</span><span class="s3">\n    </span><span class="s1">{</span><span class="s3">\n      </span><span class="s1">detached: true,</span><span class="s3">\n      </span><span class="s1">stdio: 'ignore',</span><span class="s3">\n    </span><span class="s1">},</span><span class="s3">\n  </span><span class="s1">);</span><span class="s3">\n  </span><span class="s1">cp.unref();</span><span class="s3">\n  </span><span class="s1">const timeout = 30;</span><span class="s3">\n\n  </span><span class="s1">return new Promise&lt;boolean&gt;((resolve, reject) =&gt; {</span><span class="s3">\n    </span><span class="s1">const bootCheckInterval = setInterval(async () =&gt; {</span><span class="s3">\n      </span><span class="s1">const devices = adb.getDevices(adbPath);</span><span class="s3">\n      </span><span class="s1">const connected = port</span><span class="s3">\n        </span><span class="s1">? devices.find((d) =&gt; d.includes(`${port}`))</span><span class="s3">\n        </span><span class="s1">: devices.length &gt; 0;</span><span class="s3">\n      </span><span class="s1">if (connected) {</span><span class="s3">\n        </span><span class="s1">cleanup();</span><span class="s3">\n        </span><span class="s1">resolve(true);</span><span class="s3">\n      </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">}, 1000);</span><span class="s3">\n\n    </span><span class="s1">// Reject command after timeout</span><span class="s3">\n    </span><span class="s1">const rejectTimeout = setTimeout(() =&gt; {</span><span class="s3">\n      </span><span class="s1">stopWaitingAndReject(</span><span class="s3">\n        </span><span class="s1">`It took too long to start and connect with Android emulator: ${emulatorName}. You can try starting the emulator manually from the terminal with: ${manualCommand}`,</span><span class="s3">\n      </span><span class="s1">);</span><span class="s3">\n    </span><span class="s1">}, timeout * 1000);</span><span class="s3">\n\n    </span><span class="s1">const cleanup = () =&gt; {</span><span class="s3">\n      </span><span class="s1">clearTimeout(rejectTimeout);</span><span class="s3">\n      </span><span class="s1">clearInterval(bootCheckInterval);</span><span class="s3">\n    </span><span class="s1">};</span><span class="s3">\n\n    </span><span class="s1">const stopWaitingAndReject = (message: string) =&gt; {</span><span class="s3">\n      </span><span class="s1">cleanup();</span><span class="s3">\n      </span><span class="s1">reject(new Error(message));</span><span class="s3">\n    </span><span class="s1">};</span><span class="s3">\n\n    </span><span class="s1">cp.on('error', ({message}) =&gt; stopWaitingAndReject(message));</span><span class="s3">\n\n    </span><span class="s1">cp.on('exit', () =&gt; {</span><span class="s3">\n      </span><span class="s1">stopWaitingAndReject(</span><span class="s3">\n        </span><span class="s1">`The emulator (${emulatorName}) quit before it finished opening. You can try starting the emulator manually from the terminal with: ${manualCommand}`,</span><span class="s3">\n      </span><span class="s1">);</span><span class="s3">\n    </span><span class="s1">});</span><span class="s3">\n  </span><span class="s1">});</span><span class="s3">\n</span><span class="s1">};</span><span class="s3">\n\n</span><span class="s1">export default async function tryLaunchEmulator(</span><span class="s3">\n  </span><span class="s1">adbPath: string,</span><span class="s3">\n  </span><span class="s1">emulatorName?: string,</span><span class="s3">\n  </span><span class="s1">port?: number,</span><span class="s3">\n</span><span class="s1">): Promise&lt;{success: boolean; error?: string}&gt; {</span><span class="s3">\n  </span><span class="s1">const emulators = getEmulators();</span><span class="s3">\n  </span><span class="s1">if (emulators.length &gt; 0) {</span><span class="s3">\n    </span><span class="s1">try {</span><span class="s3">\n      </span><span class="s1">await launchEmulator(emulatorName ?? emulators[0], adbPath, port);</span><span class="s3">\n      </span><span class="s1">return {success: true};</span><span class="s3">\n    </span><span class="s1">} catch (error) {</span><span class="s3">\n      </span><span class="s1">return {success: false, error: (error as any)?.message};</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">return {</span><span class="s3">\n    </span><span class="s1">success: false,</span><span class="s3">\n    </span><span class="s1">error: 'No emulators found as an output of `emulator -list-avds`',</span><span class="s3">\n  </span><span class="s1">};</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n</span><span class="s1">&quot;</span><span class="s0">],</span><span class="s1">&quot;mappings&quot;</span><span class="s0">:</span><span class="s1">&quot;;;;;;;;AAAA;EAAA;EAAA;IAAA;EAAA;EAAA;AAAA;AACA;EAAA;EAAA;IAAA;EAAA;EAAA;AAAA;AACA;AAAwB;AAExB,MAAMA,eAAe,GAAGC,OAAO,CAACC,GAAG,CAACC,YAAY,GAC3C,GAAEF,OAAO,CAACC,GAAG,CAACC,YAAa,oBAAmB,GAC/C,UAAU;AAEP,MAAMC,YAAY,GAAG,MAAM;EAChC,IAAI;IACF,MAAMC,eAAe,GAAGC,gBAAK,CAACC,IAAI,CAACP,eAAe,EAAE,CAAC,YAAY,CAAC,CAAC,CAACQ,MAAM;IAC1E,OAAOH,eAAe,CAACI,KAAK,CAACC,aAAE,CAACC,GAAG,CAAC,CAACC,MAAM,CAAEC,IAAI,IAAKA,IAAI,KAAK,EAAE,CAAC;EACpE,CAAC,CAAC,MAAM;IACN,OAAO,EAAE;EACX;AACF,CAAC;AAAC;AAEF,MAAMC,cAAc,GAAG,OACrBC,YAAoB,EACpBC,OAAe,EACfC,IAAa,KACQ;EACrB,MAAMC,aAAa,GAAI,GAAElB,eAAgB,KAAIe,YAAa,EAAC;EAE3D,MAAMI,EAAE,GAAG,IAAAb,gBAAK,EACdN,eAAe,EACfiB,IAAI,GAAG,CAAE,IAAGF,YAAa,EAAC,EAAE,OAAO,EAAG,GAAEE,IAAK,EAAC,CAAC,GAAG,CAAE,IAAGF,YAAa,EAAC,CAAC,EACtE;IACEK,QAAQ,EAAE,IAAI;IACdC,KAAK,EAAE;EACT,CAAC,CACF;EACDF,EAAE,CAACG,KAAK,EAAE;EACV,MAAMC,OAAO,GAAG,EAAE;EAElB,OAAO,IAAIC,OAAO,CAAU,CAACC,OAAO,EAAEC,MAAM,KAAK;IAC/C,MAAMC,iBAAiB,GAAGC,WAAW,CAAC,YAAY;MAChD,MAAMC,OAAO,GAAGC,YAAG,CAACC,UAAU,CAACf,OAAO,CAAC;MACvC,MAAMgB,SAAS,GAAGf,IAAI,GAClBY,OAAO,CAACI,IAAI,CAAEC,CAAC,IAAKA,CAAC,CAACC,QAAQ,CAAE,GAAElB,IAAK,EAAC,CAAC,CAAC,GAC1CY,OAAO,CAACO,MAAM,GAAG,CAAC;MACtB,IAAIJ,SAAS,EAAE;QACbK,OAAO,EAAE;QACTZ,OAAO,CAAC,IAAI,CAAC;MACf;IACF,CAAC,EAAE,IAAI,CAAC;;IAER;IACA,MAAMa,aAAa,GAAGC,UAAU,CAAC,MAAM;MACrCC,oBAAoB,CACjB,gEAA+DzB,YAAa,wEAAuEG,aAAc,EAAC,CACpK;IACH,CAAC,EAAEK,OAAO,GAAG,IAAI,CAAC;IAElB,MAAMc,OAAO,GAAG,MAAM;MACpBI,YAAY,CAACH,aAAa,CAAC;MAC3BI,aAAa,CAACf,iBAAiB,CAAC;IAClC,CAAC;IAED,MAAMa,oBAAoB,GAAIG,OAAe,IAAK;MAChDN,OAAO,EAAE;MACTX,MAAM,CAAC,IAAIkB,KAAK,CAACD,OAAO,CAAC,CAAC;IAC5B,CAAC;IAEDxB,EAAE,CAAC0B,EAAE,CAAC,OAAO,EAAE,CAAC;MAACF;IAAO,CAAC,KAAKH,oBAAoB,CAACG,OAAO,CAAC,CAAC;IAE5DxB,EAAE,CAAC0B,EAAE,CAAC,MAAM,EAAE,MAAM;MAClBL,oBAAoB,CACjB,iBAAgBzB,YAAa,yGAAwGG,aAAc,EAAC,CACtJ;IACH,CAAC,CAAC;EACJ,CAAC,CAAC;AACJ,CAAC;AAEc,eAAe4B,iBAAiB,CAC7C9B,OAAe,EACfD,YAAqB,EACrBE,IAAa,EACgC;EAC7C,MAAM8B,SAAS,GAAG3C,YAAY,EAAE;EAChC,IAAI2C,SAAS,CAACX,MAAM,GAAG,CAAC,EAAE;IACxB,IAAI;MACF,MAAMtB,cAAc,CAACC,YAAY,IAAIgC,SAAS,CAAC,CAAC,CAAC,EAAE/B,OAAO,EAAEC,IAAI,CAAC;MACjE,OAAO;QAAC+B,OAAO,EAAE;MAAI,CAAC;IACxB,CAAC,CAAC,OAAOC,KAAK,EAAE;MAAA;MACd,OAAO;QAACD,OAAO,EAAE,KAAK;QAAEC,KAAK,UAAGA,KAAK,yCAAN,KAAgBN;MAAO,CAAC;IACzD;EACF;EACA,OAAO;IACLK,OAAO,EAAE,KAAK;IACdC,KAAK,EAAE;EACT,CAAC;AACH&quot;</span><span class="s0">}</span></pre>
</body>
</html>