<html>
<head>
<title>jestUtils.js.map</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<style type="text/css">
.s0 { color: #a9b7c6;}
.s1 { color: #6a8759;}
.s2 { color: #6897bb; font-style: italic;}
.s3 { color: #cc7832; font-style: italic;}
</style>
</head>
<body bgcolor="#2b2b2b">
<table CELLSPACING=0 CELLPADDING=5 COLS=1 WIDTH="100%" BGCOLOR="#606060" >
<tr><td><center>
<font face="Arial, Helvetica" color="#000000">
jestUtils.js.map</font>
</center></td></tr></table>
<pre><span class="s0">{</span><span class="s1">&quot;version&quot;</span><span class="s0">:</span><span class="s2">3</span><span class="s0">,</span><span class="s1">&quot;sources&quot;</span><span class="s0">:[</span><span class="s1">&quot;jestUtils.ts&quot;</span><span class="s0">],</span><span class="s1">&quot;names&quot;</span><span class="s0">:[</span><span class="s1">&quot;fireEvent&quot;</span><span class="s0">,</span><span class="s1">&quot;_element&quot;</span><span class="s0">,</span><span class="s1">&quot;_name&quot;</span><span class="s0">,</span><span class="s1">&quot;_data&quot;</span><span class="s0">,</span><span class="s1">&quot;require&quot;</span><span class="s0">,</span><span class="s1">&quot;_e&quot;</span><span class="s0">,</span><span class="s1">&quot;handlersDefaultEvents&quot;</span><span class="s0">,</span><span class="s1">&quot;flingHandlerName&quot;</span><span class="s0">,</span><span class="s1">&quot;x&quot;</span><span class="s0">,</span><span class="s1">&quot;y&quot;</span><span class="s0">,</span><span class="s1">&quot;absoluteX&quot;</span><span class="s0">,</span><span class="s1">&quot;absoluteY&quot;</span><span class="s0">,</span><span class="s1">&quot;numberOfPointers&quot;</span><span class="s0">,</span><span class="s1">&quot;forceTouchHandlerName&quot;</span><span class="s0">,</span><span class="s1">&quot;force&quot;</span><span class="s0">,</span><span class="s1">&quot;longPressHandlerName&quot;</span><span class="s0">,</span><span class="s1">&quot;duration&quot;</span><span class="s0">,</span><span class="s1">&quot;nativeViewHandlerName&quot;</span><span class="s0">,</span><span class="s1">&quot;pointerInside&quot;</span><span class="s0">,</span><span class="s1">&quot;panHandlerName&quot;</span><span class="s0">,</span><span class="s1">&quot;translationX&quot;</span><span class="s0">,</span><span class="s1">&quot;translationY&quot;</span><span class="s0">,</span><span class="s1">&quot;velocityX&quot;</span><span class="s0">,</span><span class="s1">&quot;velocityY&quot;</span><span class="s0">,</span><span class="s1">&quot;pinchHandlerName&quot;</span><span class="s0">,</span><span class="s1">&quot;focalX&quot;</span><span class="s0">,</span><span class="s1">&quot;focalY&quot;</span><span class="s0">,</span><span class="s1">&quot;scale&quot;</span><span class="s0">,</span><span class="s1">&quot;velocity&quot;</span><span class="s0">,</span><span class="s1">&quot;rotationHandlerName&quot;</span><span class="s0">,</span><span class="s1">&quot;anchorX&quot;</span><span class="s0">,</span><span class="s1">&quot;anchorY&quot;</span><span class="s0">,</span><span class="s1">&quot;rotation&quot;</span><span class="s0">,</span><span class="s1">&quot;tapHandlerName&quot;</span><span class="s0">,</span><span class="s1">&quot;isGesture&quot;</span><span class="s0">,</span><span class="s1">&quot;componentOrGesture&quot;</span><span class="s0">,</span><span class="s1">&quot;BaseGesture&quot;</span><span class="s0">,</span><span class="s1">&quot;wrapWithNativeEvent&quot;</span><span class="s0">,</span><span class="s1">&quot;event&quot;</span><span class="s0">,</span><span class="s1">&quot;nativeEvent&quot;</span><span class="s0">,</span><span class="s1">&quot;fillOldStateChanges&quot;</span><span class="s0">,</span><span class="s1">&quot;previousEvent&quot;</span><span class="s0">,</span><span class="s1">&quot;currentEvent&quot;</span><span class="s0">,</span><span class="s1">&quot;isFirstEvent&quot;</span><span class="s0">,</span><span class="s1">&quot;oldState&quot;</span><span class="s0">,</span><span class="s1">&quot;State&quot;</span><span class="s0">,</span><span class="s1">&quot;UNDETERMINED&quot;</span><span class="s0">,</span><span class="s1">&quot;isGestureStateEvent&quot;</span><span class="s0">,</span><span class="s1">&quot;state&quot;</span><span class="s0">,</span><span class="s1">&quot;validateStateTransitions&quot;</span><span class="s0">,</span><span class="s1">&quot;stringify&quot;</span><span class="s0">,</span><span class="s1">&quot;JSON&quot;</span><span class="s0">,</span><span class="s1">&quot;errorMsgWithBothEvents&quot;</span><span class="s0">,</span><span class="s1">&quot;description&quot;</span><span class="s0">,</span><span class="s1">&quot;errorMsgWithCurrentEvent&quot;</span><span class="s0">,</span><span class="s1">&quot;BEGAN&quot;</span><span class="s0">,</span><span class="s1">&quot;fillMissingDefaultsFor&quot;</span><span class="s0">,</span><span class="s1">&quot;handlerType&quot;</span><span class="s0">,</span><span class="s1">&quot;handlerTag&quot;</span><span class="s0">,</span><span class="s1">&quot;isDiscreteHandler&quot;</span><span class="s0">,</span><span class="s1">&quot;fillMissingStatesTransitions&quot;</span><span class="s0">,</span><span class="s1">&quot;events&quot;</span><span class="s0">,</span><span class="s1">&quot;_events&quot;</span><span class="s0">,</span><span class="s1">&quot;lastEvent&quot;</span><span class="s0">,</span><span class="s1">&quot;length&quot;</span><span class="s0">,</span><span class="s1">&quot;firstEvent&quot;</span><span class="s0">,</span><span class="s1">&quot;shouldDuplicateFirstEvent&quot;</span><span class="s0">,</span><span class="s1">&quot;hasState&quot;</span><span class="s0">,</span><span class="s1">&quot;duplicated&quot;</span><span class="s0">,</span><span class="s1">&quot;unshift&quot;</span><span class="s0">,</span><span class="s1">&quot;shouldDuplicateLastEvent&quot;</span><span class="s0">,</span><span class="s1">&quot;END&quot;</span><span class="s0">,</span><span class="s1">&quot;FAILED&quot;</span><span class="s0">,</span><span class="s1">&quot;CANCELLED&quot;</span><span class="s0">,</span><span class="s1">&quot;push&quot;</span><span class="s0">,</span><span class="s1">&quot;isWithoutState&quot;</span><span class="s0">,</span><span class="s1">&quot;noEventsLeft&quot;</span><span class="s0">,</span><span class="s1">&quot;trueFn&quot;</span><span class="s0">,</span><span class="s1">&quot;fillEventsForCurrentState&quot;</span><span class="s0">,</span><span class="s1">&quot;shouldConsumeEvent&quot;</span><span class="s0">,</span><span class="s1">&quot;shouldTransitionToNextState&quot;</span><span class="s0">,</span><span class="s1">&quot;peekCurrentEvent&quot;</span><span class="s0">,</span><span class="s1">&quot;peekNextEvent&quot;</span><span class="s0">,</span><span class="s1">&quot;consumeCurrentEvent&quot;</span><span class="s0">,</span><span class="s1">&quot;shift&quot;</span><span class="s0">,</span><span class="s1">&quot;nextEvent&quot;</span><span class="s0">,</span><span class="s1">&quot;currentRequiredState&quot;</span><span class="s0">,</span><span class="s1">&quot;REQUIRED_EVENTS&quot;</span><span class="s0">,</span><span class="s1">&quot;currentStateIdx&quot;</span><span class="s0">,</span><span class="s1">&quot;eventData&quot;</span><span class="s0">,</span><span class="s1">&quot;shouldUseEvent&quot;</span><span class="s0">,</span><span class="s1">&quot;transformedEvents&quot;</span><span class="s0">,</span><span class="s1">&quot;ACTIVE&quot;</span><span class="s0">,</span><span class="s1">&quot;hasAllStates&quot;</span><span class="s0">,</span><span class="s1">&quot;iterations&quot;</span><span class="s0">,</span><span class="s1">&quot;nextRequiredState&quot;</span><span class="s0">,</span><span class="s1">&quot;e&quot;</span><span class="s0">,</span><span class="s1">&quot;getHandlerData&quot;</span><span class="s0">,</span><span class="s1">&quot;gesture&quot;</span><span class="s0">,</span><span class="s1">&quot;emitEvent&quot;</span><span class="s0">,</span><span class="s1">&quot;eventName&quot;</span><span class="s0">,</span><span class="s1">&quot;args&quot;</span><span class="s0">,</span><span class="s1">&quot;DeviceEventEmitter&quot;</span><span class="s0">,</span><span class="s1">&quot;emit&quot;</span><span class="s0">,</span><span class="s1">&quot;handlerName&quot;</span><span class="s0">,</span><span class="s1">&quot;gestureHandlerComponent&quot;</span><span class="s0">,</span><span class="s1">&quot;props&quot;</span><span class="s0">,</span><span class="s1">&quot;fireGestureHandler&quot;</span><span class="s0">,</span><span class="s1">&quot;eventList&quot;</span><span class="s0">,</span><span class="s1">&quot;_&quot;</span><span class="s0">,</span><span class="s1">&quot;map&quot;</span><span class="s0">,</span><span class="s1">&quot;lastSentEvent&quot;</span><span class="s0">,</span><span class="s1">&quot;hasChangedState&quot;</span><span class="s0">,</span><span class="s1">&quot;getByGestureTestId&quot;</span><span class="s0">,</span><span class="s1">&quot;testID&quot;</span><span class="s0">,</span><span class="s1">&quot;handler&quot;</span><span class="s0">,</span><span class="s1">&quot;Error&quot;</span><span class="s0">],</span><span class="s1">&quot;mappings&quot;</span><span class="s0">:</span><span class="s1">&quot;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&quot;</span><span class="s0">,</span><span class="s1">&quot;sourcesContent&quot;</span><span class="s0">:[</span><span class="s1">&quot;import invariant from 'invariant';</span><span class="s3">\n</span><span class="s1">import { DeviceEventEmitter } from 'react-native';</span><span class="s3">\n</span><span class="s1">import { ReactTestInstance } from 'react-test-renderer';</span><span class="s3">\n</span><span class="s1">import {</span><span class="s3">\n  </span><span class="s1">FlingGestureHandler,</span><span class="s3">\n  </span><span class="s1">FlingGestureHandlerEventPayload,</span><span class="s3">\n  </span><span class="s1">flingHandlerName,</span><span class="s3">\n</span><span class="s1">} from '../handlers/FlingGestureHandler';</span><span class="s3">\n</span><span class="s1">import {</span><span class="s3">\n  </span><span class="s1">ForceTouchGestureHandler,</span><span class="s3">\n  </span><span class="s1">ForceTouchGestureHandlerEventPayload,</span><span class="s3">\n  </span><span class="s1">forceTouchHandlerName,</span><span class="s3">\n</span><span class="s1">} from '../handlers/ForceTouchGestureHandler';</span><span class="s3">\n</span><span class="s1">import {</span><span class="s3">\n  </span><span class="s1">BaseGestureHandlerProps,</span><span class="s3">\n  </span><span class="s1">GestureEvent,</span><span class="s3">\n  </span><span class="s1">HandlerStateChangeEvent,</span><span class="s3">\n</span><span class="s1">} from '../handlers/gestureHandlerCommon';</span><span class="s3">\n</span><span class="s1">import { FlingGesture } from '../handlers/gestures/flingGesture';</span><span class="s3">\n</span><span class="s1">import { ForceTouchGesture } from '../handlers/gestures/forceTouchGesture';</span><span class="s3">\n</span><span class="s1">import { BaseGesture, GestureType } from '../handlers/gestures/gesture';</span><span class="s3">\n</span><span class="s1">import { LongPressGesture } from '../handlers/gestures/longPressGesture';</span><span class="s3">\n</span><span class="s1">import { NativeGesture } from '../handlers/gestures/nativeGesture';</span><span class="s3">\n</span><span class="s1">import { PanGesture } from '../handlers/gestures/panGesture';</span><span class="s3">\n</span><span class="s1">import { PinchGesture } from '../handlers/gestures/pinchGesture';</span><span class="s3">\n</span><span class="s1">import { RotationGesture } from '../handlers/gestures/rotationGesture';</span><span class="s3">\n</span><span class="s1">import { TapGesture } from '../handlers/gestures/tapGesture';</span><span class="s3">\n</span><span class="s1">import { findHandlerByTestID } from '../handlers/handlersRegistry';</span><span class="s3">\n</span><span class="s1">import {</span><span class="s3">\n  </span><span class="s1">LongPressGestureHandler,</span><span class="s3">\n  </span><span class="s1">LongPressGestureHandlerEventPayload,</span><span class="s3">\n  </span><span class="s1">longPressHandlerName,</span><span class="s3">\n</span><span class="s1">} from '../handlers/LongPressGestureHandler';</span><span class="s3">\n</span><span class="s1">import {</span><span class="s3">\n  </span><span class="s1">NativeViewGestureHandler,</span><span class="s3">\n  </span><span class="s1">NativeViewGestureHandlerPayload,</span><span class="s3">\n  </span><span class="s1">nativeViewHandlerName,</span><span class="s3">\n</span><span class="s1">} from '../handlers/NativeViewGestureHandler';</span><span class="s3">\n</span><span class="s1">import {</span><span class="s3">\n  </span><span class="s1">PanGestureHandler,</span><span class="s3">\n  </span><span class="s1">PanGestureHandlerEventPayload,</span><span class="s3">\n  </span><span class="s1">panHandlerName,</span><span class="s3">\n</span><span class="s1">} from '../handlers/PanGestureHandler';</span><span class="s3">\n</span><span class="s1">import {</span><span class="s3">\n  </span><span class="s1">PinchGestureHandler,</span><span class="s3">\n  </span><span class="s1">PinchGestureHandlerEventPayload,</span><span class="s3">\n  </span><span class="s1">pinchHandlerName,</span><span class="s3">\n</span><span class="s1">} from '../handlers/PinchGestureHandler';</span><span class="s3">\n</span><span class="s1">import {</span><span class="s3">\n  </span><span class="s1">RotationGestureHandler,</span><span class="s3">\n  </span><span class="s1">RotationGestureHandlerEventPayload,</span><span class="s3">\n  </span><span class="s1">rotationHandlerName,</span><span class="s3">\n</span><span class="s1">} from '../handlers/RotationGestureHandler';</span><span class="s3">\n</span><span class="s1">import {</span><span class="s3">\n  </span><span class="s1">TapGestureHandler,</span><span class="s3">\n  </span><span class="s1">TapGestureHandlerEventPayload,</span><span class="s3">\n  </span><span class="s1">tapHandlerName,</span><span class="s3">\n</span><span class="s1">} from '../handlers/TapGestureHandler';</span><span class="s3">\n</span><span class="s1">import { State } from '../State';</span><span class="s3">\n</span><span class="s1">import { hasProperty, withPrevAndCurrent } from '../utils';</span><span class="s3">\n\n</span><span class="s1">// load fireEvent conditionally, so RNGH may be used in setups without testing-library</span><span class="s3">\n</span><span class="s1">let fireEvent = (</span><span class="s3">\n  </span><span class="s1">_element: ReactTestInstance,</span><span class="s3">\n  </span><span class="s1">_name: string,</span><span class="s3">\n  </span><span class="s1">..._data: any[]</span><span class="s3">\n</span><span class="s1">) =&gt; {</span><span class="s3">\n  </span><span class="s1">// NOOP</span><span class="s3">\n</span><span class="s1">};</span><span class="s3">\n\n</span><span class="s1">try {</span><span class="s3">\n  </span><span class="s1">// eslint-disable-next-line @typescript-eslint/no-var-requires</span><span class="s3">\n  </span><span class="s1">fireEvent = require('@testing-library/react-native').fireEvent;</span><span class="s3">\n</span><span class="s1">} catch (_e) {</span><span class="s3">\n  </span><span class="s1">// do nothing if not available</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">type GestureHandlerTestEvent&lt;</span><span class="s3">\n  </span><span class="s1">TEventPayload extends Record&lt;string, unknown&gt; = Record&lt;string, unknown&gt;</span><span class="s3">\n</span><span class="s1">&gt; = (</span><span class="s3">\n  </span><span class="s1">| GestureEvent&lt;TEventPayload&gt;</span><span class="s3">\n  </span><span class="s1">| HandlerStateChangeEvent&lt;TEventPayload&gt;</span><span class="s3">\n</span><span class="s1">)['nativeEvent'];</span><span class="s3">\n\n</span><span class="s1">type HandlerNames = keyof DefaultEventsMapping;</span><span class="s3">\n\n</span><span class="s1">type WithNumberOfPointers&lt;T&gt; = {</span><span class="s3">\n  </span><span class="s1">[P in keyof T]: T[P] &amp; { numberOfPointers: number };</span><span class="s3">\n</span><span class="s1">};</span><span class="s3">\n</span><span class="s1">type DefaultEventsMapping = WithNumberOfPointers&lt;{</span><span class="s3">\n  </span><span class="s1">[flingHandlerName]: FlingGestureHandlerEventPayload;</span><span class="s3">\n  </span><span class="s1">[forceTouchHandlerName]: ForceTouchGestureHandlerEventPayload;</span><span class="s3">\n  </span><span class="s1">[longPressHandlerName]: LongPressGestureHandlerEventPayload;</span><span class="s3">\n  </span><span class="s1">[nativeViewHandlerName]: NativeViewGestureHandlerPayload;</span><span class="s3">\n  </span><span class="s1">[panHandlerName]: PanGestureHandlerEventPayload;</span><span class="s3">\n  </span><span class="s1">[pinchHandlerName]: PinchGestureHandlerEventPayload;</span><span class="s3">\n  </span><span class="s1">[rotationHandlerName]: RotationGestureHandlerEventPayload;</span><span class="s3">\n  </span><span class="s1">[tapHandlerName]: TapGestureHandlerEventPayload;</span><span class="s3">\n</span><span class="s1">}&gt;;</span><span class="s3">\n\n</span><span class="s1">const handlersDefaultEvents: DefaultEventsMapping = {</span><span class="s3">\n  </span><span class="s1">[flingHandlerName]: {</span><span class="s3">\n    </span><span class="s1">x: 0,</span><span class="s3">\n    </span><span class="s1">y: 0,</span><span class="s3">\n    </span><span class="s1">absoluteX: 0,</span><span class="s3">\n    </span><span class="s1">absoluteY: 0,</span><span class="s3">\n    </span><span class="s1">numberOfPointers: 1,</span><span class="s3">\n  </span><span class="s1">},</span><span class="s3">\n  </span><span class="s1">[forceTouchHandlerName]: {</span><span class="s3">\n    </span><span class="s1">x: 0,</span><span class="s3">\n    </span><span class="s1">y: 0,</span><span class="s3">\n    </span><span class="s1">absoluteX: 0,</span><span class="s3">\n    </span><span class="s1">absoluteY: 0,</span><span class="s3">\n    </span><span class="s1">force: 1,</span><span class="s3">\n    </span><span class="s1">numberOfPointers: 1,</span><span class="s3">\n  </span><span class="s1">},</span><span class="s3">\n  </span><span class="s1">[longPressHandlerName]: {</span><span class="s3">\n    </span><span class="s1">x: 0,</span><span class="s3">\n    </span><span class="s1">y: 0,</span><span class="s3">\n    </span><span class="s1">absoluteX: 0,</span><span class="s3">\n    </span><span class="s1">absoluteY: 0,</span><span class="s3">\n    </span><span class="s1">duration: 100,</span><span class="s3">\n    </span><span class="s1">numberOfPointers: 1,</span><span class="s3">\n  </span><span class="s1">},</span><span class="s3">\n  </span><span class="s1">[nativeViewHandlerName]: {</span><span class="s3">\n    </span><span class="s1">pointerInside: true,</span><span class="s3">\n    </span><span class="s1">numberOfPointers: 1,</span><span class="s3">\n  </span><span class="s1">},</span><span class="s3">\n  </span><span class="s1">[panHandlerName]: {</span><span class="s3">\n    </span><span class="s1">x: 0,</span><span class="s3">\n    </span><span class="s1">y: 0,</span><span class="s3">\n    </span><span class="s1">absoluteX: 0,</span><span class="s3">\n    </span><span class="s1">absoluteY: 0,</span><span class="s3">\n    </span><span class="s1">translationX: 100,</span><span class="s3">\n    </span><span class="s1">translationY: 0,</span><span class="s3">\n    </span><span class="s1">velocityX: 3,</span><span class="s3">\n    </span><span class="s1">velocityY: 0,</span><span class="s3">\n    </span><span class="s1">numberOfPointers: 1,</span><span class="s3">\n  </span><span class="s1">},</span><span class="s3">\n  </span><span class="s1">[pinchHandlerName]: {</span><span class="s3">\n    </span><span class="s1">focalX: 0,</span><span class="s3">\n    </span><span class="s1">focalY: 0,</span><span class="s3">\n    </span><span class="s1">scale: 2,</span><span class="s3">\n    </span><span class="s1">velocity: 1,</span><span class="s3">\n    </span><span class="s1">numberOfPointers: 2,</span><span class="s3">\n  </span><span class="s1">},</span><span class="s3">\n  </span><span class="s1">[rotationHandlerName]: {</span><span class="s3">\n    </span><span class="s1">anchorX: 0,</span><span class="s3">\n    </span><span class="s1">anchorY: 0,</span><span class="s3">\n    </span><span class="s1">rotation: 3.14,</span><span class="s3">\n    </span><span class="s1">velocity: 2,</span><span class="s3">\n    </span><span class="s1">numberOfPointers: 2,</span><span class="s3">\n  </span><span class="s1">},</span><span class="s3">\n  </span><span class="s1">[tapHandlerName]: {</span><span class="s3">\n    </span><span class="s1">x: 0,</span><span class="s3">\n    </span><span class="s1">y: 0,</span><span class="s3">\n    </span><span class="s1">absoluteX: 0,</span><span class="s3">\n    </span><span class="s1">absoluteY: 0,</span><span class="s3">\n    </span><span class="s1">numberOfPointers: 1,</span><span class="s3">\n  </span><span class="s1">},</span><span class="s3">\n</span><span class="s1">};</span><span class="s3">\n\n</span><span class="s1">function isGesture(</span><span class="s3">\n  </span><span class="s1">componentOrGesture: ReactTestInstance | GestureType</span><span class="s3">\n</span><span class="s1">): componentOrGesture is GestureType {</span><span class="s3">\n  </span><span class="s1">return componentOrGesture instanceof BaseGesture;</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">interface WrappedGestureHandlerTestEvent {</span><span class="s3">\n  </span><span class="s1">nativeEvent: GestureHandlerTestEvent;</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n</span><span class="s1">function wrapWithNativeEvent(</span><span class="s3">\n  </span><span class="s1">event: GestureHandlerTestEvent</span><span class="s3">\n</span><span class="s1">): WrappedGestureHandlerTestEvent {</span><span class="s3">\n  </span><span class="s1">return { nativeEvent: event };</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">function fillOldStateChanges(</span><span class="s3">\n  </span><span class="s1">previousEvent: GestureHandlerTestEvent | null,</span><span class="s3">\n  </span><span class="s1">currentEvent: Omit&lt;GestureHandlerTestEvent, 'oldState'&gt;</span><span class="s3">\n</span><span class="s1">): GestureHandlerTestEvent {</span><span class="s3">\n  </span><span class="s1">const isFirstEvent = previousEvent === null;</span><span class="s3">\n  </span><span class="s1">if (isFirstEvent) {</span><span class="s3">\n    </span><span class="s1">return {</span><span class="s3">\n      </span><span class="s1">oldState: State.UNDETERMINED,</span><span class="s3">\n      </span><span class="s1">...currentEvent,</span><span class="s3">\n    </span><span class="s1">} as GestureHandlerTestEvent;</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">const isGestureStateEvent = previousEvent.state !== currentEvent.state;</span><span class="s3">\n  </span><span class="s1">if (isGestureStateEvent) {</span><span class="s3">\n    </span><span class="s1">return {</span><span class="s3">\n      </span><span class="s1">oldState: previousEvent?.state,</span><span class="s3">\n      </span><span class="s1">...currentEvent,</span><span class="s3">\n    </span><span class="s1">} as GestureHandlerTestEvent;</span><span class="s3">\n  </span><span class="s1">} else {</span><span class="s3">\n    </span><span class="s1">return currentEvent as GestureHandlerTestEvent;</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">type EventWithStates = Partial&lt;</span><span class="s3">\n  </span><span class="s1">Pick&lt;GestureHandlerTestEvent, 'oldState' | 'state'&gt;</span><span class="s3">\n</span><span class="s1">&gt;;</span><span class="s3">\n</span><span class="s1">function validateStateTransitions(</span><span class="s3">\n  </span><span class="s1">previousEvent: EventWithStates | null,</span><span class="s3">\n  </span><span class="s1">currentEvent: EventWithStates</span><span class="s3">\n</span><span class="s1">) {</span><span class="s3">\n  </span><span class="s1">function stringify(event: Record&lt;string, unknown&gt; | null) {</span><span class="s3">\n    </span><span class="s1">return JSON.stringify(event, null, 2);</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">function errorMsgWithBothEvents(description: string) {</span><span class="s3">\n    </span><span class="s1">return `${description}, invalid event: ${stringify(</span><span class="s3">\n      </span><span class="s1">currentEvent</span><span class="s3">\n    </span><span class="s1">)}, previous event: ${stringify(previousEvent)}`;</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">function errorMsgWithCurrentEvent(description: string) {</span><span class="s3">\n    </span><span class="s1">return `${description}, invalid event: ${stringify(currentEvent)}`;</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">invariant(</span><span class="s3">\n    </span><span class="s1">hasProperty(currentEvent, 'state'),</span><span class="s3">\n    </span><span class="s1">errorMsgWithCurrentEvent('every event must have state')</span><span class="s3">\n  </span><span class="s1">);</span><span class="s3">\n\n  </span><span class="s1">const isFirstEvent = previousEvent === null;</span><span class="s3">\n  </span><span class="s1">if (isFirstEvent) {</span><span class="s3">\n    </span><span class="s1">invariant(</span><span class="s3">\n      </span><span class="s1">currentEvent.state === State.BEGAN,</span><span class="s3">\n      </span><span class="s1">errorMsgWithCurrentEvent('first event must have BEGAN state')</span><span class="s3">\n    </span><span class="s1">);</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">if (previousEvent !== null) {</span><span class="s3">\n    </span><span class="s1">if (previousEvent.state !== currentEvent.state) {</span><span class="s3">\n      </span><span class="s1">invariant(</span><span class="s3">\n        </span><span class="s1">hasProperty(currentEvent, 'oldState'),</span><span class="s3">\n        </span><span class="s1">errorMsgWithCurrentEvent(</span><span class="s3">\n          </span><span class="s1">'when state changes, oldState field should be present'</span><span class="s3">\n        </span><span class="s1">)</span><span class="s3">\n      </span><span class="s1">);</span><span class="s3">\n      </span><span class="s1">invariant(</span><span class="s3">\n        </span><span class="s1">currentEvent.oldState === previousEvent.state,</span><span class="s3">\n        </span><span class="s1">errorMsgWithBothEvents(</span><span class="s3">\n          \&quot;</span><span class="s1">when state changes, oldState should be the same as previous event' state</span><span class="s3">\&quot;\n        </span><span class="s1">)</span><span class="s3">\n      </span><span class="s1">);</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">return currentEvent;</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">type EventWithoutStates = Omit&lt;GestureHandlerTestEvent, 'oldState' | 'state'&gt;;</span><span class="s3">\n</span><span class="s1">interface HandlerInfo {</span><span class="s3">\n  </span><span class="s1">handlerType: HandlerNames;</span><span class="s3">\n  </span><span class="s1">handlerTag: number;</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n</span><span class="s1">function fillMissingDefaultsFor({</span><span class="s3">\n  </span><span class="s1">handlerType,</span><span class="s3">\n  </span><span class="s1">handlerTag,</span><span class="s3">\n</span><span class="s1">}: HandlerInfo): (</span><span class="s3">\n  </span><span class="s1">event: Partial&lt;GestureHandlerTestEvent&gt;</span><span class="s3">\n</span><span class="s1">) =&gt; EventWithoutStates {</span><span class="s3">\n  </span><span class="s1">return (event) =&gt; {</span><span class="s3">\n    </span><span class="s1">return {</span><span class="s3">\n      </span><span class="s1">...handlersDefaultEvents[handlerType],</span><span class="s3">\n      </span><span class="s1">...event,</span><span class="s3">\n      </span><span class="s1">handlerTag,</span><span class="s3">\n    </span><span class="s1">};</span><span class="s3">\n  </span><span class="s1">};</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">function isDiscreteHandler(handlerType: HandlerNames) {</span><span class="s3">\n  </span><span class="s1">return (</span><span class="s3">\n    </span><span class="s1">handlerType === 'TapGestureHandler' ||</span><span class="s3">\n    </span><span class="s1">handlerType === 'LongPressGestureHandler'</span><span class="s3">\n  </span><span class="s1">);</span><span class="s3">\n</span><span class="s1">}</span><span class="s3">\n\n</span><span class="s1">function fillMissingStatesTransitions(</span><span class="s3">\n  </span><span class="s1">events: EventWithoutStates[],</span><span class="s3">\n  </span><span class="s1">isDiscreteHandler: boolean</span><span class="s3">\n</span><span class="s1">): EventWithoutStates[] {</span><span class="s3">\n  </span><span class="s1">type Event = EventWithoutStates | null;</span><span class="s3">\n  </span><span class="s1">const _events = [...events];</span><span class="s3">\n  </span><span class="s1">const lastEvent = _events[_events.length - 1] ?? null;</span><span class="s3">\n  </span><span class="s1">const firstEvent = _events[0] ?? null;</span><span class="s3">\n\n  </span><span class="s1">const shouldDuplicateFirstEvent =</span><span class="s3">\n    </span><span class="s1">!isDiscreteHandler &amp;&amp; !hasState(State.BEGAN)(firstEvent);</span><span class="s3">\n  </span><span class="s1">if (shouldDuplicateFirstEvent) {</span><span class="s3">\n    </span><span class="s1">const duplicated = { ...firstEvent, state: State.BEGAN };</span><span class="s3">\n    </span><span class="s1">// @ts-ignore badly typed, property may exist and we don't want to copy it</span><span class="s3">\n    </span><span class="s1">delete duplicated.oldState;</span><span class="s3">\n    </span><span class="s1">_events.unshift(duplicated);</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">const shouldDuplicateLastEvent =</span><span class="s3">\n    </span><span class="s1">!hasState(State.END)(lastEvent) ||</span><span class="s3">\n    </span><span class="s1">!hasState(State.FAILED)(lastEvent) ||</span><span class="s3">\n    </span><span class="s1">!hasState(State.CANCELLED)(lastEvent);</span><span class="s3">\n\n  </span><span class="s1">if (shouldDuplicateLastEvent) {</span><span class="s3">\n    </span><span class="s1">const duplicated = { ...lastEvent, state: State.END };</span><span class="s3">\n    </span><span class="s1">// @ts-ignore badly typed, property may exist and we don't want to copy it</span><span class="s3">\n    </span><span class="s1">delete duplicated.oldState;</span><span class="s3">\n    </span><span class="s1">_events.push(duplicated);</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">function isWithoutState(event: Event) {</span><span class="s3">\n    </span><span class="s1">return event !== null &amp;&amp; !hasProperty(event, 'state');</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">function hasState(state: State) {</span><span class="s3">\n    </span><span class="s1">return (event: Event) =&gt; event !== null &amp;&amp; event.state === state;</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">function noEventsLeft(event: Event) {</span><span class="s3">\n    </span><span class="s1">return event === null;</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n\n  </span><span class="s1">function trueFn() {</span><span class="s3">\n    </span><span class="s1">return true;</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">interface Args {</span><span class="s3">\n    </span><span class="s1">shouldConsumeEvent?: (event: Event) =&gt; boolean;</span><span class="s3">\n    </span><span class="s1">shouldTransitionToNextState?: (nextEvent: Event) =&gt; boolean;</span><span class="s3">\n  </span><span class="s1">}</span><span class="s3">\n  </span><span class="s1">function fillEventsForCurrentState({</span><span class="s3">\n    </span><span class="s1">shouldConsumeEvent = trueFn,</span><span class="s3">\n    </span><span class="s1">shouldTransitionToNextState = trueFn,</span><span class="s3">\n  </span><span class="s1">}: Args) {</span><span class="s3">\n    </span><span class="s1">function peekCurrentEvent(): Event {</span><span class="s3">\n      </span><span class="s1">return _events[0] ?? null;</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">function peekNextEvent(): Event {</span><span class="s3">\n      </span><span class="s1">return _events[1] ?? null;</span><span class="s3">\n    </span><span class="s1">}</span><span class="s3">\n    </span><span class="s1">function consumeCurrentEvent() {</span><span class="s3">\n      </span><span class="s1">_events.shift();</span><span class="s3">\n    </span><span class="s1">}\n    const currentEvent = peekCurrentEvent();\n    const nextEvent = peekNextEvent();\n    const currentRequiredState = REQUIRED_EVENTS[currentStateIdx];\n\n    let eventData = {};\n    const shouldUseEvent = shouldConsumeEvent(currentEvent);\n    if (shouldUseEvent) {\n      eventData = currentEvent!;\n      consumeCurrentEvent();\n    }\n    transformedEvents.push({ state: currentRequiredState, ...eventData });\n    if (shouldTransitionToNextState(nextEvent)) {\n      currentStateIdx++;\n    }\n  }\n\n  const REQUIRED_EVENTS = [State.BEGAN, State.ACTIVE, State.END];\n\n  let currentStateIdx = 0;\n  const transformedEvents: EventWithoutStates[] = [];\n  let hasAllStates;\n  let iterations = 0;\n  do {\n    const nextRequiredState = REQUIRED_EVENTS[currentStateIdx];\n    if (nextRequiredState === State.BEGAN) {\n      fillEventsForCurrentState({\n        shouldConsumeEvent: (e: Event) =&gt;\n          isWithoutState(e) || hasState(State.BEGAN)(e),\n      });\n    } else if (nextRequiredState === State.ACTIVE) {\n      const shouldConsumeEvent = (e: Event) =&gt;\n        isWithoutState(e) || hasState(State.ACTIVE)(e);\n      const shouldTransitionToNextState = (nextEvent: Event) =&gt;\n        noEventsLeft(nextEvent) ||\n        hasState(State.END)(nextEvent) ||\n        hasState(State.FAILED)(nextEvent) ||\n        hasState(State.CANCELLED)(nextEvent);\n\n      fillEventsForCurrentState({\n        shouldConsumeEvent,\n        shouldTransitionToNextState,\n      });\n    } else if (nextRequiredState === State.END) {\n      fillEventsForCurrentState({});\n    }\n    hasAllStates = currentStateIdx === REQUIRED_EVENTS.length;\n\n    invariant(\n      iterations++ &lt;= 500,\n      'exceeded max number of iterations, please report a bug in RNGH repository with your test case'\n    );\n  } while (!hasAllStates);\n\n  return transformedEvents;\n}\n\ntype EventEmitter = (\n  eventName: string,\n  args: { nativeEvent: GestureHandlerTestEvent }\n) =&gt; void;\ninterface HandlerData {\n  emitEvent: EventEmitter;\n  handlerType: HandlerNames;\n  handlerTag: number;\n}\nfunction getHandlerData(\n  componentOrGesture: ReactTestInstance | GestureType\n): HandlerData {\n  if (isGesture(componentOrGesture)) {\n    const gesture = componentOrGesture;\n    return {\n      emitEvent: (eventName, args) =&gt; {\n        DeviceEventEmitter.emit(eventName, args.nativeEvent);\n      },\n      handlerType: gesture.handlerName as HandlerNames,\n      handlerTag: gesture.handlerTag,\n    };\n  }\n  const gestureHandlerComponent = componentOrGesture;\n  return {\n    emitEvent: (eventName, args) =&gt; {\n      fireEvent(gestureHandlerComponent, eventName, args);\n    },\n    handlerType: gestureHandlerComponent.props.handlerType as HandlerNames,\n    handlerTag: gestureHandlerComponent.props.handlerTag as number,\n  };\n}\ntype AllGestures =\n  | TapGesture\n  | PanGesture\n  | LongPressGesture\n  | RotationGesture\n  | PinchGesture\n  | FlingGesture\n  | ForceTouchGesture\n  | NativeGesture;\n\ntype AllHandlers =\n  | TapGestureHandler\n  | PanGestureHandler\n  | LongPressGestureHandler\n  | RotationGestureHandler\n  | PinchGestureHandler\n  | FlingGestureHandler\n  | ForceTouchGestureHandler\n  | NativeViewGestureHandler;\n\n// prettier-ignore\ntype ClassComponentConstructor&lt;P&gt; = new (props: P) =&gt; React.Component&lt;P, any, any&gt;;\n\ntype ExtractPayloadFromProps&lt;T&gt; = T extends BaseGestureHandlerProps&lt;\n  infer TPayload\n&gt;\n  ? TPayload\n  : never;\n\ntype ExtractConfig&lt;T&gt; = T extends BaseGesture&lt;infer TGesturePayload&gt;\n  ? TGesturePayload\n  : T extends ClassComponentConstructor&lt;infer THandlerProps&gt;\n  ? ExtractPayloadFromProps&lt;THandlerProps&gt;\n  : Record&lt;string, unknown&gt;;\n\nexport function fireGestureHandler&lt;THandler extends AllGestures | AllHandlers&gt;(\n  componentOrGesture: ReactTestInstance | GestureType,\n  eventList: Partial&lt;GestureHandlerTestEvent&lt;ExtractConfig&lt;THandler&gt;&gt;&gt;[] = []\n): void {\n  const { emitEvent, handlerType, handlerTag } =\n    getHandlerData(componentOrGesture);\n\n  let _ = fillMissingStatesTransitions(\n    eventList,\n    isDiscreteHandler(handlerType)\n  );\n  _ = _.map(fillMissingDefaultsFor({ handlerTag, handlerType }));\n  _ = withPrevAndCurrent(_, fillOldStateChanges);\n  _ = withPrevAndCurrent(_, validateStateTransitions);\n  // @ts-ignore TODO\n  _ = _.map(wrapWithNativeEvent);\n\n  const events = _ as unknown as WrappedGestureHandlerTestEvent[];\n\n  const firstEvent = events.shift()!;\n\n  emitEvent('onGestureHandlerStateChange', firstEvent);\n  let lastSentEvent = firstEvent;\n  for (const event of events) {\n    const hasChangedState =\n      lastSentEvent.nativeEvent.state !== event.nativeEvent.state;\n\n    if (hasChangedState) {\n      emitEvent('onGestureHandlerStateChange', event);\n    } else {\n      emitEvent('onGestureHandlerEvent', event);\n    }\n    lastSentEvent = event;\n  }\n}\n\nexport function getByGestureTestId(testID: string) {\n  const handler = findHandlerByTestID(testID);\n  if (handler === null) {\n    throw new Error(`Handler with id: '${testID}' cannot be found`);\n  }\n  return handler;\n}\n&quot;]}</span></pre>
</body>
</html>